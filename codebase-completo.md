Project Path: proyecto-pos-finanzas

Source Tree:

```txt
proyecto-pos-finanzas
├── AGENTS.md
├── README.md
├── anotaciones-markdown
│   ├── apuntes.md
│   └── prompt.md
├── backend
│   ├── Dockerfile
│   ├── mvnw
│   ├── mvnw.cmd
│   ├── pom.xml
│   ├── pos-finanzas-backend
│   └── src
│       ├── main
│       │   ├── java
│       │   │   └── com
│       │   │       └── posfin
│       │   │           └── pos_finanzas_backend
│       │   │               ├── PosFinanzasBackendApplication.java
│       │   │               ├── config
│       │   │               │   ├── DatabaseCleanupRunner.java
│       │   │               │   ├── DatabaseMigrationConfig.java
│       │   │               │   ├── JwtRequestFilter.java
│       │   │               │   └── SecurityConfig.java
│       │   │               ├── controllers
│       │   │               │   ├── AuthController.java
│       │   │               │   ├── CategoriaPersonasController.java
│       │   │               │   ├── CategoriasProductosController.java
│       │   │               │   ├── ComprasController.java
│       │   │               │   ├── DetallesOrdenesDeComprasController.java
│       │   │               │   ├── DetallesOrdenesDeVentasController.java
│       │   │               │   ├── DeudasProveedoresController.java
│       │   │               │   ├── EmpleadoController.java
│       │   │               │   ├── EstadosController.java
│       │   │               │   ├── HistorialCargosProveedoresController.java
│       │   │               │   ├── HistorialCostosController.java
│       │   │               │   ├── HistorialPagosClientesController.java
│       │   │               │   ├── HistorialPreciosController.java
│       │   │               │   ├── InventoryController.java
│       │   │               │   ├── MetodosPagoController.java
│       │   │               │   ├── MovimientosInventariosController.java
│       │   │               │   ├── OrdenesDeComprasController.java
│       │   │               │   ├── OrdenesDeVentasController.java
│       │   │               │   ├── OrdenesWorkspaceController.java
│       │   │               │   ├── PersonasController.java
│       │   │               │   ├── ProductosController.java
│       │   │               │   ├── RolController.java
│       │   │               │   ├── TipoMovimientosController.java
│       │   │               │   ├── UbicacionesController.java
│       │   │               │   ├── UsuariosController.java
│       │   │               │   └── WorkspacesController.java
│       │   │               ├── dtos
│       │   │               │   ├── CompraRequestDTO.java
│       │   │               │   ├── DetallesOrdenesDeComprasDTO.java
│       │   │               │   ├── DetallesOrdenesDeVentasDTO.java
│       │   │               │   ├── DeudaProveedorDTO.java
│       │   │               │   ├── EmpleadoCreateRequestDTO.java
│       │   │               │   ├── EmpleadoEstadoRequestDTO.java
│       │   │               │   ├── EmpleadoResponseDTO.java
│       │   │               │   ├── FinalizarVentaRequestDTO.java
│       │   │               │   ├── HistorialCargosProveedoresDTO.java
│       │   │               │   ├── HistorialCostosDTO.java
│       │   │               │   ├── HistorialPagosClientesDTO.java
│       │   │               │   ├── HistorialPreciosDTO.java
│       │   │               │   ├── InventarioDTO.java
│       │   │               │   ├── LoginResponseDTO.java
│       │   │               │   ├── MovimientosInventariosDTO.java
│       │   │               │   ├── OrdenesDeComprasDTO.java
│       │   │               │   ├── OrdenesDeVentasDTO.java
│       │   │               │   ├── OrdenesWorkspaceDTO.java
│       │   │               │   ├── PagoRequestDTO.java
│       │   │               │   ├── PersonasDTO.java
│       │   │               │   ├── ProductoCreacionDTO.java
│       │   │               │   ├── ProductosDTO.java
│       │   │               │   ├── ProveedorDTO.java
│       │   │               │   ├── RolResponseDTO.java
│       │   │               │   ├── TicketVentaDTO.java
│       │   │               │   ├── UsuariosDTO.java
│       │   │               │   ├── VentaFinalizadaResponseDTO.java
│       │   │               │   ├── WorkspaceStatusDTO.java
│       │   │               │   └── WorkspacesDTO.java
│       │   │               ├── models
│       │   │               │   ├── CategoriaPersonas.java
│       │   │               │   ├── CategoriasProductos.java
│       │   │               │   ├── DetallesOrdenesDeCompras.java
│       │   │               │   ├── DetallesOrdenesDeVentas.java
│       │   │               │   ├── Estados.java
│       │   │               │   ├── HistorialCargosProveedores.java
│       │   │               │   ├── HistorialCostos.java
│       │   │               │   ├── HistorialPagosClientes.java
│       │   │               │   ├── HistorialPrecios.java
│       │   │               │   ├── Inventarios.java
│       │   │               │   ├── MetodosPago.java
│       │   │               │   ├── MovimientosInventarios.java
│       │   │               │   ├── OrdenesDeCompras.java
│       │   │               │   ├── OrdenesDeVentas.java
│       │   │               │   ├── OrdenesWorkspace.java
│       │   │               │   ├── Personas.java
│       │   │               │   ├── Productos.java
│       │   │               │   ├── Roles.java
│       │   │               │   ├── TipoMovimientos.java
│       │   │               │   ├── Ubicaciones.java
│       │   │               │   ├── Usuarios.java
│       │   │               │   └── Workspaces.java
│       │   │               ├── repositories
│       │   │               │   ├── CategoriaPersonasRepository.java
│       │   │               │   ├── CategoriasProductosRepository.java
│       │   │               │   ├── DetallesOrdenesDeComprasRepository.java
│       │   │               │   ├── DetallesOrdenesDeVentasRepository.java
│       │   │               │   ├── EstadosRepository.java
│       │   │               │   ├── HistorialCargosProveedoresRepository.java
│       │   │               │   ├── HistorialCostosRepository.java
│       │   │               │   ├── HistorialPagosClientesRepository.java
│       │   │               │   ├── HistorialPreciosRepository.java
│       │   │               │   ├── InventarioRepository.java
│       │   │               │   ├── MetodosPagoRepository.java
│       │   │               │   ├── MovimientosInventariosRepository.java
│       │   │               │   ├── OrdenesDeComprasRepository.java
│       │   │               │   ├── OrdenesDeVentasRepository.java
│       │   │               │   ├── OrdenesWorkspaceRepository.java
│       │   │               │   ├── PersonasRepository.java
│       │   │               │   ├── ProductosRepository.java
│       │   │               │   ├── RolesRepository.java
│       │   │               │   ├── TIpoMovimientosRepository.java
│       │   │               │   ├── UbicacionesRepository.java
│       │   │               │   ├── UsuariosRepository.java
│       │   │               │   └── WorkspacesRepository.java
│       │   │               └── services
│       │   │                   ├── ComprasService.java
│       │   │                   ├── DeudasProveedoresService.java
│       │   │                   ├── EmpleadoService.java
│       │   │                   ├── JwtService.java
│       │   │                   ├── OrdenesWorkspaceService.java
│       │   │                   ├── ProductoService.java
│       │   │                   ├── RolService.java
│       │   │                   └── VentaService.java
│       │   └── resources
│       │       ├── application-test.properties
│       │       ├── application.properties
│       │       ├── data-test.sql
│       │       ├── db-migration.sql
│       │       ├── empty.sql
│       │       └── schema.sql
│       └── test
│           └── java
│               └── com
│                   └── posfin
│                       └── pos_finanzas_backend
│                           ├── PosFinanzasBackendApplicationTests.java
│                           └── services
│                               └── DeudasProveedoresServiceTest.java
├── docker-compose.override.yml
├── docker-compose.yml
├── docs
│   └── funcionalidad-deudas-proveedores.md
├── frontend
│   ├── Dockerfile
│   ├── README.md
│   ├── check-config.sh
│   ├── debug-env.js
│   ├── eslint.config.js
│   ├── index.html
│   ├── nginx.conf
│   ├── package-lock.json
│   ├── package.json
│   ├── public
│   │   └── vite.svg
│   ├── src
│   │   ├── App.css
│   │   ├── App.tsx
│   │   ├── TestComponent.tsx
│   │   ├── assets
│   │   │   └── react.svg
│   │   ├── components
│   │   │   ├── DeudasProveedores.css
│   │   │   ├── DeudasProveedores.tsx
│   │   │   ├── EmployeeMainScreen.tsx
│   │   │   ├── GestionEmpleados.css
│   │   │   ├── GestionEmpleados.tsx
│   │   │   ├── Inventario.css
│   │   │   ├── Inventario.tsx
│   │   │   ├── InventarioModerno.css
│   │   │   ├── InventarioModerno.tsx
│   │   │   ├── InventarioModernoNew.css
│   │   │   ├── LoginScreen.css
│   │   │   ├── LoginScreen.tsx
│   │   │   ├── MainMenu.css
│   │   │   ├── MainMenu.tsx
│   │   │   ├── ModalCrearEmpleado.tsx
│   │   │   ├── ModalCrearProducto.tsx
│   │   │   ├── ModalEditarProducto.tsx
│   │   │   ├── ProtectedRoute.tsx
│   │   │   ├── PuntoDeCompras.css
│   │   │   ├── PuntoDeCompras.tsx
│   │   │   ├── PuntoDeVenta.css
│   │   │   ├── PuntoDeVenta.tsx
│   │   │   ├── RoleBasedNavigation.css
│   │   │   ├── RoleBasedNavigation.tsx
│   │   │   ├── SeleccionProveedores.css
│   │   │   ├── SeleccionProveedores.tsx
│   │   │   ├── TestInventario.tsx
│   │   │   ├── TicketVenta.css
│   │   │   ├── TicketVenta.tsx
│   │   │   ├── WorkspaceScreen.css
│   │   │   └── WorkspaceScreen.tsx
│   │   ├── contexts
│   │   │   └── AuthContext.tsx
│   │   ├── hooks
│   │   │   ├── useAuth.ts
│   │   │   └── useToast.ts
│   │   ├── index.css
│   │   ├── main.tsx
│   │   ├── services
│   │   │   ├── apiService.ts
│   │   │   ├── comprasService.ts
│   │   │   ├── deudasService.ts
│   │   │   ├── empleadoService.ts
│   │   │   ├── inventarioService.ts
│   │   │   └── rolService.ts
│   │   ├── types
│   │   │   └── index.ts
│   │   └── vite-env.d.ts
│   ├── staticwebapp.config.json
│   ├── tsconfig.app.json
│   ├── tsconfig.json
│   ├── tsconfig.node.json
│   └── vite.config.ts
├── tasks-archive.md
├── tasks.md
└── utilidades
    └── bd-schema.md

```

`proyecto-pos-finanzas/AGENTS.md`:

```md
# AGENTS.md - Sistema POS y Gesti√≥n Integral

## Build/Test Commands

- **Frontend**: `cd frontend && npm run dev` (dev), `npm run build` (build), `npm run lint` (lint)
- **Backend**: `cd backend && ./mvnw spring-boot:run` (dev), `./mvnw test` (tests), `./mvnw test -Dtest=ClassName#methodName` (single test)
- **Docker**: `docker-compose up --build -d` (full environment)

## Language & Documentation

- **Espa√±ol obligatorio** para c√≥digo, comentarios, commits y documentaci√≥n
- Usar Conventional Commits: `feat:`, `fix:`, `docs:`, `refactor:`, `test:`, `chore:`

## Planning Workflow

- **SIEMPRE** usar `tasks.md` para planificar antes de codificar
- Esperar aprobaci√≥n expl√≠cita antes de implementar
- Actualizar checkboxes en `tasks.md` durante implementaci√≥n

## Backend (Java/Spring Boot)

- Arquitectura: `Controller ‚Üí Service ‚Üí Repository`
- **Nunca** exponer entidades JPA directamente, usar DTOs
- Validaci√≥n con `jakarta.validation` (`@NotBlank`, `@Email`, `@Size`)
- `@Autowired` para inyecci√≥n de dependencias
- Lombok para reducir boilerplate

## Frontend (React/TypeScript)

- Componentes funcionales con Hooks √∫nicamente
- **TypeScript estricto**: evitar `any`, definir interfaces para props y DTOs
- Servicios API centralizados en `services/` con axios
- CSS Modules (`.module.css`) para estilos encapsulados
- Imports organizados: React hooks ‚Üí componentes ‚Üí servicios ‚Üí tipos

# Instrucciones para Asistencia de IA (GitHub Copilot)

Este documento define el contexto, las reglas y los flujos de trabajo que debes seguir para asistir en este proyecto. Tu objetivo es actuar como un desarrollador full-stack senior, priorizando la calidad, la planificación, la seguridad y la mantenibilidad del código.

---

## 👤 1. Rol y Principios Fundamentales

- **Tu Rol:** Actúa como un **Desarrollador Full-Stack Senior** con experiencia demostrada en Java/Spring Boot, React/TypeScript, PostgreSQL y despliegue en la nube con Azure.
- **Idioma:** Todo el código, comentarios, commits y documentación que generes debe estar en **español**.
- **Proactividad:** No te limites a ejecutar. Si identificas una mejora de seguridad, rendimiento o refactorización, proponla como parte de tu plan de acción.
- **Principio de Planificación Primero:** **Nunca** escribas o modifiques código para una nueva funcionalidad o tarea compleja sin antes presentar un plan detallado en el archivo `tasks.md` y recibir aprobación.
- **Calidad del Código (Clean Code):**
  - **KISS (Keep It Simple, Stupid):** Prefiere soluciones simples y directas. Evita la sobre-ingeniería.
  - **DRY (Don't Repeat Yourself):** Reutiliza el código a través de funciones, componentes o servicios. No dupliques lógica.
  - **SOLID:** Aplica los principios SOLID, especialmente el de Responsabilidad Única (Single Responsibility) en clases y componentes.
- **Seguridad:** La seguridad es primordial. Considera siempre la validación de entradas, la prevención de inyección de dependencias (SQL, etc.), y la correcta gestión de secretos y credenciales.

---

## 🎯 2. Contexto del Proyecto

### 2.1. Definición del Sistema

Estás trabajando en un **Sistema de Punto de Venta (POS) y Gestión Integral**, una aplicación web moderna diseñada para administrar eficientemente las operaciones de un negocio.

El diferenciador clave del sistema es su motor de **predicción de compras basado en sistemas expertos**. Utiliza una combinación de **redes neuronales bayesianas y de lógica difusa** para optimizar el inventario, respondiendo a las preguntas: **"¿Qué comprar?", "¿Cuánto comprar?" y "¿A qué precio comprar?"**.

### 2.2. Arquitectura Tecnológica

- **Backend:** **Java** con **Spring Boot**. Expone una API REST para el frontend.
- **Frontend:** **React** con **TypeScript**. Consume la API del backend.
- **Base de Datos:** **PostgreSQL** (Relacional).
- **Entorno de Desarrollo:** El proyecto se ejecuta localmente usando **Docker**.

---

## 📌 3. Flujo de Trabajo Obligatorio (Modo Agente)

Para cualquier solicitud de nueva funcionalidad, corrección o refactorización, sigue estos pasos estrictamente:

1. **Localiza el archivo `tasks.md`** en la raíz del proyecto.
2. **Gestiona las tareas completadas:** Antes de añadir una nueva tarea, revisa si hay secciones de tareas ya marcadas como completas. Si es así, propon moverlas a un archivo de histórico llamado `tasks-archive.md` para mantener limpio el archivo principal. Espera confirmación para hacerlo.
3. **Añade la nueva tarea:** Crea una nueva sección al final del archivo usando un título de Markdown (ej. `## Tarea: Implementar Sistema de Notificaciones`).
4. **Crea el plan de acción (checklist):** Detalla las subtareas técnicas necesarias. Sé específico sobre los archivos a crear/modificar y las acciones a realizar. El plan debe ser una guía clara de tu trabajo.
5. **Presenta el plan:** Comunica que el plan está listo en `tasks.md` y espera la aprobación explícita ("procede", "adelante", "ok") antes de escribir una sola línea de código.
6. **Ejecuta y actualiza:** A medida que implementes cada paso del plan, **actualiza el `tasks.md` marcando la casilla correspondiente** (`[x]`).
7. **Reflejar Cambios (Docker):** Una vez que hayas completado una porción de código y quieras que se vea reflejada en el entorno local, **solicita explícitamente que se ejecute el siguiente comando:** `docker-compose up --build -d`.

---

## 💻 4. Directrices de Codificación Generales

- **Comentarios:** Escribe comentarios claros y concisos donde la lógica sea compleja. No comentes código obvio. Utiliza Javadoc para las clases y métodos públicos en el backend y TSDoc para las funciones y componentes en el frontend.
- **Nomenclatura:** Usa nombres de variables, funciones y clases que sean descriptivos y autoexplicativos.
- **Manejo de Errores:** Implementa un manejo de errores robusto. No dejes bloques `catch` vacíos. Devuelve mensajes de error significativos al usuario y registra los detalles técnicos.

---

## ☕ 5. Directrices de Backend (Java & Spring Boot)

- **Arquitectura en Capas:** Respeta estrictamente la arquitectura `Controller -> Service -> Repository`.
  - `Controller`: Gestiona las peticiones HTTP. Debe ser ligero, delegando toda la lógica de negocio al servicio.
  - `Service`: Contiene la lógica de negocio. Orquesta las llamadas a los repositorios y a otros servicios.
  - `Repository`: Gestiona la comunicación con la base de datos a través de Spring Data JPA.
- **DTOs (Data Transfer Objects):** **Nunca** expongas las entidades JPA (`@Entity`) directamente en los endpoints. Crea DTOs para las entradas (`Request`) y salidas (`Response`).
- **Manejo de Excepciones:** Utiliza un manejador de excepciones global con `@ControllerAdvice` para centralizar la gestión de errores y devolver respuestas HTTP consistentes.
- **Validación:** Usa las anotaciones de `jakarta.validation` (ej. `@NotBlank`, `@Email`, `@Size`) en los DTOs de entrada y activa la validación en los controladores con `@Valid`.
- **Dependencias:** Si necesitas una nueva librería, el primer paso en tu plan (`tasks.md`) debe ser añadir la dependencia al archivo `pom.xml`.

---

## ⚛️ 6. Directrices de Frontend (React & TypeScript)

- **Componentes Funcionales:** Crea siempre componentes funcionales con Hooks. No uses componentes de clase.
- **Tipado Estricto:** **TypeScript es obligatorio.** Define `interface` para las props de los componentes y para los DTOs de la API. **Evita el uso de `any` a toda costa.**
- **Estructura de Componentes:** Separa la lógica (hooks personalizados) de la presentación (JSX). Mantén los componentes pequeños y enfocados en una sola responsabilidad.
- **Capa de Servicios API:** Centraliza todas las llamadas a la API en una capa de servicio (ej. `services/productoService.ts`). Estos servicios usarán `axios` (o similar) y se encargarán de manejar las peticiones y devolver los datos ya tipados. **No hagas llamadas a la API directamente desde los componentes.**
- **Gestión de Estado:**
  - **Estado Local:** Usa `useState` y `useReducer` para el estado de un solo componente.
  - **Estado Global:** Para estado que deba compartirse entre componentes (ej. información del usuario autenticado), consulta antes de proponer una librería como Zustand o Redux Toolkit.
- **Estilos:** Utiliza **CSS Modules** (`.module.css`) para encapsular los estilos de cada componente y evitar colisiones de clases CSS.

---

## 🧪 7. Directrices de Pruebas y Depuración

- **Planificación de Pruebas:** Cuando planifiques una nueva funcionalidad, incluye en el `tasks.md` los casos de prueba que cubrirás.
- **Pruebas Unitarias:**
  - **Backend:** Utiliza **JUnit** y **Mockito** para probar la lógica en la capa de `Service`. Las pruebas deben ser rápidas y no depender de la base de datos.
  - **Frontend:** Utiliza **Jest** y **React Testing Library** para probar componentes de forma aislada. Enfócate en probar el comportamiento del componente desde la perspectiva del usuario.
- **Pruebas de Integración:**
  - **Backend:** Para los `Controller` y `Repository`, crea pruebas de integración con `@SpringBootTest` que puedan usar una base de datos de prueba (como H2 en memoria o Testcontainers).
- **Depuración (Debugging):**
  1. **Replicar el Error:** Tu primer paso debe ser entender y replicar el bug de manera consistente.
  2. **Formular Hipótesis:** Basado en el error, formula una hipótesis sobre la causa raíz.
  3. **Proponer un Plan de Depuración:** En el `tasks.md`, detalla los pasos que seguirás para confirmar la hipótesis (ej. "Añadir logs en `X` servicio", "Inspeccionar la respuesta de la API en el navegador", "Ejecutar prueba unitaria `Y`").
  4. **Solucionar y Verificar:** Una vez encontrada la causa, propón la solución y un plan para verificar que el arreglo funciona y no introduce nuevas regresiones (ej. "Crear una nueva prueba unitaria que cubra este caso de error").

---

## 💾 8. Base de Datos y Control de Versiones

- **Acceso a Datos (JPA):** Prioriza el uso de métodos de consulta derivados del nombre del método en las interfaces de Spring Data JPA. Usa `@Query` con JPQL solo para consultas complejas que no se pueden expresar de otra manera.
- **Esquema de BD:** Para entender la estructura de la base de datos, consulta el archivo `utilidades/bd-schema.md`.
- **Control de Versiones (Git):** Cuando se te pida realizar commits, sigue estrictamente la especificación de **Conventional Commits**.
  - `feat:` para nuevas funcionalidades.
  - `fix:` para corrección de errores.
  - `docs:` para cambios en la documentación.
  - `style:` para cambios de formato que no afectan la lógica.
  - `refactor:` para refactorización de código.
  - `test:` para añadir o modificar pruebas.
  - `chore:` para tareas de mantenimiento (actualizar dependencias, etc.).

```

`proyecto-pos-finanzas/README.md`:

```md
# proyecto-pos-finanzas

Proyecto de titulación de Ingeniería en Computación
Todos los métodos personalizados que se necesiten para poder manipular la base de datos en la lógica de negocios deben ir colocados en los archivos "Repository", no se deben modificar los "Controllers", ya que esos son los que hacen el CRUD típico sobre las tablas.

```

`proyecto-pos-finanzas/anotaciones-markdown/apuntes.md`:

```md
# APUNTES

### Guia rápida de comandos para flujo de trabajo

| NECESIDAD                                       | COMANDO A EJECUTAR                 |
| ----------------------------------------------- | ---------------------------------- |
| Quiero empezar a trabajar                       | `docker-compose up -d`             |
| Quiero ver que pasa en el container             | `docker-compose logs -f`           |
| Hice cambios al código y quiero verlos          | `docker-compose up --build -d`     |
| Quiero apagar todo cuando termine               | `docker-compose down`              |
| SOLO EN CASO DE EMERGENCIA (copia de git antes) | `docker-compose down -v`           |
| Para ver la página web                          | http://localhost:5173              |
| Despues de guardar archivo .jar ejecutar        | `./mvnw clean package -DskipTests` |

### NOTAS IMPORTANTES

Ahora, cada vez que le pidas algo a Copilot Chat, debes referenciar este archivo.

Implementa la funcionalidad para que los usuarios puedan crear, ver y eliminar categorías de productos. Antes de empezar, por favor, sigue estrictamente las directrices del archivo instrucciones-ia.md y actualiza el tasks.md con tu plan."

Al hacer esto, le das a Copilot un contexto claro y un conjunto de reglas a seguir, lo que reduce drásticamente los errores y te da a ti el control total del proceso.

```

`proyecto-pos-finanzas/anotaciones-markdown/prompt.md`:

```md
# Prompts utilizados

### Para pasar de la BD a Java las tablas

Actúa como un desarrollador experto en Java con Spring Boot, Spring Data JPA y Hibernate. Tu objetivo es generar el código completo para una API REST a partir del esquema SQL que te proporcionaré.

Debes seguir estrictamente las siguientes reglas y mejores prácticas de arquitectura para TODO el código que generes:

**Reglas Generales de Arquitectura:**

1.  **Estructura de Paquetes:** Todo el código Java debe estar dentro del paquete base `com.posfin.pos_finanzas_backend`. Utiliza los siguientes sub-paquetes:

    - `.models` para las clases de Entidad.
    - `.repositories` para las interfaces de Repositorio.
    - `.controllers` para las clases de Controlador.
    - `.dtos` para las clases de Data Transfer Objects.

2.  **Modelo de Datos (Entidades):**

    - Usa anotaciones de **Jakarta Persistence (JPA)**.
    - Cada clase de modelo debe tener la anotación `@Entity` y `@Table(name = "nombre_de_tabla")`.
    - La clave primaria (`id`) debe ser de tipo `String` y debe autogenerarse con un **UUID** usando el método `@PrePersist`.
    - **Manejo de Claves Foráneas (¡MUY IMPORTANTE!):** Las columnas que son claves foráneas **NUNCA** deben ser mapeadas como un simple `String`. Deben ser mapeadas como una **relación de objeto** usando la anotación `@ManyToOne` y `@JoinColumn`.
      - **Ejemplo:** Si la tabla `inventarios` tiene una columna `producto_id`, en la clase `Inventarios.java` la propiedad debe ser `private Productos producto;`.
      - Usa `fetch = FetchType.LAZY` en todas las relaciones `@ManyToOne` para optimizar el rendimiento y evitar problemas de carga.
      - Usa `@JoinColumn(name = "nombre_de_columna_fk", nullable = false)` para especificar la columna de la base de datos.

3.  **API REST (Controladores):**

    - Sigue las convenciones RESTful. Usa `@RestController` y `@RequestMapping("/api/recurso")`.
    - Implementa los cinco endpoints CRUD básicos: `GET` (todos), `GET /{id}`, `POST`, `PUT /{id}`, `DELETE /{id}`.

4.  **Manejo de Relaciones y Prevención de Errores de Serialización (Uso de DTOs):**

    - **Problema a evitar:** Retornar directamente entidades con relaciones `LAZY` causa errores de serialización (`LazyInitializationException` o errores con `HibernateProxy`).
    - **Regla:** Para cualquier endpoint `GET` que devuelva una entidad que tenga relaciones (`@ManyToOne`), **debes crear y retornar un DTO (Data Transfer Object)**.
    - **Implementación del DTO:**
      - El DTO debe ser una clase Java simple (POJO) en el paquete `.dtos`.
      - Debe contener solo los campos primitivos que el frontend necesita.
      - Debe "aplanar" las relaciones. Por ejemplo, `InventarioDTO` no tendrá un objeto `Productos`, sino campos como `private String productoId;` y `private String productoNombre;`.
    - **Lógica en el Controlador:** El método `GET` del controlador debe:
      1.  Obtener la(s) Entidad(es) del repositorio.
      2.  Crear una nueva instancia del DTO.
      3.  Mapear los datos de la Entidad al DTO manualmente. **Este paso es crucial porque al hacer `entidad.getProducto().getNombre()` se fuerza la carga de los datos de la relación de forma controlada.**
      4.  Retornar el DTO.

5.  **Lógica de Creación/Actualización (POST/PUT):**
    - Para los endpoints que crean o actualizan entidades con relaciones, el `@RequestBody` no debe ser la entidad directamente si eso complica la lógica.
    - El método del controlador debe recibir los IDs de las entidades relacionadas en el JSON, buscarlas en sus respectivos repositorios para obtener las instancias completas y luego asignarlas a la entidad principal antes de guardarla.

---

**Instrucción Principal:**

A continuación, te proporciono mi esquema de base de datos SQL. Para **CADA TABLA**, genera los archivos `.java` necesarios siguiendo todas las reglas mencionadas anteriormente. Asegúrate de incluir:

1.  **El Modelo (`.models/NombreTabla.java`):** Con las anotaciones JPA y las relaciones `@ManyToOne` correctas.
2.  **El Repositorio (`.repositories/NombreTablaRepository.java`):** Interfaz que extiende `JpaRepository`.
3.  **El Controlador (`.controllers/NombreTablaController.java`):** Con los 5 endpoints CRUD. Si la entidad tiene relaciones, los métodos `GET` deben usar y retornar un DTO.
4.  **El DTO (`.dtos/NombreTablaDTO.java`):** **Crea este archivo únicamente si la entidad correspondiente tiene relaciones `@ManyToOne`.**

NOTAS EXTRA:
Obviamente evita crear nuevamente las tablas que ya estan creadas, que en este caso son todos los catalogs, y corrige tambien el funcionamiento de Productos, ya que esta no implementa de manera correcta el DTO ni las funciones anteriormnte emncionadas cuando hay FKs.
--- MI ESQUEMA SQL ---

```sql
-- --------------------------------------------------
-- Catálogos
-- --------------------------------------------------

CREATE TABLE categorias_productos (
  id          VARCHAR2(36)                    NOT NULL,
  categoria   VARCHAR2(30)                    NOT NULL,
  CONSTRAINT pk_categorias_productos PRIMARY KEY (id)
);

CREATE TABLE estados (
  id          VARCHAR2(36)                    NOT NULL,
  estado      VARCHAR2(20)                    NOT NULL,
  CONSTRAINT pk_estados PRIMARY KEY (id)
);

CREATE TABLE categoria_personas (
  id          VARCHAR2(36)                    NOT NULL,
  categoria   VARCHAR2(30)                    NOT NULL,
  CONSTRAINT pk_categoria_personas PRIMARY KEY (id)
);

CREATE TABLE roles (
  id          VARCHAR2(36)                    NOT NULL,
  roles       VARCHAR2(20)                    NOT NULL,
  CONSTRAINT pk_roles PRIMARY KEY (id)
);

CREATE TABLE metodos_pago (
  id            VARCHAR2(36)                  NOT NULL,
  metodo_pago   VARCHAR2(30)                  NOT NULL,
  CONSTRAINT pk_metodos_pago PRIMARY KEY (id)
);

CREATE TABLE tipo_movimientos (
  id          VARCHAR2(36)                    NOT NULL,
  movimiento  VARCHAR2(12)                    NOT NULL,
  CONSTRAINT pk_tipo_movimientos PRIMARY KEY (id)
);

CREATE TABLE ubicaciones (
  id          VARCHAR2(36)                    NOT NULL,
  nombre      VARCHAR2(30)                    NOT NULL,
  ubicacion   VARCHAR2(30)                    NOT NULL,
  CONSTRAINT pk_ubicaciones PRIMARY KEY (id)
);

CREATE TABLE workspaces (
  id          VARCHAR2(36)                    NOT NULL,
  nombre      VARCHAR2(30)                    NOT NULL,
  CONSTRAINT pk_workspaces PRIMARY KEY (id)
);

-- --------------------------------------------------
-- Tablas principales
-- --------------------------------------------------

CREATE TABLE personas (
  id                      VARCHAR2(36)                    NOT NULL,
  nombre                  VARCHAR2(30)                    NOT NULL,
  apellido_paterno        VARCHAR2(30),
  apellido_materno        VARCHAR2(30),
  rfc                     VARCHAR2(10),
  telefono                VARCHAR2(20)                    NOT NULL,
  email                   VARCHAR2(32),
  estados_id              VARCHAR2(36)                    NOT NULL,
  categoria_personas_id   VARCHAR2(36)                    NOT NULL,
  CONSTRAINT pk_personas PRIMARY KEY (id),
  CONSTRAINT fk_pers_estados FOREIGN KEY (estados_id)
    REFERENCES estados(id),
  CONSTRAINT fk_pers_catpers FOREIGN KEY (categoria_personas_id)
    REFERENCES categoria_personas(id)
);

CREATE TABLE productos (
  id                          VARCHAR2(36)            NOT NULL,
  nombre                      VARCHAR2(30)            NOT NULL,
  categorias_productos_id     VARCHAR2(36)            NOT NULL,
  proveedor_id                VARCHAR2(36)            NOT NULL,
  estados_id                  VARCHAR2(36)            NOT NULL,
  CONSTRAINT pk_productos PRIMARY KEY (id),
  CONSTRAINT fk_prod_catprod FOREIGN KEY (categorias_productos_id)
    REFERENCES categorias_productos(id),
  CONSTRAINT fk_prod_proveedor FOREIGN KEY (proveedor_id)
    REFERENCES personas(id),
  CONSTRAINT fk_prod_estados FOREIGN KEY (estados_id)
    REFERENCES estados(id)
);

CREATE TABLE historial_precios (
  id                   VARCHAR2(36)                NOT NULL,
  productos_id         VARCHAR2(36)                NOT NULL,
  precio               NUMBER                      NOT NULL,
  fecha_de_registro    TIMESTAMP WITH TIME ZONE    NOT NULL,
  CONSTRAINT pk_historial_precios PRIMARY KEY (id),
  CONSTRAINT fk_hp_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id)
);

CREATE TABLE historial_costos (
  id                   VARCHAR2(36)                NOT NULL,
  productos_id         VARCHAR2(36)                NOT NULL,
  costo                NUMBER                      NOT NULL,
  fecha_de_registro    TIMESTAMP WITH TIME ZONE    NOT NULL,
  CONSTRAINT pk_historial_costos PRIMARY KEY (id),
  CONSTRAINT fk_hc_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id)
);

CREATE TABLE usuarios (
  id          VARCHAR2(36)            NOT NULL,
  nombre      VARCHAR2(50)            NOT NULL,
  contrasena  VARCHAR2(100)           NOT NULL,
  telefono    VARCHAR2(50)            NOT NULL,
  roles_id    VARCHAR2(36)            NOT NULL,
  estados_id  VARCHAR2(36)            NOT NULL,
  CONSTRAINT pk_usuarios PRIMARY KEY (id),
  CONSTRAINT fk_us_roles FOREIGN KEY (roles_id)
    REFERENCES roles(id),
  CONSTRAINT fk_us_estados FOREIGN KEY (estados_id)
    REFERENCES estados(id)
);

CREATE TABLE ordenes_de_ventas (
  id                VARCHAR2(36)                NOT NULL,
  personas_id       VARCHAR2(36)                NOT NULL,
  fecha_orden       TIMESTAMP WITH TIME ZONE    NOT NULL,
  usuarios_id       VARCHAR2(36)                NOT NULL,
  total_venta       NUMBER                      NOT NULL,
  metodos_pago_id   VARCHAR2(36)                NOT NULL,
  CONSTRAINT pk_ord_ventas PRIMARY KEY (id),
  CONSTRAINT fk_ov_personas FOREIGN KEY (personas_id)
    REFERENCES personas(id),
  CONSTRAINT fk_ov_usuarios FOREIGN KEY (usuarios_id)
    REFERENCES usuarios(id),
  CONSTRAINT fk_ov_metodo FOREIGN KEY (metodos_pago_id)
    REFERENCES metodos_pago(id)
);

CREATE TABLE detalles_ordenes_de_ventas (
  id                         VARCHAR2(36)   NOT NULL,
  ordenes_de_ventas_id       VARCHAR2(36)   NOT NULL,
  productos_id               VARCHAR2(36)   NOT NULL,
  historial_precios_id       VARCHAR2(36)   NOT NULL,
  cantidad_pz                NUMBER         NOT NULL,
  cantidad_kg                NUMBER         NOT NULL,
  CONSTRAINT pk_det_ordv PRIMARY KEY (id),
  CONSTRAINT fk_dov_ordv FOREIGN KEY (ordenes_de_ventas_id)
    REFERENCES ordenes_de_ventas(id),
  CONSTRAINT fk_dov_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id),
  CONSTRAINT fk_dov_hp FOREIGN KEY (historial_precios_id)
    REFERENCES historial_precios(id)
);

CREATE TABLE historial_pagos_clientes (
  id                   VARCHAR2(36)                NOT NULL,
  personas_id          VARCHAR2(36)                NOT NULL,
  orden_de_venta_id    VARCHAR2(36)                NOT NULL,
  monto_pagado         NUMBER                      NOT NULL,
  fecha                TIMESTAMP WITH TIME ZONE    NOT NULL,
  CONSTRAINT pk_hist_pagos PRIMARY KEY (id),
  CONSTRAINT fk_hpc_personas FOREIGN KEY (personas_id)
    REFERENCES personas(id),
  CONSTRAINT fk_hpc_ordv FOREIGN KEY (orden_de_venta_id)
    REFERENCES ordenes_de_ventas(id)
);

CREATE TABLE ordenes_de_compras (
  id                VARCHAR2(36)                NOT NULL,
  persona_id        VARCHAR2(36)                NOT NULL,
  fecha_orden       TIMESTAMP WITH TIME ZONE    NOT NULL,
  estados_id        VARCHAR2(36)                NOT NULL,
  total_compra      NUMBER                      NOT NULL,
  CONSTRAINT pk_ord_compras PRIMARY KEY (id),
  CONSTRAINT fk_oc_personas FOREIGN KEY (persona_id)
    REFERENCES personas(id),
  CONSTRAINT fk_oc_estados FOREIGN KEY (estados_id)
    REFERENCES estados(id)
);

CREATE TABLE detalles_ordenes_de_compras (
  id                          VARCHAR2(36)   NOT NULL,
  ordenes_de_compras_id       VARCHAR2(36)   NOT NULL,
  producto_id                 VARCHAR2(36)   NOT NULL,
  cantidad_pz                 NUMBER         NOT NULL,
  cantidad_kg                 NUMBER         NOT NULL,
  historial_costos_id         VARCHAR2(36)   NOT NULL,
  CONSTRAINT pk_det_ordc PRIMARY KEY (id),
  CONSTRAINT fk_doc_ordc FOREIGN KEY (ordenes_de_compras_id)
    REFERENCES ordenes_de_compras(id),
  CONSTRAINT fk_doc_prod FOREIGN KEY (producto_id)
    REFERENCES productos(id),
  CONSTRAINT fk_doc_hc FOREIGN KEY (historial_costos_id)
    REFERENCES historial_costos(id)
);

CREATE TABLE historial_cargos_proveedores (
  id                        VARCHAR2(36)                NOT NULL,
  personas_id               VARCHAR2(36)                NOT NULL,
  ordenes_de_compras_id     VARCHAR2(36)                NOT NULL,
  monto_pagado              NUMBER                      NOT NULL,
  fecha                     TIMESTAMP WITH TIME ZONE    NOT NULL,
  CONSTRAINT pk_hist_cargos PRIMARY KEY (id),
  CONSTRAINT fk_hcp_personas FOREIGN KEY (personas_id)
    REFERENCES personas(id),
  CONSTRAINT fk_hcp_ordc FOREIGN KEY (ordenes_de_compras_id)
    REFERENCES ordenes_de_compras(id)
);

CREATE TABLE inventarios (
  id              VARCHAR2(36)   NOT NULL,
  productos_id    VARCHAR2(36)   NOT NULL,
  ubicaciones_id  VARCHAR2(36)   NOT NULL,
  cantidad_pz     NUMBER         NOT NULL,
  cantidad_kg     NUMBER         NOT NULL,
  cantidad_minima NUMBER         NOT NULL,
  cantidad_maxima NUMBER         NOT NULL,
  CONSTRAINT pk_inventarios PRIMARY KEY (id),
  CONSTRAINT fk_inv_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id),
  CONSTRAINT fk_inv_ubica FOREIGN KEY (ubicaciones_id)
    REFERENCES ubicaciones(id)
);

CREATE TABLE movimientos_inventarios (
  id                   VARCHAR2(36)                NOT NULL,
  productos_id         VARCHAR2(36)                NOT NULL,
  ubicaciones_id       VARCHAR2(36)                NOT NULL,
  tipo_movimientos_id  VARCHAR2(36)                NOT NULL,
  cantidad             NUMBER                      NOT NULL,
  fecha_movimiento     TIMESTAMP WITH TIME ZONE    NOT NULL,
  usuarios_id          VARCHAR2(36)                NOT NULL,
  clave_movimiento     VARCHAR2(30)                NOT NULL,
  CONSTRAINT pk_mov_inv PRIMARY KEY (id),
  CONSTRAINT fk_mi_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id),
  CONSTRAINT fk_mi_ubica FOREIGN KEY (ubicaciones_id)
    REFERENCES ubicaciones(id),
  CONSTRAINT fk_mi_tipomv FOREIGN KEY (tipo_movimientos_id)
    REFERENCES tipo_movimientos(id),
  CONSTRAINT fk_mi_user FOREIGN KEY (usuarios_id)
    REFERENCES usuarios(id)
);

CREATE TABLE ordenes_workspace (
  id                    VARCHAR2(36)                NOT NULL,
  workspace_id          VARCHAR2(36)                NOT NULL,
  productos_id          VARCHAR2(36)                NOT NULL,
  cantidad_pz           NUMBER                      NOT NULL,
  cantidad_kg           NUMBER                      NOT NULL,
  historial_precios_id  VARCHAR2(36)                NOT NULL,
  CONSTRAINT pk_ord_ws PRIMARY KEY (id),
  CONSTRAINT fk_ow_ws FOREIGN KEY (workspace_id)
    REFERENCES workspaces(id),
  CONSTRAINT fk_ow_prod FOREIGN KEY (productos_id)
    REFERENCES productos(id),
  CONSTRAINT fk_ow_hp FOREIGN KEY (historial_precios_id)
    REFERENCES historial_precios(id)
);
```

### Para primer diseño de inventario

Actúa como un desarrollador experto en frontend utilizando React, TypeScript, Vite y la librería `axios`. Tu objetivo es crear un componente completo y funcional para una página de "Gestión de Inventarios" que se conecte con una API de Spring Boot ya existente.

**Contexto y Arquitectura del Proyecto:**

1.  **Conexión con la API:**

    - Toda la comunicación con el backend se debe centralizar en un archivo de servicio: `src/services/inventarioService.ts`.
    - Este servicio utilizará una instancia de `axios` configurada con una `baseURL` de `/api`. No es necesario incluir `http://localhost:8080` en las URLs de las peticiones, ya que un proxy de Nginx en Docker se encarga de la redirección.
    - La API ya expone endpoints RESTful para el CRUD de inventarios en `/api/inventarios`.

2.  **Manejo de Datos y Tipado:**

    - El backend devuelve DTOs para las peticiones `GET`. Debes crear las interfaces de TypeScript correspondientes para asegurar un tipado fuerte en todo el componente (ej. `InventarioDTO`).
    - Las peticiones `POST` y `PUT` para crear o actualizar un registro de inventario esperan un JSON con objetos anidados para las relaciones, como se muestra: `{ "producto": { "id": "uuid" }, "ubicacion": { "id": "uuid" }, ... }`.

3.  **Estilo y Diseño:**
    - Utiliza clases de CSS simples y descriptivas (ej. `inventario-container`, `inventario-table`, `btn-primary`).
    - El diseño general debe seguir la estructura y estilo del código guía que se proporcionará más abajo.

**Requerimientos del Componente `Inventario.tsx`:**

1.  **Estado:** Usa el hook `useState` para manejar la lista de registros del inventario, el estado de los formularios y la visibilidad de los modales.
2.  **Carga de Datos:** Usa el hook `useEffect` para llamar al servicio y obtener todos los registros del inventario cuando el componente se monte por primera vez.
3.  **Visualización:**
    - Renderiza los datos en una tabla (`<table>`).
    - La tabla debe tener columnas para: ID, Producto, Ubicación, Cantidad (Pz), Cantidad Mínima, Cantidad Máxima y una columna de **Acciones**.
4.  **Formulario de Creación/Edición:**
    - Incluye un botón "Añadir Nuevo Inventario".
    - Al hacer clic en "Añadir" o "Editar", debe aparecer un formulario (preferiblemente en un **modal/popup** para una mejor experiencia de usuario).
    - El formulario debe contener campos para todas las propiedades de un registro de inventario.
    - **Importante:** Los campos para "Producto" y "Ubicación" deben ser menús desplegables (`<select>`). Estos desplegables se deben poblar haciendo peticiones `GET` a sus respectivos endpoints (`/api/productos` y `/api/ubicaciones`) cuando el formulario se carga.
5.  **Funcionalidad CRUD:**
    - **Crear:** El formulario de "Añadir" debe hacer una petición `POST` al backend.
    - **Editar:** El botón "Editar" de cada fila debe abrir el formulario modal, precargado con los datos de ese registro. Al guardar, debe hacer una petición `PUT`.
    - **Eliminar:** El botón "Eliminar" debe pedir confirmación y luego hacer una petición `DELETE`.
    - Después de cada operación exitosa (Crear, Editar, Eliminar), la tabla de inventarios se debe **actualizar automáticamente** para reflejar los cambios.

--- MI CÓDIGO GUÍA DE DISEÑO ---

```tsx
import React, from 'react';
import './InventarioScreen.css';

// Definimos el tipo de dato para un producto del inventario
type Producto = {
  id: number;
  nombre: string;
  cantidad: number;
  categoria: string;
  proveedor: string;
  ubicacion: string;
  precioVenta: number;
  precioCompra: number;
  estado: 'activo' | 'inactivo';
};

// Datos de ejemplo para la tabla
const productosDeEjemplo: Producto[] = [
  { id: 1, nombre: 'Laptop Pro 15"', cantidad: 25, categoria: 'Electrónica', proveedor: 'TechCorp', ubicacion: 'Almacén A', precioVenta: 1500.00, precioCompra: 1200.00, estado: 'activo' },
  { id: 2, nombre: 'Teclado Mecánico RGB', cantidad: 50, categoria: 'Accesorios', proveedor: 'GamerGear', ubicacion: 'Estante B-2', precioVenta: 120.50, precioCompra: 85.00, estado: 'activo' },
  { id: 3, nombre: 'Monitor UltraWide 34"', cantidad: 15, categoria: 'Monitores', proveedor: 'DisplayInc', ubicacion: 'Almacén A', precioVenta: 799.99, precioCompra: 650.00, estado: 'activo' },
  { id: 4, nombre: 'Silla Ergonómica', cantidad: 30, categoria: 'Mobiliario', proveedor: 'OfficeComfort', ubicacion: 'Bodega C', precioVenta: 350.00, precioCompra: 280.00, estado: 'inactivo' },
];

const InventarioScreen: React.FC = () => {

  // Lógica para manejar la apertura del modal (a implementar)
  const handleCrearNuevoProducto = () => {
    // NOTA: Aquí se implementaría la lógica para abrir el modal/dialogo.
    alert('Abriendo diálogo para crear un nuevo producto...');
  };

  // Lógica para editar un producto
  const handleEditar = (id: number) => {
    alert(`Editando producto con ID: ${id}`);
  };

  // Lógica para eliminar (cambiar estado) un producto
  const handleEliminar = (id: number) => {
    // NOTA: Como indica el diseño, esto no borra el registro,
    // solo cambia su estado de 'activo' a 'inactivo'.
    alert(`Cambiando estado del producto con ID: ${id} a inactivo.`);
  };


  return (
    <div className="inventory-page">
      <button className="back-to-home-btn">Regresar a Inicio</button>

      <div className="inventory-container">
        <header className="inventory-header">
          <h1 className="inventory-title">MANEJO DE INVENTARIO</h1>
          <button
            className="create-product-btn"
            onClick={handleCrearNuevoProducto}
          >
            CREAR NUEVO PRODUCTO
          </button>
        </header>

        <main className="inventory-table-container">
          <table className="inventory-table">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Categoría</th>
                <th>Proveedor</th>
                <th>Ubicación</th>
                <th>Precio venta</th>
                <th>Precio Compra</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              {productosDeEjemplo.map((producto) => (
                <tr key={producto.id} className={producto.estado === 'inactivo' ? 'inactive-row' : ''}>
                  <td>{producto.nombre}</td>
                  <td>{producto.cantidad}</td>
                  <td>{producto.categoria}</td>
                  <td>{producto.proveedor}</td>
                  <td>{producto.ubicacion}</td>
                  <td>{`$${producto.precioVenta.toFixed(2)}`}</td>
                  <td>{`$${producto.precioCompra.toFixed(2)}`}</td>
                  <td>
                    <div className="action-buttons">
                      <button className="action-btn edit-btn" onClick={() => handleEditar(producto.id)}>
                        Editar
                      </button>
                      <button className="action-btn delete-btn" onClick={() => handleEliminar(producto.id)}>
                        Eliminar
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </main>
      </div>
    </div>
  );
};

export default InventarioScreen;
```

```css
/* Estilos generales para la página */
.inventory-page {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
  background-color: #f4f5f7;
  padding: 2rem;
  display: flex;
  flex-direction: column;
  align-items: flex-start; /* Alinea el botón de regreso a la izquierda */
  min-height: 100vh;
}

/* Botón para regresar a Inicio */
.back-to-home-btn {
  background-color: #ffffff;
  border: 1px solid #cccccc;
  border-radius: 6px;
  padding: 0.5rem 1rem;
  font-size: 0.9rem;
  cursor: pointer;
  margin-bottom: 1.5rem;
  transition: background-color 0.2s;
}

.back-to-home-btn:hover {
  background-color: #f0f0f0;
}

/* Contenedor principal del inventario */
.inventory-container {
  background-color: #ffffff;
  border: 1px solid #dfe1e6;
  border-radius: 12px;
  padding: 2rem;
  width: 100%;
  max-width: 1400px; /* Ancho máximo para el contenedor */
  margin: 0 auto; /* Centra el contenedor si la página es más ancha */
  box-sizing: border-box;
}

/* Cabecera del contenedor */
.inventory-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.inventory-title {
  font-size: 1.75rem;
  font-weight: 600;
  color: #172b4d;
  margin: 0;
}

/* Botón para crear nuevo producto */
.create-product-btn {
  background-color: #0052cc;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.create-product-btn:hover {
  background-color: #0065ff;
}

/* Contenedor y estilos de la tabla */
.inventory-table-container {
  overflow-x: auto; /* Permite scroll horizontal en pantallas pequeñas */
}

.inventory-table {
  width: 100%;
  border-collapse: collapse; /* Une los bordes de las celdas */
}

.inventory-table th,
.inventory-table td {
  border: 1px solid #dfe1e6;
  padding: 0.8rem 1rem;
  text-align: left;
  vertical-align: middle;
  font-size: 0.9rem;
  color: #42526e;
}

.inventory-table thead th {
  background-color: #f9fafb; /* Un fondo muy sutil para la cabecera */
  font-weight: 600;
  color: #172b4d;
}

/* Estilo para filas marcadas como inactivas */
.inventory-table tr.inactive-row {
  background-color: #fafafa;
  color: #999999;
}

.inventory-table tr.inactive-row td {
  color: #999999;
}

/* Contenedor para los botones de acción para alinearlos correctamente */
.action-buttons {
  display: flex;
  gap: 0.5rem; /* Espacio entre botones */
}

/* Estilo base para los botones de acción en la tabla */
.action-btn {
  padding: 0.4rem 0.8rem;
  border-radius: 5px;
  border: 1px solid #cccccc;
  background-color: #f4f4f4;
  cursor: pointer;
  font-size: 0.85rem;
  transition: background-color 0.2s, border-color 0.2s;
}

.action-btn:hover {
  background-color: #e9e9e9;
  border-color: #bbbbbb;
}

/* Botón específico de eliminar (podría tener un color distintivo) */
.delete-btn {
  /* En el diseño no se ve rojo, pero es una convención común */
  /* background-color: #fce8e6; */
  /* color: #c52929; */
  /* border-color: #f8c8c4; */
}

.delete-btn:hover {
  /* background-color: #f7d5d2; */
  /* border-color: #f0b2ad; */
}
```

### Para corregir la primera versión de la interfaz

Vamos a corregir algunas partes que no me gustan.

- [x] En la página de Login, no muestres ya las credenciales de prueba que pusiste hasta abajo ("admin"), solo deja la página de login normal.
- [ ] Los Workspaces en su interfaz no muestran los nombres de los workspaces que estan en la base de datos, solo muestran la palabra temporal.
- [ ] Quita los iconos de lso workspace, solo quiero el nombre del workspace y si esta ocupado o disponible.
- [ ] El botón de eliminación de Workspace efimeros no funciona, marca error: "Error al limpiar cuentas temporales" y al volver a presionar en "Reintentar" no hace nada, en este caso tengo un workspace temporal que se deberia de borrar tanto de la UI como de la base de datos.
- [x] Me gustaria que los botones que representan a los workspace (En la pestaña de Workspace) se pusieran de color verde cuando disponibles, rojo cuando ocupados, azul cuando se solicita la cuenta.
- [x] En esa misma página de los workspaces, en la parte superiro, en vez de mostrar el botón de cerra sesión (Elimina ese boton de esa pagina) debe mostrar un botón el cual dice "Limpiar cuentas", que lo qeu hace hasta el momento (placeholder) es eliminar los workspaces que esten marcados como efimeros. Dejando los permannetes, ya que esos no se pueden borrar tan fácil.

### Para corregir el inventaio

```

`proyecto-pos-finanzas/backend/Dockerfile`:

```
# Archivo: backend/Dockerfile

# ---- Etapa de Construcción (Build Stage) ----
# Usamos una imagen con Maven y el JDK de Java para compilar el proyecto
FROM maven:3.9-eclipse-temurin-17 AS build

# Establecemos el directorio de trabajo dentro del contenedor
WORKDIR /app

# Copiamos solo el pom.xml para aprovechar el cache de Docker
COPY pom.xml .
# Descargamos las dependencias
RUN mvn dependency:go-offline

# Copiamos el resto del código fuente
COPY src ./src

# Empaquetamos la aplicación, saltando los tests para acelerar la construcción
RUN mvn package -DskipTests

# ---- Etapa de Ejecución (Runtime Stage) ----
# Usamos una imagen mucho más ligera solo con el entorno de ejecución de Java (JRE)
FROM eclipse-temurin:17-jre-focal

WORKDIR /app

# Copiamos el .jar construido desde la etapa de 'build'
COPY --from=build /app/target/*.jar app.jar

# Exponemos el puerto en el que corre la aplicación Spring Boot
EXPOSE 8080

# Comando para ejecutar la aplicación cuando el contenedor se inicie
CMD ["java", "-jar", "app.jar"]
```

`proyecto-pos-finanzas/backend/mvnw`:

```
#!/bin/sh
# ----------------------------------------------------------------------------
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
# ----------------------------------------------------------------------------

# ----------------------------------------------------------------------------
# Apache Maven Wrapper startup batch script, version 3.3.2
#
# Optional ENV vars
# -----------------
#   JAVA_HOME - location of a JDK home dir, required when download maven via java source
#   MVNW_REPOURL - repo url base for downloading maven distribution
#   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven
#   MVNW_VERBOSE - true: enable verbose log; debug: trace the mvnw script; others: silence the output
# ----------------------------------------------------------------------------

set -euf
[ "${MVNW_VERBOSE-}" != debug ] || set -x

# OS specific support.
native_path() { printf %s\\n "$1"; }
case "$(uname)" in
CYGWIN* | MINGW*)
  [ -z "${JAVA_HOME-}" ] || JAVA_HOME="$(cygpath --unix "$JAVA_HOME")"
  native_path() { cygpath --path --windows "$1"; }
  ;;
esac

# set JAVACMD and JAVACCMD
set_java_home() {
  # For Cygwin and MinGW, ensure paths are in Unix format before anything is touched
  if [ -n "${JAVA_HOME-}" ]; then
    if [ -x "$JAVA_HOME/jre/sh/java" ]; then
      # IBM's JDK on AIX uses strange locations for the executables
      JAVACMD="$JAVA_HOME/jre/sh/java"
      JAVACCMD="$JAVA_HOME/jre/sh/javac"
    else
      JAVACMD="$JAVA_HOME/bin/java"
      JAVACCMD="$JAVA_HOME/bin/javac"

      if [ ! -x "$JAVACMD" ] || [ ! -x "$JAVACCMD" ]; then
        echo "The JAVA_HOME environment variable is not defined correctly, so mvnw cannot run." >&2
        echo "JAVA_HOME is set to \"$JAVA_HOME\", but \"\$JAVA_HOME/bin/java\" or \"\$JAVA_HOME/bin/javac\" does not exist." >&2
        return 1
      fi
    fi
  else
    JAVACMD="$(
      'set' +e
      'unset' -f command 2>/dev/null
      'command' -v java
    )" || :
    JAVACCMD="$(
      'set' +e
      'unset' -f command 2>/dev/null
      'command' -v javac
    )" || :

    if [ ! -x "${JAVACMD-}" ] || [ ! -x "${JAVACCMD-}" ]; then
      echo "The java/javac command does not exist in PATH nor is JAVA_HOME set, so mvnw cannot run." >&2
      return 1
    fi
  fi
}

# hash string like Java String::hashCode
hash_string() {
  str="${1:-}" h=0
  while [ -n "$str" ]; do
    char="${str%"${str#?}"}"
    h=$(((h * 31 + $(LC_CTYPE=C printf %d "'$char")) % 4294967296))
    str="${str#?}"
  done
  printf %x\\n $h
}

verbose() { :; }
[ "${MVNW_VERBOSE-}" != true ] || verbose() { printf %s\\n "${1-}"; }

die() {
  printf %s\\n "$1" >&2
  exit 1
}

trim() {
  # MWRAPPER-139:
  #   Trims trailing and leading whitespace, carriage returns, tabs, and linefeeds.
  #   Needed for removing poorly interpreted newline sequences when running in more
  #   exotic environments such as mingw bash on Windows.
  printf "%s" "${1}" | tr -d '[:space:]'
}

# parse distributionUrl and optional distributionSha256Sum, requires .mvn/wrapper/maven-wrapper.properties
while IFS="=" read -r key value; do
  case "${key-}" in
  distributionUrl) distributionUrl=$(trim "${value-}") ;;
  distributionSha256Sum) distributionSha256Sum=$(trim "${value-}") ;;
  esac
done <"${0%/*}/.mvn/wrapper/maven-wrapper.properties"
[ -n "${distributionUrl-}" ] || die "cannot read distributionUrl property in ${0%/*}/.mvn/wrapper/maven-wrapper.properties"

case "${distributionUrl##*/}" in
maven-mvnd-*bin.*)
  MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/
  case "${PROCESSOR_ARCHITECTURE-}${PROCESSOR_ARCHITEW6432-}:$(uname -a)" in
  *AMD64:CYGWIN* | *AMD64:MINGW*) distributionPlatform=windows-amd64 ;;
  :Darwin*x86_64) distributionPlatform=darwin-amd64 ;;
  :Darwin*arm64) distributionPlatform=darwin-aarch64 ;;
  :Linux*x86_64*) distributionPlatform=linux-amd64 ;;
  *)
    echo "Cannot detect native platform for mvnd on $(uname)-$(uname -m), use pure java version" >&2
    distributionPlatform=linux-amd64
    ;;
  esac
  distributionUrl="${distributionUrl%-bin.*}-$distributionPlatform.zip"
  ;;
maven-mvnd-*) MVN_CMD=mvnd.sh _MVNW_REPO_PATTERN=/maven/mvnd/ ;;
*) MVN_CMD="mvn${0##*/mvnw}" _MVNW_REPO_PATTERN=/org/apache/maven/ ;;
esac

# apply MVNW_REPOURL and calculate MAVEN_HOME
# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>
[ -z "${MVNW_REPOURL-}" ] || distributionUrl="$MVNW_REPOURL$_MVNW_REPO_PATTERN${distributionUrl#*"$_MVNW_REPO_PATTERN"}"
distributionUrlName="${distributionUrl##*/}"
distributionUrlNameMain="${distributionUrlName%.*}"
distributionUrlNameMain="${distributionUrlNameMain%-bin}"
MAVEN_USER_HOME="${MAVEN_USER_HOME:-${HOME}/.m2}"
MAVEN_HOME="${MAVEN_USER_HOME}/wrapper/dists/${distributionUrlNameMain-}/$(hash_string "$distributionUrl")"

exec_maven() {
  unset MVNW_VERBOSE MVNW_USERNAME MVNW_PASSWORD MVNW_REPOURL || :
  exec "$MAVEN_HOME/bin/$MVN_CMD" "$@" || die "cannot exec $MAVEN_HOME/bin/$MVN_CMD"
}

if [ -d "$MAVEN_HOME" ]; then
  verbose "found existing MAVEN_HOME at $MAVEN_HOME"
  exec_maven "$@"
fi

case "${distributionUrl-}" in
*?-bin.zip | *?maven-mvnd-?*-?*.zip) ;;
*) die "distributionUrl is not valid, must match *-bin.zip or maven-mvnd-*.zip, but found '${distributionUrl-}'" ;;
esac

# prepare tmp dir
if TMP_DOWNLOAD_DIR="$(mktemp -d)" && [ -d "$TMP_DOWNLOAD_DIR" ]; then
  clean() { rm -rf -- "$TMP_DOWNLOAD_DIR"; }
  trap clean HUP INT TERM EXIT
else
  die "cannot create temp dir"
fi

mkdir -p -- "${MAVEN_HOME%/*}"

# Download and Install Apache Maven
verbose "Couldn't find MAVEN_HOME, downloading and installing it ..."
verbose "Downloading from: $distributionUrl"
verbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"

# select .zip or .tar.gz
if ! command -v unzip >/dev/null; then
  distributionUrl="${distributionUrl%.zip}.tar.gz"
  distributionUrlName="${distributionUrl##*/}"
fi

# verbose opt
__MVNW_QUIET_WGET=--quiet __MVNW_QUIET_CURL=--silent __MVNW_QUIET_UNZIP=-q __MVNW_QUIET_TAR=''
[ "${MVNW_VERBOSE-}" != true ] || __MVNW_QUIET_WGET='' __MVNW_QUIET_CURL='' __MVNW_QUIET_UNZIP='' __MVNW_QUIET_TAR=v

# normalize http auth
case "${MVNW_PASSWORD:+has-password}" in
'') MVNW_USERNAME='' MVNW_PASSWORD='' ;;
has-password) [ -n "${MVNW_USERNAME-}" ] || MVNW_USERNAME='' MVNW_PASSWORD='' ;;
esac

if [ -z "${MVNW_USERNAME-}" ] && command -v wget >/dev/null; then
  verbose "Found wget ... using wget"
  wget ${__MVNW_QUIET_WGET:+"$__MVNW_QUIET_WGET"} "$distributionUrl" -O "$TMP_DOWNLOAD_DIR/$distributionUrlName" || die "wget: Failed to fetch $distributionUrl"
elif [ -z "${MVNW_USERNAME-}" ] && command -v curl >/dev/null; then
  verbose "Found curl ... using curl"
  curl ${__MVNW_QUIET_CURL:+"$__MVNW_QUIET_CURL"} -f -L -o "$TMP_DOWNLOAD_DIR/$distributionUrlName" "$distributionUrl" || die "curl: Failed to fetch $distributionUrl"
elif set_java_home; then
  verbose "Falling back to use Java to download"
  javaSource="$TMP_DOWNLOAD_DIR/Downloader.java"
  targetZip="$TMP_DOWNLOAD_DIR/$distributionUrlName"
  cat >"$javaSource" <<-END
	public class Downloader extends java.net.Authenticator
	{
	  protected java.net.PasswordAuthentication getPasswordAuthentication()
	  {
	    return new java.net.PasswordAuthentication( System.getenv( "MVNW_USERNAME" ), System.getenv( "MVNW_PASSWORD" ).toCharArray() );
	  }
	  public static void main( String[] args ) throws Exception
	  {
	    setDefault( new Downloader() );
	    java.nio.file.Files.copy( java.net.URI.create( args[0] ).toURL().openStream(), java.nio.file.Paths.get( args[1] ).toAbsolutePath().normalize() );
	  }
	}
	END
  # For Cygwin/MinGW, switch paths to Windows format before running javac and java
  verbose " - Compiling Downloader.java ..."
  "$(native_path "$JAVACCMD")" "$(native_path "$javaSource")" || die "Failed to compile Downloader.java"
  verbose " - Running Downloader.java ..."
  "$(native_path "$JAVACMD")" -cp "$(native_path "$TMP_DOWNLOAD_DIR")" Downloader "$distributionUrl" "$(native_path "$targetZip")"
fi

# If specified, validate the SHA-256 sum of the Maven distribution zip file
if [ -n "${distributionSha256Sum-}" ]; then
  distributionSha256Result=false
  if [ "$MVN_CMD" = mvnd.sh ]; then
    echo "Checksum validation is not supported for maven-mvnd." >&2
    echo "Please disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties." >&2
    exit 1
  elif command -v sha256sum >/dev/null; then
    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | sha256sum -c >/dev/null 2>&1; then
      distributionSha256Result=true
    fi
  elif command -v shasum >/dev/null; then
    if echo "$distributionSha256Sum  $TMP_DOWNLOAD_DIR/$distributionUrlName" | shasum -a 256 -c >/dev/null 2>&1; then
      distributionSha256Result=true
    fi
  else
    echo "Checksum validation was requested but neither 'sha256sum' or 'shasum' are available." >&2
    echo "Please install either command, or disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties." >&2
    exit 1
  fi
  if [ $distributionSha256Result = false ]; then
    echo "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised." >&2
    echo "If you updated your Maven version, you need to update the specified distributionSha256Sum property." >&2
    exit 1
  fi
fi

# unzip and move
if command -v unzip >/dev/null; then
  unzip ${__MVNW_QUIET_UNZIP:+"$__MVNW_QUIET_UNZIP"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -d "$TMP_DOWNLOAD_DIR" || die "failed to unzip"
else
  tar xzf${__MVNW_QUIET_TAR:+"$__MVNW_QUIET_TAR"} "$TMP_DOWNLOAD_DIR/$distributionUrlName" -C "$TMP_DOWNLOAD_DIR" || die "failed to untar"
fi
printf %s\\n "$distributionUrl" >"$TMP_DOWNLOAD_DIR/$distributionUrlNameMain/mvnw.url"
mv -- "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain" "$MAVEN_HOME" || [ -d "$MAVEN_HOME" ] || die "fail to move MAVEN_HOME"

clean || :
exec_maven "$@"

```

`proyecto-pos-finanzas/backend/mvnw.cmd`:

```cmd
<# : batch portion
@REM ----------------------------------------------------------------------------
@REM Licensed to the Apache Software Foundation (ASF) under one
@REM or more contributor license agreements.  See the NOTICE file
@REM distributed with this work for additional information
@REM regarding copyright ownership.  The ASF licenses this file
@REM to you under the Apache License, Version 2.0 (the
@REM "License"); you may not use this file except in compliance
@REM with the License.  You may obtain a copy of the License at
@REM
@REM    http://www.apache.org/licenses/LICENSE-2.0
@REM
@REM Unless required by applicable law or agreed to in writing,
@REM software distributed under the License is distributed on an
@REM "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
@REM KIND, either express or implied.  See the License for the
@REM specific language governing permissions and limitations
@REM under the License.
@REM ----------------------------------------------------------------------------

@REM ----------------------------------------------------------------------------
@REM Apache Maven Wrapper startup batch script, version 3.3.2
@REM
@REM Optional ENV vars
@REM   MVNW_REPOURL - repo url base for downloading maven distribution
@REM   MVNW_USERNAME/MVNW_PASSWORD - user and password for downloading maven
@REM   MVNW_VERBOSE - true: enable verbose log; others: silence the output
@REM ----------------------------------------------------------------------------

@IF "%__MVNW_ARG0_NAME__%"=="" (SET __MVNW_ARG0_NAME__=%~nx0)
@SET __MVNW_CMD__=
@SET __MVNW_ERROR__=
@SET __MVNW_PSMODULEP_SAVE=%PSModulePath%
@SET PSModulePath=
@FOR /F "usebackq tokens=1* delims==" %%A IN (`powershell -noprofile "& {$scriptDir='%~dp0'; $script='%__MVNW_ARG0_NAME__%'; icm -ScriptBlock ([Scriptblock]::Create((Get-Content -Raw '%~f0'))) -NoNewScope}"`) DO @(
  IF "%%A"=="MVN_CMD" (set __MVNW_CMD__=%%B) ELSE IF "%%B"=="" (echo %%A) ELSE (echo %%A=%%B)
)
@SET PSModulePath=%__MVNW_PSMODULEP_SAVE%
@SET __MVNW_PSMODULEP_SAVE=
@SET __MVNW_ARG0_NAME__=
@SET MVNW_USERNAME=
@SET MVNW_PASSWORD=
@IF NOT "%__MVNW_CMD__%"=="" (%__MVNW_CMD__% %*)
@echo Cannot start maven from wrapper >&2 && exit /b 1
@GOTO :EOF
: end batch / begin powershell #>

$ErrorActionPreference = "Stop"
if ($env:MVNW_VERBOSE -eq "true") {
  $VerbosePreference = "Continue"
}

# calculate distributionUrl, requires .mvn/wrapper/maven-wrapper.properties
$distributionUrl = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionUrl
if (!$distributionUrl) {
  Write-Error "cannot read distributionUrl property in $scriptDir/.mvn/wrapper/maven-wrapper.properties"
}

switch -wildcard -casesensitive ( $($distributionUrl -replace '^.*/','') ) {
  "maven-mvnd-*" {
    $USE_MVND = $true
    $distributionUrl = $distributionUrl -replace '-bin\.[^.]*$',"-windows-amd64.zip"
    $MVN_CMD = "mvnd.cmd"
    break
  }
  default {
    $USE_MVND = $false
    $MVN_CMD = $script -replace '^mvnw','mvn'
    break
  }
}

# apply MVNW_REPOURL and calculate MAVEN_HOME
# maven home pattern: ~/.m2/wrapper/dists/{apache-maven-<version>,maven-mvnd-<version>-<platform>}/<hash>
if ($env:MVNW_REPOURL) {
  $MVNW_REPO_PATTERN = if ($USE_MVND) { "/org/apache/maven/" } else { "/maven/mvnd/" }
  $distributionUrl = "$env:MVNW_REPOURL$MVNW_REPO_PATTERN$($distributionUrl -replace '^.*'+$MVNW_REPO_PATTERN,'')"
}
$distributionUrlName = $distributionUrl -replace '^.*/',''
$distributionUrlNameMain = $distributionUrlName -replace '\.[^.]*$','' -replace '-bin$',''
$MAVEN_HOME_PARENT = "$HOME/.m2/wrapper/dists/$distributionUrlNameMain"
if ($env:MAVEN_USER_HOME) {
  $MAVEN_HOME_PARENT = "$env:MAVEN_USER_HOME/wrapper/dists/$distributionUrlNameMain"
}
$MAVEN_HOME_NAME = ([System.Security.Cryptography.MD5]::Create().ComputeHash([byte[]][char[]]$distributionUrl) | ForEach-Object {$_.ToString("x2")}) -join ''
$MAVEN_HOME = "$MAVEN_HOME_PARENT/$MAVEN_HOME_NAME"

if (Test-Path -Path "$MAVEN_HOME" -PathType Container) {
  Write-Verbose "found existing MAVEN_HOME at $MAVEN_HOME"
  Write-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"
  exit $?
}

if (! $distributionUrlNameMain -or ($distributionUrlName -eq $distributionUrlNameMain)) {
  Write-Error "distributionUrl is not valid, must end with *-bin.zip, but found $distributionUrl"
}

# prepare tmp dir
$TMP_DOWNLOAD_DIR_HOLDER = New-TemporaryFile
$TMP_DOWNLOAD_DIR = New-Item -Itemtype Directory -Path "$TMP_DOWNLOAD_DIR_HOLDER.dir"
$TMP_DOWNLOAD_DIR_HOLDER.Delete() | Out-Null
trap {
  if ($TMP_DOWNLOAD_DIR.Exists) {
    try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }
    catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }
  }
}

New-Item -Itemtype Directory -Path "$MAVEN_HOME_PARENT" -Force | Out-Null

# Download and Install Apache Maven
Write-Verbose "Couldn't find MAVEN_HOME, downloading and installing it ..."
Write-Verbose "Downloading from: $distributionUrl"
Write-Verbose "Downloading to: $TMP_DOWNLOAD_DIR/$distributionUrlName"

$webclient = New-Object System.Net.WebClient
if ($env:MVNW_USERNAME -and $env:MVNW_PASSWORD) {
  $webclient.Credentials = New-Object System.Net.NetworkCredential($env:MVNW_USERNAME, $env:MVNW_PASSWORD)
}
[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12
$webclient.DownloadFile($distributionUrl, "$TMP_DOWNLOAD_DIR/$distributionUrlName") | Out-Null

# If specified, validate the SHA-256 sum of the Maven distribution zip file
$distributionSha256Sum = (Get-Content -Raw "$scriptDir/.mvn/wrapper/maven-wrapper.properties" | ConvertFrom-StringData).distributionSha256Sum
if ($distributionSha256Sum) {
  if ($USE_MVND) {
    Write-Error "Checksum validation is not supported for maven-mvnd. `nPlease disable validation by removing 'distributionSha256Sum' from your maven-wrapper.properties."
  }
  Import-Module $PSHOME\Modules\Microsoft.PowerShell.Utility -Function Get-FileHash
  if ((Get-FileHash "$TMP_DOWNLOAD_DIR/$distributionUrlName" -Algorithm SHA256).Hash.ToLower() -ne $distributionSha256Sum) {
    Write-Error "Error: Failed to validate Maven distribution SHA-256, your Maven distribution might be compromised. If you updated your Maven version, you need to update the specified distributionSha256Sum property."
  }
}

# unzip and move
Expand-Archive "$TMP_DOWNLOAD_DIR/$distributionUrlName" -DestinationPath "$TMP_DOWNLOAD_DIR" | Out-Null
Rename-Item -Path "$TMP_DOWNLOAD_DIR/$distributionUrlNameMain" -NewName $MAVEN_HOME_NAME | Out-Null
try {
  Move-Item -Path "$TMP_DOWNLOAD_DIR/$MAVEN_HOME_NAME" -Destination $MAVEN_HOME_PARENT | Out-Null
} catch {
  if (! (Test-Path -Path "$MAVEN_HOME" -PathType Container)) {
    Write-Error "fail to move MAVEN_HOME"
  }
} finally {
  try { Remove-Item $TMP_DOWNLOAD_DIR -Recurse -Force | Out-Null }
  catch { Write-Warning "Cannot remove $TMP_DOWNLOAD_DIR" }
}

Write-Output "MVN_CMD=$MAVEN_HOME/bin/$MVN_CMD"

```

`proyecto-pos-finanzas/backend/pom.xml`:

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
	<modelVersion>4.0.0</modelVersion>
	<parent>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-parent</artifactId>
		<version>3.5.0</version>
		<relativePath/> <!-- lookup parent from repository -->
	</parent>
	<groupId>com.posfin</groupId>
	<artifactId>pos-finanzas-backend</artifactId>
	<version>0.0.1-SNAPSHOT</version>
	<name>pos-finanzas-backend</name>
	<description>Demo project for Spring Boot</description>
	<url/>
	<licenses>
		<license/>
	</licenses>
	<developers>
		<developer/>
	</developers>
	<scm>
		<connection/>
		<developerConnection/>
		<tag/>
		<url/>
	</scm>
	<properties>
		<java.version>17</java.version>
	</properties>
	<dependencies>

		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-actuator</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-data-jpa</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-web</artifactId>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-websocket</artifactId>
		</dependency>
		<dependency>
			<groupId>org.postgresql</groupId>
			<artifactId>postgresql</artifactId>
			<scope>runtime</scope>
		</dependency>
		<dependency>
			<groupId>org.projectlombok</groupId>
			<artifactId>lombok</artifactId>
			<optional>true</optional>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-starter-test</artifactId>
			<scope>test</scope>
		</dependency>
		<dependency>
			<groupId>org.springframework.boot</groupId>
			<artifactId>spring-boot-devtools</artifactId>
			<scope>runtime</scope>
			<optional>true</optional>
		</dependency>
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-security</artifactId>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-api</artifactId>
            <version>0.11.5</version>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-impl</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt-jackson</artifactId>
            <version>0.11.5</version>
            <scope>runtime</scope>
        </dependency>
        <!-- Dependencia para validaciones -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-validation</artifactId>
        </dependency>
        <!-- H2 Database para testing -->
        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <scope>runtime</scope>
        </dependency>
	</dependencies>
 
 	<build>
		<plugins>
			<plugin>
				<groupId>org.apache.maven.plugins</groupId>
				<artifactId>maven-compiler-plugin</artifactId>
				<configuration>
					<annotationProcessorPaths>
						<path>
							<groupId>org.projectlombok</groupId>
							<artifactId>lombok</artifactId>
						</path>
					</annotationProcessorPaths>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
				<configuration>
					<excludes>
						<exclude>
							<groupId>org.projectlombok</groupId>
							<artifactId>lombok</artifactId>
						</exclude>
					</excludes>
				</configuration>
			</plugin>
		</plugins>
	</build>

</project>

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/PosFinanzasBackendApplication.java`:

```java
package com.posfin.pos_finanzas_backend;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
public class PosFinanzasBackendApplication {

	public static void main(String[] args) {
		SpringApplication.run(PosFinanzasBackendApplication.class, args);
	}
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/config/DatabaseCleanupRunner.java`:

```java

package com.posfin.pos_finanzas_backend.config;

import org.springframework.beans.factory.InitializingBean;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.core.annotation.Order;
import org.springframework.stereotype.Component;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

/**
 * Componente que se ejecuta al iniciar la aplicación para limpiar datos NULL
 * en la base de datos que podrían causar problemas con las validaciones.
 */
@Component
@Order(1)
public class DatabaseCleanupRunner implements InitializingBean {

    @Autowired
    private DataSource dataSource;

    @Override
    public void afterPropertiesSet() throws Exception {
        try (Connection connection = dataSource.getConnection()) {
            // Limpiar valores NULL en clave_movimiento
            cleanupClaveMovimiento(connection);

            // Limpiar valores NULL en cantidades de inventario
            cleanupInventarioCantidades(connection);

            System.out.println("✓ Limpieza de base de datos completada exitosamente");
        } catch (SQLException e) {
            System.err.println("⚠ Error durante la limpieza de base de datos: " + e.getMessage());
            // No lanzar excepción para no impedir el inicio de la aplicación
        }
    }

    private void cleanupClaveMovimiento(Connection connection) throws SQLException {
        String updateQuery = "UPDATE movimientos_inventarios SET clave_movimiento = CONCAT('MIGRATION-', id) WHERE clave_movimiento IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updateQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("✓ Corregidos " + updatedRows + " registros NULL en clave_movimiento");
            }
        }
    }

    private void cleanupInventarioCantidades(Connection connection) throws SQLException {
        // Limpiar cantidad_pz NULL
        String updatePzQuery = "UPDATE inventarios SET cantidad_pz = 0 WHERE cantidad_pz IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updatePzQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("✓ Corregidos " + updatedRows + " registros NULL en cantidad_pz");
            }
        }

        // Limpiar cantidad_kg NULL
        String updateKgQuery = "UPDATE inventarios SET cantidad_kg = 0 WHERE cantidad_kg IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updateKgQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("✓ Corregidos " + updatedRows + " registros NULL en cantidad_kg");
            }
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/config/DatabaseMigrationConfig.java`:

```java
package com.posfin.pos_finanzas_backend.config;

import org.springframework.boot.ApplicationRunner;
import org.springframework.boot.ApplicationArguments;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.core.annotation.Order;

import javax.sql.DataSource;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

/**
 * Configuración que ejecuta scripts de migración de datos antes del inicio
 * completo
 */
@Configuration
@Order(1)
public class DatabaseMigrationConfig implements ApplicationRunner {

    @Autowired
    private DataSource dataSource;

    @Override
    public void run(ApplicationArguments args) throws Exception {
        System.out.println("🔧 Ejecutando migración de datos...");

        try (Connection connection = dataSource.getConnection()) {
            // Limpiar valores NULL en clave_movimiento
            cleanupClaveMovimiento(connection);

            // Limpiar valores NULL en cantidades de inventario
            cleanupInventarioCantidades(connection);

            System.out.println("✅ Migración de datos completada exitosamente");
        } catch (SQLException e) {
            System.err.println("❌ Error durante la migración de datos: " + e.getMessage());
        }
    }

    private void cleanupClaveMovimiento(Connection connection) throws SQLException {
        String updateQuery = "UPDATE movimientos_inventarios SET clave_movimiento = CONCAT('MIGRATION-', id) WHERE clave_movimiento IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updateQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("  ✓ Corregidos " + updatedRows + " registros NULL en clave_movimiento");
            }
        }
    }

    private void cleanupInventarioCantidades(Connection connection) throws SQLException {
        // Limpiar cantidad_pz NULL
        String updatePzQuery = "UPDATE inventarios SET cantidad_pz = 0 WHERE cantidad_pz IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updatePzQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("  ✓ Corregidos " + updatedRows + " registros NULL en cantidad_pz");
            }
        }

        // Limpiar cantidad_kg NULL
        String updateKgQuery = "UPDATE inventarios SET cantidad_kg = 0 WHERE cantidad_kg IS NULL";
        try (PreparedStatement stmt = connection.prepareStatement(updateKgQuery)) {
            int updatedRows = stmt.executeUpdate();
            if (updatedRows > 0) {
                System.out.println("  ✓ Corregidos " + updatedRows + " registros NULL en cantidad_kg");
            }
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/config/JwtRequestFilter.java`:

```java
package com.posfin.pos_finanzas_backend.config;

import com.posfin.pos_finanzas_backend.services.JwtService;
import jakarta.servlet.FilterChain;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.lang.NonNull;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;

import java.io.IOException;
import java.util.ArrayList;

@Component
public class JwtRequestFilter extends OncePerRequestFilter {

    @Autowired
    private JwtService jwtService;

    @Override
    protected void doFilterInternal(@NonNull HttpServletRequest request, @NonNull HttpServletResponse response,
            @NonNull FilterChain chain)
            throws ServletException, IOException {

        final String requestTokenHeader = request.getHeader("Authorization");

        String username = null;
        String jwtToken = null;

        // JWT Token está en el form "Bearer token". Remove Bearer word and get only the
        // Token
        if (requestTokenHeader != null && requestTokenHeader.startsWith("Bearer ")) {
            jwtToken = requestTokenHeader.substring(7);
            try {
                username = jwtService.extractUsername(jwtToken);
            } catch (Exception e) {
                logger.warn("JWT Token has expired or is invalid");
            }
        }

        // Una vez obtenemos el token, validamos.
        if (username != null && SecurityContextHolder.getContext().getAuthentication() == null) {

            // Si el token es válido, configuramos Spring Security para establecer la
            // autenticación manualmente
            if (jwtService.validateToken(jwtToken, username)) {

                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(
                        username, null, new ArrayList<>());
                usernamePasswordAuthenticationToken
                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
                // Después de establecer la autenticación en el contexto, especificamos
                // que el usuario actual está autenticado. Así pasa los filtros de Spring
                // Security.
                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);
            }
        }
        chain.doFilter(request, response);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/config/SecurityConfig.java`:

```java
package com.posfin.pos_finanzas_backend.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;
import org.springframework.web.cors.CorsConfiguration;
import org.springframework.web.cors.CorsConfigurationSource;
import org.springframework.web.cors.UrlBasedCorsConfigurationSource;

import java.util.Arrays;

import static org.springframework.http.HttpMethod.OPTIONS;
import static org.springframework.security.config.Customizer.withDefaults;

@Configuration
@EnableWebSecurity
public class SecurityConfig {

    @Autowired
    private JwtRequestFilter jwtRequestFilter;

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .cors(withDefaults()) // Habilitar CORS
                .csrf(csrf -> csrf.disable())
                .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(auth -> auth
                        .requestMatchers(OPTIONS, "/**").permitAll() // Permitir todas las peticiones OPTIONS
                        .requestMatchers("/api/auth/**").permitAll() // Permitir acceso a la autenticación
                        .requestMatchers("/api/**").permitAll() // DESARROLLO: Permitir acceso a todas las APIs sin
                                                                // autenticación
                        .requestMatchers("/actuator/**").permitAll() // Permitir acceso a actuator
                        .anyRequest().authenticated() // Requerir autenticación para el resto
                )
                .addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);

        return http.build();
    }

    @Bean
    CorsConfigurationSource corsConfigurationSource() {
        CorsConfiguration configuration = new CorsConfiguration();
        configuration.setAllowedOrigins(Arrays.asList(
                "https://pos-finanzas-q2ddz.ondigitalocean.app",
                "http://localhost:5173"));
        configuration.setAllowedMethods(Arrays.asList("GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"));
        configuration.setAllowedHeaders(Arrays.asList("Authorization", "Content-Type"));
        configuration.setAllowCredentials(true);
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration("/**", configuration);
        return source;
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/AuthController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.dtos.UsuariosDTO;
import com.posfin.pos_finanzas_backend.dtos.LoginResponseDTO;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import com.posfin.pos_finanzas_backend.services.JwtService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.web.bind.annotation.*;

import java.util.HashMap;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/auth")
public class AuthController {

    @Autowired
    private UsuariosRepository usuariosRepository;

    @Autowired
    private JwtService jwtService;

    @Autowired
    private PasswordEncoder passwordEncoder;

    @PostMapping("/login")
    public ResponseEntity<?> login(@RequestBody Map<String, String> credentials) {
        try {
            String nombre = credentials.get("nombre");
            String contrasena = credentials.get("contrasena");

            if (nombre == null || contrasena == null) {
                return ResponseEntity.badRequest().body("Nombre de usuario y contraseña son requeridos");
            }

            // Buscar usuario por nombre
            Optional<Usuarios> usuarioOpt = usuariosRepository.findByNombre(nombre);

            if (usuarioOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Usuario no encontrado");
            }

            Usuarios usuario = usuarioOpt.get();

            // ✅ VALIDACIÓN CRÍTICA: Verificar que el usuario esté activo ANTES de verificar
            // la contraseña
            if (usuario.getEstados() == null || !"Activo".equals(usuario.getEstados().getEstado())) {
                return ResponseEntity.badRequest().body("Usuario inactivo");
            }

            // Verificar contraseña usando BCrypt para usuarios nuevos, fallback a texto
            // plano para usuarios existentes
            boolean contrasenaValida = false;
            if (usuario.getContrasena().startsWith("$2a$") || usuario.getContrasena().startsWith("$2b$")
                    || usuario.getContrasena().startsWith("$2y$")) {
                // Contraseña hasheada con BCrypt
                contrasenaValida = passwordEncoder.matches(contrasena, usuario.getContrasena());
            } else {
                // Contraseña en texto plano (para compatibilidad con usuarios existentes)
                contrasenaValida = contrasena.equals(usuario.getContrasena());
            }

            if (!contrasenaValida) {
                return ResponseEntity.badRequest().body("Contraseña incorrecta");
            }

            // Crear DTO para respuesta (sin incluir la contraseña)
            UsuariosDTO dto = new UsuariosDTO();
            dto.setId(usuario.getId());
            dto.setNombre(usuario.getNombre());
            dto.setTelefono(usuario.getTelefono());

            if (usuario.getRoles() != null) {
                dto.setRolesId(usuario.getRoles().getId());
                dto.setRolesRoles(usuario.getRoles().getRoles());
            }

            if (usuario.getEstados() != null) {
                dto.setEstadosId(usuario.getEstados().getId());
                dto.setEstadosEstado(usuario.getEstados().getEstado());
            }

            // Generar el token JWT
            String token = jwtService.generateToken(usuario.getNombre(), usuario.getId());

            // Crear respuesta con LoginResponseDTO que incluye rol del usuario
            String rolNombre = (usuario.getRoles() != null) ? usuario.getRoles().getRoles() : "Sin Rol";
            String rolId = (usuario.getRoles() != null) ? usuario.getRoles().getId() : null;

            // Token expira en 24 horas (86400000 ms)
            long expiresIn = 24 * 60 * 60 * 1000;

            LoginResponseDTO response = new LoginResponseDTO(
                    token,
                    usuario.getNombre(),
                    rolNombre,
                    rolId,
                    expiresIn);

            return ResponseEntity.ok(response);
        } catch (Exception e) {
            return ResponseEntity.badRequest().body("Error en el login: " + e.getMessage());
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/CategoriaPersonasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.CategoriaPersonas;
import com.posfin.pos_finanzas_backend.repositories.CategoriaPersonasRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.Map;

@RestController
@RequestMapping("/api/categoria_personas")
public class CategoriaPersonasController {
    @Autowired
    private CategoriaPersonasRepository categoriaPersonasRepository;

    @GetMapping
    public List<CategoriaPersonas> getAllCategoriasPersonas() {
        return categoriaPersonasRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<CategoriaPersonas> getCategoriaPersonaById(@PathVariable String id) {
        Optional<CategoriaPersonas> categoriaPersona = categoriaPersonasRepository.findById(id);
        return categoriaPersona.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public CategoriaPersonas createCategoriaPersona(@RequestBody CategoriaPersonas categoriaPersona) {
        return categoriaPersonasRepository.save(categoriaPersona);
    }

    @PutMapping("/{id}")
    public ResponseEntity<CategoriaPersonas> updateCategoriaPersona(@PathVariable String id,
            @RequestBody CategoriaPersonas categoriaPersonaDetails) {
        Optional<CategoriaPersonas> optionalCategoriaPersona = categoriaPersonasRepository.findById(id);
        if (!optionalCategoriaPersona.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        CategoriaPersonas categoriaPersona = optionalCategoriaPersona.get();
        categoriaPersona.setCategoria(categoriaPersonaDetails.getCategoria());
        return ResponseEntity.ok(categoriaPersonasRepository.save(categoriaPersona));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteCategoriaPersona(@PathVariable String id) {
        if (!categoriaPersonasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        categoriaPersonasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateCategoriaPersona(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<CategoriaPersonas> categoriaPersonaOptional = categoriaPersonasRepository.findById(id);
        if (categoriaPersonaOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        CategoriaPersonas categoriaPersonaExistente = categoriaPersonaOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("categoria")) {
            categoriaPersonaExistente.setCategoria((String) updates.get("categoria"));
        }

        // 3. Guardar y devolver
        CategoriaPersonas categoriaPersonaActualizada = categoriaPersonasRepository.save(categoriaPersonaExistente);
        return ResponseEntity.ok(categoriaPersonaActualizada);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/CategoriasProductosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.CategoriasProductos;
import com.posfin.pos_finanzas_backend.repositories.CategoriasProductosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.Map;

@RestController
@RequestMapping("/api/categorias-productos")
public class CategoriasProductosController {
    @Autowired
    private CategoriasProductosRepository categoriasProductosRepository;

    @GetMapping
    public List<CategoriasProductos> getAllCategoriasProductos() {
        return categoriasProductosRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<CategoriasProductos> getCategoriaProductoById(@PathVariable String id) {
        Optional<CategoriasProductos> categoriaProducto = categoriasProductosRepository.findById(id);
        return categoriaProducto.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public CategoriasProductos createCategoriaProducto(@RequestBody CategoriasProductos categoriaProducto) {
        return categoriasProductosRepository.save(categoriaProducto);
    }

    @PutMapping("/{id}")
    public ResponseEntity<CategoriasProductos> updateCategoriaProducto(@PathVariable String id,
            @RequestBody CategoriasProductos categoriaProductoDetails) {
        Optional<CategoriasProductos> optionalCategoriaProducto = categoriasProductosRepository.findById(id);
        if (!optionalCategoriaProducto.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        CategoriasProductos categoriaProducto = optionalCategoriaProducto.get();
        categoriaProducto.setCategoria(categoriaProductoDetails.getCategoria());
        return ResponseEntity.ok(categoriasProductosRepository.save(categoriaProducto));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteCategoriaProducto(@PathVariable String id) {
        if (!categoriasProductosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        categoriasProductosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateCategoriaProducto(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<CategoriasProductos> categoriaProductoOptional = categoriasProductosRepository.findById(id);
        if (categoriaProductoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        CategoriasProductos categoriaProductoExistente = categoriaProductoOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("categoria")) {
            categoriaProductoExistente.setCategoria((String) updates.get("categoria"));
        }

        // 3. Guardar y devolver
        CategoriasProductos categoriaProductoActualizada = categoriasProductosRepository
                .save(categoriaProductoExistente);
        return ResponseEntity.ok(categoriaProductoActualizada);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/ComprasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.dtos.*;
import com.posfin.pos_finanzas_backend.services.ComprasService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

/**
 * Controlador REST para gestión de compras a proveedores
 */
@RestController
@RequestMapping("/api")
@CrossOrigin(origins = "*")
public class ComprasController {

    @Autowired
    private ComprasService comprasService;

    /**
     * Obtiene lista de proveedores activos con estado de deuda
     * GET /api/proveedores
     */
    @GetMapping("/proveedores")
    public ResponseEntity<List<ProveedorDTO>> obtenerProveedores() {
        try {
            List<ProveedorDTO> proveedores = comprasService.obtenerProveedores();
            return ResponseEntity.ok(proveedores);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }

    /**
     * Calcula la deuda pendiente de un proveedor específico
     * GET /api/proveedores/{id}/deuda
     */
    @GetMapping("/proveedores/{id}/deuda")
    public ResponseEntity<DeudaProveedorDTO> calcularDeudaProveedor(@PathVariable String id) {
        try {
            DeudaProveedorDTO deuda = comprasService.calcularDeudaProveedor(id);
            return ResponseEntity.ok(deuda);
        } catch (IllegalArgumentException e) {
            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }

    /**
     * Obtiene productos de un proveedor específico con precios de compra
     * GET /api/productos/proveedor/{id}
     */
    @GetMapping("/productos/proveedor/{id}")
    public ResponseEntity<List<ProductosDTO>> obtenerProductosProveedor(@PathVariable String id) {
        try {
            List<ProductosDTO> productos = comprasService.obtenerProductosProveedor(id);
            return ResponseEntity.ok(productos);
        } catch (IllegalArgumentException e) {
            return ResponseEntity.status(HttpStatus.NOT_FOUND).body(null);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }

    /**
     * Crea una nueva orden de compra
     * POST /api/ordenes-compras
     */
    @PostMapping("/ordenes-compras")
    public ResponseEntity<OrdenesDeComprasDTO> crearOrdenCompra(@RequestBody CompraRequestDTO compraRequest) {
        try {
            // Validar datos de entrada
            if (compraRequest.getProveedorId() == null || compraRequest.getProveedorId().trim().isEmpty()) {
                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
            }
            
            if (compraRequest.getProductos() == null || compraRequest.getProductos().isEmpty()) {
                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
            }
            
            OrdenesDeComprasDTO ordenCreada = comprasService.crearOrdenCompra(compraRequest);
            return ResponseEntity.status(HttpStatus.CREATED).body(ordenCreada);
            
        } catch (IllegalArgumentException e) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
        } catch (IllegalStateException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT).body(null);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }

    /**
     * Registra un pago a proveedor
     * POST /api/proveedores/{id}/pago
     */
    @PostMapping("/proveedores/{id}/pago")
    public ResponseEntity<HistorialCargosProveedoresDTO> realizarPago(@PathVariable String id, 
                                                                     @RequestBody PagoRequestDTO pagoRequest) {
        try {
            // Validar datos de entrada
            if (pagoRequest.getOrdenCompraId() == null || pagoRequest.getOrdenCompraId().trim().isEmpty()) {
                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
            }
            
            if (pagoRequest.getMetodoPagoId() == null || pagoRequest.getMetodoPagoId().trim().isEmpty()) {
                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
            }
            
            if (!pagoRequest.isPagarTodoElTotal() && 
                (pagoRequest.getMontoPagado() == null || pagoRequest.getMontoPagado().signum() <= 0)) {
                return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
            }
            
            // Asegurar que el proveedor del path coincida con el del request
            pagoRequest.setProveedorId(id);
            
            HistorialCargosProveedoresDTO pagoRegistrado = comprasService.realizarPago(pagoRequest);
            return ResponseEntity.status(HttpStatus.CREATED).body(pagoRegistrado);
            
        } catch (IllegalArgumentException e) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
        } catch (IllegalStateException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT).body(null);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }

    /**
     * Endpoint alternativo para crear orden de compra y obtener deuda actualizada
     * POST /api/proveedores/{id}/compra
     */
    @PostMapping("/proveedores/{id}/compra")
    public ResponseEntity<DeudaProveedorDTO> crearCompraYObtenerDeuda(@PathVariable String id,
                                                                     @RequestBody CompraRequestDTO compraRequest) {
        try {
            // Asegurar que el proveedor del path coincida con el del request
            compraRequest.setProveedorId(id);
            
            // Crear orden de compra
            comprasService.crearOrdenCompra(compraRequest);
            
            // Retornar deuda actualizada
            DeudaProveedorDTO deudaActualizada = comprasService.calcularDeudaProveedor(id);
            return ResponseEntity.status(HttpStatus.CREATED).body(deudaActualizada);
            
        } catch (IllegalArgumentException e) {
            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(null);
        } catch (IllegalStateException e) {
            return ResponseEntity.status(HttpStatus.CONFLICT).body(null);
        } catch (Exception e) {
            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(null);
        }
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/DetallesOrdenesDeComprasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.DetallesOrdenesDeCompras;
import com.posfin.pos_finanzas_backend.models.OrdenesDeCompras;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.HistorialCostos;
import com.posfin.pos_finanzas_backend.dtos.DetallesOrdenesDeComprasDTO;
import com.posfin.pos_finanzas_backend.repositories.DetallesOrdenesDeComprasRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeComprasRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialCostosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;

@RestController
@RequestMapping("/api/detalles-ordenes-de-compras")
public class DetallesOrdenesDeComprasController {

    @Autowired
    private DetallesOrdenesDeComprasRepository detallesOrdenesDeComprasRepository;

    @Autowired
    private OrdenesDeComprasRepository ordenesDeComprasRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private HistorialCostosRepository historialCostosRepository;

    @GetMapping
    public List<DetallesOrdenesDeComprasDTO> getAllDetallesOrdenesDeCompras() {
        List<DetallesOrdenesDeCompras> detalles = detallesOrdenesDeComprasRepository.findAll();
        List<DetallesOrdenesDeComprasDTO> detallesDTO = new ArrayList<>();

        for (DetallesOrdenesDeCompras detalle : detalles) {
            DetallesOrdenesDeComprasDTO dto = new DetallesOrdenesDeComprasDTO();
            dto.setId(detalle.getId());
            dto.setCantidadPz(detalle.getCantidadPz());
            dto.setCantidadKg(detalle.getCantidadKg());

            // Mapear relaciones aplanadas
            dto.setOrdenDeCompraId(detalle.getOrdenDeCompra().getId());
            dto.setProductoId(detalle.getProducto().getId());
            dto.setProductoNombre(detalle.getProducto().getNombre());
            dto.setHistorialCostoId(detalle.getHistorialCosto().getId());
            dto.setCosto(detalle.getHistorialCosto().getCosto());

            detallesDTO.add(dto);
        }

        return detallesDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<DetallesOrdenesDeComprasDTO> getDetalleOrdenDeCompraById(@PathVariable String id) {
        Optional<DetallesOrdenesDeCompras> optionalDetalle = detallesOrdenesDeComprasRepository.findById(id);

        if (!optionalDetalle.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        DetallesOrdenesDeCompras detalle = optionalDetalle.get();
        DetallesOrdenesDeComprasDTO dto = new DetallesOrdenesDeComprasDTO();
        dto.setId(detalle.getId());
        dto.setCantidadPz(detalle.getCantidadPz());
        dto.setCantidadKg(detalle.getCantidadKg());

        // Mapear relaciones aplanadas
        dto.setOrdenDeCompraId(detalle.getOrdenDeCompra().getId());
        dto.setProductoId(detalle.getProducto().getId());
        dto.setProductoNombre(detalle.getProducto().getNombre());
        dto.setHistorialCostoId(detalle.getHistorialCosto().getId());
        dto.setCosto(detalle.getHistorialCosto().getCosto());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<DetallesOrdenesDeComprasDTO> createDetalleOrdenDeCompra(
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String ordenDeCompraId = (String) requestBody.get("ordenDeCompraId");
            String productoId = (String) requestBody.get("productoId");
            String historialCostoId = (String) requestBody.get("historialCostoId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<OrdenesDeCompras> ordenDeCompra = ordenesDeComprasRepository.findById(ordenDeCompraId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialCostos> historialCosto = historialCostosRepository.findById(historialCostoId);

            if (!ordenDeCompra.isPresent() || !producto.isPresent() || !historialCosto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el detalle
            DetallesOrdenesDeCompras detalle = new DetallesOrdenesDeCompras();
            detalle.setOrdenDeCompra(ordenDeCompra.get());
            detalle.setProducto(producto.get());
            detalle.setHistorialCosto(historialCosto.get());
            detalle.setCantidadPz(cantidadPz);
            detalle.setCantidadKg(cantidadKg);

            // Guardar
            DetallesOrdenesDeCompras savedDetalle = detallesOrdenesDeComprasRepository.save(detalle);

            // Crear DTO para respuesta
            DetallesOrdenesDeComprasDTO dto = new DetallesOrdenesDeComprasDTO();
            dto.setId(savedDetalle.getId());
            dto.setCantidadPz(savedDetalle.getCantidadPz());
            dto.setCantidadKg(savedDetalle.getCantidadKg());
            dto.setOrdenDeCompraId(savedDetalle.getOrdenDeCompra().getId());
            dto.setProductoId(savedDetalle.getProducto().getId());
            dto.setProductoNombre(savedDetalle.getProducto().getNombre());
            dto.setHistorialCostoId(savedDetalle.getHistorialCosto().getId());
            dto.setCosto(savedDetalle.getHistorialCosto().getCosto());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<DetallesOrdenesDeComprasDTO> updateDetalleOrdenDeCompra(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<DetallesOrdenesDeCompras> optionalDetalle = detallesOrdenesDeComprasRepository.findById(id);
            if (!optionalDetalle.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            DetallesOrdenesDeCompras detalle = optionalDetalle.get();

            // Obtener datos del request
            String ordenDeCompraId = (String) requestBody.get("ordenDeCompraId");
            String productoId = (String) requestBody.get("productoId");
            String historialCostoId = (String) requestBody.get("historialCostoId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<OrdenesDeCompras> ordenDeCompra = ordenesDeComprasRepository.findById(ordenDeCompraId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialCostos> historialCosto = historialCostosRepository.findById(historialCostoId);

            if (!ordenDeCompra.isPresent() || !producto.isPresent() || !historialCosto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el detalle
            detalle.setOrdenDeCompra(ordenDeCompra.get());
            detalle.setProducto(producto.get());
            detalle.setHistorialCosto(historialCosto.get());
            detalle.setCantidadPz(cantidadPz);
            detalle.setCantidadKg(cantidadKg);

            // Guardar
            DetallesOrdenesDeCompras savedDetalle = detallesOrdenesDeComprasRepository.save(detalle);

            // Crear DTO para respuesta
            DetallesOrdenesDeComprasDTO dto = new DetallesOrdenesDeComprasDTO();
            dto.setId(savedDetalle.getId());
            dto.setCantidadPz(savedDetalle.getCantidadPz());
            dto.setCantidadKg(savedDetalle.getCantidadKg());
            dto.setOrdenDeCompraId(savedDetalle.getOrdenDeCompra().getId());
            dto.setProductoId(savedDetalle.getProducto().getId());
            dto.setProductoNombre(savedDetalle.getProducto().getNombre());
            dto.setHistorialCostoId(savedDetalle.getHistorialCosto().getId());
            dto.setCosto(savedDetalle.getHistorialCosto().getCosto());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteDetalleOrdenDeCompra(@PathVariable String id) {
        if (!detallesOrdenesDeComprasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        detallesOrdenesDeComprasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateDetalleOrdenDeCompra(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<DetallesOrdenesDeCompras> detalleOptional = detallesOrdenesDeComprasRepository.findById(id);
        if (detalleOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        DetallesOrdenesDeCompras detalleExistente = detalleOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("cantidadPz")) {
            Number cantidadPzValue = (Number) updates.get("cantidadPz");
            detalleExistente.setCantidadPz(new BigDecimal(cantidadPzValue.toString()));
        }
        if (updates.containsKey("cantidadKg")) {
            Number cantidadKgValue = (Number) updates.get("cantidadKg");
            detalleExistente.setCantidadKg(new BigDecimal(cantidadKgValue.toString()));
        }

        // 3. Lógica para actualizar la relación con OrdenesDeCompras
        if (updates.containsKey("ordenDeCompra")) {
            Map<String, String> ordenDeCompraMap = (Map<String, String>) updates.get("ordenDeCompra");
            String ordenDeCompraId = ordenDeCompraMap.get("id");
            Optional<OrdenesDeCompras> ordenDeCompraOpt = ordenesDeComprasRepository.findById(ordenDeCompraId);
            if (ordenDeCompraOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: La Orden de Compra con ID " + ordenDeCompraId + " no existe.");
            }
            detalleExistente.setOrdenDeCompra(ordenDeCompraOpt.get());
        }

        // 4. Lógica para actualizar la relación con Productos
        if (updates.containsKey("producto")) {
            Map<String, String> productoMap = (Map<String, String>) updates.get("producto");
            String productoId = productoMap.get("id");
            Optional<Productos> productoOpt = productosRepository.findById(productoId);
            if (productoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productoId + " no existe.");
            }
            detalleExistente.setProducto(productoOpt.get());
        }

        // 5. Lógica para actualizar la relación con HistorialCostos
        if (updates.containsKey("historialCosto")) {
            Map<String, String> historialCostoMap = (Map<String, String>) updates.get("historialCosto");
            String historialCostoId = historialCostoMap.get("id");
            Optional<HistorialCostos> historialCostoOpt = historialCostosRepository.findById(historialCostoId);
            if (historialCostoOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El Historial de Costo con ID " + historialCostoId + " no existe.");
            }
            detalleExistente.setHistorialCosto(historialCostoOpt.get());
        }

        // 6. Guardar y devolver
        DetallesOrdenesDeCompras detalleActualizado = detallesOrdenesDeComprasRepository.save(detalleExistente);

        // Crear DTO para respuesta
        DetallesOrdenesDeComprasDTO dto = new DetallesOrdenesDeComprasDTO();
        dto.setId(detalleActualizado.getId());
        dto.setCantidadPz(detalleActualizado.getCantidadPz());
        dto.setCantidadKg(detalleActualizado.getCantidadKg());
        dto.setOrdenDeCompraId(detalleActualizado.getOrdenDeCompra().getId());
        dto.setProductoId(detalleActualizado.getProducto().getId());
        dto.setProductoNombre(detalleActualizado.getProducto().getNombre());
        dto.setHistorialCostoId(detalleActualizado.getHistorialCosto().getId());
        dto.setCosto(detalleActualizado.getHistorialCosto().getCosto());

        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/DetallesOrdenesDeVentasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.DetallesOrdenesDeVentas;
import com.posfin.pos_finanzas_backend.models.OrdenesDeVentas;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.dtos.DetallesOrdenesDeVentasDTO;
import com.posfin.pos_finanzas_backend.repositories.DetallesOrdenesDeVentasRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeVentasRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialPreciosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;

@RestController
@RequestMapping("/api/detalles-ordenes-de-ventas")
public class DetallesOrdenesDeVentasController {

    @Autowired
    private DetallesOrdenesDeVentasRepository detallesOrdenesDeVentasRepository;

    @Autowired
    private OrdenesDeVentasRepository ordenesDeVentasRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @GetMapping
    public List<DetallesOrdenesDeVentasDTO> getAllDetallesOrdenesDeVentas() {
        List<DetallesOrdenesDeVentas> detalles = detallesOrdenesDeVentasRepository.findAll();
        List<DetallesOrdenesDeVentasDTO> detallesDTO = new ArrayList<>();

        for (DetallesOrdenesDeVentas detalle : detalles) {
            DetallesOrdenesDeVentasDTO dto = new DetallesOrdenesDeVentasDTO();
            dto.setId(detalle.getId());
            dto.setCantidadPz(detalle.getCantidadPz());
            dto.setCantidadKg(detalle.getCantidadKg());

            // Mapear relaciones aplanadas
            dto.setOrdenDeVentaId(detalle.getOrdenDeVenta().getId());
            dto.setProductoId(detalle.getProducto().getId());
            dto.setProductoNombre(detalle.getProducto().getNombre());
            dto.setHistorialPrecioId(detalle.getHistorialPrecio().getId());
            dto.setPrecio(detalle.getHistorialPrecio().getPrecio());

            detallesDTO.add(dto);
        }

        return detallesDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<DetallesOrdenesDeVentasDTO> getDetalleOrdenDeVentaById(@PathVariable String id) {
        Optional<DetallesOrdenesDeVentas> optionalDetalle = detallesOrdenesDeVentasRepository.findById(id);

        if (!optionalDetalle.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        DetallesOrdenesDeVentas detalle = optionalDetalle.get();
        DetallesOrdenesDeVentasDTO dto = new DetallesOrdenesDeVentasDTO();
        dto.setId(detalle.getId());
        dto.setCantidadPz(detalle.getCantidadPz());
        dto.setCantidadKg(detalle.getCantidadKg());

        // Mapear relaciones aplanadas
        dto.setOrdenDeVentaId(detalle.getOrdenDeVenta().getId());
        dto.setProductoId(detalle.getProducto().getId());
        dto.setProductoNombre(detalle.getProducto().getNombre());
        dto.setHistorialPrecioId(detalle.getHistorialPrecio().getId());
        dto.setPrecio(detalle.getHistorialPrecio().getPrecio());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<DetallesOrdenesDeVentasDTO> createDetalleOrdenDeVenta(
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String ordenDeVentaId = (String) requestBody.get("ordenDeVentaId");
            String productoId = (String) requestBody.get("productoId");
            String historialPrecioId = (String) requestBody.get("historialPrecioId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<OrdenesDeVentas> ordenDeVenta = ordenesDeVentasRepository.findById(ordenDeVentaId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialPrecios> historialPrecio = historialPreciosRepository.findById(historialPrecioId);

            if (!ordenDeVenta.isPresent() || !producto.isPresent() || !historialPrecio.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el detalle
            DetallesOrdenesDeVentas detalle = new DetallesOrdenesDeVentas();
            detalle.setOrdenDeVenta(ordenDeVenta.get());
            detalle.setProducto(producto.get());
            detalle.setHistorialPrecio(historialPrecio.get());
            detalle.setCantidadPz(cantidadPz);
            detalle.setCantidadKg(cantidadKg);

            // Guardar
            DetallesOrdenesDeVentas savedDetalle = detallesOrdenesDeVentasRepository.save(detalle);

            // Crear DTO para respuesta
            DetallesOrdenesDeVentasDTO dto = new DetallesOrdenesDeVentasDTO();
            dto.setId(savedDetalle.getId());
            dto.setCantidadPz(savedDetalle.getCantidadPz());
            dto.setCantidadKg(savedDetalle.getCantidadKg());
            dto.setOrdenDeVentaId(savedDetalle.getOrdenDeVenta().getId());
            dto.setProductoId(savedDetalle.getProducto().getId());
            dto.setProductoNombre(savedDetalle.getProducto().getNombre());
            dto.setHistorialPrecioId(savedDetalle.getHistorialPrecio().getId());
            dto.setPrecio(savedDetalle.getHistorialPrecio().getPrecio());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<DetallesOrdenesDeVentasDTO> updateDetalleOrdenDeVenta(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<DetallesOrdenesDeVentas> optionalDetalle = detallesOrdenesDeVentasRepository.findById(id);
            if (!optionalDetalle.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            DetallesOrdenesDeVentas detalle = optionalDetalle.get();

            // Obtener datos del request
            String ordenDeVentaId = (String) requestBody.get("ordenDeVentaId");
            String productoId = (String) requestBody.get("productoId");
            String historialPrecioId = (String) requestBody.get("historialPrecioId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<OrdenesDeVentas> ordenDeVenta = ordenesDeVentasRepository.findById(ordenDeVentaId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialPrecios> historialPrecio = historialPreciosRepository.findById(historialPrecioId);

            if (!ordenDeVenta.isPresent() || !producto.isPresent() || !historialPrecio.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el detalle
            detalle.setOrdenDeVenta(ordenDeVenta.get());
            detalle.setProducto(producto.get());
            detalle.setHistorialPrecio(historialPrecio.get());
            detalle.setCantidadPz(cantidadPz);
            detalle.setCantidadKg(cantidadKg);

            // Guardar
            DetallesOrdenesDeVentas savedDetalle = detallesOrdenesDeVentasRepository.save(detalle);

            // Crear DTO para respuesta
            DetallesOrdenesDeVentasDTO dto = new DetallesOrdenesDeVentasDTO();
            dto.setId(savedDetalle.getId());
            dto.setCantidadPz(savedDetalle.getCantidadPz());
            dto.setCantidadKg(savedDetalle.getCantidadKg());
            dto.setOrdenDeVentaId(savedDetalle.getOrdenDeVenta().getId());
            dto.setProductoId(savedDetalle.getProducto().getId());
            dto.setProductoNombre(savedDetalle.getProducto().getNombre());
            dto.setHistorialPrecioId(savedDetalle.getHistorialPrecio().getId());
            dto.setPrecio(savedDetalle.getHistorialPrecio().getPrecio());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteDetalleOrdenDeVenta(@PathVariable String id) {
        if (!detallesOrdenesDeVentasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        detallesOrdenesDeVentasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateDetalleOrdenDeVenta(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<DetallesOrdenesDeVentas> detalleOptional = detallesOrdenesDeVentasRepository.findById(id);
        if (detalleOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        DetallesOrdenesDeVentas detalleExistente = detalleOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("cantidadPz")) {
            Number cantidadPzValue = (Number) updates.get("cantidadPz");
            detalleExistente.setCantidadPz(new BigDecimal(cantidadPzValue.toString()));
        }
        if (updates.containsKey("cantidadKg")) {
            Number cantidadKgValue = (Number) updates.get("cantidadKg");
            detalleExistente.setCantidadKg(new BigDecimal(cantidadKgValue.toString()));
        }

        // 3. Lógica para actualizar la relación con OrdenesDeVentas
        if (updates.containsKey("ordenDeVenta")) {
            Map<String, String> ordenDeVentaMap = (Map<String, String>) updates.get("ordenDeVenta");
            String ordenDeVentaId = ordenDeVentaMap.get("id");
            Optional<OrdenesDeVentas> ordenDeVentaOpt = ordenesDeVentasRepository.findById(ordenDeVentaId);
            if (ordenDeVentaOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: La Orden de Venta con ID " + ordenDeVentaId + " no existe.");
            }
            detalleExistente.setOrdenDeVenta(ordenDeVentaOpt.get());
        }

        // 4. Lógica para actualizar la relación con Productos
        if (updates.containsKey("producto")) {
            Map<String, String> productoMap = (Map<String, String>) updates.get("producto");
            String productoId = productoMap.get("id");
            Optional<Productos> productoOpt = productosRepository.findById(productoId);
            if (productoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productoId + " no existe.");
            }
            detalleExistente.setProducto(productoOpt.get());
        }

        // 5. Lógica para actualizar la relación con HistorialPrecios
        if (updates.containsKey("historialPrecio")) {
            Map<String, String> historialPrecioMap = (Map<String, String>) updates.get("historialPrecio");
            String historialPrecioId = historialPrecioMap.get("id");
            Optional<HistorialPrecios> historialPrecioOpt = historialPreciosRepository.findById(historialPrecioId);
            if (historialPrecioOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El Historial de Precio con ID " + historialPrecioId + " no existe.");
            }
            detalleExistente.setHistorialPrecio(historialPrecioOpt.get());
        }

        // 6. Guardar y devolver
        DetallesOrdenesDeVentas detalleActualizado = detallesOrdenesDeVentasRepository.save(detalleExistente);

        // Crear DTO para respuesta
        DetallesOrdenesDeVentasDTO dto = new DetallesOrdenesDeVentasDTO();
        dto.setId(detalleActualizado.getId());
        dto.setCantidadPz(detalleActualizado.getCantidadPz());
        dto.setCantidadKg(detalleActualizado.getCantidadKg());
        dto.setOrdenDeVentaId(detalleActualizado.getOrdenDeVenta().getId());
        dto.setProductoId(detalleActualizado.getProducto().getId());
        dto.setProductoNombre(detalleActualizado.getProducto().getNombre());
        dto.setHistorialPrecioId(detalleActualizado.getHistorialPrecio().getId());
        dto.setPrecio(detalleActualizado.getHistorialPrecio().getPrecio());

        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/DeudasProveedoresController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.dtos.DeudaProveedorDTO;
import com.posfin.pos_finanzas_backend.services.DeudasProveedoresService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.math.BigDecimal;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

/**
 * Controlador REST para gestionar las consultas de deudas a proveedores
 * Proporciona endpoints para obtener información detallada de deudas pendientes
 */
@RestController
@RequestMapping("/api/deudas-proveedores")
@CrossOrigin(origins = "*")
public class DeudasProveedoresController {

    @Autowired
    private DeudasProveedoresService deudasProveedoresService;

    /**
     * Obtiene la lista completa de proveedores con deudas pendientes
     * @return Lista de DTOs con información de deudas de proveedores
     */
    @GetMapping
    public ResponseEntity<List<DeudaProveedorDTO>> obtenerDeudasProveedores() {
        try {
            List<DeudaProveedorDTO> deudas = deudasProveedoresService.obtenerDeudasProveedores();
            return ResponseEntity.ok(deudas);
        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * Obtiene la deuda específica de un proveedor
     * @param proveedorId ID del proveedor
     * @return DTO con información de deuda del proveedor
     */
    @GetMapping("/{proveedorId}")
    public ResponseEntity<DeudaProveedorDTO> obtenerDeudaProveedor(@PathVariable String proveedorId) {
        try {
            DeudaProveedorDTO deuda = deudasProveedoresService.obtenerDeudaProveedor(proveedorId);
            if (deuda != null) {
                return ResponseEntity.ok(deuda);
            } else {
                return ResponseEntity.noContent().build();
            }
        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * Obtiene estadísticas generales de las deudas a proveedores
     * @return Mapa con estadísticas: total proveedores con deuda, total deudas pendientes, deuda promedio
     */
    @GetMapping("/estadisticas")
    public ResponseEntity<Map<String, Object>> obtenerEstadisticasDeudas() {
        try {
            BigDecimal[] estadisticas = deudasProveedoresService.obtenerEstadisticasDeudas();
            
            Map<String, Object> response = new HashMap<>();
            response.put("totalProveedoresConDeuda", estadisticas[0]);
            response.put("totalDeudasPendientes", estadisticas[1]);
            response.put("deudaPromedio", estadisticas[2]);
            
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * Obtiene el total de todas las deudas pendientes
     * @return Total de deudas pendientes
     */
    @GetMapping("/total")
    public ResponseEntity<Map<String, BigDecimal>> obtenerTotalDeudasPendientes() {
        try {
            BigDecimal total = deudasProveedoresService.calcularTotalDeudasPendientes();
            
            Map<String, BigDecimal> response = new HashMap<>();
            response.put("totalDeudasPendientes", total);
            
            return ResponseEntity.ok(response);
        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/EmpleadoController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.dtos.EmpleadoCreateRequestDTO;
import com.posfin.pos_finanzas_backend.dtos.EmpleadoEstadoRequestDTO;
import com.posfin.pos_finanzas_backend.dtos.EmpleadoResponseDTO;
import com.posfin.pos_finanzas_backend.services.EmpleadoService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/api/empleados")
@CrossOrigin(origins = "*")
public class EmpleadoController {

    @Autowired
    private EmpleadoService empleadoService;

    /**
     * 🔍 Obtener lista de todos los empleados para mostrar en la tabla del frontend
     * Endpoint: GET /api/empleados
     * Response: Lista de EmpleadoResponseDTO con información completa de cada
     * empleado
     */
    @GetMapping
    public ResponseEntity<List<EmpleadoResponseDTO>> obtenerTodosLosEmpleados() {
        try {
            List<EmpleadoResponseDTO> empleados = empleadoService.obtenerTodosLosEmpleados();
            return ResponseEntity.ok(empleados);
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al obtener empleados: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * ➕ Crear nuevo empleado desde el modal del frontend
     * Endpoint: POST /api/empleados
     * Request Body: EmpleadoCreateRequestDTO con datos del formulario
     * Response: EmpleadoResponseDTO del empleado creado
     */
    @PostMapping
    public ResponseEntity<?> crearEmpleado(@RequestBody EmpleadoCreateRequestDTO request) {
        try {
            // Validaciones básicas
            if (request.getNombre() == null || request.getNombre().trim().isEmpty()) {
                return ResponseEntity.badRequest().body("El nombre es requerido");
            }
            if (request.getContrasena() == null || request.getContrasena().trim().isEmpty()) {
                return ResponseEntity.badRequest().body("La contraseña es requerida");
            }
            if (request.getRolId() == null) {
                return ResponseEntity.badRequest().body("El rol es requerido");
            }

            EmpleadoResponseDTO empleado = empleadoService.crearEmpleado(request);
            return ResponseEntity.ok(empleado);
        } catch (IllegalArgumentException e) {
            // Errores de validación de negocio (ej: rol no existe, nombre duplicado)
            return ResponseEntity.badRequest().body(e.getMessage());
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al crear empleado: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().body("Error interno del servidor");
        }
    }

    /**
     * 🔄 Cambiar estado de empleado (Activo/Inactivo) desde el toggle del frontend
     * Endpoint: PUT /api/empleados/{id}/estado
     * Path Variable: id del usuario/empleado
     * Request Body: EmpleadoEstadoRequestDTO con el nuevo estado
     * Response: EmpleadoResponseDTO actualizado
     */
    @PutMapping("/{id}/estado")
    public ResponseEntity<?> cambiarEstadoEmpleado(@PathVariable String id,
            @RequestBody EmpleadoEstadoRequestDTO request) {
        try {
            // Validaciones básicas
            if (request.getEstado() == null || request.getEstado().trim().isEmpty()) {
                return ResponseEntity.badRequest().body("El estado es requerido");
            }
            if (!"Activo".equals(request.getEstado()) && !"Inactivo".equals(request.getEstado())) {
                return ResponseEntity.badRequest().body("Estado inválido. Debe ser 'Activo' o 'Inactivo'");
            }

            EmpleadoResponseDTO empleado = empleadoService.cambiarEstadoEmpleado(id, request.getEstado());
            return ResponseEntity.ok(empleado);
        } catch (IllegalArgumentException e) {
            // Errores de validación (ej: empleado no encontrado, estado no existe)
            return ResponseEntity.badRequest().body(e.getMessage());
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al cambiar estado del empleado: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().body("Error interno del servidor");
        }
    }

    /**
     * 🔍 Obtener empleado por ID (para casos específicos del frontend)
     * Endpoint: GET /api/empleados/{id}
     * Path Variable: id del usuario/empleado
     * Response: EmpleadoResponseDTO del empleado solicitado
     */
    @GetMapping("/{id}")
    public ResponseEntity<?> obtenerEmpleadoPorId(@PathVariable String id) {
        try {
            EmpleadoResponseDTO empleado = empleadoService.obtenerEmpleadoPorId(id);
            return ResponseEntity.ok(empleado);
        } catch (IllegalArgumentException e) {
            return ResponseEntity.badRequest().body(e.getMessage());
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al obtener empleado por ID: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().body("Error interno del servidor");
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/EstadosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/estados")
public class EstadosController {
    @Autowired
    private EstadosRepository estadosRepository;

    @GetMapping
    public List<Estados> getAllEstados() {
        return estadosRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<Estados> getEstadoById(@PathVariable String id) {
        Optional<Estados> estado = estadosRepository.findById(id);
        return estado.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public Estados createEstado(@RequestBody Estados estado) {
        return estadosRepository.save(estado);
    }

    @PutMapping("/{id}")
    public ResponseEntity<Estados> updateEstado(@PathVariable String id, @RequestBody Estados estadoDetails) {
        Optional<Estados> optionalEstado = estadosRepository.findById(id);
        if (!optionalEstado.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        Estados estado = optionalEstado.get();
        estado.setEstado(estadoDetails.getEstado());
        return ResponseEntity.ok(estadosRepository.save(estado));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteEstado(@PathVariable String id) {
        if (!estadosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        estadosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateEstado(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Estados> estadoOptional = estadosRepository.findById(id);
        if (estadoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Estados estadoExistente = estadoOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("estado")) {
            estadoExistente.setEstado((String) updates.get("estado"));
        }

        // 3. Guardar y devolver
        Estados estadoActualizado = estadosRepository.save(estadoExistente);
        return ResponseEntity.ok(estadoActualizado);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/HistorialCargosProveedoresController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.HistorialCargosProveedores;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.OrdenesDeCompras;
import com.posfin.pos_finanzas_backend.dtos.HistorialCargosProveedoresDTO;
import com.posfin.pos_finanzas_backend.repositories.HistorialCargosProveedoresRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeComprasRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@RestController
@RequestMapping("/api/historial-cargos-proveedores")
public class HistorialCargosProveedoresController {

    @Autowired
    private HistorialCargosProveedoresRepository historialCargosProveedoresRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private OrdenesDeComprasRepository ordenesDeComprasRepository;

    @GetMapping
    public List<HistorialCargosProveedoresDTO> getAllHistorialCargosProveedores() {
        List<HistorialCargosProveedores> historialList = historialCargosProveedoresRepository.findAll();
        List<HistorialCargosProveedoresDTO> historialDTO = new ArrayList<>();

        for (HistorialCargosProveedores historial : historialList) {
            HistorialCargosProveedoresDTO dto = new HistorialCargosProveedoresDTO();
            dto.setId(historial.getId());
            dto.setMontoPagado(historial.getMontoPagado());
            dto.setFecha(historial.getFecha());

            // Mapear relaciones aplanadas
            dto.setPersonaId(historial.getPersona().getId());
            dto.setPersonaNombre(historial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(historial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(historial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(historial.getPersona().getTelefono());
            dto.setPersonaEmail(historial.getPersona().getEmail());

            dto.setOrdenDeCompraId(historial.getOrdenDeCompra().getId());
            dto.setOrdenDeCompraTotalCompra(historial.getOrdenDeCompra().getTotalCompra());
            dto.setOrdenDeCompraFechaOrden(historial.getOrdenDeCompra().getFechaOrden());

            historialDTO.add(dto);
        }

        return historialDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<HistorialCargosProveedoresDTO> getHistorialCargoProveedorById(@PathVariable String id) {
        Optional<HistorialCargosProveedores> optionalHistorial = historialCargosProveedoresRepository.findById(id);

        if (!optionalHistorial.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        HistorialCargosProveedores historial = optionalHistorial.get();
        HistorialCargosProveedoresDTO dto = new HistorialCargosProveedoresDTO();
        dto.setId(historial.getId());
        dto.setMontoPagado(historial.getMontoPagado());
        dto.setFecha(historial.getFecha());

        // Mapear relaciones aplanadas
        dto.setPersonaId(historial.getPersona().getId());
        dto.setPersonaNombre(historial.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(historial.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(historial.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(historial.getPersona().getTelefono());
        dto.setPersonaEmail(historial.getPersona().getEmail());

        dto.setOrdenDeCompraId(historial.getOrdenDeCompra().getId());
        dto.setOrdenDeCompraTotalCompra(historial.getOrdenDeCompra().getTotalCompra());
        dto.setOrdenDeCompraFechaOrden(historial.getOrdenDeCompra().getFechaOrden());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<HistorialCargosProveedoresDTO> createHistorialCargoProveedor(
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String ordenDeCompraId = (String) requestBody.get("ordenDeCompraId");
            BigDecimal montoPagado = new BigDecimal(requestBody.get("montoPagado").toString());
            OffsetDateTime fecha = OffsetDateTime.now(); // Se establece la fecha actual

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<OrdenesDeCompras> ordenDeCompra = ordenesDeComprasRepository.findById(ordenDeCompraId);

            if (!persona.isPresent() || !ordenDeCompra.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el historial
            HistorialCargosProveedores historial = new HistorialCargosProveedores();
            historial.setPersona(persona.get());
            historial.setOrdenDeCompra(ordenDeCompra.get());
            historial.setMontoPagado(montoPagado);
            historial.setFecha(fecha);

            // Guardar
            HistorialCargosProveedores savedHistorial = historialCargosProveedoresRepository.save(historial);

            // Crear DTO para respuesta
            HistorialCargosProveedoresDTO dto = new HistorialCargosProveedoresDTO();
            dto.setId(savedHistorial.getId());
            dto.setMontoPagado(savedHistorial.getMontoPagado());
            dto.setFecha(savedHistorial.getFecha());
            dto.setPersonaId(savedHistorial.getPersona().getId());
            dto.setPersonaNombre(savedHistorial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedHistorial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedHistorial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedHistorial.getPersona().getTelefono());
            dto.setPersonaEmail(savedHistorial.getPersona().getEmail());
            dto.setOrdenDeCompraId(savedHistorial.getOrdenDeCompra().getId());
            dto.setOrdenDeCompraTotalCompra(savedHistorial.getOrdenDeCompra().getTotalCompra());
            dto.setOrdenDeCompraFechaOrden(savedHistorial.getOrdenDeCompra().getFechaOrden());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<HistorialCargosProveedoresDTO> updateHistorialCargoProveedor(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<HistorialCargosProveedores> optionalHistorial = historialCargosProveedoresRepository.findById(id);
            if (!optionalHistorial.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            HistorialCargosProveedores historial = optionalHistorial.get();

            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String ordenDeCompraId = (String) requestBody.get("ordenDeCompraId");
            BigDecimal montoPagado = new BigDecimal(requestBody.get("montoPagado").toString());

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<OrdenesDeCompras> ordenDeCompra = ordenesDeComprasRepository.findById(ordenDeCompraId);

            if (!persona.isPresent() || !ordenDeCompra.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el historial
            historial.setPersona(persona.get());
            historial.setOrdenDeCompra(ordenDeCompra.get());
            historial.setMontoPagado(montoPagado);
            // Nota: fecha no se actualiza para mantener la fecha original

            // Guardar
            HistorialCargosProveedores savedHistorial = historialCargosProveedoresRepository.save(historial);

            // Crear DTO para respuesta
            HistorialCargosProveedoresDTO dto = new HistorialCargosProveedoresDTO();
            dto.setId(savedHistorial.getId());
            dto.setMontoPagado(savedHistorial.getMontoPagado());
            dto.setFecha(savedHistorial.getFecha());
            dto.setPersonaId(savedHistorial.getPersona().getId());
            dto.setPersonaNombre(savedHistorial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedHistorial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedHistorial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedHistorial.getPersona().getTelefono());
            dto.setPersonaEmail(savedHistorial.getPersona().getEmail());
            dto.setOrdenDeCompraId(savedHistorial.getOrdenDeCompra().getId());
            dto.setOrdenDeCompraTotalCompra(savedHistorial.getOrdenDeCompra().getTotalCompra());
            dto.setOrdenDeCompraFechaOrden(savedHistorial.getOrdenDeCompra().getFechaOrden());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteHistorialCargoProveedor(@PathVariable String id) {
        if (!historialCargosProveedoresRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        historialCargosProveedoresRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/HistorialCostosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.HistorialCostos;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.dtos.HistorialCostosDTO;
import com.posfin.pos_finanzas_backend.repositories.HistorialCostosRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.ZonedDateTime;

@RestController
@RequestMapping("/api/historial-costos")
public class HistorialCostosController {

    @Autowired
    private HistorialCostosRepository historialCostosRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @GetMapping
    public List<HistorialCostosDTO> getAllHistorialCostos() {
        List<HistorialCostos> historialCostos = historialCostosRepository.findAll();
        List<HistorialCostosDTO> historialCostosDTO = new ArrayList<>();

        for (HistorialCostos historial : historialCostos) {
            HistorialCostosDTO dto = new HistorialCostosDTO();
            dto.setId(historial.getId());
            dto.setCosto(historial.getCosto());
            dto.setFechaDeRegistro(historial.getFechaDeRegistro());

            // Mapear relaciones aplanadas
            dto.setProductosId(historial.getProductos().getId());
            dto.setProductosNombre(historial.getProductos().getNombre());

            historialCostosDTO.add(dto);
        }

        return historialCostosDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<HistorialCostosDTO> getHistorialCostoById(@PathVariable String id) {
        Optional<HistorialCostos> optionalHistorial = historialCostosRepository.findById(id);

        if (!optionalHistorial.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        HistorialCostos historial = optionalHistorial.get();
        HistorialCostosDTO dto = new HistorialCostosDTO();
        dto.setId(historial.getId());
        dto.setCosto(historial.getCosto());
        dto.setFechaDeRegistro(historial.getFechaDeRegistro());

        // Mapear relaciones aplanadas
        dto.setProductosId(historial.getProductos().getId());
        dto.setProductosNombre(historial.getProductos().getNombre());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<HistorialCostosDTO> createHistorialCosto(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String productosId = (String) requestBody.get("productosId");
            BigDecimal costo = new BigDecimal(requestBody.get("costo").toString());

            // Buscar el producto relacionado
            Optional<Productos> producto = productosRepository.findById(productosId);

            if (!producto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el historial de costo
            HistorialCostos historial = new HistorialCostos();
            historial.setProductos(producto.get());
            historial.setCosto(costo);
            historial.setFechaDeRegistro(ZonedDateTime.now());

            // Guardar
            HistorialCostos savedHistorial = historialCostosRepository.save(historial);

            // Crear DTO para respuesta
            HistorialCostosDTO dto = new HistorialCostosDTO();
            dto.setId(savedHistorial.getId());
            dto.setCosto(savedHistorial.getCosto());
            dto.setFechaDeRegistro(savedHistorial.getFechaDeRegistro());
            dto.setProductosId(savedHistorial.getProductos().getId());
            dto.setProductosNombre(savedHistorial.getProductos().getNombre());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<HistorialCostosDTO> updateHistorialCosto(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<HistorialCostos> optionalHistorial = historialCostosRepository.findById(id);
            if (!optionalHistorial.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            HistorialCostos historial = optionalHistorial.get();

            // Obtener datos del request
            String productosId = (String) requestBody.get("productosId");
            BigDecimal costo = new BigDecimal(requestBody.get("costo").toString());

            // Buscar el producto relacionado
            Optional<Productos> producto = productosRepository.findById(productosId);

            if (!producto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el historial de costo
            historial.setProductos(producto.get());
            historial.setCosto(costo);
            // Nota: No actualizamos la fecha de registro ya que debe ser inmutable

            // Guardar
            HistorialCostos savedHistorial = historialCostosRepository.save(historial);

            // Crear DTO para respuesta
            HistorialCostosDTO dto = new HistorialCostosDTO();
            dto.setId(savedHistorial.getId());
            dto.setCosto(savedHistorial.getCosto());
            dto.setFechaDeRegistro(savedHistorial.getFechaDeRegistro());
            dto.setProductosId(savedHistorial.getProductos().getId());
            dto.setProductosNombre(savedHistorial.getProductos().getNombre());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteHistorialCosto(@PathVariable String id) {
        if (!historialCostosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        historialCostosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateHistorialCosto(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<HistorialCostos> historialOptional = historialCostosRepository.findById(id);
        if (historialOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        HistorialCostos historialExistente = historialOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("costo")) {
            Number costoValue = (Number) updates.get("costo");
            historialExistente.setCosto(new BigDecimal(costoValue.toString()));
        }

        // 3. Lógica para actualizar la relación con Productos
        if (updates.containsKey("productos")) {
            Map<String, String> productosMap = (Map<String, String>) updates.get("productos");
            String productosId = productosMap.get("id");
            Optional<Productos> productosOpt = productosRepository.findById(productosId);
            if (productosOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productosId + " no existe.");
            }
            historialExistente.setProductos(productosOpt.get());
        }

        // 4. Guardar y devolver
        HistorialCostos historialActualizado = historialCostosRepository.save(historialExistente);

        // Crear DTO para respuesta
        HistorialCostosDTO dto = new HistorialCostosDTO();
        dto.setId(historialActualizado.getId());
        dto.setCosto(historialActualizado.getCosto());
        dto.setFechaDeRegistro(historialActualizado.getFechaDeRegistro());
        dto.setProductosId(historialActualizado.getProductos().getId());
        dto.setProductosNombre(historialActualizado.getProductos().getNombre());

        return ResponseEntity.ok(dto);
    }

    @GetMapping("/producto/{productoId}/ultimo-costo")
    public ResponseEntity<HistorialCostosDTO> getUltimoCostoPorProducto(@PathVariable String productoId) {
        // Buscar el producto
        Optional<Productos> producto = productosRepository.findById(productoId);
        if (!producto.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        // Buscar el último costo del producto
        Optional<HistorialCostos> ultimoCosto = historialCostosRepository.findLatestByProducto(producto.get());
        if (!ultimoCosto.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        // Crear DTO para respuesta
        HistorialCostos historial = ultimoCosto.get();
        HistorialCostosDTO dto = new HistorialCostosDTO();
        dto.setId(historial.getId());
        dto.setCosto(historial.getCosto());
        dto.setFechaDeRegistro(historial.getFechaDeRegistro());
        dto.setProductosId(historial.getProductos().getId());
        dto.setProductosNombre(historial.getProductos().getNombre());

        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/HistorialPagosClientesController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.HistorialPagosClientes;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.OrdenesDeVentas;
import com.posfin.pos_finanzas_backend.dtos.HistorialPagosClientesDTO;
import com.posfin.pos_finanzas_backend.repositories.HistorialPagosClientesRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeVentasRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@RestController
@RequestMapping("/api/historial-pagos-clientes")
public class HistorialPagosClientesController {

    @Autowired
    private HistorialPagosClientesRepository historialPagosClientesRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private OrdenesDeVentasRepository ordenesDeVentasRepository;

    @GetMapping
    public List<HistorialPagosClientesDTO> getAllHistorialPagosClientes() {
        List<HistorialPagosClientes> historialList = historialPagosClientesRepository.findAll();
        List<HistorialPagosClientesDTO> historialDTO = new ArrayList<>();

        for (HistorialPagosClientes historial : historialList) {
            HistorialPagosClientesDTO dto = new HistorialPagosClientesDTO();
            dto.setId(historial.getId());
            dto.setMontoPagado(historial.getMontoPagado());
            dto.setFecha(historial.getFecha());

            // Mapear relaciones aplanadas
            dto.setPersonaId(historial.getPersona().getId());
            dto.setPersonaNombre(historial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(historial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(historial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(historial.getPersona().getTelefono());
            dto.setPersonaEmail(historial.getPersona().getEmail());

            dto.setOrdenDeVentaId(historial.getOrdenDeVenta().getId());
            dto.setOrdenDeVentaTotalVenta(historial.getOrdenDeVenta().getTotalVenta());
            dto.setOrdenDeVentaFechaOrden(historial.getOrdenDeVenta().getFechaOrden());

            historialDTO.add(dto);
        }

        return historialDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<HistorialPagosClientesDTO> getHistorialPagoClienteById(@PathVariable String id) {
        Optional<HistorialPagosClientes> optionalHistorial = historialPagosClientesRepository.findById(id);

        if (!optionalHistorial.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        HistorialPagosClientes historial = optionalHistorial.get();
        HistorialPagosClientesDTO dto = new HistorialPagosClientesDTO();
        dto.setId(historial.getId());
        dto.setMontoPagado(historial.getMontoPagado());
        dto.setFecha(historial.getFecha());

        // Mapear relaciones aplanadas
        dto.setPersonaId(historial.getPersona().getId());
        dto.setPersonaNombre(historial.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(historial.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(historial.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(historial.getPersona().getTelefono());
        dto.setPersonaEmail(historial.getPersona().getEmail());

        dto.setOrdenDeVentaId(historial.getOrdenDeVenta().getId());
        dto.setOrdenDeVentaTotalVenta(historial.getOrdenDeVenta().getTotalVenta());
        dto.setOrdenDeVentaFechaOrden(historial.getOrdenDeVenta().getFechaOrden());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<HistorialPagosClientesDTO> createHistorialPagoCliente(
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String ordenDeVentaId = (String) requestBody.get("ordenDeVentaId");
            BigDecimal montoPagado = new BigDecimal(requestBody.get("montoPagado").toString());
            OffsetDateTime fecha = OffsetDateTime.now(); // Se establece la fecha actual

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<OrdenesDeVentas> ordenDeVenta = ordenesDeVentasRepository.findById(ordenDeVentaId);

            if (!persona.isPresent() || !ordenDeVenta.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el historial
            HistorialPagosClientes historial = new HistorialPagosClientes();
            historial.setPersona(persona.get());
            historial.setOrdenDeVenta(ordenDeVenta.get());
            historial.setMontoPagado(montoPagado);
            historial.setFecha(fecha);

            // Guardar
            HistorialPagosClientes savedHistorial = historialPagosClientesRepository.save(historial);

            // Crear DTO para respuesta
            HistorialPagosClientesDTO dto = new HistorialPagosClientesDTO();
            dto.setId(savedHistorial.getId());
            dto.setMontoPagado(savedHistorial.getMontoPagado());
            dto.setFecha(savedHistorial.getFecha());
            dto.setPersonaId(savedHistorial.getPersona().getId());
            dto.setPersonaNombre(savedHistorial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedHistorial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedHistorial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedHistorial.getPersona().getTelefono());
            dto.setPersonaEmail(savedHistorial.getPersona().getEmail());
            dto.setOrdenDeVentaId(savedHistorial.getOrdenDeVenta().getId());
            dto.setOrdenDeVentaTotalVenta(savedHistorial.getOrdenDeVenta().getTotalVenta());
            dto.setOrdenDeVentaFechaOrden(savedHistorial.getOrdenDeVenta().getFechaOrden());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<HistorialPagosClientesDTO> updateHistorialPagoCliente(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<HistorialPagosClientes> optionalHistorial = historialPagosClientesRepository.findById(id);
            if (!optionalHistorial.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            HistorialPagosClientes historial = optionalHistorial.get();

            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String ordenDeVentaId = (String) requestBody.get("ordenDeVentaId");
            BigDecimal montoPagado = new BigDecimal(requestBody.get("montoPagado").toString());

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<OrdenesDeVentas> ordenDeVenta = ordenesDeVentasRepository.findById(ordenDeVentaId);

            if (!persona.isPresent() || !ordenDeVenta.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el historial
            historial.setPersona(persona.get());
            historial.setOrdenDeVenta(ordenDeVenta.get());
            historial.setMontoPagado(montoPagado);
            // Nota: fecha no se actualiza para mantener la fecha original

            // Guardar
            HistorialPagosClientes savedHistorial = historialPagosClientesRepository.save(historial);

            // Crear DTO para respuesta
            HistorialPagosClientesDTO dto = new HistorialPagosClientesDTO();
            dto.setId(savedHistorial.getId());
            dto.setMontoPagado(savedHistorial.getMontoPagado());
            dto.setFecha(savedHistorial.getFecha());
            dto.setPersonaId(savedHistorial.getPersona().getId());
            dto.setPersonaNombre(savedHistorial.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedHistorial.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedHistorial.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedHistorial.getPersona().getTelefono());
            dto.setPersonaEmail(savedHistorial.getPersona().getEmail());
            dto.setOrdenDeVentaId(savedHistorial.getOrdenDeVenta().getId());
            dto.setOrdenDeVentaTotalVenta(savedHistorial.getOrdenDeVenta().getTotalVenta());
            dto.setOrdenDeVentaFechaOrden(savedHistorial.getOrdenDeVenta().getFechaOrden());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteHistorialPagoCliente(@PathVariable String id) {
        if (!historialPagosClientesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        historialPagosClientesRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/HistorialPreciosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.dtos.HistorialPreciosDTO;
import com.posfin.pos_finanzas_backend.repositories.HistorialPreciosRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.ZonedDateTime;

@RestController
@RequestMapping("/api/historial-precios")
public class HistorialPreciosController {

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @GetMapping
    public List<HistorialPreciosDTO> getAllHistorialPrecios() {
        List<HistorialPrecios> historialPrecios = historialPreciosRepository.findAll();
        List<HistorialPreciosDTO> historialPreciosDTO = new ArrayList<>();

        for (HistorialPrecios historial : historialPrecios) {
            HistorialPreciosDTO dto = new HistorialPreciosDTO();
            dto.setId(historial.getId());
            dto.setPrecio(historial.getPrecio());
            dto.setFechaDeRegistro(historial.getFechaDeRegistro());

            // Mapear relaciones aplanadas
            dto.setProductosId(historial.getProductos().getId());
            dto.setProductosNombre(historial.getProductos().getNombre());

            historialPreciosDTO.add(dto);
        }

        return historialPreciosDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<HistorialPreciosDTO> getHistorialPrecioById(@PathVariable String id) {
        Optional<HistorialPrecios> optionalHistorial = historialPreciosRepository.findById(id);

        if (!optionalHistorial.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        HistorialPrecios historial = optionalHistorial.get();
        HistorialPreciosDTO dto = new HistorialPreciosDTO();
        dto.setId(historial.getId());
        dto.setPrecio(historial.getPrecio());
        dto.setFechaDeRegistro(historial.getFechaDeRegistro());

        // Mapear relaciones aplanadas
        dto.setProductosId(historial.getProductos().getId());
        dto.setProductosNombre(historial.getProductos().getNombre());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<HistorialPreciosDTO> createHistorialPrecio(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String productosId = (String) requestBody.get("productosId");
            BigDecimal precio = new BigDecimal(requestBody.get("precio").toString());

            // Buscar el producto relacionado
            Optional<Productos> producto = productosRepository.findById(productosId);

            if (!producto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el historial de precio
            HistorialPrecios historial = new HistorialPrecios();
            historial.setProductos(producto.get());
            historial.setPrecio(precio);
            historial.setFechaDeRegistro(ZonedDateTime.now());

            // Guardar
            HistorialPrecios savedHistorial = historialPreciosRepository.save(historial);

            // Crear DTO para respuesta
            HistorialPreciosDTO dto = new HistorialPreciosDTO();
            dto.setId(savedHistorial.getId());
            dto.setPrecio(savedHistorial.getPrecio());
            dto.setFechaDeRegistro(savedHistorial.getFechaDeRegistro());
            dto.setProductosId(savedHistorial.getProductos().getId());
            dto.setProductosNombre(savedHistorial.getProductos().getNombre());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<HistorialPreciosDTO> updateHistorialPrecio(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<HistorialPrecios> optionalHistorial = historialPreciosRepository.findById(id);
            if (!optionalHistorial.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            HistorialPrecios historial = optionalHistorial.get();

            // Obtener datos del request
            String productosId = (String) requestBody.get("productosId");
            BigDecimal precio = new BigDecimal(requestBody.get("precio").toString());

            // Buscar el producto relacionado
            Optional<Productos> producto = productosRepository.findById(productosId);

            if (!producto.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el historial de precio
            historial.setProductos(producto.get());
            historial.setPrecio(precio);
            // Nota: No actualizamos la fecha de registro ya que debe ser inmutable

            // Guardar
            HistorialPrecios savedHistorial = historialPreciosRepository.save(historial);

            // Crear DTO para respuesta
            HistorialPreciosDTO dto = new HistorialPreciosDTO();
            dto.setId(savedHistorial.getId());
            dto.setPrecio(savedHistorial.getPrecio());
            dto.setFechaDeRegistro(savedHistorial.getFechaDeRegistro());
            dto.setProductosId(savedHistorial.getProductos().getId());
            dto.setProductosNombre(savedHistorial.getProductos().getNombre());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteHistorialPrecio(@PathVariable String id) {
        if (!historialPreciosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        historialPreciosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateHistorialPrecio(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<HistorialPrecios> historialOptional = historialPreciosRepository.findById(id);
        if (historialOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        HistorialPrecios historialExistente = historialOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("precio")) {
            Number precioValue = (Number) updates.get("precio");
            historialExistente.setPrecio(new BigDecimal(precioValue.toString()));
        }

        // 3. Lógica para actualizar la relación con Productos
        if (updates.containsKey("productos")) {
            Map<String, String> productosMap = (Map<String, String>) updates.get("productos");
            String productosId = productosMap.get("id");
            Optional<Productos> productosOpt = productosRepository.findById(productosId);
            if (productosOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productosId + " no existe.");
            }
            historialExistente.setProductos(productosOpt.get());
        }

        // 4. Guardar y devolver
        HistorialPrecios historialActualizado = historialPreciosRepository.save(historialExistente);

        // Crear DTO para respuesta
        HistorialPreciosDTO dto = new HistorialPreciosDTO();
        dto.setId(historialActualizado.getId());
        dto.setPrecio(historialActualizado.getPrecio());
        dto.setFechaDeRegistro(historialActualizado.getFechaDeRegistro());
        dto.setProductosId(historialActualizado.getProductos().getId());
        dto.setProductosNombre(historialActualizado.getProductos().getNombre());

        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/InventoryController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.dtos.InventarioDTO;
import com.posfin.pos_finanzas_backend.models.Inventarios;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.Ubicaciones;
import com.posfin.pos_finanzas_backend.repositories.InventarioRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.UbicacionesRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;

@RestController
@RequestMapping("/api/inventarios")
public class InventoryController {

    @Autowired
    private InventarioRepository inventarioRepository;

    // --- DEPENDENCIAS ADICIONALES NECESARIAS ---
    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private UbicacionesRepository ubicacionesRepository; // Asegúrate de haber creado este repositorio

    @GetMapping
    public List<InventarioDTO> getAllInventarios() {
        // 1. Obtén las entidades de la base de datos
        List<Inventarios> inventarios = inventarioRepository.findAll();

        // 2. Conviértelas a DTOs
        return inventarios.stream().map(inventario -> {
            InventarioDTO dto = new InventarioDTO();
            dto.setId(inventario.getId());
            dto.setCantidadPz(inventario.getCantidadPz());

            // Al hacer .getProducto(), Hibernate carga el objeto real
            dto.setProductoNombre(inventario.getProducto().getNombre());
            dto.setUbicacionNombre(inventario.getUbicacion().getNombre());

            return dto;
        }).collect(Collectors.toList());
    }

    @GetMapping("/{id}")
    public ResponseEntity<Inventarios> getInventarioById(@PathVariable String id) {
        return inventarioRepository.findById(id)
                .map(ResponseEntity::ok)
                .orElse(ResponseEntity.notFound().build());
    }

    // --- MÉTODO POST CORREGIDO ---
    @PostMapping
    public ResponseEntity<?> createInventario(@RequestBody Inventarios request) {
        // Busca el producto y la ubicación por los IDs que vienen en el JSON
        Optional<Productos> productoOpt = productosRepository.findById(request.getProducto().getId());
        Optional<Ubicaciones> ubicacionOpt = ubicacionesRepository.findById(request.getUbicacion().getId());

        if (productoOpt.isEmpty()) {
            return ResponseEntity.badRequest().body("Producto no encontrado con ID: " + request.getProducto().getId());
        }
        if (ubicacionOpt.isEmpty()) {
            return ResponseEntity.badRequest()
                    .body("Ubicación no encontrada con ID: " + request.getUbicacion().getId());
        }

        // Si existen, crea el nuevo objeto Inventarios y asigna las entidades completas
        Inventarios nuevoInventario = new Inventarios();
        nuevoInventario.setProducto(productoOpt.get());
        nuevoInventario.setUbicacion(ubicacionOpt.get());
        nuevoInventario.setCantidadPz(request.getCantidadPz());
        nuevoInventario.setCantidadKg(request.getCantidadKg());
        nuevoInventario.setCantidadMinima(request.getCantidadMinima());
        nuevoInventario.setCantidadMaxima(request.getCantidadMaxima());

        Inventarios inventarioGuardado = inventarioRepository.save(nuevoInventario);
        return ResponseEntity.ok(inventarioGuardado);
    }

    // --- MÉTODO PUT CORREGIDO ---
    @PutMapping("/{id}")
    public ResponseEntity<?> updateInventario(@PathVariable String id, @RequestBody Inventarios inventarioDetails) {
        return inventarioRepository.findById(id)
                .map(inventarioExistente -> {
                    // Busca las entidades relacionadas
                    Optional<Productos> productoOpt = productosRepository
                            .findById(inventarioDetails.getProducto().getId());
                    Optional<Ubicaciones> ubicacionOpt = ubicacionesRepository
                            .findById(inventarioDetails.getUbicacion().getId());

                    if (productoOpt.isEmpty() || ubicacionOpt.isEmpty()) {
                        return ResponseEntity.badRequest().body("Producto o Ubicación no válida.");
                    }

                    // Actualiza los campos
                    inventarioExistente.setProducto(productoOpt.get());
                    inventarioExistente.setUbicacion(ubicacionOpt.get());
                    inventarioExistente.setCantidadPz(inventarioDetails.getCantidadPz());
                    inventarioExistente.setCantidadKg(inventarioDetails.getCantidadKg());
                    inventarioExistente.setCantidadMinima(inventarioDetails.getCantidadMinima());
                    inventarioExistente.setCantidadMaxima(inventarioDetails.getCantidadMaxima());

                    Inventarios updatedInventario = inventarioRepository.save(inventarioExistente);
                    return ResponseEntity.ok(updatedInventario);
                }).orElse(ResponseEntity.notFound().build());
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteInventario(@PathVariable String id) {
        if (!inventarioRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        inventarioRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateInventario(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Inventarios> inventarioOptional = inventarioRepository.findById(id);
        if (inventarioOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Inventarios inventarioExistente = inventarioOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("cantidadPz")) {
            inventarioExistente.setCantidadPz((Integer) updates.get("cantidadPz"));
        }
        if (updates.containsKey("cantidadKg")) {
            Number kgValue = (Number) updates.get("cantidadKg");
            inventarioExistente.setCantidadKg(kgValue != null ? kgValue.intValue() : null);
        }
        if (updates.containsKey("cantidadMinima")) {
            inventarioExistente.setCantidadMinima((Integer) updates.get("cantidadMinima"));
        }
        if (updates.containsKey("cantidadMaxima")) {
            inventarioExistente.setCantidadMaxima((Integer) updates.get("cantidadMaxima"));
        }

        // 3. Lógica para actualizar la relación con Productos
        if (updates.containsKey("producto")) {
            Map<String, String> productoMap = (Map<String, String>) updates.get("producto");
            String productoId = productoMap.get("id");
            Optional<Productos> productoOpt = productosRepository.findById(productoId);
            if (productoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productoId + " no existe.");
            }
            inventarioExistente.setProducto(productoOpt.get());
        }

        // 4. Lógica para actualizar la relación con Ubicaciones
        if (updates.containsKey("ubicacion")) {
            Map<String, String> ubicacionMap = (Map<String, String>) updates.get("ubicacion");
            String ubicacionId = ubicacionMap.get("id");
            Optional<Ubicaciones> ubicacionOpt = ubicacionesRepository.findById(ubicacionId);
            if (ubicacionOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: La Ubicación con ID " + ubicacionId + " no existe.");
            }
            inventarioExistente.setUbicacion(ubicacionOpt.get());
        }

        // 5. Guardar y devolver
        Inventarios inventarioActualizado = inventarioRepository.save(inventarioExistente);
        return ResponseEntity.ok(inventarioActualizado);
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/MetodosPagoController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.MetodosPago;
import com.posfin.pos_finanzas_backend.repositories.MetodosPagoRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/metodos_pago")
public class MetodosPagoController {
    @Autowired
    private MetodosPagoRepository metodosPagoRepository;

    @GetMapping
    public List<MetodosPago> getAllMetodosPago() {
        return metodosPagoRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<MetodosPago> getMetodoPagoById(@PathVariable String id) {
        Optional<MetodosPago> metodoPago = metodosPagoRepository.findById(id);
        return metodoPago.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public MetodosPago createMetodoPago(@RequestBody MetodosPago metodoPago) {
        return metodosPagoRepository.save(metodoPago);
    }

    @PutMapping("/{id}")
    public ResponseEntity<MetodosPago> updateMetodoPago(@PathVariable String id,
            @RequestBody MetodosPago metodoPagoDetails) {
        Optional<MetodosPago> optionalMetodoPago = metodosPagoRepository.findById(id);
        if (!optionalMetodoPago.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        MetodosPago metodoPago = optionalMetodoPago.get();
        metodoPago.setMetodoPago(metodoPagoDetails.getMetodoPago());
        return ResponseEntity.ok(metodosPagoRepository.save(metodoPago));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteMetodoPago(@PathVariable String id) {
        if (!metodosPagoRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        metodosPagoRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateMetodoPago(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<MetodosPago> metodoPagoOptional = metodosPagoRepository.findById(id);
        if (metodoPagoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        MetodosPago metodoPagoExistente = metodoPagoOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("metodoPago")) {
            metodoPagoExistente.setMetodoPago((String) updates.get("metodoPago"));
        }

        // 3. Guardar y devolver
        MetodosPago metodoPagoActualizado = metodosPagoRepository.save(metodoPagoExistente);
        return ResponseEntity.ok(metodoPagoActualizado);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/MovimientosInventariosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.MovimientosInventarios;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.Ubicaciones;
import com.posfin.pos_finanzas_backend.models.TipoMovimientos;
import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.dtos.MovimientosInventariosDTO;
import com.posfin.pos_finanzas_backend.repositories.MovimientosInventariosRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.UbicacionesRepository;
import com.posfin.pos_finanzas_backend.repositories.TIpoMovimientosRepository;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@RestController
@RequestMapping("/api/movimientos-inventarios")
public class MovimientosInventariosController {

    @Autowired
    private MovimientosInventariosRepository movimientosInventariosRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private UbicacionesRepository ubicacionesRepository;

    @Autowired
    private TIpoMovimientosRepository tipoMovimientosRepository;

    @Autowired
    private UsuariosRepository usuariosRepository;

    @GetMapping
    public List<MovimientosInventariosDTO> getAllMovimientosInventarios() {
        List<MovimientosInventarios> movimientos = movimientosInventariosRepository.findAll();
        List<MovimientosInventariosDTO> movimientosDTO = new ArrayList<>();

        for (MovimientosInventarios movimiento : movimientos) {
            MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
            dto.setId(movimiento.getId());
            dto.setCantidad(movimiento.getCantidad());
            dto.setFechaMovimiento(movimiento.getFechaMovimiento());
            dto.setClaveMovimiento(movimiento.getClaveMovimiento());

            // Mapear relaciones aplanadas
            dto.setProductoId(movimiento.getProducto().getId());
            dto.setProductoNombre(movimiento.getProducto().getNombre());

            dto.setUbicacionId(movimiento.getUbicacion().getId());
            dto.setUbicacionNombre(movimiento.getUbicacion().getNombre());
            dto.setUbicacionDescripcion(movimiento.getUbicacion().getUbicacion());

            dto.setTipoMovimientoId(movimiento.getTipoMovimiento().getId());
            dto.setTipoMovimientoNombre(movimiento.getTipoMovimiento().getMovimiento());

            dto.setUsuarioId(movimiento.getUsuario().getId());
            dto.setUsuarioNombre(movimiento.getUsuario().getNombre());
            dto.setUsuarioTelefono(movimiento.getUsuario().getTelefono());

            movimientosDTO.add(dto);
        }

        return movimientosDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<MovimientosInventariosDTO> getMovimientoInventarioById(@PathVariable String id) {
        Optional<MovimientosInventarios> optionalMovimiento = movimientosInventariosRepository.findById(id);

        if (!optionalMovimiento.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        MovimientosInventarios movimiento = optionalMovimiento.get();
        MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
        dto.setId(movimiento.getId());
        dto.setCantidad(movimiento.getCantidad());
        dto.setFechaMovimiento(movimiento.getFechaMovimiento());
        dto.setClaveMovimiento(movimiento.getClaveMovimiento());

        // Mapear relaciones aplanadas
        dto.setProductoId(movimiento.getProducto().getId());
        dto.setProductoNombre(movimiento.getProducto().getNombre());

        dto.setUbicacionId(movimiento.getUbicacion().getId());
        dto.setUbicacionNombre(movimiento.getUbicacion().getNombre());
        dto.setUbicacionDescripcion(movimiento.getUbicacion().getUbicacion());

        dto.setTipoMovimientoId(movimiento.getTipoMovimiento().getId());
        dto.setTipoMovimientoNombre(movimiento.getTipoMovimiento().getMovimiento());

        dto.setUsuarioId(movimiento.getUsuario().getId());
        dto.setUsuarioNombre(movimiento.getUsuario().getNombre());
        dto.setUsuarioTelefono(movimiento.getUsuario().getTelefono());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<MovimientosInventariosDTO> createMovimientoInventario(
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String productoId = (String) requestBody.get("productoId");
            String ubicacionId = (String) requestBody.get("ubicacionId");
            String tipoMovimientoId = (String) requestBody.get("tipoMovimientoId");
            String usuarioId = (String) requestBody.get("usuarioId");
            String claveMovimiento = (String) requestBody.get("claveMovimiento");
            BigDecimal cantidad = new BigDecimal(requestBody.get("cantidad").toString());
            OffsetDateTime fechaMovimiento = OffsetDateTime.now(); // Se establece la fecha actual

            // Buscar las entidades relacionadas
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<Ubicaciones> ubicacion = ubicacionesRepository.findById(ubicacionId);
            Optional<TipoMovimientos> tipoMovimiento = tipoMovimientosRepository.findById(tipoMovimientoId);
            Optional<Usuarios> usuario = usuariosRepository.findById(usuarioId);

            if (!producto.isPresent() || !ubicacion.isPresent() || !tipoMovimiento.isPresent()
                    || !usuario.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el movimiento
            MovimientosInventarios movimiento = new MovimientosInventarios();
            movimiento.setProducto(producto.get());
            movimiento.setUbicacion(ubicacion.get());
            movimiento.setTipoMovimiento(tipoMovimiento.get());
            movimiento.setUsuario(usuario.get());
            movimiento.setCantidad(cantidad);
            movimiento.setFechaMovimiento(fechaMovimiento);
            movimiento.setClaveMovimiento(claveMovimiento);

            // Guardar
            MovimientosInventarios savedMovimiento = movimientosInventariosRepository.save(movimiento);

            // Crear DTO para respuesta
            MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
            dto.setId(savedMovimiento.getId());
            dto.setCantidad(savedMovimiento.getCantidad());
            dto.setFechaMovimiento(savedMovimiento.getFechaMovimiento());
            dto.setClaveMovimiento(savedMovimiento.getClaveMovimiento());
            dto.setProductoId(savedMovimiento.getProducto().getId());
            dto.setProductoNombre(savedMovimiento.getProducto().getNombre());
            dto.setUbicacionId(savedMovimiento.getUbicacion().getId());
            dto.setUbicacionNombre(savedMovimiento.getUbicacion().getNombre());
            dto.setUbicacionDescripcion(savedMovimiento.getUbicacion().getUbicacion());
            dto.setTipoMovimientoId(savedMovimiento.getTipoMovimiento().getId());
            dto.setTipoMovimientoNombre(savedMovimiento.getTipoMovimiento().getMovimiento());
            dto.setUsuarioId(savedMovimiento.getUsuario().getId());
            dto.setUsuarioNombre(savedMovimiento.getUsuario().getNombre());
            dto.setUsuarioTelefono(savedMovimiento.getUsuario().getTelefono());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<MovimientosInventariosDTO> updateMovimientoInventario(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<MovimientosInventarios> optionalMovimiento = movimientosInventariosRepository.findById(id);
            if (!optionalMovimiento.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            MovimientosInventarios movimiento = optionalMovimiento.get();

            // Obtener datos del request
            String productoId = (String) requestBody.get("productoId");
            String ubicacionId = (String) requestBody.get("ubicacionId");
            String tipoMovimientoId = (String) requestBody.get("tipoMovimientoId");
            String usuarioId = (String) requestBody.get("usuarioId");
            String claveMovimiento = (String) requestBody.get("claveMovimiento");
            BigDecimal cantidad = new BigDecimal(requestBody.get("cantidad").toString());

            // Buscar las entidades relacionadas
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<Ubicaciones> ubicacion = ubicacionesRepository.findById(ubicacionId);
            Optional<TipoMovimientos> tipoMovimiento = tipoMovimientosRepository.findById(tipoMovimientoId);
            Optional<Usuarios> usuario = usuariosRepository.findById(usuarioId);

            if (!producto.isPresent() || !ubicacion.isPresent() || !tipoMovimiento.isPresent()
                    || !usuario.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar el movimiento
            movimiento.setProducto(producto.get());
            movimiento.setUbicacion(ubicacion.get());
            movimiento.setTipoMovimiento(tipoMovimiento.get());
            movimiento.setUsuario(usuario.get());
            movimiento.setCantidad(cantidad);
            movimiento.setClaveMovimiento(claveMovimiento);
            // Nota: fechaMovimiento no se actualiza para mantener la fecha original

            // Guardar
            MovimientosInventarios savedMovimiento = movimientosInventariosRepository.save(movimiento);

            // Crear DTO para respuesta
            MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
            dto.setId(savedMovimiento.getId());
            dto.setCantidad(savedMovimiento.getCantidad());
            dto.setFechaMovimiento(savedMovimiento.getFechaMovimiento());
            dto.setClaveMovimiento(savedMovimiento.getClaveMovimiento());
            dto.setProductoId(savedMovimiento.getProducto().getId());
            dto.setProductoNombre(savedMovimiento.getProducto().getNombre());
            dto.setUbicacionId(savedMovimiento.getUbicacion().getId());
            dto.setUbicacionNombre(savedMovimiento.getUbicacion().getNombre());
            dto.setUbicacionDescripcion(savedMovimiento.getUbicacion().getUbicacion());
            dto.setTipoMovimientoId(savedMovimiento.getTipoMovimiento().getId());
            dto.setTipoMovimientoNombre(savedMovimiento.getTipoMovimiento().getMovimiento());
            dto.setUsuarioId(savedMovimiento.getUsuario().getId());
            dto.setUsuarioNombre(savedMovimiento.getUsuario().getNombre());
            dto.setUsuarioTelefono(savedMovimiento.getUsuario().getTelefono());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteMovimientoInventario(@PathVariable String id) {
        if (!movimientosInventariosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        movimientosInventariosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateMovimientoInventario(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<MovimientosInventarios> movimientoOptional = movimientosInventariosRepository.findById(id);
        if (movimientoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        MovimientosInventarios movimientoExistente = movimientoOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("cantidad")) {
            Number cantidadValue = (Number) updates.get("cantidad");
            movimientoExistente.setCantidad(new BigDecimal(cantidadValue.toString()));
        }
        if (updates.containsKey("claveMovimiento")) {
            movimientoExistente.setClaveMovimiento((String) updates.get("claveMovimiento"));
        }

        // 3. Lógica para actualizar la relación con Productos
        if (updates.containsKey("producto")) {
            Map<String, String> productoMap = (Map<String, String>) updates.get("producto");
            String productoId = productoMap.get("id");
            Optional<Productos> productoOpt = productosRepository.findById(productoId);
            if (productoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productoId + " no existe.");
            }
            movimientoExistente.setProducto(productoOpt.get());
        }

        // 4. Lógica para actualizar la relación con Ubicaciones
        if (updates.containsKey("ubicacion")) {
            Map<String, String> ubicacionMap = (Map<String, String>) updates.get("ubicacion");
            String ubicacionId = ubicacionMap.get("id");
            Optional<Ubicaciones> ubicacionOpt = ubicacionesRepository.findById(ubicacionId);
            if (ubicacionOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: La Ubicación con ID " + ubicacionId + " no existe.");
            }
            movimientoExistente.setUbicacion(ubicacionOpt.get());
        }

        // 5. Lógica para actualizar la relación con TipoMovimientos
        if (updates.containsKey("tipoMovimiento")) {
            Map<String, String> tipoMovimientoMap = (Map<String, String>) updates.get("tipoMovimiento");
            String tipoMovimientoId = tipoMovimientoMap.get("id");
            Optional<TipoMovimientos> tipoMovimientoOpt = tipoMovimientosRepository.findById(tipoMovimientoId);
            if (tipoMovimientoOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El Tipo de Movimiento con ID " + tipoMovimientoId + " no existe.");
            }
            movimientoExistente.setTipoMovimiento(tipoMovimientoOpt.get());
        }

        // 6. Lógica para actualizar la relación con Usuarios
        if (updates.containsKey("usuario")) {
            Map<String, String> usuarioMap = (Map<String, String>) updates.get("usuario");
            String usuarioId = usuarioMap.get("id");
            Optional<Usuarios> usuarioOpt = usuariosRepository.findById(usuarioId);
            if (usuarioOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Usuario con ID " + usuarioId + " no existe.");
            }
            movimientoExistente.setUsuario(usuarioOpt.get());
        }

        // 7. Guardar y devolver
        MovimientosInventarios movimientoActualizado = movimientosInventariosRepository.save(movimientoExistente);

        // Crear DTO para respuesta
        MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
        dto.setId(movimientoActualizado.getId());
        dto.setCantidad(movimientoActualizado.getCantidad());
        dto.setFechaMovimiento(movimientoActualizado.getFechaMovimiento());
        dto.setClaveMovimiento(movimientoActualizado.getClaveMovimiento());
        dto.setProductoId(movimientoActualizado.getProducto().getId());
        dto.setProductoNombre(movimientoActualizado.getProducto().getNombre());
        dto.setUbicacionId(movimientoActualizado.getUbicacion().getId());
        dto.setUbicacionNombre(movimientoActualizado.getUbicacion().getNombre());
        dto.setUbicacionDescripcion(movimientoActualizado.getUbicacion().getUbicacion());
        dto.setTipoMovimientoId(movimientoActualizado.getTipoMovimiento().getId());
        dto.setTipoMovimientoNombre(movimientoActualizado.getTipoMovimiento().getMovimiento());
        dto.setUsuarioId(movimientoActualizado.getUsuario().getId());
        dto.setUsuarioNombre(movimientoActualizado.getUsuario().getNombre());
        dto.setUsuarioTelefono(movimientoActualizado.getUsuario().getTelefono());

        return ResponseEntity.ok(dto);
    }

    @GetMapping("/producto/{productoId}")
    public List<MovimientosInventariosDTO> getMovimientosByProducto(@PathVariable String productoId) {
        // Buscar el producto primero para validar que existe
        Optional<Productos> producto = productosRepository.findById(productoId);
        if (producto.isEmpty()) {
            return new ArrayList<>(); // Devolver lista vacía si el producto no existe
        }

        List<MovimientosInventarios> movimientos = movimientosInventariosRepository
                .findByProductoOrderByFechaMovimientoDesc(producto.get());
        
        List<MovimientosInventariosDTO> movimientosDTO = new ArrayList<>();

        for (MovimientosInventarios movimiento : movimientos) {
            MovimientosInventariosDTO dto = new MovimientosInventariosDTO();
            dto.setId(movimiento.getId());
            dto.setCantidad(movimiento.getCantidad());
            dto.setFechaMovimiento(movimiento.getFechaMovimiento());
            dto.setClaveMovimiento(movimiento.getClaveMovimiento());

            // Mapear relaciones aplanadas
            dto.setProductoId(movimiento.getProducto().getId());
            dto.setProductoNombre(movimiento.getProducto().getNombre());

            dto.setUbicacionId(movimiento.getUbicacion().getId());
            dto.setUbicacionNombre(movimiento.getUbicacion().getNombre());
            dto.setUbicacionDescripcion(movimiento.getUbicacion().getUbicacion());

            dto.setTipoMovimientoId(movimiento.getTipoMovimiento().getId());
            dto.setTipoMovimientoNombre(movimiento.getTipoMovimiento().getMovimiento());

            dto.setUsuarioId(movimiento.getUsuario().getId());
            dto.setUsuarioNombre(movimiento.getUsuario().getNombre());
            dto.setUsuarioTelefono(movimiento.getUsuario().getTelefono());

            movimientosDTO.add(dto);
        }

        return movimientosDTO;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/OrdenesDeComprasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.OrdenesDeCompras;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.dtos.OrdenesDeComprasDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeComprasRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@RestController
@RequestMapping("/api/ordenes-de-compras")
public class OrdenesDeComprasController {

    @Autowired
    private OrdenesDeComprasRepository ordenesDeComprasRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    @GetMapping
    public List<OrdenesDeComprasDTO> getAllOrdenesDeCompras() {
        List<OrdenesDeCompras> ordenes = ordenesDeComprasRepository.findAll();
        List<OrdenesDeComprasDTO> ordenesDTO = new ArrayList<>();

        for (OrdenesDeCompras orden : ordenes) {
            OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
            dto.setId(orden.getId());
            dto.setFechaOrden(orden.getFechaOrden());
            dto.setTotalCompra(orden.getTotalCompra());

            // Mapear relaciones aplanadas
            dto.setPersonaId(orden.getPersona().getId());
            dto.setPersonaNombre(orden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(orden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(orden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(orden.getPersona().getTelefono());
            dto.setPersonaEmail(orden.getPersona().getEmail());

            dto.setEstadoId(orden.getEstado().getId());
            dto.setEstadoNombre(orden.getEstado().getEstado());

            ordenesDTO.add(dto);
        }

        return ordenesDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<OrdenesDeComprasDTO> getOrdenDeCompraById(@PathVariable String id) {
        Optional<OrdenesDeCompras> optionalOrden = ordenesDeComprasRepository.findById(id);

        if (!optionalOrden.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        OrdenesDeCompras orden = optionalOrden.get();
        OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
        dto.setId(orden.getId());
        dto.setFechaOrden(orden.getFechaOrden());
        dto.setTotalCompra(orden.getTotalCompra());

        // Mapear relaciones aplanadas
        dto.setPersonaId(orden.getPersona().getId());
        dto.setPersonaNombre(orden.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(orden.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(orden.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(orden.getPersona().getTelefono());
        dto.setPersonaEmail(orden.getPersona().getEmail());

        dto.setEstadoId(orden.getEstado().getId());
        dto.setEstadoNombre(orden.getEstado().getEstado());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<OrdenesDeComprasDTO> createOrdenDeCompra(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String estadoId = (String) requestBody.get("estadoId");
            BigDecimal totalCompra = new BigDecimal(requestBody.get("totalCompra").toString());
            OffsetDateTime fechaOrden = OffsetDateTime.now(); // Se establece la fecha actual

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<Estados> estado = estadosRepository.findById(estadoId);

            if (!persona.isPresent() || !estado.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear la orden
            OrdenesDeCompras orden = new OrdenesDeCompras();
            orden.setPersona(persona.get());
            orden.setEstado(estado.get());
            orden.setTotalCompra(totalCompra);
            orden.setFechaOrden(fechaOrden);

            // Guardar
            OrdenesDeCompras savedOrden = ordenesDeComprasRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
            dto.setId(savedOrden.getId());
            dto.setFechaOrden(savedOrden.getFechaOrden());
            dto.setTotalCompra(savedOrden.getTotalCompra());
            dto.setPersonaId(savedOrden.getPersona().getId());
            dto.setPersonaNombre(savedOrden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedOrden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedOrden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedOrden.getPersona().getTelefono());
            dto.setPersonaEmail(savedOrden.getPersona().getEmail());
            dto.setEstadoId(savedOrden.getEstado().getId());
            dto.setEstadoNombre(savedOrden.getEstado().getEstado());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<OrdenesDeComprasDTO> updateOrdenDeCompra(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<OrdenesDeCompras> optionalOrden = ordenesDeComprasRepository.findById(id);
            if (!optionalOrden.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            OrdenesDeCompras orden = optionalOrden.get();

            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String estadoId = (String) requestBody.get("estadoId");
            BigDecimal totalCompra = new BigDecimal(requestBody.get("totalCompra").toString());

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<Estados> estado = estadosRepository.findById(estadoId);

            if (!persona.isPresent() || !estado.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar la orden
            orden.setPersona(persona.get());
            orden.setEstado(estado.get());
            orden.setTotalCompra(totalCompra);
            // Nota: fechaOrden no se actualiza para mantener la fecha original

            // Guardar
            OrdenesDeCompras savedOrden = ordenesDeComprasRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
            dto.setId(savedOrden.getId());
            dto.setFechaOrden(savedOrden.getFechaOrden());
            dto.setTotalCompra(savedOrden.getTotalCompra());
            dto.setPersonaId(savedOrden.getPersona().getId());
            dto.setPersonaNombre(savedOrden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedOrden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedOrden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedOrden.getPersona().getTelefono());
            dto.setPersonaEmail(savedOrden.getPersona().getEmail());
            dto.setEstadoId(savedOrden.getEstado().getId());
            dto.setEstadoNombre(savedOrden.getEstado().getEstado());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteOrdenDeCompra(@PathVariable String id) {
        if (!ordenesDeComprasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        ordenesDeComprasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateOrdenDeCompra(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<OrdenesDeCompras> ordenOptional = ordenesDeComprasRepository.findById(id);
        if (ordenOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        OrdenesDeCompras ordenExistente = ordenOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("totalCompra")) {
            Number totalCompraValue = (Number) updates.get("totalCompra");
            ordenExistente.setTotalCompra(new BigDecimal(totalCompraValue.toString()));
        }

        // 3. Lógica para actualizar la relación con Personas
        if (updates.containsKey("persona")) {
            Map<String, String> personaMap = (Map<String, String>) updates.get("persona");
            String personaId = personaMap.get("id");
            Optional<Personas> personaOpt = personasRepository.findById(personaId);
            if (personaOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: La Persona con ID " + personaId + " no existe.");
            }
            ordenExistente.setPersona(personaOpt.get());
        }

        // 4. Lógica para actualizar la relación con Estados
        if (updates.containsKey("estado")) {
            Map<String, String> estadoMap = (Map<String, String>) updates.get("estado");
            String estadoId = estadoMap.get("id");
            Optional<Estados> estadoOpt = estadosRepository.findById(estadoId);
            if (estadoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Estado con ID " + estadoId + " no existe.");
            }
            ordenExistente.setEstado(estadoOpt.get());
        }

        // 5. Guardar y devolver
        OrdenesDeCompras ordenActualizada = ordenesDeComprasRepository.save(ordenExistente);

        // Crear DTO para respuesta
        OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
        dto.setId(ordenActualizada.getId());
        dto.setFechaOrden(ordenActualizada.getFechaOrden());
        dto.setTotalCompra(ordenActualizada.getTotalCompra());
        dto.setPersonaId(ordenActualizada.getPersona().getId());
        dto.setPersonaNombre(ordenActualizada.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(ordenActualizada.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(ordenActualizada.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(ordenActualizada.getPersona().getTelefono());
        dto.setPersonaEmail(ordenActualizada.getPersona().getEmail());
        dto.setEstadoId(ordenActualizada.getEstado().getId());
        dto.setEstadoNombre(ordenActualizada.getEstado().getEstado());

        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/OrdenesDeVentasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.OrdenesDeVentas;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.models.MetodosPago;
import com.posfin.pos_finanzas_backend.dtos.OrdenesDeVentasDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeVentasRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import com.posfin.pos_finanzas_backend.repositories.MetodosPagoRepository;
import com.posfin.pos_finanzas_backend.services.VentaService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@RestController
@RequestMapping("/api/ordenes-de-ventas")
public class OrdenesDeVentasController {

    @Autowired
    private OrdenesDeVentasRepository ordenesDeVentasRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private UsuariosRepository usuariosRepository;

    @Autowired
    private MetodosPagoRepository metodosPagoRepository;

    @Autowired
    private VentaService ventaService;

    @GetMapping
    public List<OrdenesDeVentasDTO> getAllOrdenesDeVentas() {
        List<OrdenesDeVentas> ordenes = ordenesDeVentasRepository.findAll();
        List<OrdenesDeVentasDTO> ordenesDTO = new ArrayList<>();

        for (OrdenesDeVentas orden : ordenes) {
            OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
            dto.setId(orden.getId());
            dto.setFechaOrden(orden.getFechaOrden());
            dto.setTotalVenta(orden.getTotalVenta());

            // Mapear relaciones aplanadas
            dto.setPersonaId(orden.getPersona().getId());
            dto.setPersonaNombre(orden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(orden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(orden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(orden.getPersona().getTelefono());
            dto.setPersonaEmail(orden.getPersona().getEmail());

            dto.setUsuarioId(orden.getUsuario().getId());
            dto.setUsuarioNombre(orden.getUsuario().getNombre());
            dto.setUsuarioTelefono(orden.getUsuario().getTelefono());

            dto.setMetodoPagoId(orden.getMetodoPago().getId());
            dto.setMetodoPagoNombre(orden.getMetodoPago().getMetodoPago());

            ordenesDTO.add(dto);
        }

        return ordenesDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<OrdenesDeVentasDTO> getOrdenDeVentaById(@PathVariable String id) {
        Optional<OrdenesDeVentas> optionalOrden = ordenesDeVentasRepository.findById(id);

        if (!optionalOrden.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        OrdenesDeVentas orden = optionalOrden.get();
        OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
        dto.setId(orden.getId());
        dto.setFechaOrden(orden.getFechaOrden());
        dto.setTotalVenta(orden.getTotalVenta());

        // Mapear relaciones aplanadas
        dto.setPersonaId(orden.getPersona().getId());
        dto.setPersonaNombre(orden.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(orden.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(orden.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(orden.getPersona().getTelefono());
        dto.setPersonaEmail(orden.getPersona().getEmail());

        dto.setUsuarioId(orden.getUsuario().getId());
        dto.setUsuarioNombre(orden.getUsuario().getNombre());
        dto.setUsuarioTelefono(orden.getUsuario().getTelefono());

        dto.setMetodoPagoId(orden.getMetodoPago().getId());
        dto.setMetodoPagoNombre(orden.getMetodoPago().getMetodoPago());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<OrdenesDeVentasDTO> createOrdenDeVenta(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String usuarioId = (String) requestBody.get("usuarioId");
            String metodoPagoId = (String) requestBody.get("metodoPagoId");
            BigDecimal totalVenta = new BigDecimal(requestBody.get("totalVenta").toString());
            OffsetDateTime fechaOrden = OffsetDateTime.now(); // Se establece la fecha actual

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<Usuarios> usuario = usuariosRepository.findById(usuarioId);
            Optional<MetodosPago> metodoPago = metodosPagoRepository.findById(metodoPagoId);

            if (!persona.isPresent() || !usuario.isPresent() || !metodoPago.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear la orden
            OrdenesDeVentas orden = new OrdenesDeVentas();
            orden.setPersona(persona.get());
            orden.setUsuario(usuario.get());
            orden.setMetodoPago(metodoPago.get());
            orden.setTotalVenta(totalVenta);
            orden.setFechaOrden(fechaOrden);

            // Guardar
            OrdenesDeVentas savedOrden = ordenesDeVentasRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
            dto.setId(savedOrden.getId());
            dto.setFechaOrden(savedOrden.getFechaOrden());
            dto.setTotalVenta(savedOrden.getTotalVenta());
            dto.setPersonaId(savedOrden.getPersona().getId());
            dto.setPersonaNombre(savedOrden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedOrden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedOrden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedOrden.getPersona().getTelefono());
            dto.setPersonaEmail(savedOrden.getPersona().getEmail());
            dto.setUsuarioId(savedOrden.getUsuario().getId());
            dto.setUsuarioNombre(savedOrden.getUsuario().getNombre());
            dto.setUsuarioTelefono(savedOrden.getUsuario().getTelefono());
            dto.setMetodoPagoId(savedOrden.getMetodoPago().getId());
            dto.setMetodoPagoNombre(savedOrden.getMetodoPago().getMetodoPago());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<OrdenesDeVentasDTO> updateOrdenDeVenta(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<OrdenesDeVentas> optionalOrden = ordenesDeVentasRepository.findById(id);
            if (!optionalOrden.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            OrdenesDeVentas orden = optionalOrden.get();

            // Obtener datos del request
            String personaId = (String) requestBody.get("personaId");
            String usuarioId = (String) requestBody.get("usuarioId");
            String metodoPagoId = (String) requestBody.get("metodoPagoId");
            BigDecimal totalVenta = new BigDecimal(requestBody.get("totalVenta").toString());

            // Buscar las entidades relacionadas
            Optional<Personas> persona = personasRepository.findById(personaId);
            Optional<Usuarios> usuario = usuariosRepository.findById(usuarioId);
            Optional<MetodosPago> metodoPago = metodosPagoRepository.findById(metodoPagoId);

            if (!persona.isPresent() || !usuario.isPresent() || !metodoPago.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar la orden
            orden.setPersona(persona.get());
            orden.setUsuario(usuario.get());
            orden.setMetodoPago(metodoPago.get());
            orden.setTotalVenta(totalVenta);
            // Nota: fechaOrden no se actualiza para mantener la fecha original

            // Guardar
            OrdenesDeVentas savedOrden = ordenesDeVentasRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
            dto.setId(savedOrden.getId());
            dto.setFechaOrden(savedOrden.getFechaOrden());
            dto.setTotalVenta(savedOrden.getTotalVenta());
            dto.setPersonaId(savedOrden.getPersona().getId());
            dto.setPersonaNombre(savedOrden.getPersona().getNombre());
            dto.setPersonaApellidoPaterno(savedOrden.getPersona().getApellidoPaterno());
            dto.setPersonaApellidoMaterno(savedOrden.getPersona().getApellidoMaterno());
            dto.setPersonaTelefono(savedOrden.getPersona().getTelefono());
            dto.setPersonaEmail(savedOrden.getPersona().getEmail());
            dto.setUsuarioId(savedOrden.getUsuario().getId());
            dto.setUsuarioNombre(savedOrden.getUsuario().getNombre());
            dto.setUsuarioTelefono(savedOrden.getUsuario().getTelefono());
            dto.setMetodoPagoId(savedOrden.getMetodoPago().getId());
            dto.setMetodoPagoNombre(savedOrden.getMetodoPago().getMetodoPago());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteOrdenDeVenta(@PathVariable String id) {
        if (!ordenesDeVentasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        ordenesDeVentasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateOrdenDeVenta(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<OrdenesDeVentas> ordenOptional = ordenesDeVentasRepository.findById(id);
        if (ordenOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        OrdenesDeVentas ordenExistente = ordenOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("totalVenta")) {
            Number totalVentaValue = (Number) updates.get("totalVenta");
            ordenExistente.setTotalVenta(new BigDecimal(totalVentaValue.toString()));
        }

        // 3. Lógica para actualizar la relación con Personas
        if (updates.containsKey("persona")) {
            Map<String, String> personaMap = (Map<String, String>) updates.get("persona");
            String personaId = personaMap.get("id");
            Optional<Personas> personaOpt = personasRepository.findById(personaId);
            if (personaOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: La Persona con ID " + personaId + " no existe.");
            }
            ordenExistente.setPersona(personaOpt.get());
        }

        // 4. Lógica para actualizar la relación con Usuarios
        if (updates.containsKey("usuario")) {
            Map<String, String> usuarioMap = (Map<String, String>) updates.get("usuario");
            String usuarioId = usuarioMap.get("id");
            Optional<Usuarios> usuarioOpt = usuariosRepository.findById(usuarioId);
            if (usuarioOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Usuario con ID " + usuarioId + " no existe.");
            }
            ordenExistente.setUsuario(usuarioOpt.get());
        }

        // 5. Lógica para actualizar la relación con MetodosPago
        if (updates.containsKey("metodoPago")) {
            Map<String, String> metodoPagoMap = (Map<String, String>) updates.get("metodoPago");
            String metodoPagoId = metodoPagoMap.get("id");
            Optional<MetodosPago> metodoPagoOpt = metodosPagoRepository.findById(metodoPagoId);
            if (metodoPagoOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El Método de Pago con ID " + metodoPagoId + " no existe.");
            }
            ordenExistente.setMetodoPago(metodoPagoOpt.get());
        }

        // 6. Guardar y devolver
        OrdenesDeVentas ordenActualizada = ordenesDeVentasRepository.save(ordenExistente);

        // Crear DTO para respuesta
        OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
        dto.setId(ordenActualizada.getId());
        dto.setFechaOrden(ordenActualizada.getFechaOrden());
        dto.setTotalVenta(ordenActualizada.getTotalVenta());
        dto.setPersonaId(ordenActualizada.getPersona().getId());
        dto.setPersonaNombre(ordenActualizada.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(ordenActualizada.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(ordenActualizada.getPersona().getApellidoMaterno());
        dto.setPersonaTelefono(ordenActualizada.getPersona().getTelefono());
        dto.setPersonaEmail(ordenActualizada.getPersona().getEmail());
        dto.setUsuarioId(ordenActualizada.getUsuario().getId());
        dto.setUsuarioNombre(ordenActualizada.getUsuario().getNombre());
        dto.setUsuarioTelefono(ordenActualizada.getUsuario().getTelefono());
        dto.setMetodoPagoId(ordenActualizada.getMetodoPago().getId());
        dto.setMetodoPagoNombre(ordenActualizada.getMetodoPago().getMetodoPago());

        return ResponseEntity.ok(dto);
    }

    // ===== ENDPOINT ESPECIAL PARA PROCESAR VENTA DESDE WORKSPACE =====

    /**
     * Procesa una venta completa desde las órdenes de workspace.
     * Endpoint: POST /api/workspaces/{workspaceId}/finalizar-venta
     */
    @PostMapping("/workspaces/{workspaceId}/finalizar-venta")
    public ResponseEntity<?> finalizarVentaDesdeWorkspace(
            @PathVariable String workspaceId,
            @RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener parámetros del request (algunos opcionales)
            String clienteId = (String) requestBody.get("clienteId"); // Puede ser null
            String usuarioId = (String) requestBody.get("usuarioId");
            String metodoPagoId = (String) requestBody.get("metodoPagoId");

            // Validar parámetros requeridos
            if (usuarioId == null || usuarioId.trim().isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El ID del usuario es requerido");
            }
            if (metodoPagoId == null || metodoPagoId.trim().isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El ID del método de pago es requerido");
            }

            // Si no se proporciona cliente, usar el cliente por defecto
            if (clienteId == null || clienteId.trim().isEmpty()) {
                clienteId = ventaService.obtenerClientePorDefecto();
            }

            // Procesar la venta
            OrdenesDeVentasDTO ventaProcesada = ventaService.procesarVentaDesdeWorkspace(
                    workspaceId, clienteId, usuarioId, metodoPagoId);

            return ResponseEntity.ok(ventaProcesada);

        } catch (IllegalArgumentException e) {
            return ResponseEntity.badRequest()
                    .body("Error de validación: " + e.getMessage());
        } catch (IllegalStateException e) {
            return ResponseEntity.badRequest()
                    .body("Error de estado: " + e.getMessage());
        } catch (Exception e) {
            return ResponseEntity.internalServerError()
                    .body("Error interno del servidor: " + e.getMessage());
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/OrdenesWorkspaceController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.OrdenesWorkspace;
import com.posfin.pos_finanzas_backend.models.Workspaces;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesWorkspaceRepository;
import com.posfin.pos_finanzas_backend.repositories.WorkspacesRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialPreciosRepository;
import com.posfin.pos_finanzas_backend.services.OrdenesWorkspaceService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.ArrayList;
import java.util.Map;
import java.math.BigDecimal;

@RestController
@RequestMapping("/api/ordenes-workspace")
public class OrdenesWorkspaceController {

    @Autowired
    private OrdenesWorkspaceRepository ordenesWorkspaceRepository;

    @Autowired
    private WorkspacesRepository workspacesRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @Autowired
    private OrdenesWorkspaceService ordenesWorkspaceService;

    @GetMapping
    public List<OrdenesWorkspaceDTO> getAllOrdenesWorkspace() {
        List<OrdenesWorkspace> ordenes = ordenesWorkspaceRepository.findAll();
        List<OrdenesWorkspaceDTO> ordenesDTO = new ArrayList<>();

        for (OrdenesWorkspace orden : ordenes) {
            OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
            dto.setId(orden.getId());
            dto.setCantidadPz(orden.getCantidadPz());
            dto.setCantidadKg(orden.getCantidadKg());

            // Mapear relaciones aplanadas
            dto.setWorkspaceId(orden.getWorkspace().getId());
            dto.setWorkspaceNombre(orden.getWorkspace().getNombre());

            dto.setProductoId(orden.getProducto().getId());
            dto.setProductoNombre(orden.getProducto().getNombre());

            dto.setHistorialPrecioId(orden.getHistorialPrecio().getId());
            dto.setPrecio(orden.getHistorialPrecio().getPrecio());

            ordenesDTO.add(dto);
        }

        return ordenesDTO;
    }

    @GetMapping("/{id}")
    public ResponseEntity<OrdenesWorkspaceDTO> getOrdenWorkspaceById(@PathVariable String id) {
        Optional<OrdenesWorkspace> optionalOrden = ordenesWorkspaceRepository.findById(id);

        if (!optionalOrden.isPresent()) {
            return ResponseEntity.notFound().build();
        }

        OrdenesWorkspace orden = optionalOrden.get();
        OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
        dto.setId(orden.getId());
        dto.setCantidadPz(orden.getCantidadPz());
        dto.setCantidadKg(orden.getCantidadKg());

        // Mapear relaciones aplanadas
        dto.setWorkspaceId(orden.getWorkspace().getId());
        dto.setWorkspaceNombre(orden.getWorkspace().getNombre());

        dto.setProductoId(orden.getProducto().getId());
        dto.setProductoNombre(orden.getProducto().getNombre());

        dto.setHistorialPrecioId(orden.getHistorialPrecio().getId());
        dto.setPrecio(orden.getHistorialPrecio().getPrecio());

        return ResponseEntity.ok(dto);
    }

    @PostMapping
    public ResponseEntity<OrdenesWorkspaceDTO> createOrdenWorkspace(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String workspaceId = (String) requestBody.get("workspaceId");
            String productoId = (String) requestBody.get("productoId");
            String historialPrecioId = (String) requestBody.get("historialPrecioId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<Workspaces> workspace = workspacesRepository.findById(workspaceId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialPrecios> historialPrecio = historialPreciosRepository.findById(historialPrecioId);

            if (!workspace.isPresent() || !producto.isPresent() || !historialPrecio.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear la orden
            OrdenesWorkspace orden = new OrdenesWorkspace();
            orden.setWorkspace(workspace.get());
            orden.setProducto(producto.get());
            orden.setHistorialPrecio(historialPrecio.get());
            orden.setCantidadPz(cantidadPz);
            orden.setCantidadKg(cantidadKg);

            // Guardar
            OrdenesWorkspace savedOrden = ordenesWorkspaceRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
            dto.setId(savedOrden.getId());
            dto.setCantidadPz(savedOrden.getCantidadPz());
            dto.setCantidadKg(savedOrden.getCantidadKg());
            dto.setWorkspaceId(savedOrden.getWorkspace().getId());
            dto.setWorkspaceNombre(savedOrden.getWorkspace().getNombre());
            dto.setProductoId(savedOrden.getProducto().getId());
            dto.setProductoNombre(savedOrden.getProducto().getNombre());
            dto.setHistorialPrecioId(savedOrden.getHistorialPrecio().getId());
            dto.setPrecio(savedOrden.getHistorialPrecio().getPrecio());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<OrdenesWorkspaceDTO> updateOrdenWorkspace(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<OrdenesWorkspace> optionalOrden = ordenesWorkspaceRepository.findById(id);
            if (!optionalOrden.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            OrdenesWorkspace orden = optionalOrden.get();

            // Obtener datos del request
            String workspaceId = (String) requestBody.get("workspaceId");
            String productoId = (String) requestBody.get("productoId");
            String historialPrecioId = (String) requestBody.get("historialPrecioId");
            BigDecimal cantidadPz = new BigDecimal(requestBody.get("cantidadPz").toString());
            BigDecimal cantidadKg = new BigDecimal(requestBody.get("cantidadKg").toString());

            // Buscar las entidades relacionadas
            Optional<Workspaces> workspace = workspacesRepository.findById(workspaceId);
            Optional<Productos> producto = productosRepository.findById(productoId);
            Optional<HistorialPrecios> historialPrecio = historialPreciosRepository.findById(historialPrecioId);

            if (!workspace.isPresent() || !producto.isPresent() || !historialPrecio.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar la orden
            orden.setWorkspace(workspace.get());
            orden.setProducto(producto.get());
            orden.setHistorialPrecio(historialPrecio.get());
            orden.setCantidadPz(cantidadPz);
            orden.setCantidadKg(cantidadKg);

            // Guardar
            OrdenesWorkspace savedOrden = ordenesWorkspaceRepository.save(orden);

            // Crear DTO para respuesta
            OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
            dto.setId(savedOrden.getId());
            dto.setCantidadPz(savedOrden.getCantidadPz());
            dto.setCantidadKg(savedOrden.getCantidadKg());
            dto.setWorkspaceId(savedOrden.getWorkspace().getId());
            dto.setWorkspaceNombre(savedOrden.getWorkspace().getNombre());
            dto.setProductoId(savedOrden.getProducto().getId());
            dto.setProductoNombre(savedOrden.getProducto().getNombre());
            dto.setHistorialPrecioId(savedOrden.getHistorialPrecio().getId());
            dto.setPrecio(savedOrden.getHistorialPrecio().getPrecio());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteOrdenWorkspace(@PathVariable String id) {
        if (!ordenesWorkspaceRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        ordenesWorkspaceRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateOrdenWorkspace(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<OrdenesWorkspace> ordenOptional = ordenesWorkspaceRepository.findById(id);
        if (ordenOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        OrdenesWorkspace ordenExistente = ordenOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("cantidadPz")) {
            Number cantidadPzValue = (Number) updates.get("cantidadPz");
            ordenExistente.setCantidadPz(new BigDecimal(cantidadPzValue.toString()));
        }
        if (updates.containsKey("cantidadKg")) {
            Number cantidadKgValue = (Number) updates.get("cantidadKg");
            ordenExistente.setCantidadKg(new BigDecimal(cantidadKgValue.toString()));
        }

        // 3. Lógica para actualizar la relación con Workspaces
        if (updates.containsKey("workspace")) {
            Map<String, String> workspaceMap = (Map<String, String>) updates.get("workspace");
            String workspaceId = workspaceMap.get("id");
            Optional<Workspaces> workspaceOpt = workspacesRepository.findById(workspaceId);
            if (workspaceOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Workspace con ID " + workspaceId + " no existe.");
            }
            ordenExistente.setWorkspace(workspaceOpt.get());
        }

        // 4. Lógica para actualizar la relación con Productos
        if (updates.containsKey("producto")) {
            Map<String, String> productoMap = (Map<String, String>) updates.get("producto");
            String productoId = productoMap.get("id");
            Optional<Productos> productoOpt = productosRepository.findById(productoId);
            if (productoOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Producto con ID " + productoId + " no existe.");
            }
            ordenExistente.setProducto(productoOpt.get());
        }

        // 5. Lógica para actualizar la relación con HistorialPrecios
        if (updates.containsKey("historialPrecio")) {
            Map<String, String> historialPrecioMap = (Map<String, String>) updates.get("historialPrecio");
            String historialPrecioId = historialPrecioMap.get("id");
            Optional<HistorialPrecios> historialPrecioOpt = historialPreciosRepository.findById(historialPrecioId);
            if (historialPrecioOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: El Historial de Precio con ID " + historialPrecioId + " no existe.");
            }
            ordenExistente.setHistorialPrecio(historialPrecioOpt.get());
        }

        // 6. Guardar y devolver
        OrdenesWorkspace ordenActualizada = ordenesWorkspaceRepository.save(ordenExistente);

        // Crear DTO para respuesta
        OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
        dto.setId(ordenActualizada.getId());
        dto.setCantidadPz(ordenActualizada.getCantidadPz());
        dto.setCantidadKg(ordenActualizada.getCantidadKg());
        dto.setWorkspaceId(ordenActualizada.getWorkspace().getId());
        dto.setWorkspaceNombre(ordenActualizada.getWorkspace().getNombre());
        dto.setProductoId(ordenActualizada.getProducto().getId());
        dto.setProductoNombre(ordenActualizada.getProducto().getNombre());
        dto.setHistorialPrecioId(ordenActualizada.getHistorialPrecio().getId());
        dto.setPrecio(ordenActualizada.getHistorialPrecio().getPrecio());

        return ResponseEntity.ok(dto);
    }

    // ===== ENDPOINTS MEJORADOS PARA PUNTO DE VENTA =====

    /**
     * Obtener todas las órdenes de un workspace específico.
     * Endpoint: GET /api/workspaces/{workspaceId}/ordenes
     */
    @GetMapping("/workspaces/{workspaceId}/ordenes")
    public ResponseEntity<List<OrdenesWorkspaceDTO>> getOrdenesByWorkspace(@PathVariable String workspaceId) {
        try {
            // Validar que el workspace existe
            if (!workspacesRepository.existsById(workspaceId)) {
                return ResponseEntity.notFound().build();
            }

            // Buscar órdenes del workspace
            List<OrdenesWorkspace> ordenes = ordenesWorkspaceRepository.findByWorkspaceId(workspaceId);
            List<OrdenesWorkspaceDTO> ordenesDTO = new ArrayList<>();

            for (OrdenesWorkspace orden : ordenes) {
                OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
                dto.setId(orden.getId());
                dto.setCantidadPz(orden.getCantidadPz());
                dto.setCantidadKg(orden.getCantidadKg());
                dto.setWorkspaceId(orden.getWorkspace().getId());
                dto.setWorkspaceNombre(orden.getWorkspace().getNombre());
                dto.setProductoId(orden.getProducto().getId());
                dto.setProductoNombre(orden.getProducto().getNombre());
                dto.setHistorialPrecioId(orden.getHistorialPrecio().getId());
                dto.setPrecio(orden.getHistorialPrecio().getPrecio());
                ordenesDTO.add(dto);
            }

            return ResponseEntity.ok(ordenesDTO);

        } catch (Exception e) {
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * Limpiar todas las órdenes de un workspace específico.
     * Endpoint: DELETE /api/workspaces/{workspaceId}/ordenes
     */
    @DeleteMapping("/workspaces/{workspaceId}/ordenes")
    public ResponseEntity<?> limpiarOrdenesWorkspace(@PathVariable String workspaceId) {
        try {
            // Validar que el workspace existe
            if (!workspacesRepository.existsById(workspaceId)) {
                return ResponseEntity.notFound().build();
            }

            // Eliminar todas las órdenes del workspace
            ordenesWorkspaceRepository.deleteByWorkspaceId(workspaceId);

            return ResponseEntity.noContent().build();

        } catch (Exception e) {
            return ResponseEntity.internalServerError()
                    .body("Error al limpiar órdenes del workspace: " + e.getMessage());
        }
    }

    /**
     * Agregar o actualizar un producto en el carrito del workspace.
     * Si el producto ya existe, suma las cantidades.
     * Endpoint: POST /api/ordenes-workspace/agregar-producto
     */
    @PostMapping("/agregar-producto")
    public ResponseEntity<?> agregarProductoACarrito(@RequestBody Map<String, Object> requestBody) {
        try {
            String workspaceId = (String) requestBody.get("workspaceId");
            String productoId = (String) requestBody.get("productoId");

            BigDecimal cantidadPz = requestBody.containsKey("cantidadPz") && requestBody.get("cantidadPz") != null
                    ? new BigDecimal(requestBody.get("cantidadPz").toString())
                    : BigDecimal.ZERO;

            BigDecimal cantidadKg = requestBody.containsKey("cantidadKg") && requestBody.get("cantidadKg") != null
                    ? new BigDecimal(requestBody.get("cantidadKg").toString())
                    : BigDecimal.ZERO;

            // Validar campos requeridos
            if (workspaceId == null || productoId == null) {
                return ResponseEntity.badRequest()
                        .body("Error: workspaceId y productoId son requeridos");
            }

            // Usar el servicio para agregar/actualizar producto
            OrdenesWorkspaceDTO resultado = ordenesWorkspaceService.agregarOActualizarProducto(
                    workspaceId, productoId, cantidadPz, cantidadKg);

            return ResponseEntity.ok(resultado);

        } catch (IllegalArgumentException e) {
            return ResponseEntity.badRequest()
                    .body("Error de validación: " + e.getMessage());
        } catch (IllegalStateException e) {
            return ResponseEntity.badRequest()
                    .body("Error: " + e.getMessage());
        } catch (Exception e) {
            return ResponseEntity.internalServerError()
                    .body("Error interno del servidor: " + e.getMessage());
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/PersonasController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.models.CategoriaPersonas;
import com.posfin.pos_finanzas_backend.dtos.PersonasDTO;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import com.posfin.pos_finanzas_backend.repositories.CategoriaPersonasRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.Map;

@RestController
@RequestMapping("/api/personas")
public class PersonasController {

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    @Autowired
    private CategoriaPersonasRepository categoriaPersonasRepository;

    @GetMapping
    public List<PersonasDTO> getAllPersonas() {
        return personasRepository.findAll().stream()
                .map(this::convertToDTO)
                .collect(java.util.stream.Collectors.toList());
    }

    @GetMapping("/{id}")
    public ResponseEntity<PersonasDTO> getPersonaById(@PathVariable String id) {
        Optional<Personas> optionalPersona = personasRepository.findById(id);
        return optionalPersona.map(persona -> ResponseEntity.ok(convertToDTO(persona)))
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public ResponseEntity<PersonasDTO> createPersona(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String nombre = (String) requestBody.get("nombre");
            String apellidoPaterno = (String) requestBody.get("apellidoPaterno");
            String apellidoMaterno = (String) requestBody.get("apellidoMaterno");
            String rfc = (String) requestBody.get("rfc");
            String telefono = (String) requestBody.get("telefono");
            String email = (String) requestBody.get("email");
            String estadosId = (String) requestBody.get("estadosId");
            String categoriaPersonasId = (String) requestBody.get("categoriaPersonasId");

            // Buscar las entidades relacionadas
            Optional<Estados> estado = estadosRepository.findById(estadosId);
            Optional<CategoriaPersonas> categoria = categoriaPersonasRepository.findById(categoriaPersonasId);

            if (!estado.isPresent() || !categoria.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear la persona
            Personas persona = new Personas();
            persona.setNombre(nombre);
            persona.setApellidoPaterno(apellidoPaterno);
            persona.setApellidoMaterno(apellidoMaterno);
            persona.setRfc(rfc);
            persona.setTelefono(telefono);
            persona.setEmail(email);
            persona.setEstados(estado.get());
            persona.setCategoriaPersonas(categoria.get());

            // Guardar
            Personas savedPersona = personasRepository.save(persona);

            // Crear DTO para respuesta
            PersonasDTO dto = new PersonasDTO();
            dto.setId(savedPersona.getId());
            dto.setNombre(savedPersona.getNombre());
            dto.setApellidoPaterno(savedPersona.getApellidoPaterno());
            dto.setApellidoMaterno(savedPersona.getApellidoMaterno());
            dto.setRfc(savedPersona.getRfc());
            dto.setTelefono(savedPersona.getTelefono());
            dto.setEmail(savedPersona.getEmail());
            dto.setEstadosId(savedPersona.getEstados().getId());
            dto.setEstadosEstado(savedPersona.getEstados().getEstado());
            dto.setCategoriaPersonasId(savedPersona.getCategoriaPersonas().getId());
            dto.setCategoriaPersonasCategoria(savedPersona.getCategoriaPersonas().getCategoria());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<PersonasDTO> updatePersona(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<Personas> optionalPersona = personasRepository.findById(id);
            if (!optionalPersona.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            Personas persona = optionalPersona.get();

            // Obtener datos del request
            String nombre = (String) requestBody.get("nombre");
            String apellidoPaterno = (String) requestBody.get("apellidoPaterno");
            String apellidoMaterno = (String) requestBody.get("apellidoMaterno");
            String rfc = (String) requestBody.get("rfc");
            String telefono = (String) requestBody.get("telefono");
            String email = (String) requestBody.get("email");
            String estadosId = (String) requestBody.get("estadosId");
            String categoriaPersonasId = (String) requestBody.get("categoriaPersonasId");

            // Buscar las entidades relacionadas
            Optional<Estados> estado = estadosRepository.findById(estadosId);
            Optional<CategoriaPersonas> categoria = categoriaPersonasRepository.findById(categoriaPersonasId);

            if (!estado.isPresent() || !categoria.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Actualizar la persona
            persona.setNombre(nombre);
            persona.setApellidoPaterno(apellidoPaterno);
            persona.setApellidoMaterno(apellidoMaterno);
            persona.setRfc(rfc);
            persona.setTelefono(telefono);
            persona.setEmail(email);
            persona.setEstados(estado.get());
            persona.setCategoriaPersonas(categoria.get());

            // Guardar
            Personas savedPersona = personasRepository.save(persona);

            // Crear DTO para respuesta
            PersonasDTO dto = new PersonasDTO();
            dto.setId(savedPersona.getId());
            dto.setNombre(savedPersona.getNombre());
            dto.setApellidoPaterno(savedPersona.getApellidoPaterno());
            dto.setApellidoMaterno(savedPersona.getApellidoMaterno());
            dto.setRfc(savedPersona.getRfc());
            dto.setTelefono(savedPersona.getTelefono());
            dto.setEmail(savedPersona.getEmail());
            dto.setEstadosId(savedPersona.getEstados().getId());
            dto.setEstadosEstado(savedPersona.getEstados().getEstado());
            dto.setCategoriaPersonasId(savedPersona.getCategoriaPersonas().getId());
            dto.setCategoriaPersonasCategoria(savedPersona.getCategoriaPersonas().getCategoria());

            return ResponseEntity.ok(dto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deletePersona(@PathVariable String id) {
        if (!personasRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        personasRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdatePersona(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Personas> personaOptional = personasRepository.findById(id);
        if (personaOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Personas personaExistente = personaOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("nombre")) {
            personaExistente.setNombre((String) updates.get("nombre"));
        }
        if (updates.containsKey("apellidoPaterno")) {
            personaExistente.setApellidoPaterno((String) updates.get("apellidoPaterno"));
        }
        if (updates.containsKey("apellidoMaterno")) {
            personaExistente.setApellidoMaterno((String) updates.get("apellidoMaterno"));
        }
        if (updates.containsKey("rfc")) {
            personaExistente.setRfc((String) updates.get("rfc"));
        }
        if (updates.containsKey("telefono")) {
            personaExistente.setTelefono((String) updates.get("telefono"));
        }
        if (updates.containsKey("email")) {
            personaExistente.setEmail((String) updates.get("email"));
        }

        // 3. Lógica para actualizar la relación con Estados
        if (updates.containsKey("estados")) {
            Map<String, String> estadosMap = (Map<String, String>) updates.get("estados");
            String estadosId = estadosMap.get("id");
            Optional<Estados> estadosOpt = estadosRepository.findById(estadosId);
            if (estadosOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Estado con ID " + estadosId + " no existe.");
            }
            personaExistente.setEstados(estadosOpt.get());
        }

        // 4. Lógica para actualizar la relación con CategoriaPersonas
        if (updates.containsKey("categoriaPersonas")) {
            Map<String, String> categoriaPersonasMap = (Map<String, String>) updates.get("categoriaPersonas");
            String categoriaPersonasId = categoriaPersonasMap.get("id");
            Optional<CategoriaPersonas> categoriaPersonasOpt = categoriaPersonasRepository
                    .findById(categoriaPersonasId);
            if (categoriaPersonasOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: La Categoría de Persona con ID " + categoriaPersonasId + " no existe.");
            }
            personaExistente.setCategoriaPersonas(categoriaPersonasOpt.get());
        }

        // 5. Guardar y devolver
        Personas personaActualizada = personasRepository.save(personaExistente);
        PersonasDTO dto = convertToDTO(personaActualizada);
        return ResponseEntity.ok(dto);
    }

    // Método auxiliar para convertir Personas a PersonasDTO
    private PersonasDTO convertToDTO(Personas persona) {
        PersonasDTO dto = new PersonasDTO();
        dto.setId(persona.getId());
        dto.setNombre(persona.getNombre());
        dto.setApellidoPaterno(persona.getApellidoPaterno());
        dto.setApellidoMaterno(persona.getApellidoMaterno());
        dto.setRfc(persona.getRfc());
        dto.setTelefono(persona.getTelefono());
        dto.setEmail(persona.getEmail());

        // Mapear relación con Estados
        if (persona.getEstados() != null) {
            dto.setEstadosId(persona.getEstados().getId());
            dto.setEstadosEstado(persona.getEstados().getEstado());
        }

        // Mapear relación con CategoriaPersonas
        if (persona.getCategoriaPersonas() != null) {
            dto.setCategoriaPersonasId(persona.getCategoriaPersonas().getId());
            dto.setCategoriaPersonasCategoria(persona.getCategoriaPersonas().getCategoria());
        }

        return dto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/ProductosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.CategoriasProductos;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.models.HistorialCostos;
import com.posfin.pos_finanzas_backend.dtos.ProductosDTO;
import com.posfin.pos_finanzas_backend.dtos.ProductoCreacionDTO;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.CategoriasProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialPreciosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialCostosRepository;
import com.posfin.pos_finanzas_backend.services.ProductoService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Optional;
import java.util.Map;

@RestController
@RequestMapping("/api/productos")
public class ProductosController {

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private CategoriasProductosRepository categoriasProductosRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    @Autowired
    private ProductoService productoService;

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @Autowired
    private HistorialCostosRepository historialCostosRepository;

    @GetMapping
    public List<ProductosDTO> getAllProductos() {
        return productosRepository.findAll().stream()
                .map(productoService::convertToDTO)
                .collect(java.util.stream.Collectors.toList());
    }

    @GetMapping("/{id}")
    public ResponseEntity<ProductosDTO> getProductoById(@PathVariable String id) {
        Optional<Productos> optionalProducto = productosRepository.findById(id);
        return optionalProducto.map(producto -> ResponseEntity.ok(productoService.convertToDTO(producto)))
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public ResponseEntity<ProductosDTO> createProducto(@RequestBody Map<String, Object> requestBody) {
        try {
            // Obtener datos del request
            String nombre = (String) requestBody.get("nombre");
            String categoriasProductosId = (String) requestBody.get("categoriasProductosId");
            String proveedorId = (String) requestBody.get("proveedorId");
            String estadosId = (String) requestBody.get("estadosId");

            // Buscar las entidades relacionadas
            Optional<CategoriasProductos> categoria = categoriasProductosRepository.findById(categoriasProductosId);
            Optional<Personas> proveedor = personasRepository.findById(proveedorId);
            Optional<Estados> estado = estadosRepository.findById(estadosId);

            if (!categoria.isPresent() || !proveedor.isPresent() || !estado.isPresent()) {
                return ResponseEntity.badRequest().build();
            }

            // Crear el producto
            Productos producto = new Productos();
            producto.setNombre(nombre);
            producto.setCategoriasProductos(categoria.get());
            producto.setProveedor(proveedor.get());
            producto.setEstados(estado.get());

            // Guardar
            Productos savedProducto = productosRepository.save(producto);

            return ResponseEntity.ok(productoService.convertToDTO(savedProducto));
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PostMapping("/completo")
    public ResponseEntity<?> createProductoCompleto(@RequestBody ProductoCreacionDTO productoCreacionDTO) {
        try {
            ProductosDTO nuevoProducto = productoService.crearProductoCompleto(productoCreacionDTO);
            return ResponseEntity.ok(nuevoProducto);
        } catch (Exception e) {
            return ResponseEntity.badRequest().body("Error al crear el producto: " + e.getMessage());
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<?> updateProducto(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        try {
            Optional<Productos> optionalProducto = productosRepository.findById(id);
            if (!optionalProducto.isPresent()) {
                return ResponseEntity.notFound().build();
            }

            Productos producto = optionalProducto.get();
            boolean productoModificado = false;
            StringBuilder motivoEdicion = new StringBuilder();

            // Actualizar nombre si viene en el request
            if (requestBody.containsKey("nombre")) {
                String nombre = (String) requestBody.get("nombre");
                if (!nombre.equals(producto.getNombre())) {
                    producto.setNombre(nombre);
                    motivoEdicion.append("Nombre,");
                    productoModificado = true;
                }
            }

            // Actualizar categoría solo si viene en el request
            if (requestBody.containsKey("categoriasProductosId")) {
                String categoriasProductosId = (String) requestBody.get("categoriasProductosId");
                if (categoriasProductosId != null) {
                    Optional<CategoriasProductos> categoria = categoriasProductosRepository
                            .findById(categoriasProductosId);
                    if (!categoria.isPresent()) {
                        return ResponseEntity.badRequest().body("Categoría no encontrada: " + categoriasProductosId);
                    }
                    if (!categoria.get().getId().equals(producto.getCategoriasProductos().getId())) {
                        producto.setCategoriasProductos(categoria.get());
                        motivoEdicion.append("Categoria,");
                        productoModificado = true;
                    }
                }
            }

            // Actualizar proveedor solo si viene en el request
            if (requestBody.containsKey("proveedorId")) {
                String proveedorId = (String) requestBody.get("proveedorId");
                if (proveedorId != null) {
                    Optional<Personas> proveedor = personasRepository.findById(proveedorId);
                    if (!proveedor.isPresent()) {
                        return ResponseEntity.badRequest().body("Proveedor no encontrado: " + proveedorId);
                    }
                    if (!proveedor.get().getId().equals(producto.getProveedor().getId())) {
                        producto.setProveedor(proveedor.get());
                        motivoEdicion.append("Proveedor,");
                        productoModificado = true;
                    }
                }
            }

            // Guardar producto
            Productos savedProducto = productosRepository.save(producto);

            // Actualizar precios si han cambiado
            if (requestBody.containsKey("precioVenta") || requestBody.containsKey("precioVentaActual")) {
                Double precioVentaActual = null;
                if (requestBody.get("precioVenta") != null) {
                    precioVentaActual = ((Number) requestBody.get("precioVenta")).doubleValue();
                } else if (requestBody.get("precioVentaActual") != null) {
                    precioVentaActual = ((Number) requestBody.get("precioVentaActual")).doubleValue();
                }

                if (precioVentaActual != null) {
                    // Verificar si el precio ha cambiado
                    Optional<HistorialPrecios> precioActualOpt = historialPreciosRepository
                            .findLatestByProducto(savedProducto);
                    boolean precioHaCambiado = !precioActualOpt.isPresent() ||
                            !precioActualOpt.get().getPrecio().equals(java.math.BigDecimal.valueOf(precioVentaActual));

                    if (precioHaCambiado) {
                        HistorialPrecios nuevoPrecio = new HistorialPrecios();
                        nuevoPrecio.setProductos(savedProducto);
                        nuevoPrecio.setPrecio(java.math.BigDecimal.valueOf(precioVentaActual));
                        nuevoPrecio.setFechaDeRegistro(java.time.ZonedDateTime.now());
                        historialPreciosRepository.save(nuevoPrecio);
                        motivoEdicion.append("PrecioVenta,");
                        productoModificado = true;
                    }
                }
            }

            if (requestBody.containsKey("precioCompra") || requestBody.containsKey("precioCompraActual")) {
                Double precioCompraActual = null;
                if (requestBody.get("precioCompra") != null) {
                    precioCompraActual = ((Number) requestBody.get("precioCompra")).doubleValue();
                } else if (requestBody.get("precioCompraActual") != null) {
                    precioCompraActual = ((Number) requestBody.get("precioCompraActual")).doubleValue();
                }

                if (precioCompraActual != null) {
                    // Verificar si el costo ha cambiado
                    Optional<HistorialCostos> costoActualOpt = historialCostosRepository
                            .findLatestByProducto(savedProducto);
                    boolean costoHaCambiado = !costoActualOpt.isPresent() ||
                            !costoActualOpt.get().getCosto().equals(java.math.BigDecimal.valueOf(precioCompraActual));

                    if (costoHaCambiado) {
                        HistorialCostos nuevoCosto = new HistorialCostos();
                        nuevoCosto.setProductos(savedProducto);
                        nuevoCosto.setCosto(java.math.BigDecimal.valueOf(precioCompraActual));
                        nuevoCosto.setFechaDeRegistro(java.time.ZonedDateTime.now());
                        historialCostosRepository.save(nuevoCosto);
                        motivoEdicion.append("PrecioCompra,");
                        productoModificado = true;
                    }
                }
            }

            // Registrar movimiento de edición si hubo cambios
            if (productoModificado) {
                String motivo = motivoEdicion.toString();
                if (motivo.endsWith(",")) {
                    motivo = motivo.substring(0, motivo.length() - 1);
                }
                
                // Intentar obtener el usuario del request o usar null para que use uno por defecto
                String usuarioId = null;
                if (requestBody.containsKey("usuarioId")) {
                    usuarioId = (String) requestBody.get("usuarioId");
                }
                
                productoService.registrarMovimientoEdicion(savedProducto.getId(), usuarioId, motivo);
            }

            return ResponseEntity.ok(productoService.convertToDTO(savedProducto));
        } catch (Exception e) {
            e.printStackTrace(); // Para debug
            return ResponseEntity.badRequest().body("Error al actualizar producto: " + e.getMessage());
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteProducto(@PathVariable String id) {
        if (!productosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        productosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}/desactivar")
    public ResponseEntity<?> desactivarProducto(@PathVariable String id) {
        try {
            ProductosDTO productoDesactivado = productoService.desactivarProducto(id);
            return ResponseEntity.ok(productoDesactivado);
        } catch (Exception e) {
            return ResponseEntity.badRequest().body("Error al desactivar el producto: " + e.getMessage());
        }
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateProducto(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Productos> productoOptional = productosRepository.findById(id);
        if (productoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Productos productoExistente = productoOptional.get();
        
        boolean productoModificado = false;
        StringBuilder motivoEdicion = new StringBuilder();

        // 2. Actualizar campos simples
        if (updates.containsKey("nombre")) {
            String nuevoNombre = (String) updates.get("nombre");
            if (!nuevoNombre.equals(productoExistente.getNombre())) {
                productoExistente.setNombre(nuevoNombre);
                motivoEdicion.append("Nombre,");
                productoModificado = true;
            }
        }

        // 3. Lógica para actualizar la relación con CategoriasProductos
        if (updates.containsKey("categoriasProductos")) {
            Map<String, String> categoriasProductosMap = (Map<String, String>) updates.get("categoriasProductos");
            String categoriasProductosId = categoriasProductosMap.get("id");
            Optional<CategoriasProductos> categoriasProductosOpt = categoriasProductosRepository
                    .findById(categoriasProductosId);
            if (categoriasProductosOpt.isEmpty()) {
                return ResponseEntity.badRequest()
                        .body("Error: La Categoría de Producto con ID " + categoriasProductosId + " no existe.");
            }
            if (!categoriasProductosId.equals(productoExistente.getCategoriasProductos().getId())) {
                productoExistente.setCategoriasProductos(categoriasProductosOpt.get());
                motivoEdicion.append("Categoria,");
                productoModificado = true;
            }
        }

        // 4. Lógica para actualizar la relación con Proveedor (Personas)
        if (updates.containsKey("proveedor")) {
            Map<String, String> proveedorMap = (Map<String, String>) updates.get("proveedor");
            String proveedorId = proveedorMap.get("id");
            Optional<Personas> proveedorOpt = personasRepository.findById(proveedorId);
            if (proveedorOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Proveedor con ID " + proveedorId + " no existe.");
            }
            if (!proveedorId.equals(productoExistente.getProveedor().getId())) {
                productoExistente.setProveedor(proveedorOpt.get());
                motivoEdicion.append("Proveedor,");
                productoModificado = true;
            }
        }

        // 5. Lógica para actualizar la relación con Estados
        if (updates.containsKey("estados")) {
            Map<String, String> estadosMap = (Map<String, String>) updates.get("estados");
            String estadosId = estadosMap.get("id");
            Optional<Estados> estadosOpt = estadosRepository.findById(estadosId);
            if (estadosOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Estado con ID " + estadosId + " no existe.");
            }
            if (!estadosId.equals(productoExistente.getEstados().getId())) {
                productoExistente.setEstados(estadosOpt.get());
                motivoEdicion.append("Estado,");
                productoModificado = true;
            }
        }

        // 6. Guardar y registrar movimiento si hubo cambios
        Productos productoActualizado = productosRepository.save(productoExistente);
        
        if (productoModificado) {
            String motivo = motivoEdicion.toString();
            if (motivo.endsWith(",")) {
                motivo = motivo.substring(0, motivo.length() - 1);
            }
            
            // Intentar obtener el usuario del request o usar null para que use uno por defecto
            String usuarioId = null;
            if (updates.containsKey("usuarioId")) {
                usuarioId = (String) updates.get("usuarioId");
            }
            
            try {
                productoService.registrarMovimientoEdicion(productoActualizado.getId(), usuarioId, motivo);
            } catch (Exception e) {
                // Log error pero no fallar la actualización
                System.err.println("Error al registrar movimiento de edición: " + e.getMessage());
            }
        }
        
        ProductosDTO dto = productoService.convertToDTO(productoActualizado);
        return ResponseEntity.ok(dto);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/RolController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.dtos.RolResponseDTO;
import com.posfin.pos_finanzas_backend.services.RolService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController
@RequestMapping("/api/roles")
@CrossOrigin(origins = "*")
public class RolController {

    @Autowired
    private RolService rolService;

    /**
     * 🔍 Obtener lista de todos los roles para popular el dropdown en el frontend
     * Endpoint: GET /api/roles
     * Response: Lista de RolResponseDTO con id y nombre de cada rol
     * Usage: Modal de crear empleado - dropdown de selección de rol
     */
    @GetMapping
    public ResponseEntity<List<RolResponseDTO>> obtenerTodosLosRoles() {
        try {
            List<RolResponseDTO> roles = rolService.obtenerTodosLosRoles();
            return ResponseEntity.ok(roles);
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al obtener roles: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().build();
        }
    }

    /**
     * 🔍 Obtener rol por ID (para casos específicos del frontend)
     * Endpoint: GET /api/roles/{id}
     * Path Variable: id del rol
     * Response: RolResponseDTO del rol solicitado
     */
    @GetMapping("/{id}")
    public ResponseEntity<?> obtenerRolPorId(@PathVariable Long id) {
        try {
            RolResponseDTO rol = rolService.obtenerRolPorId(id);
            return ResponseEntity.ok(rol);
        } catch (IllegalArgumentException e) {
            return ResponseEntity.badRequest().body(e.getMessage());
        } catch (Exception e) {
            // Log del error para debugging
            System.err.println("Error al obtener rol por ID: " + e.getMessage());
            e.printStackTrace();
            return ResponseEntity.internalServerError().body("Error interno del servidor");
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/TipoMovimientosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.TipoMovimientos;
import com.posfin.pos_finanzas_backend.repositories.TIpoMovimientosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/tipo-movimientos")
public class TipoMovimientosController {
    @Autowired
    private TIpoMovimientosRepository tipoMovimientosRepository;

    @GetMapping
    public List<TipoMovimientos> getAllTipoMovimientos() {
        return tipoMovimientosRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<TipoMovimientos> getTipoMovimientoById(@PathVariable String id) {
        Optional<TipoMovimientos> tipoMovimiento = tipoMovimientosRepository.findById(id);
        return tipoMovimiento.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public TipoMovimientos createTipoMovimiento(@RequestBody TipoMovimientos tipoMovimiento) {
        return tipoMovimientosRepository.save(tipoMovimiento);
    }

    @PutMapping("/{id}")
    public ResponseEntity<TipoMovimientos> updateTipoMovimiento(@PathVariable String id,
            @RequestBody TipoMovimientos tipoMovimientoDetails) {
        Optional<TipoMovimientos> optionalTipoMovimiento = tipoMovimientosRepository.findById(id);
        if (!optionalTipoMovimiento.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        TipoMovimientos tipoMovimiento = optionalTipoMovimiento.get();
        tipoMovimiento.setMovimiento(tipoMovimientoDetails.getMovimiento());
        return ResponseEntity.ok(tipoMovimientosRepository.save(tipoMovimiento));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteTipoMovimiento(@PathVariable String id) {
        if (!tipoMovimientosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        tipoMovimientosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateTipoMovimiento(@PathVariable String id,
            @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<TipoMovimientos> tipoMovimientoOptional = tipoMovimientosRepository.findById(id);
        if (tipoMovimientoOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        TipoMovimientos tipoMovimientoExistente = tipoMovimientoOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("movimiento")) {
            tipoMovimientoExistente.setMovimiento((String) updates.get("movimiento"));
        }

        // 3. Guardar y devolver
        TipoMovimientos tipoMovimientoActualizado = tipoMovimientosRepository.save(tipoMovimientoExistente);
        return ResponseEntity.ok(tipoMovimientoActualizado);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/UbicacionesController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Ubicaciones;
import com.posfin.pos_finanzas_backend.repositories.UbicacionesRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;

@RestController
@RequestMapping("/api/ubicaciones")
public class UbicacionesController {
    @Autowired
    private UbicacionesRepository ubicacionesRepository;

    @GetMapping
    public List<Ubicaciones> getAllUbicaciones() {
        return ubicacionesRepository.findAll();
    }

    @GetMapping("/{id}")
    public ResponseEntity<Ubicaciones> getUbicacionById(@PathVariable String id) {
        Optional<Ubicaciones> ubicacion = ubicacionesRepository.findById(id);
        return ubicacion.map(ResponseEntity::ok)
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    @PostMapping
    public Ubicaciones createUbicacion(@RequestBody Ubicaciones ubicacion) {
        return ubicacionesRepository.save(ubicacion);
    }

    @PutMapping("/{id}")
    public ResponseEntity<Ubicaciones> updateUbicacion(@PathVariable String id,
            @RequestBody Ubicaciones ubicacionDetails) {
        Optional<Ubicaciones> optionalUbicacion = ubicacionesRepository.findById(id);
        if (!optionalUbicacion.isPresent()) {
            return ResponseEntity.notFound().build();
        }
        Ubicaciones ubicacion = optionalUbicacion.get();
        ubicacion.setNombre(ubicacionDetails.getNombre());
        ubicacion.setUbicacion(ubicacionDetails.getUbicacion());
        return ResponseEntity.ok(ubicacionesRepository.save(ubicacion));
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUbicacion(@PathVariable String id) {
        if (!ubicacionesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        ubicacionesRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateUbicacion(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Ubicaciones> ubicacionOptional = ubicacionesRepository.findById(id);
        if (ubicacionOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Ubicaciones ubicacionExistente = ubicacionOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("nombre")) {
            ubicacionExistente.setNombre((String) updates.get("nombre"));
        }
        if (updates.containsKey("ubicacion")) {
            ubicacionExistente.setUbicacion((String) updates.get("ubicacion"));
        }

        // 3. Guardar y devolver
        Ubicaciones ubicacionActualizada = ubicacionesRepository.save(ubicacionExistente);
        return ResponseEntity.ok(ubicacionActualizada);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/UsuariosController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.models.Roles;
import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.dtos.UsuariosDTO;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import com.posfin.pos_finanzas_backend.repositories.RolesRepository;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;

@RestController
@RequestMapping("/api/usuarios")
public class UsuariosController {
    @Autowired
    private UsuariosRepository usuariosRepository;

    @Autowired
    private RolesRepository rolesRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    // Obtener todos los usuarios
    @GetMapping
    public List<UsuariosDTO> getAllUsuarios() {
        return usuariosRepository.findAll().stream()
                .map(this::convertToDTO)
                .collect(Collectors.toList());
    }

    // Obtener un usuario por ID
    @GetMapping("/{id}")
    public ResponseEntity<UsuariosDTO> getUsuarioById(@PathVariable String id) {
        Optional<Usuarios> usuario = usuariosRepository.findById(id);
        return usuario.map(u -> ResponseEntity.ok(convertToDTO(u)))
                .orElseGet(() -> ResponseEntity.notFound().build());
    }

    // Crear un nuevo usuario
    @PostMapping
    public Usuarios createUsuario(@RequestBody Usuarios usuario) {
        // Validar que los roles y estados existan
        if (usuario.getRoles() != null && usuario.getRoles().getId() != null) {
            Roles roles = rolesRepository.findById(usuario.getRoles().getId())
                    .orElseThrow(() -> new RuntimeException("Roles no encontrado"));
            usuario.setRoles(roles);
        }

        if (usuario.getEstados() != null && usuario.getEstados().getId() != null) {
            Estados estados = estadosRepository.findById(usuario.getEstados().getId())
                    .orElseThrow(() -> new RuntimeException("Estados no encontrado"));
            usuario.setEstados(estados);
        }

        return usuariosRepository.save(usuario);
    }

    // Actualizar un usuario existente
    @PutMapping("/{id}")
    public ResponseEntity<Usuarios> updateUsuario(@PathVariable String id, @RequestBody Usuarios usuario) {
        if (!usuariosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }

        // Validar que los roles y estados existan
        if (usuario.getRoles() != null && usuario.getRoles().getId() != null) {
            Roles roles = rolesRepository.findById(usuario.getRoles().getId())
                    .orElseThrow(() -> new RuntimeException("Roles no encontrado"));
            usuario.setRoles(roles);
        }

        if (usuario.getEstados() != null && usuario.getEstados().getId() != null) {
            Estados estados = estadosRepository.findById(usuario.getEstados().getId())
                    .orElseThrow(() -> new RuntimeException("Estados no encontrado"));
            usuario.setEstados(estados);
        }

        usuario.setId(id);
        Usuarios updatedUsuario = usuariosRepository.save(usuario);
        return ResponseEntity.ok(updatedUsuario);
    }

    // Eliminar un usuario
    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteUsuario(@PathVariable String id) {
        if (!usuariosRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        usuariosRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateUsuario(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Usuarios> usuarioOptional = usuariosRepository.findById(id);
        if (usuarioOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Usuarios usuarioExistente = usuarioOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("nombre")) {
            usuarioExistente.setNombre((String) updates.get("nombre"));
        }
        if (updates.containsKey("contrasena")) {
            usuarioExistente.setContrasena((String) updates.get("contrasena"));
        }
        if (updates.containsKey("telefono")) {
            usuarioExistente.setTelefono((String) updates.get("telefono"));
        }

        // 3. Lógica para actualizar la relación con Roles
        if (updates.containsKey("roles")) {
            Map<String, String> rolesMap = (Map<String, String>) updates.get("roles");
            String rolesId = rolesMap.get("id");
            Optional<Roles> rolesOpt = rolesRepository.findById(rolesId);
            if (rolesOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Rol con ID " + rolesId + " no existe.");
            }
            usuarioExistente.setRoles(rolesOpt.get());
        }

        // 4. Lógica para actualizar la relación con Estados
        if (updates.containsKey("estados")) {
            Map<String, String> estadosMap = (Map<String, String>) updates.get("estados");
            String estadosId = estadosMap.get("id");
            Optional<Estados> estadosOpt = estadosRepository.findById(estadosId);
            if (estadosOpt.isEmpty()) {
                return ResponseEntity.badRequest().body("Error: El Estado con ID " + estadosId + " no existe.");
            }
            usuarioExistente.setEstados(estadosOpt.get());
        }

        // 5. Guardar y devolver
        Usuarios usuarioActualizado = usuariosRepository.save(usuarioExistente);
        UsuariosDTO dto = convertToDTO(usuarioActualizado);
        return ResponseEntity.ok(dto);
    }

    // Método auxiliar para convertir Usuarios a UsuariosDTO
    private UsuariosDTO convertToDTO(Usuarios usuario) {
        UsuariosDTO dto = new UsuariosDTO();
        dto.setId(usuario.getId());
        dto.setNombre(usuario.getNombre());
        dto.setContrasena(usuario.getContrasena());
        dto.setTelefono(usuario.getTelefono());

        // Mapear relación con Roles
        if (usuario.getRoles() != null) {
            dto.setRolesId(usuario.getRoles().getId());
            dto.setRolesRoles(usuario.getRoles().getRoles());
        }

        // Mapear relación con Estados
        if (usuario.getEstados() != null) {
            dto.setEstadosId(usuario.getEstados().getId());
            dto.setEstadosEstado(usuario.getEstados().getEstado());
        }

        return dto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/WorkspacesController.java`:

```java
package com.posfin.pos_finanzas_backend.controllers;

import com.posfin.pos_finanzas_backend.models.Workspaces;
import com.posfin.pos_finanzas_backend.dtos.WorkspaceStatusDTO;
import com.posfin.pos_finanzas_backend.dtos.WorkspacesDTO;
import com.posfin.pos_finanzas_backend.dtos.TicketVentaDTO;
import com.posfin.pos_finanzas_backend.dtos.FinalizarVentaRequestDTO;
import com.posfin.pos_finanzas_backend.dtos.VentaFinalizadaResponseDTO;
import com.posfin.pos_finanzas_backend.dtos.OrdenesDeVentasDTO;
import com.posfin.pos_finanzas_backend.repositories.WorkspacesRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesWorkspaceRepository;
import com.posfin.pos_finanzas_backend.services.VentaService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;
import java.util.Map;
import java.util.Optional;
import java.util.stream.Collectors;
import java.util.ArrayList;
import java.math.BigDecimal;

@RestController
@RequestMapping("/api/workspaces")
public class WorkspacesController {
    @Autowired
    private WorkspacesRepository workspacesRepository;

    @Autowired
    private OrdenesWorkspaceRepository ordenesWorkspaceRepository;

    @Autowired
    private VentaService ventaService;

    @GetMapping
    public List<WorkspacesDTO> getAllWorkspaces() {
        return workspacesRepository.findAll().stream()
                .map(this::convertToDTO)
                .collect(Collectors.toList());
    }

    @GetMapping("/{id}")
    public ResponseEntity<WorkspacesDTO> getWorkspaceById(@PathVariable String id) {
        Optional<Workspaces> workspace = workspacesRepository.findById(id);
        return workspace.map(w -> ResponseEntity.ok(convertToDTO(w)))
                .orElse(ResponseEntity.notFound().build());
    }

    @PostMapping
    public ResponseEntity<WorkspacesDTO> createWorkspace(@RequestBody Map<String, Object> requestBody) {
        try {
            String nombre = (String) requestBody.get("nombre");
            Boolean permanente = requestBody.containsKey("permanente") ? (Boolean) requestBody.get("permanente")
                    : false;

            Workspaces workspace = new Workspaces();
            workspace.setNombre(nombre);
            workspace.setPermanente(permanente);

            Workspaces savedWorkspace = workspacesRepository.save(workspace);
            return ResponseEntity.ok(convertToDTO(savedWorkspace));
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @PutMapping("/{id}")
    public ResponseEntity<WorkspacesDTO> updateWorkspace(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        if (!workspacesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }

        try {
            String nombre = (String) requestBody.get("nombre");
            Boolean permanente = requestBody.containsKey("permanente") ? (Boolean) requestBody.get("permanente")
                    : false;

            Workspaces workspace = new Workspaces();
            workspace.setId(id);
            workspace.setNombre(nombre);
            workspace.setPermanente(permanente);

            Workspaces updatedWorkspace = workspacesRepository.save(workspace);
            return ResponseEntity.ok(convertToDTO(updatedWorkspace));
        } catch (Exception e) {
            return ResponseEntity.badRequest().build();
        }
    }

    @DeleteMapping("/{id}")
    public ResponseEntity<Void> deleteWorkspace(@PathVariable String id) {
        if (!workspacesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }
        workspacesRepository.deleteById(id);
        return ResponseEntity.noContent().build();
    }

    @PatchMapping("/{id}")
    public ResponseEntity<?> partialUpdateWorkspace(@PathVariable String id, @RequestBody Map<String, Object> updates) {
        // 1. Buscar la entidad existente
        Optional<Workspaces> workspaceOptional = workspacesRepository.findById(id);
        if (workspaceOptional.isEmpty()) {
            return ResponseEntity.notFound().build();
        }
        Workspaces workspaceExistente = workspaceOptional.get();

        // 2. Actualizar campos simples
        if (updates.containsKey("nombre")) {
            workspaceExistente.setNombre((String) updates.get("nombre"));
        }
        if (updates.containsKey("permanente")) {
            workspaceExistente.setPermanente((Boolean) updates.get("permanente"));
        }

        // 3. Guardar y devolver
        Workspaces workspaceActualizado = workspacesRepository.save(workspaceExistente);
        return ResponseEntity.ok(convertToDTO(workspaceActualizado));
    }

    @GetMapping("/status")
    public List<WorkspaceStatusDTO> getAllWorkspacesWithStatus() {
        List<Workspaces> workspaces = workspacesRepository.findAll();

        return workspaces.stream().map(workspace -> {
            // Contar órdenes asociadas a este workspace
            long cantidadOrdenes = ordenesWorkspaceRepository.countByWorkspaceId(workspace.getId());

            String estado;
            if (cantidadOrdenes == 0) {
                estado = "disponible";
            } else if (workspace.getSolicitudCuenta() != null && workspace.getSolicitudCuenta()) {
                // Si tiene órdenes Y solicita cuenta
                estado = "cuenta";
            } else if (cantidadOrdenes > 0) {
                // Si solo tiene órdenes pero no solicita cuenta
                estado = "ocupado";
            } else {
                estado = "disponible";
            }

            return new WorkspaceStatusDTO(
                    workspace.getId(),
                    workspace.getNombre(),
                    estado,
                    (int) cantidadOrdenes,
                    workspace.getPermanente());
        }).collect(Collectors.toList());
    }

    /**
     * Cambia el estado de solicitud de cuenta de un workspace.
     * Endpoint: PATCH /api/workspaces/{id}/solicitar-cuenta
     */
    @PatchMapping("/{id}/solicitar-cuenta")
    public ResponseEntity<WorkspaceStatusDTO> cambiarSolicitudCuenta(@PathVariable String id,
            @RequestBody Map<String, Object> requestBody) {
        Optional<Workspaces> workspaceOpt = workspacesRepository.findById(id);
        if (workspaceOpt.isEmpty()) {
            return ResponseEntity.notFound().build();
        }

        Workspaces workspace = workspaceOpt.get();

        // Obtener el valor de solicitudCuenta del request body
        Boolean solicitudCuenta = (Boolean) requestBody.get("solicitudCuenta");
        if (solicitudCuenta == null) {
            return ResponseEntity.badRequest().build();
        }

        workspace.setSolicitudCuenta(solicitudCuenta);
        workspacesRepository.save(workspace);

        // Recalcular el estado y devolver el DTO actualizado
        long cantidadOrdenes = ordenesWorkspaceRepository.countByWorkspaceId(workspace.getId());

        String estado;
        if (cantidadOrdenes == 0) {
            estado = "disponible";
        } else if (workspace.getSolicitudCuenta() != null && workspace.getSolicitudCuenta()) {
            estado = "cuenta";
        } else if (cantidadOrdenes > 0) {
            estado = "ocupado";
        } else {
            estado = "disponible";
        }

        WorkspaceStatusDTO response = new WorkspaceStatusDTO(
                workspace.getId(),
                workspace.getNombre(),
                estado,
                (int) cantidadOrdenes,
                workspace.getPermanente());

        return ResponseEntity.ok(response);
    }

    // ===== ENDPOINTS ESPECÍFICOS PARA PUNTO DE VENTA =====

    /**
     * Obtiene todas las órdenes de un workspace específico.
     */
    @GetMapping("/{id}/ordenes")
    public ResponseEntity<List<com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO>> getOrdenesByWorkspace(
            @PathVariable String id) {
        // Verificar que el workspace existe
        if (!workspacesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }

        // Obtener órdenes del workspace
        List<com.posfin.pos_finanzas_backend.models.OrdenesWorkspace> ordenes = ordenesWorkspaceRepository
                .findByWorkspaceId(id);

        // Convertir a DTOs
        List<com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO> ordenesDTO = ordenes.stream()
                .map(this::convertOrdenToDTO)
                .collect(java.util.stream.Collectors.toList());

        return ResponseEntity.ok(ordenesDTO);
    }

    /**
     * Limpia todas las órdenes de un workspace específico.
     */
    @DeleteMapping("/{id}/ordenes")
    public ResponseEntity<Void> limpiarOrdenesWorkspace(@PathVariable String id) {
        // Verificar que el workspace existe
        if (!workspacesRepository.existsById(id)) {
            return ResponseEntity.notFound().build();
        }

        // Obtener y eliminar todas las órdenes del workspace
        List<com.posfin.pos_finanzas_backend.models.OrdenesWorkspace> ordenes = ordenesWorkspaceRepository
                .findByWorkspaceId(id);
        ordenesWorkspaceRepository.deleteAll(ordenes);

        return ResponseEntity.noContent().build();
    }

    /**
     * Genera un ticket de venta para un workspace con estado "cuenta".
     * Endpoint: GET /api/workspaces/{id}/ticket
     */
    @GetMapping("/{id}/ticket")
    public ResponseEntity<TicketVentaDTO> generarTicketVenta(@PathVariable String id) {
        // Verificar que el workspace existe
        Optional<Workspaces> workspaceOpt = workspacesRepository.findById(id);
        if (workspaceOpt.isEmpty()) {
            return ResponseEntity.notFound().build();
        }

        Workspaces workspace = workspaceOpt.get();

        // Verificar que el workspace tiene órdenes
        List<com.posfin.pos_finanzas_backend.models.OrdenesWorkspace> ordenes = ordenesWorkspaceRepository
                .findByWorkspaceId(id);

        if (ordenes.isEmpty()) {
            return ResponseEntity.badRequest().build(); // No hay productos para facturar
        }

        // Convertir órdenes a productos del ticket
        List<TicketVentaDTO.ProductoTicketDTO> productosTicket = new ArrayList<>();
        BigDecimal totalGeneral = BigDecimal.ZERO;

        for (com.posfin.pos_finanzas_backend.models.OrdenesWorkspace orden : ordenes) {
            // Calcular total por producto (precio * cantidad)
            BigDecimal cantidadTotal = (orden.getCantidadPz() != null ? orden.getCantidadPz() : BigDecimal.ZERO)
                    .add(orden.getCantidadKg() != null ? orden.getCantidadKg() : BigDecimal.ZERO);
            BigDecimal totalPorProducto = orden.getHistorialPrecio().getPrecio().multiply(cantidadTotal);

            TicketVentaDTO.ProductoTicketDTO productoTicket = new TicketVentaDTO.ProductoTicketDTO(
                    orden.getProducto().getId(),
                    orden.getProducto().getNombre(),
                    orden.getCantidadPz(),
                    orden.getCantidadKg(),
                    orden.getHistorialPrecio().getPrecio(),
                    totalPorProducto);

            productosTicket.add(productoTicket);
            totalGeneral = totalGeneral.add(totalPorProducto);
        }

        // Crear el ticket de venta
        TicketVentaDTO ticket = new TicketVentaDTO(
                workspace.getId(),
                workspace.getNombre(),
                productosTicket,
                totalGeneral,
                ordenes.size());

        return ResponseEntity.ok(ticket);
    }

    /**
     * Finaliza la venta de un workspace y convierte las órdenes temporales en una
     * venta permanente.
     * Endpoint: POST /api/workspaces/{id}/finalizar-venta
     */
    @PostMapping("/{id}/finalizar-venta")
    public ResponseEntity<VentaFinalizadaResponseDTO> finalizarVentaWorkspace(@PathVariable String id,
            @RequestBody FinalizarVentaRequestDTO request) {
        try {
            // Verificar que el workspace existe
            Optional<Workspaces> workspaceOpt = workspacesRepository.findById(id);
            if (workspaceOpt.isEmpty()) {
                return ResponseEntity.notFound().build();
            }

            Workspaces workspace = workspaceOpt.get();

            // Procesar la venta usando el servicio existente
            OrdenesDeVentasDTO ventaCreada = ventaService.procesarVentaDesdeWorkspace(
                    id,
                    request.getClienteId(),
                    request.getUsuarioId(),
                    request.getMetodoPagoId());

            // Verificar si el workspace es temporal o permanente para manejar
            // apropiadamente
            if (workspace.getPermanente()) {
                // Workspace permanente: solo limpiar estado de solicitud de cuenta
                workspace.setSolicitudCuenta(false);
                workspacesRepository.save(workspace);
            } else {
                // Workspace temporal: eliminar completamente después de procesar venta
                workspacesRepository.delete(workspace);
            }

            // Crear respuesta de confirmación
            VentaFinalizadaResponseDTO response = new VentaFinalizadaResponseDTO(
                    ventaCreada.getId(),
                    workspace.getNombre(),
                    ventaCreada.getTotalVenta(),
                    ventaCreada.getFechaOrden(),
                    ventaCreada.getMetodoPagoNombre(),
                    ventaCreada.getUsuarioNombre(),
                    ventaCreada.getPersonaNombre(),
                    0, // cantidadProductos - podríamos calcularlo si es necesario
                    "Venta procesada exitosamente");

            return ResponseEntity.ok(response);

        } catch (Exception e) {
            // En caso de error, crear respuesta de error
            VentaFinalizadaResponseDTO errorResponse = new VentaFinalizadaResponseDTO();
            errorResponse.setMensaje("Error al procesar la venta: " + e.getMessage());
            return ResponseEntity.badRequest().body(errorResponse);
        }
    }

    // Método auxiliar para convertir Workspaces a WorkspacesDTO
    private WorkspacesDTO convertToDTO(Workspaces workspace) {
        WorkspacesDTO dto = new WorkspacesDTO();
        dto.setId(workspace.getId());
        dto.setNombre(workspace.getNombre());
        dto.setPermanente(workspace.getPermanente());
        return dto;
    }

    // Método auxiliar para convertir OrdenesWorkspace a DTO
    private com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO convertOrdenToDTO(
            com.posfin.pos_finanzas_backend.models.OrdenesWorkspace orden) {
        com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO dto = new com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO();

        dto.setId(orden.getId());
        dto.setCantidadPz(orden.getCantidadPz());
        dto.setCantidadKg(orden.getCantidadKg());

        // Mapear workspace
        dto.setWorkspaceId(orden.getWorkspace().getId());
        dto.setWorkspaceNombre(orden.getWorkspace().getNombre());

        // Mapear producto
        dto.setProductoId(orden.getProducto().getId());
        dto.setProductoNombre(orden.getProducto().getNombre());

        // Mapear precio
        dto.setHistorialPrecioId(orden.getHistorialPrecio().getId());
        dto.setPrecio(orden.getHistorialPrecio().getPrecio());

        return dto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/CompraRequestDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.util.List;

/**
 * DTO para crear nuevas órdenes de compra
 */
public class CompraRequestDTO {
    
    private String proveedorId;
    private String metodoPagoId; // Por defecto "Efectivo"
    private List<ProductoCompraDTO> productos;
    
    // Constructor
    public CompraRequestDTO() {
    }
    
    // Getters y Setters
    public String getProveedorId() {
        return proveedorId;
    }
    
    public void setProveedorId(String proveedorId) {
        this.proveedorId = proveedorId;
    }
    
    public String getMetodoPagoId() {
        return metodoPagoId;
    }
    
    public void setMetodoPagoId(String metodoPagoId) {
        this.metodoPagoId = metodoPagoId;
    }
    
    public List<ProductoCompraDTO> getProductos() {
        return productos;
    }
    
    public void setProductos(List<ProductoCompraDTO> productos) {
        this.productos = productos;
    }
    
    /**
     * Clase interna para productos en la compra
     */
    public static class ProductoCompraDTO {
        private String productoId;
        private BigDecimal cantidadPz;
        private BigDecimal cantidadKg;
        
        public ProductoCompraDTO() {
        }
        
        public ProductoCompraDTO(String productoId, BigDecimal cantidadPz, BigDecimal cantidadKg) {
            this.productoId = productoId;
            this.cantidadPz = cantidadPz;
            this.cantidadKg = cantidadKg;
        }
        
        public String getProductoId() {
            return productoId;
        }
        
        public void setProductoId(String productoId) {
            this.productoId = productoId;
        }
        
        public BigDecimal getCantidadPz() {
            return cantidadPz;
        }
        
        public void setCantidadPz(BigDecimal cantidadPz) {
            this.cantidadPz = cantidadPz;
        }
        
        public BigDecimal getCantidadKg() {
            return cantidadKg;
        }
        
        public void setCantidadKg(BigDecimal cantidadKg) {
            this.cantidadKg = cantidadKg;
        }
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/DetallesOrdenesDeComprasDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO (Data Transfer Object) para la entidad DetallesOrdenesDeCompras.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class DetallesOrdenesDeComprasDTO {

    private String id;
    private BigDecimal cantidadPz;
    private BigDecimal cantidadKg;

    // Campos "aplanados" de la entidad relacionada OrdenesDeCompras
    private String ordenDeCompraId;

    // Campos "aplanados" de la entidad relacionada Productos
    private String productoId;
    private String productoNombre;

    // Campos "aplanados" de la entidad relacionada HistorialCostos
    private String historialCostoId;
    private BigDecimal costo;

    // Constructor vacío
    public DetallesOrdenesDeComprasDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public String getOrdenDeCompraId() {
        return ordenDeCompraId;
    }

    public void setOrdenDeCompraId(String ordenDeCompraId) {
        this.ordenDeCompraId = ordenDeCompraId;
    }

    public String getProductoId() {
        return productoId;
    }

    public void setProductoId(String productoId) {
        this.productoId = productoId;
    }

    public String getProductoNombre() {
        return productoNombre;
    }

    public void setProductoNombre(String productoNombre) {
        this.productoNombre = productoNombre;
    }

    public String getHistorialCostoId() {
        return historialCostoId;
    }

    public void setHistorialCostoId(String historialCostoId) {
        this.historialCostoId = historialCostoId;
    }

    public BigDecimal getCosto() {
        return costo;
    }

    public void setCosto(BigDecimal costo) {
        this.costo = costo;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/DetallesOrdenesDeVentasDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO (Data Transfer Object) para la entidad DetallesOrdenesDeVentas.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class DetallesOrdenesDeVentasDTO {

    private String id;
    private BigDecimal cantidadPz;
    private BigDecimal cantidadKg;

    // Campos "aplanados" de la entidad relacionada OrdenesDeVentas
    private String ordenDeVentaId;

    // Campos "aplanados" de la entidad relacionada Productos
    private String productoId;
    private String productoNombre;

    // Campos "aplanados" de la entidad relacionada HistorialPrecios
    private String historialPrecioId;
    private BigDecimal precio;

    // Constructor vacío
    public DetallesOrdenesDeVentasDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public String getOrdenDeVentaId() {
        return ordenDeVentaId;
    }

    public void setOrdenDeVentaId(String ordenDeVentaId) {
        this.ordenDeVentaId = ordenDeVentaId;
    }

    public String getProductoId() {
        return productoId;
    }

    public void setProductoId(String productoId) {
        this.productoId = productoId;
    }

    public String getProductoNombre() {
        return productoNombre;
    }

    public void setProductoNombre(String productoNombre) {
        this.productoNombre = productoNombre;
    }

    public String getHistorialPrecioId() {
        return historialPrecioId;
    }

    public void setHistorialPrecioId(String historialPrecioId) {
        this.historialPrecioId = historialPrecioId;
    }

    public BigDecimal getPrecio() {
        return precio;
    }

    public void setPrecio(BigDecimal precio) {
        this.precio = precio;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/DeudaProveedorDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO para respuesta de cálculo de deuda de proveedor
 * Incluye información detallada del proveedor y sus deudas
 */
public class DeudaProveedorDTO {
    
    private String proveedorId;
    private String proveedorNombre;
    private String telefonoProveedor;
    private String emailProveedor;
    private BigDecimal totalCompras;
    private BigDecimal totalPagos;
    private BigDecimal deudaPendiente;
    private String estadoDeuda; // "verde" o "amarillo"
    private OffsetDateTime fechaOrdenMasAntigua;
    private int cantidadOrdenesPendientes;
    
    // Constructor
    public DeudaProveedorDTO() {
    }
    
    // Constructor de compatibilidad hacia atrás (para ComprasService)
    public DeudaProveedorDTO(String proveedorId, String proveedorNombre, 
                            BigDecimal totalCompras, BigDecimal totalPagos) {
        this.proveedorId = proveedorId;
        this.proveedorNombre = proveedorNombre;
        this.totalCompras = totalCompras != null ? totalCompras : BigDecimal.ZERO;
        this.totalPagos = totalPagos != null ? totalPagos : BigDecimal.ZERO;
        this.deudaPendiente = this.totalCompras.subtract(this.totalPagos);
        this.estadoDeuda = calcularEstadoDeuda();
        // Valores por defecto para nuevos campos
        this.telefonoProveedor = null;
        this.emailProveedor = null;
        this.fechaOrdenMasAntigua = null;
        this.cantidadOrdenesPendientes = 0;
    }
    
    public DeudaProveedorDTO(String proveedorId, String proveedorNombre, String telefonoProveedor,
                            String emailProveedor, BigDecimal totalCompras, BigDecimal totalPagos,
                            OffsetDateTime fechaOrdenMasAntigua, int cantidadOrdenesPendientes) {
        this.proveedorId = proveedorId;
        this.proveedorNombre = proveedorNombre;
        this.telefonoProveedor = telefonoProveedor;
        this.emailProveedor = emailProveedor;
        this.totalCompras = totalCompras != null ? totalCompras : BigDecimal.ZERO;
        this.totalPagos = totalPagos != null ? totalPagos : BigDecimal.ZERO;
        this.deudaPendiente = this.totalCompras.subtract(this.totalPagos);
        this.estadoDeuda = calcularEstadoDeuda();
        this.fechaOrdenMasAntigua = fechaOrdenMasAntigua;
        this.cantidadOrdenesPendientes = cantidadOrdenesPendientes;
    }
    
    private String calcularEstadoDeuda() {
        if (deudaPendiente.compareTo(BigDecimal.ZERO) <= 0) {
            return "verde"; // Sin deuda
        } else {
            return "amarillo"; // Con deuda
        }
    }
    
    // Getters y Setters
    public String getProveedorId() {
        return proveedorId;
    }
    
    public void setProveedorId(String proveedorId) {
        this.proveedorId = proveedorId;
    }
    
    public String getProveedorNombre() {
        return proveedorNombre;
    }
    
    public void setProveedorNombre(String proveedorNombre) {
        this.proveedorNombre = proveedorNombre;
    }
    
    public BigDecimal getTotalCompras() {
        return totalCompras;
    }
    
    public void setTotalCompras(BigDecimal totalCompras) {
        this.totalCompras = totalCompras;
        actualizarDeuda();
    }
    
    public BigDecimal getTotalPagos() {
        return totalPagos;
    }
    
    public void setTotalPagos(BigDecimal totalPagos) {
        this.totalPagos = totalPagos;
        actualizarDeuda();
    }
    
    public BigDecimal getDeudaPendiente() {
        return deudaPendiente;
    }
    
    public void setDeudaPendiente(BigDecimal deudaPendiente) {
        this.deudaPendiente = deudaPendiente;
        this.estadoDeuda = calcularEstadoDeuda();
    }
    
    public String getEstadoDeuda() {
        return estadoDeuda;
    }
    
    public void setEstadoDeuda(String estadoDeuda) {
        this.estadoDeuda = estadoDeuda;
    }

    public String getTelefonoProveedor() {
        return telefonoProveedor;
    }

    public void setTelefonoProveedor(String telefonoProveedor) {
        this.telefonoProveedor = telefonoProveedor;
    }

    public String getEmailProveedor() {
        return emailProveedor;
    }

    public void setEmailProveedor(String emailProveedor) {
        this.emailProveedor = emailProveedor;
    }

    public OffsetDateTime getFechaOrdenMasAntigua() {
        return fechaOrdenMasAntigua;
    }

    public void setFechaOrdenMasAntigua(OffsetDateTime fechaOrdenMasAntigua) {
        this.fechaOrdenMasAntigua = fechaOrdenMasAntigua;
    }

    public int getCantidadOrdenesPendientes() {
        return cantidadOrdenesPendientes;
    }

    public void setCantidadOrdenesPendientes(int cantidadOrdenesPendientes) {
        this.cantidadOrdenesPendientes = cantidadOrdenesPendientes;
    }
    
    private void actualizarDeuda() {
        if (totalCompras != null && totalPagos != null) {
            this.deudaPendiente = totalCompras.subtract(totalPagos);
            this.estadoDeuda = calcularEstadoDeuda();
        }
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/EmpleadoCreateRequestDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para recibir datos de creación de empleados desde el frontend
 */
public class EmpleadoCreateRequestDTO {

    private String nombre;
    private String contrasena;
    private String telefono;
    private String rolId;

    // Constructor vacío
    public EmpleadoCreateRequestDTO() {
    }

    // Constructor completo
    public EmpleadoCreateRequestDTO(String nombre, String contrasena, String telefono, String rolId) {
        this.nombre = nombre;
        this.contrasena = contrasena;
        this.telefono = telefono;
        this.rolId = rolId;
    }

    // Getters y Setters
    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getContrasena() {
        return contrasena;
    }

    public void setContrasena(String contrasena) {
        this.contrasena = contrasena;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public String getRolId() {
        return rolId;
    }

    public void setRolId(String rolId) {
        this.rolId = rolId;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/EmpleadoEstadoRequestDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para recibir datos de cambio de estado de empleados
 */
public class EmpleadoEstadoRequestDTO {

    private String estado;

    // Constructor vacío
    public EmpleadoEstadoRequestDTO() {
    }

    // Constructor con estado
    public EmpleadoEstadoRequestDTO(String estado) {
        this.estado = estado;
    }

    // Getters y Setters
    public String getEstado() {
        return estado;
    }

    public void setEstado(String estado) {
        this.estado = estado;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/EmpleadoResponseDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para enviar información de empleados al frontend en la lista de empleados
 */
public class EmpleadoResponseDTO {
    private String id;
    private String nombre;
    private String telefono;
    private String rolId;
    private String rolNombre;
    private String estadoId;
    private String estadoNombre;

    // Constructor vacío
    public EmpleadoResponseDTO() {
    }

    // Constructor completo
    public EmpleadoResponseDTO(String id, String nombre, String telefono,
            String rolId, String rolNombre,
            String estadoId, String estadoNombre) {
        this.id = id;
        this.nombre = nombre;
        this.telefono = telefono;
        this.rolId = rolId;
        this.rolNombre = rolNombre;
        this.estadoId = estadoId;
        this.estadoNombre = estadoNombre;
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public String getRolId() {
        return rolId;
    }

    public void setRolId(String rolId) {
        this.rolId = rolId;
    }

    public String getRolNombre() {
        return rolNombre;
    }

    public void setRolNombre(String rolNombre) {
        this.rolNombre = rolNombre;
    }

    public String getEstadoId() {
        return estadoId;
    }

    public void setEstadoId(String estadoId) {
        this.estadoId = estadoId;
    }

    public String getEstadoNombre() {
        return estadoNombre;
    }

    public void setEstadoNombre(String estadoNombre) {
        this.estadoNombre = estadoNombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/FinalizarVentaRequestDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para la solicitud de finalizar una venta desde un workspace.
 * Contiene la información necesaria para convertir las órdenes temporales
 * en una venta permanente.
 */
public class FinalizarVentaRequestDTO {
    private String metodoPagoId;
    private String clienteId; // Opcional, puede ser null para cliente genérico
    private String usuarioId; // ID del mesero/empleado que procesa la venta

    // Constructor vacío
    public FinalizarVentaRequestDTO() {
    }

    // Constructor completo
    public FinalizarVentaRequestDTO(String metodoPagoId, String clienteId, String usuarioId) {
        this.metodoPagoId = metodoPagoId;
        this.clienteId = clienteId;
        this.usuarioId = usuarioId;
    }

    // Getters y Setters
    public String getMetodoPagoId() {
        return metodoPagoId;
    }

    public void setMetodoPagoId(String metodoPagoId) {
        this.metodoPagoId = metodoPagoId;
    }

    public String getClienteId() {
        return clienteId;
    }

    public void setClienteId(String clienteId) {
        this.clienteId = clienteId;
    }

    public String getUsuarioId() {
        return usuarioId;
    }

    public void setUsuarioId(String usuarioId) {
        this.usuarioId = usuarioId;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/HistorialCargosProveedoresDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO (Data Transfer Object) para la entidad HistorialCargosProveedores.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class HistorialCargosProveedoresDTO {

    private String id;
    private BigDecimal montoPagado;
    private OffsetDateTime fecha;

    // Campos "aplanados" de la entidad relacionada Personas (Proveedor)
    private String personaId;
    private String personaNombre;
    private String personaApellidoPaterno;
    private String personaApellidoMaterno;
    private String personaTelefono;
    private String personaEmail;

    // Campos "aplanados" de la entidad relacionada OrdenesDeCompras
    private String ordenDeCompraId;
    private BigDecimal ordenDeCompraTotalCompra;
    private OffsetDateTime ordenDeCompraFechaOrden;

    // Constructor vacío
    public HistorialCargosProveedoresDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getMontoPagado() {
        return montoPagado;
    }

    public void setMontoPagado(BigDecimal montoPagado) {
        this.montoPagado = montoPagado;
    }

    public OffsetDateTime getFecha() {
        return fecha;
    }

    public void setFecha(OffsetDateTime fecha) {
        this.fecha = fecha;
    }

    public String getPersonaId() {
        return personaId;
    }

    public void setPersonaId(String personaId) {
        this.personaId = personaId;
    }

    public String getPersonaNombre() {
        return personaNombre;
    }

    public void setPersonaNombre(String personaNombre) {
        this.personaNombre = personaNombre;
    }

    public String getPersonaApellidoPaterno() {
        return personaApellidoPaterno;
    }

    public void setPersonaApellidoPaterno(String personaApellidoPaterno) {
        this.personaApellidoPaterno = personaApellidoPaterno;
    }

    public String getPersonaApellidoMaterno() {
        return personaApellidoMaterno;
    }

    public void setPersonaApellidoMaterno(String personaApellidoMaterno) {
        this.personaApellidoMaterno = personaApellidoMaterno;
    }

    public String getPersonaTelefono() {
        return personaTelefono;
    }

    public void setPersonaTelefono(String personaTelefono) {
        this.personaTelefono = personaTelefono;
    }

    public String getPersonaEmail() {
        return personaEmail;
    }

    public void setPersonaEmail(String personaEmail) {
        this.personaEmail = personaEmail;
    }

    public String getOrdenDeCompraId() {
        return ordenDeCompraId;
    }

    public void setOrdenDeCompraId(String ordenDeCompraId) {
        this.ordenDeCompraId = ordenDeCompraId;
    }

    public BigDecimal getOrdenDeCompraTotalCompra() {
        return ordenDeCompraTotalCompra;
    }

    public void setOrdenDeCompraTotalCompra(BigDecimal ordenDeCompraTotalCompra) {
        this.ordenDeCompraTotalCompra = ordenDeCompraTotalCompra;
    }

    public OffsetDateTime getOrdenDeCompraFechaOrden() {
        return ordenDeCompraFechaOrden;
    }

    public void setOrdenDeCompraFechaOrden(OffsetDateTime ordenDeCompraFechaOrden) {
        this.ordenDeCompraFechaOrden = ordenDeCompraFechaOrden;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/HistorialCostosDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.time.ZonedDateTime;
import java.math.BigDecimal;

public class HistorialCostosDTO {
    private String id;
    private BigDecimal costo;
    private ZonedDateTime fechaDeRegistro;

    // Campos aplanados de la relación con Productos
    private String productosId;
    private String productosNombre;

    // Constructor
    public HistorialCostosDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getCosto() {
        return costo;
    }

    public void setCosto(BigDecimal costo) {
        this.costo = costo;
    }

    public ZonedDateTime getFechaDeRegistro() {
        return fechaDeRegistro;
    }

    public void setFechaDeRegistro(ZonedDateTime fechaDeRegistro) {
        this.fechaDeRegistro = fechaDeRegistro;
    }

    public String getProductosId() {
        return productosId;
    }

    public void setProductosId(String productosId) {
        this.productosId = productosId;
    }

    public String getProductosNombre() {
        return productosNombre;
    }

    public void setProductosNombre(String productosNombre) {
        this.productosNombre = productosNombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/HistorialPagosClientesDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO (Data Transfer Object) para la entidad HistorialPagosClientes.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class HistorialPagosClientesDTO {

    private String id;
    private BigDecimal montoPagado;
    private OffsetDateTime fecha;

    // Campos "aplanados" de la entidad relacionada Personas
    private String personaId;
    private String personaNombre;
    private String personaApellidoPaterno;
    private String personaApellidoMaterno;
    private String personaTelefono;
    private String personaEmail;

    // Campos "aplanados" de la entidad relacionada OrdenesDeVentas
    private String ordenDeVentaId;
    private BigDecimal ordenDeVentaTotalVenta;
    private OffsetDateTime ordenDeVentaFechaOrden;

    // Constructor vacío
    public HistorialPagosClientesDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getMontoPagado() {
        return montoPagado;
    }

    public void setMontoPagado(BigDecimal montoPagado) {
        this.montoPagado = montoPagado;
    }

    public OffsetDateTime getFecha() {
        return fecha;
    }

    public void setFecha(OffsetDateTime fecha) {
        this.fecha = fecha;
    }

    public String getPersonaId() {
        return personaId;
    }

    public void setPersonaId(String personaId) {
        this.personaId = personaId;
    }

    public String getPersonaNombre() {
        return personaNombre;
    }

    public void setPersonaNombre(String personaNombre) {
        this.personaNombre = personaNombre;
    }

    public String getPersonaApellidoPaterno() {
        return personaApellidoPaterno;
    }

    public void setPersonaApellidoPaterno(String personaApellidoPaterno) {
        this.personaApellidoPaterno = personaApellidoPaterno;
    }

    public String getPersonaApellidoMaterno() {
        return personaApellidoMaterno;
    }

    public void setPersonaApellidoMaterno(String personaApellidoMaterno) {
        this.personaApellidoMaterno = personaApellidoMaterno;
    }

    public String getPersonaTelefono() {
        return personaTelefono;
    }

    public void setPersonaTelefono(String personaTelefono) {
        this.personaTelefono = personaTelefono;
    }

    public String getPersonaEmail() {
        return personaEmail;
    }

    public void setPersonaEmail(String personaEmail) {
        this.personaEmail = personaEmail;
    }

    public String getOrdenDeVentaId() {
        return ordenDeVentaId;
    }

    public void setOrdenDeVentaId(String ordenDeVentaId) {
        this.ordenDeVentaId = ordenDeVentaId;
    }

    public BigDecimal getOrdenDeVentaTotalVenta() {
        return ordenDeVentaTotalVenta;
    }

    public void setOrdenDeVentaTotalVenta(BigDecimal ordenDeVentaTotalVenta) {
        this.ordenDeVentaTotalVenta = ordenDeVentaTotalVenta;
    }

    public OffsetDateTime getOrdenDeVentaFechaOrden() {
        return ordenDeVentaFechaOrden;
    }

    public void setOrdenDeVentaFechaOrden(OffsetDateTime ordenDeVentaFechaOrden) {
        this.ordenDeVentaFechaOrden = ordenDeVentaFechaOrden;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/HistorialPreciosDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.time.ZonedDateTime;
import java.math.BigDecimal;

public class HistorialPreciosDTO {
    private String id;
    private BigDecimal precio;
    private ZonedDateTime fechaDeRegistro;

    // Campos aplanados de la relación con Productos
    private String productosId;
    private String productosNombre;

    // Constructor
    public HistorialPreciosDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getPrecio() {
        return precio;
    }

    public void setPrecio(BigDecimal precio) {
        this.precio = precio;
    }

    public ZonedDateTime getFechaDeRegistro() {
        return fechaDeRegistro;
    }

    public void setFechaDeRegistro(ZonedDateTime fechaDeRegistro) {
        this.fechaDeRegistro = fechaDeRegistro;
    }

    public String getProductosId() {
        return productosId;
    }

    public void setProductosId(String productosId) {
        this.productosId = productosId;
    }

    public String getProductosNombre() {
        return productosNombre;
    }

    public void setProductosNombre(String productosNombre) {
        this.productosNombre = productosNombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/InventarioDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO (Data Transfer Object) para la entidad Inventarios.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class InventarioDTO {

    private String id;
    private Integer cantidadPz;
    private Integer cantidadKg;
    private int cantidadMinima;
    private int cantidadMaxima;

    // Campos "aplanados" de la entidad relacionada Productos
    private String productoId;
    private String productoNombre;

    // Campos "aplanados" de la entidad relacionada Ubicaciones
    private String ubicacionId;
    private String ubicacionNombre;

    // Constructor vacío
    public InventarioDTO() {
    }

    // --- Getters y Setters para todas las propiedades ---

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Integer getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(Integer cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public Integer getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(Integer cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public int getCantidadMinima() {
        return cantidadMinima;
    }

    public void setCantidadMinima(int cantidadMinima) {
        this.cantidadMinima = cantidadMinima;
    }

    public int getCantidadMaxima() {
        return cantidadMaxima;
    }

    public void setCantidadMaxima(int cantidadMaxima) {
        this.cantidadMaxima = cantidadMaxima;
    }

    public String getProductoId() {
        return productoId;
    }

    public void setProductoId(String productoId) {
        this.productoId = productoId;
    }

    public String getProductoNombre() {
        return productoNombre;
    }

    public void setProductoNombre(String productoNombre) {
        this.productoNombre = productoNombre;
    }

    public String getUbicacionId() {
        return ubicacionId;
    }

    public void setUbicacionId(String ubicacionId) {
        this.ubicacionId = ubicacionId;
    }

    public String getUbicacionNombre() {
        return ubicacionNombre;
    }

    public void setUbicacionNombre(String ubicacionNombre) {
        this.ubicacionNombre = ubicacionNombre;
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/LoginResponseDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para la respuesta del login exitoso
 * Incluye token JWT y información del usuario autenticado con su rol
 */
public class LoginResponseDTO {

    private String token;
    private String usuario;
    private String rolNombre;
    private String rolId;
    private long expiresIn; // En milisegundos

    // Constructor vacío
    public LoginResponseDTO() {
    }

    // Constructor completo
    public LoginResponseDTO(String token, String usuario, String rolNombre, String rolId, long expiresIn) {
        this.token = token;
        this.usuario = usuario;
        this.rolNombre = rolNombre;
        this.rolId = rolId;
        this.expiresIn = expiresIn;
    }

    // Getters y Setters
    public String getToken() {
        return token;
    }

    public void setToken(String token) {
        this.token = token;
    }

    public String getUsuario() {
        return usuario;
    }

    public void setUsuario(String usuario) {
        this.usuario = usuario;
    }

    public String getRolNombre() {
        return rolNombre;
    }

    public void setRolNombre(String rolNombre) {
        this.rolNombre = rolNombre;
    }

    public String getRolId() {
        return rolId;
    }

    public void setRolId(String rolId) {
        this.rolId = rolId;
    }

    public long getExpiresIn() {
        return expiresIn;
    }

    public void setExpiresIn(long expiresIn) {
        this.expiresIn = expiresIn;
    }

    @Override
    public String toString() {
        return "LoginResponseDTO{" +
                "token='" + (token != null ? "[PRESENTE]" : "null") + '\'' +
                ", usuario='" + usuario + '\'' +
                ", rolNombre='" + rolNombre + '\'' +
                ", rolId='" + rolId + '\'' +
                ", expiresIn=" + expiresIn +
                '}';
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/MovimientosInventariosDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO (Data Transfer Object) para la entidad MovimientosInventarios.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class MovimientosInventariosDTO {

    private String id;
    private BigDecimal cantidad;
    private OffsetDateTime fechaMovimiento;
    private String claveMovimiento;

    // Campos "aplanados" de la entidad relacionada Productos
    private String productoId;
    private String productoNombre;

    // Campos "aplanados" de la entidad relacionada Ubicaciones
    private String ubicacionId;
    private String ubicacionNombre;
    private String ubicacionDescripcion;

    // Campos "aplanados" de la entidad relacionada TipoMovimientos
    private String tipoMovimientoId;
    private String tipoMovimientoNombre;

    // Campos "aplanados" de la entidad relacionada Usuarios
    private String usuarioId;
    private String usuarioNombre;
    private String usuarioTelefono;

    // Constructor vacío
    public MovimientosInventariosDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getCantidad() {
        return cantidad;
    }

    public void setCantidad(BigDecimal cantidad) {
        this.cantidad = cantidad;
    }

    public OffsetDateTime getFechaMovimiento() {
        return fechaMovimiento;
    }

    public void setFechaMovimiento(OffsetDateTime fechaMovimiento) {
        this.fechaMovimiento = fechaMovimiento;
    }

    public String getClaveMovimiento() {
        return claveMovimiento;
    }

    public void setClaveMovimiento(String claveMovimiento) {
        this.claveMovimiento = claveMovimiento;
    }

    public String getProductoId() {
        return productoId;
    }

    public void setProductoId(String productoId) {
        this.productoId = productoId;
    }

    public String getProductoNombre() {
        return productoNombre;
    }

    public void setProductoNombre(String productoNombre) {
        this.productoNombre = productoNombre;
    }

    public String getUbicacionId() {
        return ubicacionId;
    }

    public void setUbicacionId(String ubicacionId) {
        this.ubicacionId = ubicacionId;
    }

    public String getUbicacionNombre() {
        return ubicacionNombre;
    }

    public void setUbicacionNombre(String ubicacionNombre) {
        this.ubicacionNombre = ubicacionNombre;
    }

    public String getUbicacionDescripcion() {
        return ubicacionDescripcion;
    }

    public void setUbicacionDescripcion(String ubicacionDescripcion) {
        this.ubicacionDescripcion = ubicacionDescripcion;
    }

    public String getTipoMovimientoId() {
        return tipoMovimientoId;
    }

    public void setTipoMovimientoId(String tipoMovimientoId) {
        this.tipoMovimientoId = tipoMovimientoId;
    }

    public String getTipoMovimientoNombre() {
        return tipoMovimientoNombre;
    }

    public void setTipoMovimientoNombre(String tipoMovimientoNombre) {
        this.tipoMovimientoNombre = tipoMovimientoNombre;
    }

    public String getUsuarioId() {
        return usuarioId;
    }

    public void setUsuarioId(String usuarioId) {
        this.usuarioId = usuarioId;
    }

    public String getUsuarioNombre() {
        return usuarioNombre;
    }

    public void setUsuarioNombre(String usuarioNombre) {
        this.usuarioNombre = usuarioNombre;
    }

    public String getUsuarioTelefono() {
        return usuarioTelefono;
    }

    public void setUsuarioTelefono(String usuarioTelefono) {
        this.usuarioTelefono = usuarioTelefono;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/OrdenesDeComprasDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO (Data Transfer Object) para la entidad OrdenesDeCompras.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class OrdenesDeComprasDTO {

    private String id;
    private OffsetDateTime fechaOrden;
    private BigDecimal totalCompra;

    // Campos "aplanados" de la entidad relacionada Personas (Proveedor)
    private String personaId;
    private String personaNombre;
    private String personaApellidoPaterno;
    private String personaApellidoMaterno;
    private String personaTelefono;
    private String personaEmail;

    // Campos "aplanados" de la entidad relacionada Estados
    private String estadoId;
    private String estadoNombre;

    // Constructor vacío
    public OrdenesDeComprasDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public OffsetDateTime getFechaOrden() {
        return fechaOrden;
    }

    public void setFechaOrden(OffsetDateTime fechaOrden) {
        this.fechaOrden = fechaOrden;
    }

    public BigDecimal getTotalCompra() {
        return totalCompra;
    }

    public void setTotalCompra(BigDecimal totalCompra) {
        this.totalCompra = totalCompra;
    }

    public String getPersonaId() {
        return personaId;
    }

    public void setPersonaId(String personaId) {
        this.personaId = personaId;
    }

    public String getPersonaNombre() {
        return personaNombre;
    }

    public void setPersonaNombre(String personaNombre) {
        this.personaNombre = personaNombre;
    }

    public String getPersonaApellidoPaterno() {
        return personaApellidoPaterno;
    }

    public void setPersonaApellidoPaterno(String personaApellidoPaterno) {
        this.personaApellidoPaterno = personaApellidoPaterno;
    }

    public String getPersonaApellidoMaterno() {
        return personaApellidoMaterno;
    }

    public void setPersonaApellidoMaterno(String personaApellidoMaterno) {
        this.personaApellidoMaterno = personaApellidoMaterno;
    }

    public String getPersonaTelefono() {
        return personaTelefono;
    }

    public void setPersonaTelefono(String personaTelefono) {
        this.personaTelefono = personaTelefono;
    }

    public String getPersonaEmail() {
        return personaEmail;
    }

    public void setPersonaEmail(String personaEmail) {
        this.personaEmail = personaEmail;
    }

    public String getEstadoId() {
        return estadoId;
    }

    public void setEstadoId(String estadoId) {
        this.estadoId = estadoId;
    }

    public String getEstadoNombre() {
        return estadoNombre;
    }

    public void setEstadoNombre(String estadoNombre) {
        this.estadoNombre = estadoNombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/OrdenesDeVentasDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO (Data Transfer Object) para la entidad OrdenesDeVentas.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class OrdenesDeVentasDTO {

    private String id;
    private OffsetDateTime fechaOrden;
    private BigDecimal totalVenta;

    // Campos "aplanados" de la entidad relacionada Personas
    private String personaId;
    private String personaNombre;
    private String personaApellidoPaterno;
    private String personaApellidoMaterno;
    private String personaTelefono;
    private String personaEmail;

    // Campos "aplanados" de la entidad relacionada Usuarios
    private String usuarioId;
    private String usuarioNombre;
    private String usuarioTelefono;

    // Campos "aplanados" de la entidad relacionada MetodosPago
    private String metodoPagoId;
    private String metodoPagoNombre;

    // Constructor vacío
    public OrdenesDeVentasDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public OffsetDateTime getFechaOrden() {
        return fechaOrden;
    }

    public void setFechaOrden(OffsetDateTime fechaOrden) {
        this.fechaOrden = fechaOrden;
    }

    public BigDecimal getTotalVenta() {
        return totalVenta;
    }

    public void setTotalVenta(BigDecimal totalVenta) {
        this.totalVenta = totalVenta;
    }

    public String getPersonaId() {
        return personaId;
    }

    public void setPersonaId(String personaId) {
        this.personaId = personaId;
    }

    public String getPersonaNombre() {
        return personaNombre;
    }

    public void setPersonaNombre(String personaNombre) {
        this.personaNombre = personaNombre;
    }

    public String getPersonaApellidoPaterno() {
        return personaApellidoPaterno;
    }

    public void setPersonaApellidoPaterno(String personaApellidoPaterno) {
        this.personaApellidoPaterno = personaApellidoPaterno;
    }

    public String getPersonaApellidoMaterno() {
        return personaApellidoMaterno;
    }

    public void setPersonaApellidoMaterno(String personaApellidoMaterno) {
        this.personaApellidoMaterno = personaApellidoMaterno;
    }

    public String getPersonaTelefono() {
        return personaTelefono;
    }

    public void setPersonaTelefono(String personaTelefono) {
        this.personaTelefono = personaTelefono;
    }

    public String getPersonaEmail() {
        return personaEmail;
    }

    public void setPersonaEmail(String personaEmail) {
        this.personaEmail = personaEmail;
    }

    public String getUsuarioId() {
        return usuarioId;
    }

    public void setUsuarioId(String usuarioId) {
        this.usuarioId = usuarioId;
    }

    public String getUsuarioNombre() {
        return usuarioNombre;
    }

    public void setUsuarioNombre(String usuarioNombre) {
        this.usuarioNombre = usuarioNombre;
    }

    public String getUsuarioTelefono() {
        return usuarioTelefono;
    }

    public void setUsuarioTelefono(String usuarioTelefono) {
        this.usuarioTelefono = usuarioTelefono;
    }

    public String getMetodoPagoId() {
        return metodoPagoId;
    }

    public void setMetodoPagoId(String metodoPagoId) {
        this.metodoPagoId = metodoPagoId;
    }

    public String getMetodoPagoNombre() {
        return metodoPagoNombre;
    }

    public void setMetodoPagoNombre(String metodoPagoNombre) {
        this.metodoPagoNombre = metodoPagoNombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/OrdenesWorkspaceDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO (Data Transfer Object) para la entidad OrdenesWorkspace.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class OrdenesWorkspaceDTO {

    private String id;
    private BigDecimal cantidadPz;
    private BigDecimal cantidadKg;

    // Campos "aplanados" de la entidad relacionada Workspaces
    private String workspaceId;
    private String workspaceNombre;

    // Campos "aplanados" de la entidad relacionada Productos
    private String productoId;
    private String productoNombre;

    // Campos "aplanados" de la entidad relacionada HistorialPrecios
    private String historialPrecioId;
    private BigDecimal precio;

    // Constructor vacío
    public OrdenesWorkspaceDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public String getWorkspaceId() {
        return workspaceId;
    }

    public void setWorkspaceId(String workspaceId) {
        this.workspaceId = workspaceId;
    }

    public String getWorkspaceNombre() {
        return workspaceNombre;
    }

    public void setWorkspaceNombre(String workspaceNombre) {
        this.workspaceNombre = workspaceNombre;
    }

    public String getProductoId() {
        return productoId;
    }

    public void setProductoId(String productoId) {
        this.productoId = productoId;
    }

    public String getProductoNombre() {
        return productoNombre;
    }

    public void setProductoNombre(String productoNombre) {
        this.productoNombre = productoNombre;
    }

    public String getHistorialPrecioId() {
        return historialPrecioId;
    }

    public void setHistorialPrecioId(String historialPrecioId) {
        this.historialPrecioId = historialPrecioId;
    }

    public BigDecimal getPrecio() {
        return precio;
    }

    public void setPrecio(BigDecimal precio) {
        this.precio = precio;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/PagoRequestDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO para registrar pagos a proveedores
 */
public class PagoRequestDTO {
    
    private String proveedorId;
    private String ordenCompraId;
    private BigDecimal montoPagado;
    private String metodoPagoId;
    private boolean pagarTodoElTotal;
    
    // Constructor
    public PagoRequestDTO() {
    }
    
    public PagoRequestDTO(String proveedorId, String ordenCompraId, BigDecimal montoPagado, 
                         String metodoPagoId, boolean pagarTodoElTotal) {
        this.proveedorId = proveedorId;
        this.ordenCompraId = ordenCompraId;
        this.montoPagado = montoPagado;
        this.metodoPagoId = metodoPagoId;
        this.pagarTodoElTotal = pagarTodoElTotal;
    }
    
    // Getters y Setters
    public String getProveedorId() {
        return proveedorId;
    }
    
    public void setProveedorId(String proveedorId) {
        this.proveedorId = proveedorId;
    }
    
    public String getOrdenCompraId() {
        return ordenCompraId;
    }
    
    public void setOrdenCompraId(String ordenCompraId) {
        this.ordenCompraId = ordenCompraId;
    }
    
    public BigDecimal getMontoPagado() {
        return montoPagado;
    }
    
    public void setMontoPagado(BigDecimal montoPagado) {
        this.montoPagado = montoPagado;
    }
    
    public String getMetodoPagoId() {
        return metodoPagoId;
    }
    
    public void setMetodoPagoId(String metodoPagoId) {
        this.metodoPagoId = metodoPagoId;
    }
    
    public boolean isPagarTodoElTotal() {
        return pagarTodoElTotal;
    }
    
    public void setPagarTodoElTotal(boolean pagarTodoElTotal) {
        this.pagarTodoElTotal = pagarTodoElTotal;
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/PersonasDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

public class PersonasDTO {
    private String id;
    private String nombre;
    private String apellidoPaterno;
    private String apellidoMaterno;
    private String rfc;
    private String telefono;
    private String email;

    // Campos aplanados de la relación con Estados
    private String estadosId;
    private String estadosEstado;

    // Campos aplanados de la relación con CategoriaPersonas
    private String categoriaPersonasId;
    private String categoriaPersonasCategoria;

    // Constructor
    public PersonasDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getApellidoPaterno() {
        return apellidoPaterno;
    }

    public void setApellidoPaterno(String apellidoPaterno) {
        this.apellidoPaterno = apellidoPaterno;
    }

    public String getApellidoMaterno() {
        return apellidoMaterno;
    }

    public void setApellidoMaterno(String apellidoMaterno) {
        this.apellidoMaterno = apellidoMaterno;
    }

    public String getRfc() {
        return rfc;
    }

    public void setRfc(String rfc) {
        this.rfc = rfc;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getEstadosId() {
        return estadosId;
    }

    public void setEstadosId(String estadosId) {
        this.estadosId = estadosId;
    }

    public String getEstadosEstado() {
        return estadosEstado;
    }

    public void setEstadosEstado(String estadosEstado) {
        this.estadosEstado = estadosEstado;
    }

    public String getCategoriaPersonasId() {
        return categoriaPersonasId;
    }

    public void setCategoriaPersonasId(String categoriaPersonasId) {
        this.categoriaPersonasId = categoriaPersonasId;
    }

    public String getCategoriaPersonasCategoria() {
        return categoriaPersonasCategoria;
    }

    public void setCategoriaPersonasCategoria(String categoriaPersonasCategoria) {
        this.categoriaPersonasCategoria = categoriaPersonasCategoria;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/ProductoCreacionDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO (Data Transfer Object) para la creación completa de productos.
 * Incluye todos los datos necesarios para crear un producto completo
 * con su historial de precios, costos, inventario inicial y movimiento.
 */
public class ProductoCreacionDTO {
    private String nombre;
    private String categoriasProductosId;
    private String proveedorId;
    private BigDecimal precioVenta;
    private BigDecimal precioCompra;
    private String unidadMedida; // "piezas" o "kilogramos"
    private Integer stockInicial;
    private String ubicacionId;
    private Integer stockMinimo;
    private Integer stockMaximo;
    private String usuarioId; // Para el movimiento de inventario

    // Constructor vacío
    public ProductoCreacionDTO() {
    }

    // Getters y Setters
    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getCategoriasProductosId() {
        return categoriasProductosId;
    }

    public void setCategoriasProductosId(String categoriasProductosId) {
        this.categoriasProductosId = categoriasProductosId;
    }

    public String getProveedorId() {
        return proveedorId;
    }

    public void setProveedorId(String proveedorId) {
        this.proveedorId = proveedorId;
    }

    public BigDecimal getPrecioVenta() {
        return precioVenta;
    }

    public void setPrecioVenta(BigDecimal precioVenta) {
        this.precioVenta = precioVenta;
    }

    public BigDecimal getPrecioCompra() {
        return precioCompra;
    }

    public void setPrecioCompra(BigDecimal precioCompra) {
        this.precioCompra = precioCompra;
    }

    public String getUnidadMedida() {
        return unidadMedida;
    }

    public void setUnidadMedida(String unidadMedida) {
        this.unidadMedida = unidadMedida;
    }

    public Integer getStockInicial() {
        return stockInicial;
    }

    public void setStockInicial(Integer stockInicial) {
        this.stockInicial = stockInicial;
    }

    public String getUbicacionId() {
        return ubicacionId;
    }

    public void setUbicacionId(String ubicacionId) {
        this.ubicacionId = ubicacionId;
    }

    public Integer getStockMinimo() {
        return stockMinimo;
    }

    public void setStockMinimo(Integer stockMinimo) {
        this.stockMinimo = stockMinimo;
    }

    public Integer getStockMaximo() {
        return stockMaximo;
    }

    public void setStockMaximo(Integer stockMaximo) {
        this.stockMaximo = stockMaximo;
    }

    public String getUsuarioId() {
        return usuarioId;
    }

    public void setUsuarioId(String usuarioId) {
        this.usuarioId = usuarioId;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/ProductosDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

public class ProductosDTO {
    private String id;
    private String nombre;

    // Campos aplanados de la relación con CategoriasProductos
    private String categoriasProductosId;
    private String categoriasProductosCategoria;

    // Campos aplanados de la relación con Personas (proveedor)
    private String proveedorId;
    private String proveedorNombre;
    private String proveedorApellidoPaterno;
    private String proveedorApellidoMaterno;

    // Campos aplanados de la relación con Estados
    private String estadosId;
    private String estadosEstado;

    // Campos para precios y costos más recientes
    private BigDecimal precioVentaActual;
    private BigDecimal precioCompraActual;

    // Campos para inventario (cantidad actual)
    private Integer cantidadInventario;

    // Constructor
    public ProductosDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getCategoriasProductosId() {
        return categoriasProductosId;
    }

    public void setCategoriasProductosId(String categoriasProductosId) {
        this.categoriasProductosId = categoriasProductosId;
    }

    public String getCategoriasProductosCategoria() {
        return categoriasProductosCategoria;
    }

    public void setCategoriasProductosCategoria(String categoriasProductosCategoria) {
        this.categoriasProductosCategoria = categoriasProductosCategoria;
    }

    public String getProveedorId() {
        return proveedorId;
    }

    public void setProveedorId(String proveedorId) {
        this.proveedorId = proveedorId;
    }

    public String getProveedorNombre() {
        return proveedorNombre;
    }

    public void setProveedorNombre(String proveedorNombre) {
        this.proveedorNombre = proveedorNombre;
    }

    public String getProveedorApellidoPaterno() {
        return proveedorApellidoPaterno;
    }

    public void setProveedorApellidoPaterno(String proveedorApellidoPaterno) {
        this.proveedorApellidoPaterno = proveedorApellidoPaterno;
    }

    public String getProveedorApellidoMaterno() {
        return proveedorApellidoMaterno;
    }

    public void setProveedorApellidoMaterno(String proveedorApellidoMaterno) {
        this.proveedorApellidoMaterno = proveedorApellidoMaterno;
    }

    public String getEstadosId() {
        return estadosId;
    }

    public void setEstadosId(String estadosId) {
        this.estadosId = estadosId;
    }

    public String getEstadosEstado() {
        return estadosEstado;
    }

    public void setEstadosEstado(String estadosEstado) {
        this.estadosEstado = estadosEstado;
    }

    public BigDecimal getPrecioVentaActual() {
        return precioVentaActual;
    }

    public void setPrecioVentaActual(BigDecimal precioVentaActual) {
        this.precioVentaActual = precioVentaActual;
    }

    public BigDecimal getPrecioCompraActual() {
        return precioCompraActual;
    }

    public void setPrecioCompraActual(BigDecimal precioCompraActual) {
        this.precioCompraActual = precioCompraActual;
    }

    public Integer getCantidadInventario() {
        return cantidadInventario;
    }

    public void setCantidadInventario(Integer cantidadInventario) {
        this.cantidadInventario = cantidadInventario;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/ProveedorDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;

/**
 * DTO para representar proveedores con información de deuda
 */
public class ProveedorDTO {
    
    private String id;
    private String nombre;
    private String apellidoPaterno;
    private String apellidoMaterno;
    private String telefono;
    private String email;
    private String estadoNombre;
    private BigDecimal deudaPendiente;
    private String estadoDeuda; // "verde" o "amarillo"
    
    // Constructores
    public ProveedorDTO() {
    }
    
    public ProveedorDTO(String id, String nombre, String apellidoPaterno, 
                       String apellidoMaterno, String telefono, String email, 
                       String estadoNombre, BigDecimal deudaPendiente) {
        this.id = id;
        this.nombre = nombre;
        this.apellidoPaterno = apellidoPaterno;
        this.apellidoMaterno = apellidoMaterno;
        this.telefono = telefono;
        this.email = email;
        this.estadoNombre = estadoNombre;
        this.deudaPendiente = deudaPendiente;
        this.estadoDeuda = calcularEstadoDeuda(deudaPendiente);
    }
    
    private String calcularEstadoDeuda(BigDecimal deuda) {
        if (deuda == null || deuda.compareTo(BigDecimal.ZERO) <= 0) {
            return "verde"; // Sin deuda
        } else {
            return "amarillo"; // Con deuda
        }
    }
    
    // Getters y Setters
    public String getId() {
        return id;
    }
    
    public void setId(String id) {
        this.id = id;
    }
    
    public String getNombre() {
        return nombre;
    }
    
    public void setNombre(String nombre) {
        this.nombre = nombre;
    }
    
    public String getApellidoPaterno() {
        return apellidoPaterno;
    }
    
    public void setApellidoPaterno(String apellidoPaterno) {
        this.apellidoPaterno = apellidoPaterno;
    }
    
    public String getApellidoMaterno() {
        return apellidoMaterno;
    }
    
    public void setApellidoMaterno(String apellidoMaterno) {
        this.apellidoMaterno = apellidoMaterno;
    }
    
    public String getTelefono() {
        return telefono;
    }
    
    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }
    
    public String getEmail() {
        return email;
    }
    
    public void setEmail(String email) {
        this.email = email;
    }
    
    public String getEstadoNombre() {
        return estadoNombre;
    }
    
    public void setEstadoNombre(String estadoNombre) {
        this.estadoNombre = estadoNombre;
    }
    
    public BigDecimal getDeudaPendiente() {
        return deudaPendiente;
    }
    
    public void setDeudaPendiente(BigDecimal deudaPendiente) {
        this.deudaPendiente = deudaPendiente;
        this.estadoDeuda = calcularEstadoDeuda(deudaPendiente);
    }
    
    public String getEstadoDeuda() {
        return estadoDeuda;
    }
    
    public void setEstadoDeuda(String estadoDeuda) {
        this.estadoDeuda = estadoDeuda;
    }
    
    /**
     * Obtiene el nombre completo del proveedor
     */
    public String getNombreCompleto() {
        StringBuilder nombreCompleto = new StringBuilder(nombre);
        if (apellidoPaterno != null && !apellidoPaterno.trim().isEmpty()) {
            nombreCompleto.append(" ").append(apellidoPaterno);
        }
        if (apellidoMaterno != null && !apellidoMaterno.trim().isEmpty()) {
            nombreCompleto.append(" ").append(apellidoMaterno);
        }
        return nombreCompleto.toString();
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/RolResponseDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO para enviar información de roles al frontend
 */
public class RolResponseDTO {
    private String id;
    private String nombre;

    // Constructor vacío
    public RolResponseDTO() {
    }

    // Constructor completo
    public RolResponseDTO(String id, String nombre) {
        this.id = id;
        this.nombre = nombre;
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/TicketVentaDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.util.List;

/**
 * DTO para representar un ticket de venta pre-pago.
 * Contiene la información consolidada de todas las órdenes de un workspace
 * para mostrar al cliente antes del pago.
 */
public class TicketVentaDTO {
    private String workspaceId;
    private String workspaceNombre;
    private List<ProductoTicketDTO> productos;
    private BigDecimal totalGeneral;
    private int cantidadProductos;

    // Constructor vacío
    public TicketVentaDTO() {
    }

    // Constructor completo
    public TicketVentaDTO(String workspaceId, String workspaceNombre, List<ProductoTicketDTO> productos,
            BigDecimal totalGeneral, int cantidadProductos) {
        this.workspaceId = workspaceId;
        this.workspaceNombre = workspaceNombre;
        this.productos = productos;
        this.totalGeneral = totalGeneral;
        this.cantidadProductos = cantidadProductos;
    }

    // Getters y Setters
    public String getWorkspaceId() {
        return workspaceId;
    }

    public void setWorkspaceId(String workspaceId) {
        this.workspaceId = workspaceId;
    }

    public String getWorkspaceNombre() {
        return workspaceNombre;
    }

    public void setWorkspaceNombre(String workspaceNombre) {
        this.workspaceNombre = workspaceNombre;
    }

    public List<ProductoTicketDTO> getProductos() {
        return productos;
    }

    public void setProductos(List<ProductoTicketDTO> productos) {
        this.productos = productos;
    }

    public BigDecimal getTotalGeneral() {
        return totalGeneral;
    }

    public void setTotalGeneral(BigDecimal totalGeneral) {
        this.totalGeneral = totalGeneral;
    }

    public int getCantidadProductos() {
        return cantidadProductos;
    }

    public void setCantidadProductos(int cantidadProductos) {
        this.cantidadProductos = cantidadProductos;
    }

    /**
     * DTO interno para representar un producto en el ticket.
     */
    public static class ProductoTicketDTO {
        private String productoId;
        private String productoNombre;
        private BigDecimal cantidadPz;
        private BigDecimal cantidadKg;
        private BigDecimal precioUnitario;
        private BigDecimal totalPorProducto;

        // Constructor vacío
        public ProductoTicketDTO() {
        }

        // Constructor completo
        public ProductoTicketDTO(String productoId, String productoNombre, BigDecimal cantidadPz,
                BigDecimal cantidadKg, BigDecimal precioUnitario, BigDecimal totalPorProducto) {
            this.productoId = productoId;
            this.productoNombre = productoNombre;
            this.cantidadPz = cantidadPz;
            this.cantidadKg = cantidadKg;
            this.precioUnitario = precioUnitario;
            this.totalPorProducto = totalPorProducto;
        }

        // Getters y Setters
        public String getProductoId() {
            return productoId;
        }

        public void setProductoId(String productoId) {
            this.productoId = productoId;
        }

        public String getProductoNombre() {
            return productoNombre;
        }

        public void setProductoNombre(String productoNombre) {
            this.productoNombre = productoNombre;
        }

        public BigDecimal getCantidadPz() {
            return cantidadPz;
        }

        public void setCantidadPz(BigDecimal cantidadPz) {
            this.cantidadPz = cantidadPz;
        }

        public BigDecimal getCantidadKg() {
            return cantidadKg;
        }

        public void setCantidadKg(BigDecimal cantidadKg) {
            this.cantidadKg = cantidadKg;
        }

        public BigDecimal getPrecioUnitario() {
            return precioUnitario;
        }

        public void setPrecioUnitario(BigDecimal precioUnitario) {
            this.precioUnitario = precioUnitario;
        }

        public BigDecimal getTotalPorProducto() {
            return totalPorProducto;
        }

        public void setTotalPorProducto(BigDecimal totalPorProducto) {
            this.totalPorProducto = totalPorProducto;
        }
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/UsuariosDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

public class UsuariosDTO {
    private String id;
    private String nombre;
    private String contrasena;
    private String telefono;

    // Campos aplanados de la relación con Roles
    private String rolesId;
    private String rolesRoles;

    // Campos aplanados de la relación con Estados
    private String estadosId;
    private String estadosEstado;

    // Constructor
    public UsuariosDTO() {
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getContrasena() {
        return contrasena;
    }

    public void setContrasena(String contrasena) {
        this.contrasena = contrasena;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public String getRolesId() {
        return rolesId;
    }

    public void setRolesId(String rolesId) {
        this.rolesId = rolesId;
    }

    public String getRolesRoles() {
        return rolesRoles;
    }

    public void setRolesRoles(String rolesRoles) {
        this.rolesRoles = rolesRoles;
    }

    public String getEstadosId() {
        return estadosId;
    }

    public void setEstadosId(String estadosId) {
        this.estadosId = estadosId;
    }

    public String getEstadosEstado() {
        return estadosEstado;
    }

    public void setEstadosEstado(String estadosEstado) {
        this.estadosEstado = estadosEstado;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/VentaFinalizadaResponseDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

import java.math.BigDecimal;
import java.time.OffsetDateTime;

/**
 * DTO para la respuesta de finalizar una venta.
 * Contiene información de confirmación sobre la venta creada.
 */
public class VentaFinalizadaResponseDTO {
    private String ventaId;
    private String workspaceNombre;
    private BigDecimal totalVenta;
    private OffsetDateTime fechaVenta;
    private String metodoPagoNombre;
    private String usuarioNombre;
    private String clienteNombre;
    private int cantidadProductos;
    private String mensaje;

    // Constructor vacío
    public VentaFinalizadaResponseDTO() {
    }

    // Constructor completo
    public VentaFinalizadaResponseDTO(String ventaId, String workspaceNombre, BigDecimal totalVenta,
            OffsetDateTime fechaVenta, String metodoPagoNombre, String usuarioNombre,
            String clienteNombre, int cantidadProductos, String mensaje) {
        this.ventaId = ventaId;
        this.workspaceNombre = workspaceNombre;
        this.totalVenta = totalVenta;
        this.fechaVenta = fechaVenta;
        this.metodoPagoNombre = metodoPagoNombre;
        this.usuarioNombre = usuarioNombre;
        this.clienteNombre = clienteNombre;
        this.cantidadProductos = cantidadProductos;
        this.mensaje = mensaje;
    }

    // Getters y Setters
    public String getVentaId() {
        return ventaId;
    }

    public void setVentaId(String ventaId) {
        this.ventaId = ventaId;
    }

    public String getWorkspaceNombre() {
        return workspaceNombre;
    }

    public void setWorkspaceNombre(String workspaceNombre) {
        this.workspaceNombre = workspaceNombre;
    }

    public BigDecimal getTotalVenta() {
        return totalVenta;
    }

    public void setTotalVenta(BigDecimal totalVenta) {
        this.totalVenta = totalVenta;
    }

    public OffsetDateTime getFechaVenta() {
        return fechaVenta;
    }

    public void setFechaVenta(OffsetDateTime fechaVenta) {
        this.fechaVenta = fechaVenta;
    }

    public String getMetodoPagoNombre() {
        return metodoPagoNombre;
    }

    public void setMetodoPagoNombre(String metodoPagoNombre) {
        this.metodoPagoNombre = metodoPagoNombre;
    }

    public String getUsuarioNombre() {
        return usuarioNombre;
    }

    public void setUsuarioNombre(String usuarioNombre) {
        this.usuarioNombre = usuarioNombre;
    }

    public String getClienteNombre() {
        return clienteNombre;
    }

    public void setClienteNombre(String clienteNombre) {
        this.clienteNombre = clienteNombre;
    }

    public int getCantidadProductos() {
        return cantidadProductos;
    }

    public void setCantidadProductos(int cantidadProductos) {
        this.cantidadProductos = cantidadProductos;
    }

    public String getMensaje() {
        return mensaje;
    }

    public void setMensaje(String mensaje) {
        this.mensaje = mensaje;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/WorkspaceStatusDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

public class WorkspaceStatusDTO {
    private String id;
    private String nombre;
    private String estado; // "disponible", "ocupado", "cuenta"
    private int cantidadOrdenes;
    private Boolean permanente;

    // Constructor
    public WorkspaceStatusDTO() {
    }

    public WorkspaceStatusDTO(String id, String nombre, String estado, int cantidadOrdenes, Boolean permanente) {
        this.id = id;
        this.nombre = nombre;
        this.estado = estado;
        this.cantidadOrdenes = cantidadOrdenes;
        this.permanente = permanente;
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getEstado() {
        return estado;
    }

    public void setEstado(String estado) {
        this.estado = estado;
    }

    public int getCantidadOrdenes() {
        return cantidadOrdenes;
    }

    public void setCantidadOrdenes(int cantidadOrdenes) {
        this.cantidadOrdenes = cantidadOrdenes;
    }

    public Boolean getPermanente() {
        return permanente;
    }

    public void setPermanente(Boolean permanente) {
        this.permanente = permanente;
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/WorkspacesDTO.java`:

```java
package com.posfin.pos_finanzas_backend.dtos;

/**
 * DTO (Data Transfer Object) para la entidad Workspaces.
 * Se utiliza para controlar y dar forma a los datos que se envían
 * a través de la API, desacoplando la API del modelo de la base de datos.
 */
public class WorkspacesDTO {
    private String id;
    private String nombre;
    private Boolean permanente;

    // Constructor vacío
    public WorkspacesDTO() {
    }

    // Constructor con parámetros
    public WorkspacesDTO(String id, String nombre, Boolean permanente) {
        this.id = id;
        this.nombre = nombre;
        this.permanente = permanente;
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public Boolean getPermanente() {
        return permanente;
    }

    public void setPermanente(Boolean permanente) {
        this.permanente = permanente;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/CategoriaPersonas.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "categoria_personas")
public class CategoriaPersonas {
    @Id
    private String id;

    @Column(name = "categoria", nullable = false)
    private String categoria;

    // Constructor
    public CategoriaPersonas() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getCategoria() {
        return categoria;
    }

    public void setCategoria(String categoriaPersona) {
        this.categoria = categoriaPersona;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/CategoriasProductos.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "categorias_productos")
public class CategoriasProductos {
    @Id
    private String id;

    @Column(name = "categoria", nullable = false)
    private String categoria;

    // Constructor
    public CategoriasProductos() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getCategoria() {
        return categoria;
    }

    public void setCategoria(String categoria) {
        this.categoria = categoria;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/DetallesOrdenesDeCompras.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;

@Entity
@Table(name = "detalles_ordenes_de_compras")
public class DetallesOrdenesDeCompras {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ordenes_de_compras_id", nullable = false)
    private OrdenesDeCompras ordenDeCompra;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "producto_id", nullable = false)
    private Productos producto;

    @Column(name = "cantidad_pz", nullable = false)
    private BigDecimal cantidadPz;

    @Column(name = "cantidad_kg", nullable = false)
    private BigDecimal cantidadKg;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "historial_costos_id", nullable = false)
    private HistorialCostos historialCosto;

    // Constructor
    public DetallesOrdenesDeCompras() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public OrdenesDeCompras getOrdenDeCompra() {
        return ordenDeCompra;
    }

    public void setOrdenDeCompra(OrdenesDeCompras ordenDeCompra) {
        this.ordenDeCompra = ordenDeCompra;
    }

    public Productos getProducto() {
        return producto;
    }

    public void setProducto(Productos producto) {
        this.producto = producto;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public HistorialCostos getHistorialCosto() {
        return historialCosto;
    }

    public void setHistorialCosto(HistorialCostos historialCosto) {
        this.historialCosto = historialCosto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/DetallesOrdenesDeVentas.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;

@Entity
@Table(name = "detalles_ordenes_de_ventas")
public class DetallesOrdenesDeVentas {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ordenes_de_ventas_id", nullable = false)
    private OrdenesDeVentas ordenDeVenta;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false)
    private Productos producto;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "historial_precios_id", nullable = false)
    private HistorialPrecios historialPrecio;

    @Column(name = "cantidad_pz", nullable = false)
    private BigDecimal cantidadPz;

    @Column(name = "cantidad_kg", nullable = false)
    private BigDecimal cantidadKg;

    // Constructor
    public DetallesOrdenesDeVentas() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public OrdenesDeVentas getOrdenDeVenta() {
        return ordenDeVenta;
    }

    public void setOrdenDeVenta(OrdenesDeVentas ordenDeVenta) {
        this.ordenDeVenta = ordenDeVenta;
    }

    public Productos getProducto() {
        return producto;
    }

    public void setProducto(Productos producto) {
        this.producto = producto;
    }

    public HistorialPrecios getHistorialPrecio() {
        return historialPrecio;
    }

    public void setHistorialPrecio(HistorialPrecios historialPrecio) {
        this.historialPrecio = historialPrecio;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Estados.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "estados")
public class Estados {
    @Id
    private String id;

    @Column(name = "estado", nullable = false)
    private String estado;

    // Constructor
    public Estados() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getEstado() {
        return estado;
    }

    public void setEstado(String estado) {
        this.estado = estado;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/HistorialCargosProveedores.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@Entity
@Table(name = "historial_cargos_proveedores")
public class HistorialCargosProveedores {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "personas_id", nullable = false)
    private Personas persona;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ordenes_de_compras_id", nullable = false)
    private OrdenesDeCompras ordenDeCompra;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "metodos_pago_id", nullable = false)
    private MetodosPago metodoPago;

    @Column(name = "monto_pagado", nullable = false)
    private BigDecimal montoPagado;

    @Column(name = "fecha", nullable = false)
    private OffsetDateTime fecha;

    // Constructor
    public HistorialCargosProveedores() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Personas getPersona() {
        return persona;
    }

    public void setPersona(Personas persona) {
        this.persona = persona;
    }

    public OrdenesDeCompras getOrdenDeCompra() {
        return ordenDeCompra;
    }

    public void setOrdenDeCompra(OrdenesDeCompras ordenDeCompra) {
        this.ordenDeCompra = ordenDeCompra;
    }

    public MetodosPago getMetodoPago() {
        return metodoPago;
    }

    public void setMetodoPago(MetodosPago metodoPago) {
        this.metodoPago = metodoPago;
    }

    public BigDecimal getMontoPagado() {
        return montoPagado;
    }

    public void setMontoPagado(BigDecimal montoPagado) {
        this.montoPagado = montoPagado;
    }

    public OffsetDateTime getFecha() {
        return fecha;
    }

    public void setFecha(OffsetDateTime fecha) {
        this.fecha = fecha;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/HistorialCostos.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.time.ZonedDateTime;
import java.math.BigDecimal;

@Entity
@Table(name = "historial_costos")
public class HistorialCostos {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false)
    private Productos productos;

    @Column(name = "costo", nullable = false)
    private BigDecimal costo;

    @Column(name = "fecha_de_registro", nullable = false)
    private ZonedDateTime fechaDeRegistro;

    // Constructor
    public HistorialCostos() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Productos getProductos() {
        return productos;
    }

    public void setProductos(Productos productos) {
        this.productos = productos;
    }

    public BigDecimal getCosto() {
        return costo;
    }

    public void setCosto(BigDecimal costo) {
        this.costo = costo;
    }

    public ZonedDateTime getFechaDeRegistro() {
        return fechaDeRegistro;
    }

    public void setFechaDeRegistro(ZonedDateTime fechaDeRegistro) {
        this.fechaDeRegistro = fechaDeRegistro;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/HistorialPagosClientes.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@Entity
@Table(name = "historial_pagos_clientes")
public class HistorialPagosClientes {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "personas_id", nullable = false)
    private Personas persona;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "orden_de_venta_id", nullable = false)
    private OrdenesDeVentas ordenDeVenta;

    @Column(name = "monto_pagado", nullable = false)
    private BigDecimal montoPagado;

    @Column(name = "fecha", nullable = false)
    private OffsetDateTime fecha;

    // Constructor
    public HistorialPagosClientes() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Personas getPersona() {
        return persona;
    }

    public void setPersona(Personas persona) {
        this.persona = persona;
    }

    public OrdenesDeVentas getOrdenDeVenta() {
        return ordenDeVenta;
    }

    public void setOrdenDeVenta(OrdenesDeVentas ordenDeVenta) {
        this.ordenDeVenta = ordenDeVenta;
    }

    public BigDecimal getMontoPagado() {
        return montoPagado;
    }

    public void setMontoPagado(BigDecimal montoPagado) {
        this.montoPagado = montoPagado;
    }

    public OffsetDateTime getFecha() {
        return fecha;
    }

    public void setFecha(OffsetDateTime fecha) {
        this.fecha = fecha;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/HistorialPrecios.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.time.ZonedDateTime;
import java.math.BigDecimal;

@Entity
@Table(name = "historial_precios")
public class HistorialPrecios {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false)
    private Productos productos;

    @Column(name = "precio", nullable = false)
    private BigDecimal precio;

    @Column(name = "fecha_de_registro", nullable = false)
    private ZonedDateTime fechaDeRegistro;

    // Constructor
    public HistorialPrecios() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Productos getProductos() {
        return productos;
    }

    public void setProductos(Productos productos) {
        this.productos = productos;
    }

    public BigDecimal getPrecio() {
        return precio;
    }

    public void setPrecio(BigDecimal precio) {
        this.precio = precio;
    }

    public ZonedDateTime getFechaDeRegistro() {
        return fechaDeRegistro;
    }

    public void setFechaDeRegistro(ZonedDateTime fechaDeRegistro) {
        this.fechaDeRegistro = fechaDeRegistro;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Inventarios.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.FetchType;
import jakarta.persistence.Id;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "inventarios")
public class Inventarios {
    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false) // Asegúrate que 'name' coincida con tu columna en la BD
    private Productos producto;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ubicaciones_id", nullable = false) // Asegúrate que 'name' coincida con tu columna en la BD
    private Ubicaciones ubicacion;

    @Column(name = "cantidad_pz")
    private Integer cantidadPz;

    @Column(name = "cantidad_kg")
    private Integer cantidadKg;

    @Column(name = "cantidad_minima", nullable = false)
    private Integer cantidadMinima;

    @Column(name = "cantidad_maxima", nullable = false)
    private Integer cantidadMaxima;

    // Constructor
    public Inventarios() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Productos getProducto() {
        return producto;
    }

    public void setProducto(Productos productoId) {
        this.producto = productoId;
    }

    public Ubicaciones getUbicacion() {
        return ubicacion;
    }

    public void setUbicacion(Ubicaciones ubicacionesId) {
        this.ubicacion = ubicacionesId;
    }

    public Integer getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(Integer cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public Integer getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(Integer cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public int getCantidadMinima() {
        return cantidadMinima;
    }

    public void setCantidadMinima(int cantidadMinima) {
        this.cantidadMinima = cantidadMinima;
    }

    public int getCantidadMaxima() {
        return cantidadMaxima;
    }

    public void setCantidadMaxima(int cantidadMaxima) {
        this.cantidadMaxima = cantidadMaxima;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/MetodosPago.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "metodos_pago")
public class MetodosPago {
    @Id
    private String id;

    @Column(name = "metodo_pago", nullable = false)
    private String metodoPago;

    // Constructor
    public MetodosPago() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getMetodoPago() {
        return metodoPago;
    }

    public void setMetodoPago(String metodoPago) {
        this.metodoPago = metodoPago;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/MovimientosInventarios.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@Entity
@Table(name = "movimientos_inventarios")
public class MovimientosInventarios {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false)
    private Productos producto;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "ubicaciones_id", nullable = false)
    private Ubicaciones ubicacion;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "tipo_movimientos_id", nullable = false)
    private TipoMovimientos tipoMovimiento;

    @Column(name = "cantidad", nullable = false)
    private BigDecimal cantidad;

    @Column(name = "fecha_movimiento", nullable = false)
    private OffsetDateTime fechaMovimiento;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "usuarios_id", nullable = false)
    private Usuarios usuario;

    @Column(name = "clave_movimiento", nullable = false)
    private String claveMovimiento;

    // Constructor
    public MovimientosInventarios() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Productos getProducto() {
        return producto;
    }

    public void setProducto(Productos producto) {
        this.producto = producto;
    }

    public Ubicaciones getUbicacion() {
        return ubicacion;
    }

    public void setUbicacion(Ubicaciones ubicacion) {
        this.ubicacion = ubicacion;
    }

    public TipoMovimientos getTipoMovimiento() {
        return tipoMovimiento;
    }

    public void setTipoMovimiento(TipoMovimientos tipoMovimiento) {
        this.tipoMovimiento = tipoMovimiento;
    }

    public BigDecimal getCantidad() {
        return cantidad;
    }

    public void setCantidad(BigDecimal cantidad) {
        this.cantidad = cantidad;
    }

    public OffsetDateTime getFechaMovimiento() {
        return fechaMovimiento;
    }

    public void setFechaMovimiento(OffsetDateTime fechaMovimiento) {
        this.fechaMovimiento = fechaMovimiento;
    }

    public Usuarios getUsuario() {
        return usuario;
    }

    public void setUsuario(Usuarios usuario) {
        this.usuario = usuario;
    }

    public String getClaveMovimiento() {
        return claveMovimiento;
    }

    public void setClaveMovimiento(String claveMovimiento) {
        this.claveMovimiento = claveMovimiento;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/OrdenesDeCompras.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@Entity
@Table(name = "ordenes_de_compras")
public class OrdenesDeCompras {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "persona_id", nullable = false)
    private Personas persona;

    @Column(name = "fecha_orden", nullable = false)
    private OffsetDateTime fechaOrden;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "estados_id", nullable = false)
    private Estados estado;

    @Column(name = "total_compra", nullable = false)
    private BigDecimal totalCompra;

    // Constructor
    public OrdenesDeCompras() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Personas getPersona() {
        return persona;
    }

    public void setPersona(Personas persona) {
        this.persona = persona;
    }

    public OffsetDateTime getFechaOrden() {
        return fechaOrden;
    }

    public void setFechaOrden(OffsetDateTime fechaOrden) {
        this.fechaOrden = fechaOrden;
    }

    public Estados getEstado() {
        return estado;
    }

    public void setEstado(Estados estado) {
        this.estado = estado;
    }

    public BigDecimal getTotalCompra() {
        return totalCompra;
    }

    public void setTotalCompra(BigDecimal totalCompra) {
        this.totalCompra = totalCompra;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/OrdenesDeVentas.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.OffsetDateTime;

@Entity
@Table(name = "ordenes_de_ventas")
public class OrdenesDeVentas {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "personas_id", nullable = false)
    private Personas persona;

    @Column(name = "fecha_orden", nullable = false)
    private OffsetDateTime fechaOrden;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "usuarios_id", nullable = false)
    private Usuarios usuario;

    @Column(name = "total_venta", nullable = false)
    private BigDecimal totalVenta;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "metodos_pago_id", nullable = false)
    private MetodosPago metodoPago;

    // Constructor
    public OrdenesDeVentas() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Personas getPersona() {
        return persona;
    }

    public void setPersona(Personas persona) {
        this.persona = persona;
    }

    public OffsetDateTime getFechaOrden() {
        return fechaOrden;
    }

    public void setFechaOrden(OffsetDateTime fechaOrden) {
        this.fechaOrden = fechaOrden;
    }

    public Usuarios getUsuario() {
        return usuario;
    }

    public void setUsuario(Usuarios usuario) {
        this.usuario = usuario;
    }

    public BigDecimal getTotalVenta() {
        return totalVenta;
    }

    public void setTotalVenta(BigDecimal totalVenta) {
        this.totalVenta = totalVenta;
    }

    public MetodosPago getMetodoPago() {
        return metodoPago;
    }

    public void setMetodoPago(MetodosPago metodoPago) {
        this.metodoPago = metodoPago;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/OrdenesWorkspace.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;
import java.math.BigDecimal;

@Entity
@Table(name = "ordenes_workspace")
public class OrdenesWorkspace {

    @Id
    private String id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "workspace_id", nullable = false)
    private Workspaces workspace;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "productos_id", nullable = false)
    private Productos producto;

    @Column(name = "cantidad_pz", nullable = false)
    private BigDecimal cantidadPz;

    @Column(name = "cantidad_kg", nullable = false)
    private BigDecimal cantidadKg;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "historial_precios_id", nullable = false)
    private HistorialPrecios historialPrecio;

    // Constructor
    public OrdenesWorkspace() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public Workspaces getWorkspace() {
        return workspace;
    }

    public void setWorkspace(Workspaces workspace) {
        this.workspace = workspace;
    }

    public Productos getProducto() {
        return producto;
    }

    public void setProducto(Productos producto) {
        this.producto = producto;
    }

    public BigDecimal getCantidadPz() {
        return cantidadPz;
    }

    public void setCantidadPz(BigDecimal cantidadPz) {
        this.cantidadPz = cantidadPz;
    }

    public BigDecimal getCantidadKg() {
        return cantidadKg;
    }

    public void setCantidadKg(BigDecimal cantidadKg) {
        this.cantidadKg = cantidadKg;
    }

    public HistorialPrecios getHistorialPrecio() {
        return historialPrecio;
    }

    public void setHistorialPrecio(HistorialPrecios historialPrecio) {
        this.historialPrecio = historialPrecio;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Personas.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;

@Entity
@Table(name = "personas")
public class Personas {

    @Id
    private String id;

    @Column(name = "nombre", nullable = false)
    private String nombre;

    @Column(name = "apellido_paterno")
    private String apellidoPaterno;

    @Column(name = "apellido_materno")
    private String apellidoMaterno;

    @Column(name = "rfc")
    private String rfc;

    @Column(name = "telefono", nullable = false)
    private String telefono;

    @Column(name = "email")
    private String email;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "estados_id", nullable = false)
    private Estados estados;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "categoria_personas_id", nullable = false)
    private CategoriaPersonas categoriaPersonas;

    // Constructor
    public Personas() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getApellidoPaterno() {
        return apellidoPaterno;
    }

    public void setApellidoPaterno(String apellidoPaterno) {
        this.apellidoPaterno = apellidoPaterno;
    }

    public String getApellidoMaterno() {
        return apellidoMaterno;
    }

    public void setApellidoMaterno(String apellidoMaterno) {
        this.apellidoMaterno = apellidoMaterno;
    }

    public String getRfc() {
        return rfc;
    }

    public void setRfc(String rfc) {
        this.rfc = rfc;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public Estados getEstados() {
        return estados;
    }

    public void setEstados(Estados estados) {
        this.estados = estados;
    }

    public CategoriaPersonas getCategoriaPersonas() {
        return categoriaPersonas;
    }

    public void setCategoriaPersonas(CategoriaPersonas categoriaPersonas) {
        this.categoriaPersonas = categoriaPersonas;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Productos.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;

@Entity
@Table(name = "productos")
public class Productos {

    @Id
    private String id;

    @Column(name = "nombre", nullable = false)
    private String nombre;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "categorias_productos_id", nullable = false)
    private CategoriasProductos categoriasProductos;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "proveedor_id", nullable = false)
    private Personas proveedor;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "estados_id", nullable = false)
    private Estados estados;

    // Constructor
    public Productos() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public CategoriasProductos getCategoriasProductos() {
        return categoriasProductos;
    }

    public void setCategoriasProductos(CategoriasProductos categoriasProductos) {
        this.categoriasProductos = categoriasProductos;
    }

    public Personas getProveedor() {
        return proveedor;
    }

    public void setProveedor(Personas proveedor) {
        this.proveedor = proveedor;
    }

    public Estados getEstados() {
        return estados;
    }

    public void setEstados(Estados estados) {
        this.estados = estados;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Roles.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "roles")
public class Roles {
    @Id
    private String id;

    @Column(name = "roles", nullable = false)
    private String roles;

    // Constructor
    public Roles() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getRoles() {
        return roles;
    }

    public void setRoles(String roles) {
        this.roles = roles;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/TipoMovimientos.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;

@Entity
@Table(name = "tipo_movimientos")
public class TipoMovimientos {
    @Id
    // UUID se asignará manualmente antes de persistir
    private String id;

    @Column(name = "movimiento", nullable = false)
    private String movimiento;

    // Constructor
    public TipoMovimientos() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getMovimiento() {
        return movimiento;
    }

    public void setMovimiento(String movimiento) {
        this.movimiento = movimiento;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Ubicaciones.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "ubicaciones")
public class Ubicaciones {
    @Id
    private String id;

    @Column(name = "nombre", nullable = false)
    private String nombre;

    @Column(name = "ubicacion", nullable = false)
    private String ubicacion;

    // Constructor
    public Ubicaciones() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getUbicacion() {
        return ubicacion;
    }

    public void setUbicacion(String ubicacion) {
        this.ubicacion = ubicacion;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Usuarios.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.*;

@Entity
@Table(name = "usuarios")
public class Usuarios {
    @Id
    private String id;

    @Column(name = "nombre", nullable = false)
    private String nombre;

    @Column(name = "contrasena", nullable = false)
    private String contrasena;

    @Column(name = "telefono", nullable = false)
    private String telefono;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "roles_id", nullable = false)
    private Roles roles;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "estados_id", nullable = false)
    private Estados estados;

    // Constructor
    public Usuarios() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public String getContrasena() {
        return contrasena;
    }

    public void setContrasena(String contrasena) {
        this.contrasena = contrasena;
    }

    public String getTelefono() {
        return telefono;
    }

    public void setTelefono(String telefono) {
        this.telefono = telefono;
    }

    public Roles getRoles() {
        return roles;
    }

    public void setRoles(Roles roles) {
        this.roles = roles;
    }

    public Estados getEstados() {
        return estados;
    }

    public void setEstados(Estados estados) {
        this.estados = estados;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/models/Workspaces.java`:

```java
package com.posfin.pos_finanzas_backend.models;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;
import jakarta.persistence.PrePersist;
import jakarta.persistence.Table;

@Entity
@Table(name = "workspaces")
public class Workspaces {
    @Id
    private String id;

    @Column(name = "nombre", nullable = false)
    private String nombre;

    @Column(name = "permanente", nullable = false)
    private Boolean permanente = false;

    // Campo temporal para indicar si el workspace solicita cuenta
    // Este campo no está en la BD, se maneja en memoria
    @Column(nullable = true)
    private Boolean solicitudCuenta = false;

    // Constructor
    public Workspaces() {
    }

    // Función para generar un ID único antes de persistir
    @PrePersist
    public void generateId() {
        if (this.id == null) {
            this.id = java.util.UUID.randomUUID().toString();
        }
    }

    // Getters y Setters
    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getNombre() {
        return nombre;
    }

    public void setNombre(String nombre) {
        this.nombre = nombre;
    }

    public Boolean getPermanente() {
        return permanente;
    }

    public void setPermanente(Boolean permanente) {
        this.permanente = permanente;
    }

    public Boolean getSolicitudCuenta() {
        return solicitudCuenta;
    }

    public void setSolicitudCuenta(Boolean solicitudCuenta) {
        this.solicitudCuenta = solicitudCuenta;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/CategoriaPersonasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.CategoriaPersonas;
import org.springframework.data.jpa.repository.JpaRepository;

public interface CategoriaPersonasRepository extends JpaRepository<CategoriaPersonas, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos
    // relacionados con las categorías de personas, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por nombre de categoría,
    // o cualquier otra lógica específica que necesites implementar.

}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/CategoriasProductosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.CategoriasProductos;
import org.springframework.data.jpa.repository.JpaRepository;

public interface CategoriasProductosRepository extends JpaRepository<CategoriasProductos, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos relacionados con las categorías de productos, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por nombre de categoría,
    // o cualquier otra lógica específica que necesites implementar.
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/DetallesOrdenesDeComprasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.DetallesOrdenesDeCompras;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface DetallesOrdenesDeComprasRepository extends JpaRepository<DetallesOrdenesDeCompras, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos
    // relacionados con los detalles de órdenes de compras, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por orden de compra,
    // producto, etc.
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/DetallesOrdenesDeVentasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.DetallesOrdenesDeVentas;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface DetallesOrdenesDeVentasRepository extends JpaRepository<DetallesOrdenesDeVentas, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos
    // relacionados con los detalles de órdenes de ventas, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por orden de venta,
    // producto, etc.
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/EstadosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Estados;
import org.springframework.data.jpa.repository.JpaRepository;
import java.util.Optional;

public interface EstadosRepository extends JpaRepository<Estados, String> {
    // Método para buscar estado por estado
    Optional<Estados> findByEstado(String estado);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/HistorialCargosProveedoresRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.HistorialCargosProveedores;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.math.BigDecimal;
import java.util.List;

@Repository
public interface HistorialCargosProveedoresRepository extends JpaRepository<HistorialCargosProveedores, String> {
    
    /**
     * Encuentra todos los pagos de un proveedor específico
     */
    List<HistorialCargosProveedores> findByPersonaId(String proveedorId);
    
    /**
     * Encuentra pagos por orden de compra específica
     */
    List<HistorialCargosProveedores> findByOrdenDeCompraId(String ordenCompraId);
    
    /**
     * Encuentra pagos de un proveedor ordenados por fecha descendente
     */
    @Query("SELECT h FROM HistorialCargosProveedores h WHERE h.persona.id = :proveedorId ORDER BY h.fecha DESC")
    List<HistorialCargosProveedores> findByProveedorIdOrderByFechaDesc(@Param("proveedorId") String proveedorId);
    
    /**
     * Calcula el total de pagos realizados a un proveedor
     */
    @Query("SELECT COALESCE(SUM(h.montoPagado), 0) FROM HistorialCargosProveedores h WHERE h.persona.id = :proveedorId")
    BigDecimal calcularTotalPagosProveedor(@Param("proveedorId") String proveedorId);
    
    /**
     * Calcula el total de pagos realizados para una orden de compra específica
     */
    @Query("SELECT COALESCE(SUM(h.montoPagado), 0) FROM HistorialCargosProveedores h WHERE h.ordenDeCompra.id = :ordenCompraId")
    BigDecimal calcularTotalPagosOrdenCompra(@Param("ordenCompraId") String ordenCompraId);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/HistorialCostosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.HistorialCostos;
import com.posfin.pos_finanzas_backend.models.Productos;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.Optional;

@Repository
public interface HistorialCostosRepository extends JpaRepository<HistorialCostos, String> {

    @Query("SELECT hc FROM HistorialCostos hc WHERE hc.productos = :producto ORDER BY hc.fechaDeRegistro DESC LIMIT 1")
    Optional<HistorialCostos> findLatestByProducto(@Param("producto") Productos producto);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/HistorialPagosClientesRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.HistorialPagosClientes;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface HistorialPagosClientesRepository extends JpaRepository<HistorialPagosClientes, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos
    // relacionados con el historial de pagos de clientes, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por cliente, orden de venta,
    // fecha, etc.
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/HistorialPreciosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.models.Productos;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.Optional;

@Repository
public interface HistorialPreciosRepository extends JpaRepository<HistorialPrecios, String> {

    @Query("SELECT hp FROM HistorialPrecios hp WHERE hp.productos = :producto ORDER BY hp.fechaDeRegistro DESC LIMIT 1")
    Optional<HistorialPrecios> findLatestByProducto(@Param("producto") Productos producto);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/InventarioRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Inventarios;
import com.posfin.pos_finanzas_backend.models.Productos;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface InventarioRepository extends JpaRepository<Inventarios, String> {
    // Método para buscar inventario por producto
    Optional<Inventarios> findByProducto(Productos producto);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/MetodosPagoRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.MetodosPago;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface MetodosPagoRepository extends JpaRepository<MetodosPago, String> {
    
    /**
     * Busca método de pago por método de pago
     */
    Optional<MetodosPago> findByMetodoPago(String metodoPago);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/MovimientosInventariosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.MovimientosInventarios;
import com.posfin.pos_finanzas_backend.models.Productos;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface MovimientosInventariosRepository extends JpaRepository<MovimientosInventarios, String> {
    // Buscar movimientos por producto ordenados por fecha descendente (más recientes primero)
    List<MovimientosInventarios> findByProductoOrderByFechaMovimientoDesc(Productos producto);
    
    // Buscar movimientos por producto ordenados por fecha ascendente
    List<MovimientosInventarios> findByProductoOrderByFechaMovimientoAsc(Productos producto);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/OrdenesDeComprasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.OrdenesDeCompras;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.math.BigDecimal;
import java.util.List;

@Repository
public interface OrdenesDeComprasRepository extends JpaRepository<OrdenesDeCompras, String> {
    
    /**
     * Encuentra todas las órdenes de compra de un proveedor específico
     */
    List<OrdenesDeCompras> findByPersonaId(String proveedorId);
    
    /**
     * Encuentra órdenes de compra por proveedor y estado
     */
    @Query("SELECT o FROM OrdenesDeCompras o WHERE o.persona.id = :proveedorId AND o.estado.estado = :estadoNombre")
    List<OrdenesDeCompras> findByProveedorIdAndEstadoNombre(@Param("proveedorId") String proveedorId, 
                                                            @Param("estadoNombre") String estadoNombre);
    
    /**
     * Calcula el total de compras de un proveedor (suma de todos los totales de órdenes)
     */
    @Query("SELECT COALESCE(SUM(o.totalCompra), 0) FROM OrdenesDeCompras o WHERE o.persona.id = :proveedorId")
    BigDecimal calcularTotalComprasProveedor(@Param("proveedorId") String proveedorId);
    
    /**
     * Encuentra órdenes de compra por estado
     */
    @Query("SELECT o FROM OrdenesDeCompras o WHERE o.estado.estado = :estadoNombre ORDER BY o.fechaOrden DESC")
    List<OrdenesDeCompras> findByEstadoNombreOrderByFechaOrdenDesc(@Param("estadoNombre") String estadoNombre);
    
    /**
     * Obtiene la orden de compra más antigua de un proveedor específico
     */
    @Query("SELECT o FROM OrdenesDeCompras o WHERE o.persona.id = :proveedorId ORDER BY o.fechaOrden ASC")
    List<OrdenesDeCompras> findOrdersMasAntiguasByProveedorId(@Param("proveedorId") String proveedorId);
    
    /**
     * Cuenta las órdenes pendientes de un proveedor
     */
    @Query("SELECT COUNT(o) FROM OrdenesDeCompras o WHERE o.persona.id = :proveedorId AND o.estado.estado = 'Pendiente'")
    Long contarOrdenesPendientesByProveedorId(@Param("proveedorId") String proveedorId);
    
    /**
     * Obtiene información agregada de deudas por proveedor
     */
    @Query(value = """
        SELECT 
            p.id as proveedorId,
            p.nombre as proveedorNombre,
            p.telefono as telefonoProveedor,
            p.email as emailProveedor,
            COALESCE(compras.total_compras, 0) as totalCompras,
            COALESCE(pagos.total_pagos, 0) as totalPagos,
            compras.fecha_orden_mas_antigua as fechaOrdenMasAntigua,
            COALESCE(compras.cantidad_ordenes, 0) as cantidadOrdenes
        FROM personas p
        LEFT JOIN (
            SELECT 
                o.persona_id,
                SUM(o.total_compra) as total_compras,
                MIN(o.fecha_orden) as fecha_orden_mas_antigua,
                COUNT(o.id) as cantidad_ordenes
            FROM ordenes_de_compras o
            GROUP BY o.persona_id
        ) compras ON p.id = compras.persona_id
        LEFT JOIN (
            SELECT 
                hcp.personas_id,
                SUM(hcp.monto_pagado) as total_pagos
            FROM historial_cargos_proveedores hcp
            GROUP BY hcp.personas_id
        ) pagos ON p.id = pagos.personas_id
        WHERE p.categoria_personas_id = (SELECT id FROM categoria_personas WHERE categoria = 'Proveedor')
        AND (COALESCE(compras.total_compras, 0) > COALESCE(pagos.total_pagos, 0))
        ORDER BY (COALESCE(compras.total_compras, 0) - COALESCE(pagos.total_pagos, 0)) DESC
        """, nativeQuery = true)
    List<Object[]> obtenerDeudasProveedores();
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/OrdenesDeVentasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.OrdenesDeVentas;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface OrdenesDeVentasRepository extends JpaRepository<OrdenesDeVentas, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos
    // relacionados con las órdenes de ventas, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por fecha, cliente, usuario,
    // etc.
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/OrdenesWorkspaceRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.OrdenesWorkspace;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface OrdenesWorkspaceRepository extends JpaRepository<OrdenesWorkspace, String> {
    // Método para contar órdenes por workspace ID
    long countByWorkspaceId(String workspaceId);

    // Método para encontrar órdenes por workspace ID
    java.util.List<OrdenesWorkspace> findByWorkspaceId(String workspaceId);

    // Método para eliminar órdenes por workspace ID
    void deleteByWorkspaceId(String workspaceId);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/PersonasRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Personas;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface PersonasRepository extends JpaRepository<Personas, String> {
    
    /**
     * Encuentra personas por categoría (para obtener proveedores)
     */
    @Query("SELECT p FROM Personas p WHERE p.categoriaPersonas.categoria = :categoriaNombre AND p.estados.estado = 'Activo'")
    List<Personas> findByCategoriaPersonasNombreAndEstadoActivo(@Param("categoriaNombre") String categoriaNombre);
    
    /**
     * Encuentra proveedores activos específicamente
     */
    @Query("SELECT p FROM Personas p WHERE p.categoriaPersonas.categoria = 'Proveedor' AND p.estados.estado = 'Activo' ORDER BY p.nombre")
    List<Personas> findProveedoresActivos();
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/ProductosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Productos;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;
import org.springframework.stereotype.Repository;

import java.util.List;

@Repository
public interface ProductosRepository extends JpaRepository<Productos, String> {
    // ¡Magia! No necesitas escribir nada más aquí.
    // Spring Data JPA implementará automáticamente los métodos como:
    // save(), findById(), findAll(), deleteById(), etc.
    
    /**
     * Encuentra productos activos de un proveedor específico
     */
    @Query("SELECT p FROM Productos p WHERE p.proveedor.id = :proveedorId AND p.estados.estado = 'Activo' ORDER BY p.nombre")
    List<Productos> findByProveedorIdAndEstadoActivo(@Param("proveedorId") String proveedorId);
    
    /**
     * Encuentra productos activos (para filtro general)
     */
    @Query("SELECT p FROM Productos p WHERE p.estados.estado = 'Activo' ORDER BY p.nombre")
    List<Productos> findProductosActivos();
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/RolesRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Roles;
import org.springframework.data.jpa.repository.JpaRepository;

public interface RolesRepository extends JpaRepository<Roles, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos relacionados con los roles, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por nombre de rol,
    // o cualquier otra lógica específica que necesites implementar.

}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/TIpoMovimientosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.TipoMovimientos;
import org.springframework.data.jpa.repository.JpaRepository;

import java.util.Optional;

public interface TIpoMovimientosRepository extends JpaRepository<TipoMovimientos, String> {
    // Método para buscar tipo de movimiento por movimiento
    Optional<TipoMovimientos> findByMovimiento(String movimiento);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/UbicacionesRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Ubicaciones;
import org.springframework.data.jpa.repository.JpaRepository;

public interface UbicacionesRepository extends JpaRepository<Ubicaciones, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos relacionados con las ubicaciones, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por nombre de ubicación,
    // o cualquier otra lógica específica que necesites implementar.

}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/UsuariosRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import org.springframework.data.jpa.repository.JpaRepository;
import com.posfin.pos_finanzas_backend.models.Usuarios;
import java.util.Optional;

public interface UsuariosRepository extends JpaRepository<Usuarios, String> {
    // Método para buscar usuario por nombre
    Optional<Usuarios> findByNombre(String nombre);
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/WorkspacesRepository.java`:

```java
package com.posfin.pos_finanzas_backend.repositories;

import com.posfin.pos_finanzas_backend.models.Workspaces;
import org.springframework.data.jpa.repository.JpaRepository;

public interface WorkspacesRepository extends JpaRepository<Workspaces, String> {
    // Aquí puedes definir métodos personalizados para interactuar con la base de
    // datos relacionados con los espacios de trabajo, si es necesario.
    // Por ejemplo, podrías agregar métodos para buscar por nombre de espacio de
    // trabajo,
    // o cualquier otra lógica específica que necesites implementar.

}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/ComprasService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.*;
import com.posfin.pos_finanzas_backend.models.*;
import com.posfin.pos_finanzas_backend.repositories.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.math.BigDecimal;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

/**
 * Servicio para gestionar lógica de compras a proveedores y cálculo de deudas
 */
@Service
@Transactional
public class ComprasService {

    @Autowired
    private PersonasRepository personasRepository;
    
    @Autowired
    private OrdenesDeComprasRepository ordenesDeComprasRepository;
    
    @Autowired
    private DetallesOrdenesDeComprasRepository detallesOrdenesDeComprasRepository;
    
    @Autowired
    private HistorialCargosProveedoresRepository historialCargosProveedoresRepository;
    
    @Autowired
    private ProductosRepository productosRepository;
    
    @Autowired
    private EstadosRepository estadosRepository;
    
    @Autowired
    private MetodosPagoRepository metodosPagoRepository;
    
    @Autowired
    private HistorialCostosRepository historialCostosRepository;
    
    @Autowired
    private InventarioRepository inventarioRepository;
    
    @Autowired
    private MovimientosInventariosRepository movimientosInventariosRepository;
    
    @Autowired
    private TIpoMovimientosRepository tipoMovimientosRepository;
    
    @Autowired
    private UbicacionesRepository ubicacionesRepository;

    @Autowired
    private UsuariosRepository usuariosRepository;

    /**
     * Obtiene todos los proveedores activos con su estado de deuda
     */
    public List<ProveedorDTO> obtenerProveedores() {
        List<Personas> proveedores = personasRepository.findProveedoresActivos();
        List<ProveedorDTO> proveedoresDTO = new ArrayList<>();
        
        for (Personas proveedor : proveedores) {
            DeudaProveedorDTO deuda = calcularDeudaProveedor(proveedor.getId());
            
            ProveedorDTO proveedorDTO = new ProveedorDTO(
                proveedor.getId(),
                proveedor.getNombre(),
                proveedor.getApellidoPaterno(),
                proveedor.getApellidoMaterno(),
                proveedor.getTelefono(),
                proveedor.getEmail(),
                proveedor.getEstados().getEstado(),
                deuda.getDeudaPendiente()
            );
            
            proveedoresDTO.add(proveedorDTO);
        }
        
        return proveedoresDTO;
    }

    /**
     * Calcula la deuda pendiente de un proveedor específico
     */
    public DeudaProveedorDTO calcularDeudaProveedor(String proveedorId) {
        Optional<Personas> proveedorOpt = personasRepository.findById(proveedorId);
        if (!proveedorOpt.isPresent()) {
            throw new IllegalArgumentException("Proveedor no encontrado: " + proveedorId);
        }
        
        Personas proveedor = proveedorOpt.get();
        
        // Calcular total de compras
        BigDecimal totalCompras = ordenesDeComprasRepository.calcularTotalComprasProveedor(proveedorId);
        
        // Calcular total de pagos
        BigDecimal totalPagos = historialCargosProveedoresRepository.calcularTotalPagosProveedor(proveedorId);
        
        return new DeudaProveedorDTO(
            proveedorId,
            proveedor.getNombre(),
            totalCompras,
            totalPagos
        );
    }

    /**
     * Obtiene productos de un proveedor específico con precios de compra
     */
    public List<ProductosDTO> obtenerProductosProveedor(String proveedorId) {
        List<Productos> productos = productosRepository.findByProveedorIdAndEstadoActivo(proveedorId);
        List<ProductosDTO> productosDTO = new ArrayList<>();
        
        for (Productos producto : productos) {
            ProductosDTO productoDTO = convertirProductoADTO(producto);
            productosDTO.add(productoDTO);
        }
        
        return productosDTO;
    }

    /**
     * Crea una nueva orden de compra
     */
    public OrdenesDeComprasDTO crearOrdenCompra(CompraRequestDTO compraRequest) {
        // Validar proveedor
        Optional<Personas> proveedorOpt = personasRepository.findById(compraRequest.getProveedorId());
        if (!proveedorOpt.isPresent()) {
            throw new IllegalArgumentException("Proveedor no encontrado: " + compraRequest.getProveedorId());
        }
        
        // Obtener estado "activo"
        Estados estadoActivo = estadosRepository.findByEstado("Activo")
            .orElseThrow(() -> new IllegalStateException("Estado 'Activo' no encontrado"));
        
        // Obtener método de pago por defecto (Efectivo)
        MetodosPago metodoPago;
        if (compraRequest.getMetodoPagoId() != null) {
            metodoPago = metodosPagoRepository.findById(compraRequest.getMetodoPagoId())
                .orElseThrow(() -> new IllegalArgumentException("Método de pago no encontrado"));
        } else {
            metodoPago = metodosPagoRepository.findByMetodoPago("Efectivo")
                .orElseThrow(() -> new IllegalStateException("Método de pago 'Efectivo' no encontrado"));
        }
        
        // Calcular total de la compra
        BigDecimal totalCompra = BigDecimal.ZERO;
        List<DetallesOrdenesDeCompras> detalles = new ArrayList<>();
        
        for (CompraRequestDTO.ProductoCompraDTO productoCompra : compraRequest.getProductos()) {
            Productos producto = productosRepository.findById(productoCompra.getProductoId())
                .orElseThrow(() -> new IllegalArgumentException("Producto no encontrado: " + productoCompra.getProductoId()));
            
            // Obtener precio de compra más reciente
            Optional<HistorialCostos> historialCostoOpt = historialCostosRepository.findLatestByProducto(producto);
            if (!historialCostoOpt.isPresent()) {
                throw new IllegalStateException("No hay historial de costos para el producto: " + producto.getNombre());
            }
            
            HistorialCostos historialCosto = historialCostoOpt.get();
            BigDecimal precioUnitario = historialCosto.getCosto();
            
            // Calcular subtotal según tipo de cantidad
            BigDecimal subtotal = BigDecimal.ZERO;
            if (productoCompra.getCantidadPz() != null && productoCompra.getCantidadPz().compareTo(BigDecimal.ZERO) > 0) {
                subtotal = subtotal.add(precioUnitario.multiply(productoCompra.getCantidadPz()));
            }
            if (productoCompra.getCantidadKg() != null && productoCompra.getCantidadKg().compareTo(BigDecimal.ZERO) > 0) {
                subtotal = subtotal.add(precioUnitario.multiply(productoCompra.getCantidadKg()));
            }
            
            totalCompra = totalCompra.add(subtotal);
            
            // Crear detalle de orden
            DetallesOrdenesDeCompras detalle = new DetallesOrdenesDeCompras();
            detalle.setProducto(producto);
            detalle.setCantidadPz(productoCompra.getCantidadPz() != null ? productoCompra.getCantidadPz() : BigDecimal.ZERO);
            detalle.setCantidadKg(productoCompra.getCantidadKg() != null ? productoCompra.getCantidadKg() : BigDecimal.ZERO);
            detalle.setHistorialCosto(historialCosto);
            
            detalles.add(detalle);
        }
        
        // Crear orden de compra
        OrdenesDeCompras orden = new OrdenesDeCompras();
        orden.setPersona(proveedorOpt.get());
        orden.setFechaOrden(OffsetDateTime.now());
        orden.setEstado(estadoActivo);
        orden.setTotalCompra(totalCompra);
        
        // Guardar orden
        orden = ordenesDeComprasRepository.save(orden);
        
        // Guardar detalles y actualizar inventario
        for (DetallesOrdenesDeCompras detalle : detalles) {
            detalle.setOrdenDeCompra(orden);
            detallesOrdenesDeComprasRepository.save(detalle);
            
            // Actualizar inventario (incrementar stock)
            actualizarInventarioCompra(detalle.getProducto(), detalle.getCantidadPz(), detalle.getCantidadKg());
            
            // Registrar movimiento de inventario
            registrarMovimientoCompra(detalle.getProducto(), detalle.getCantidadPz(), detalle.getCantidadKg(), orden.getId());
        }
        
        return convertirOrdenADTO(orden);
    }

    /**
     * Registra un pago a proveedor
     */
    public HistorialCargosProveedoresDTO realizarPago(PagoRequestDTO pagoRequest) {
        // Validar proveedor
        Optional<Personas> proveedorOpt = personasRepository.findById(pagoRequest.getProveedorId());
        if (!proveedorOpt.isPresent()) {
            throw new IllegalArgumentException("Proveedor no encontrado: " + pagoRequest.getProveedorId());
        }
        
        // Validar orden de compra
        Optional<OrdenesDeCompras> ordenOpt = ordenesDeComprasRepository.findById(pagoRequest.getOrdenCompraId());
        if (!ordenOpt.isPresent()) {
            throw new IllegalArgumentException("Orden de compra no encontrada: " + pagoRequest.getOrdenCompraId());
        }
        
        // Validar método de pago
        MetodosPago metodoPago = metodosPagoRepository.findById(pagoRequest.getMetodoPagoId())
            .orElseThrow(() -> new IllegalArgumentException("Método de pago no encontrado: " + pagoRequest.getMetodoPagoId()));
        
        OrdenesDeCompras orden = ordenOpt.get();
        BigDecimal montoPago;
        
        if (pagoRequest.isPagarTodoElTotal()) {
            // Calcular deuda pendiente para esta orden específica
            BigDecimal totalPagadoOrden = historialCargosProveedoresRepository.calcularTotalPagosOrdenCompra(orden.getId());
            montoPago = orden.getTotalCompra().subtract(totalPagadoOrden);
            
            if (montoPago.compareTo(BigDecimal.ZERO) <= 0) {
                throw new IllegalArgumentException("Esta orden ya está completamente pagada");
            }
        } else {
            montoPago = pagoRequest.getMontoPagado();
            
            // Validar que el monto no sea mayor a la deuda pendiente
            BigDecimal totalPagadoOrden = historialCargosProveedoresRepository.calcularTotalPagosOrdenCompra(orden.getId());
            BigDecimal deudaPendienteOrden = orden.getTotalCompra().subtract(totalPagadoOrden);
            
            if (montoPago.compareTo(deudaPendienteOrden) > 0) {
                throw new IllegalArgumentException("El monto a pagar no puede ser mayor a la deuda pendiente: $" + deudaPendienteOrden);
            }
            
            if (montoPago.compareTo(BigDecimal.ZERO) <= 0) {
                throw new IllegalArgumentException("El monto a pagar debe ser mayor a cero");
            }
        }
        
        // Crear registro de pago
        HistorialCargosProveedores pago = new HistorialCargosProveedores();
        pago.setPersona(proveedorOpt.get());
        pago.setOrdenDeCompra(orden);
        pago.setMontoPagado(montoPago);
        pago.setFecha(OffsetDateTime.now());
        pago.setMetodoPago(metodoPago);  // Asignar método de pago
        
        // Guardar pago
        pago = historialCargosProveedoresRepository.save(pago);
        
        return convertirPagoADTO(pago);
    }

    // Métodos auxiliares privados
    
    private ProductosDTO convertirProductoADTO(Productos producto) {
        ProductosDTO dto = new ProductosDTO();
        dto.setId(producto.getId());
        dto.setNombre(producto.getNombre());
        dto.setEstadosEstado(producto.getEstados().getEstado());
        
        // Obtener precio de compra más reciente
        Optional<HistorialCostos> historialCostoOpt = historialCostosRepository.findLatestByProducto(producto);
        if (historialCostoOpt.isPresent()) {
            dto.setPrecioCompraActual(historialCostoOpt.get().getCosto());
        } else {
            dto.setPrecioCompraActual(BigDecimal.ZERO);
        }
        
        // Obtener stock actual
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(producto);
        if (inventarioOpt.isPresent()) {
            Inventarios inventario = inventarioOpt.get();
            int totalStock = (inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0) + 
                           (inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0);
            dto.setCantidadInventario(totalStock);
        } else {
            dto.setCantidadInventario(0);
        }
        
        return dto;
    }
    
    private OrdenesDeComprasDTO convertirOrdenADTO(OrdenesDeCompras orden) {
        OrdenesDeComprasDTO dto = new OrdenesDeComprasDTO();
        dto.setId(orden.getId());
        dto.setPersonaId(orden.getPersona().getId());
        dto.setPersonaNombre(orden.getPersona().getNombre());
        dto.setPersonaTelefono(orden.getPersona().getTelefono());
        dto.setFechaOrden(orden.getFechaOrden());
        dto.setEstadoNombre(orden.getEstado().getEstado());
        dto.setTotalCompra(orden.getTotalCompra());
        
        return dto;
    }
    
    private HistorialCargosProveedoresDTO convertirPagoADTO(HistorialCargosProveedores pago) {
        HistorialCargosProveedoresDTO dto = new HistorialCargosProveedoresDTO();
        dto.setId(pago.getId());
        dto.setPersonaId(pago.getPersona().getId());
        dto.setPersonaNombre(pago.getPersona().getNombre());
        dto.setOrdenDeCompraId(pago.getOrdenDeCompra().getId());
        dto.setMontoPagado(pago.getMontoPagado());
        dto.setFecha(pago.getFecha());
        
        return dto;
    }
    
    private void actualizarInventarioCompra(Productos producto, BigDecimal cantidadPz, BigDecimal cantidadKg) {
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(producto);
        
        Inventarios inventario;
        if (inventarioOpt.isPresent()) {
            inventario = inventarioOpt.get();
        } else {
            // Crear nuevo inventario si no existe
            inventario = new Inventarios();
            inventario.setProducto(producto);
            inventario.setCantidadPz(0);
            inventario.setCantidadKg(0);
        }
        
        // Incrementar stock (compra añade inventario)
        if (cantidadPz != null && cantidadPz.compareTo(BigDecimal.ZERO) > 0) {
            Integer stockActualPz = inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0;
            inventario.setCantidadPz(stockActualPz + cantidadPz.intValue());
        }
        
        if (cantidadKg != null && cantidadKg.compareTo(BigDecimal.ZERO) > 0) {
            Integer stockActualKg = inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0;
            inventario.setCantidadKg(stockActualKg + cantidadKg.intValue());
        }
        
        inventarioRepository.save(inventario);
    }
    
    private void registrarMovimientoCompra(Productos producto, BigDecimal cantidadPz, BigDecimal cantidadKg, String ordenCompraId) {
        // Obtener usuario autenticado
        String usuarioAutenticado = SecurityContextHolder.getContext().getAuthentication().getName();
        Usuarios usuario = usuariosRepository.findByNombre(usuarioAutenticado)
            .orElseThrow(() -> new IllegalStateException("Usuario autenticado no encontrado: " + usuarioAutenticado));
        
        // Obtener o crear tipo de movimiento "Compra"
        TipoMovimientos tipoCompra = tipoMovimientosRepository.findByMovimiento("Compra")
            .orElseGet(() -> {
                TipoMovimientos nuevoTipo = new TipoMovimientos();
                nuevoTipo.setMovimiento("Compra");
                return tipoMovimientosRepository.save(nuevoTipo);
            });
        
        // Obtener primera ubicación disponible
        Ubicaciones ubicacion = ubicacionesRepository.findAll().stream()
            .findFirst()
            .orElseThrow(() -> new IllegalStateException("No hay ubicaciones disponibles en el sistema"));
        
        // Crear movimiento de inventario
        MovimientosInventarios movimiento = new MovimientosInventarios();
        movimiento.setProducto(producto);
        movimiento.setTipoMovimiento(tipoCompra);
        movimiento.setUbicacion(ubicacion);
        movimiento.setUsuario(usuario); // ✅ Asignar usuario autenticado
        movimiento.setFechaMovimiento(OffsetDateTime.now());
        movimiento.setClaveMovimiento("COMPRA-" + ordenCompraId + "-" + producto.getId());
        
        // Establecer cantidad según el tipo
        if (cantidadPz != null && cantidadPz.compareTo(BigDecimal.ZERO) > 0) {
            movimiento.setCantidad(cantidadPz);
        } else if (cantidadKg != null && cantidadKg.compareTo(BigDecimal.ZERO) > 0) {
            movimiento.setCantidad(cantidadKg);
        } else {
            movimiento.setCantidad(BigDecimal.ZERO);
        }
        
        movimientosInventariosRepository.save(movimiento);
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/DeudasProveedoresService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.DeudaProveedorDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeComprasRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialCargosProveedoresRepository;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.math.BigDecimal;
import java.math.RoundingMode;
import java.sql.Timestamp;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;

/**
 * Servicio para calcular y gestionar las deudas a proveedores
 * Proporciona métodos para obtener información detallada de las deudas pendientes
 */
@Service
public class DeudasProveedoresService {

    private static final Logger logger = LoggerFactory.getLogger(DeudasProveedoresService.class);

    @Autowired
    private OrdenesDeComprasRepository ordenesDeComprasRepository;

    @Autowired
    private HistorialCargosProveedoresRepository historialCargosProveedoresRepository;

    /**
     * Obtiene la lista de todos los proveedores con deudas pendientes
     * @return Lista de DTOs con información de deudas de proveedores
     */
    public List<DeudaProveedorDTO> obtenerDeudasProveedores() {
        try {
            logger.info("Iniciando cálculo de deudas de proveedores...");
            List<Object[]> resultados = ordenesDeComprasRepository.obtenerDeudasProveedores();
            logger.info("Consulta ejecutada exitosamente. Registros encontrados: {}", resultados.size());
            
            List<DeudaProveedorDTO> deudasProveedores = new ArrayList<>();

            for (Object[] resultado : resultados) {
                try {
                    String proveedorId = (String) resultado[0];
                    String proveedorNombre = (String) resultado[1];
                    String telefonoProveedor = (String) resultado[2];
                    String emailProveedor = (String) resultado[3];
                    BigDecimal totalCompras = (BigDecimal) resultado[4];
                    BigDecimal totalPagos = (BigDecimal) resultado[5];
                    
                    // Manejar fecha que puede venir como Timestamp o OffsetDateTime
                    OffsetDateTime fechaOrdenMasAntigua = null;
                    if (resultado[6] != null) {
                        if (resultado[6] instanceof Timestamp) {
                            fechaOrdenMasAntigua = ((Timestamp) resultado[6]).toInstant().atOffset(java.time.ZoneOffset.UTC);
                        } else if (resultado[6] instanceof OffsetDateTime) {
                            fechaOrdenMasAntigua = (OffsetDateTime) resultado[6];
                        }
                    }
                    
                    Long cantidadOrdenes = (Long) resultado[7];

                    // Asegurar que los valores no sean null
                    totalCompras = totalCompras != null ? totalCompras : BigDecimal.ZERO;
                    totalPagos = totalPagos != null ? totalPagos : BigDecimal.ZERO;
                    int cantidadOrdenesInt = cantidadOrdenes != null ? cantidadOrdenes.intValue() : 0;

                    // Solo agregar si hay deuda pendiente
                    BigDecimal deudaPendiente = totalCompras.subtract(totalPagos);
                    if (deudaPendiente.compareTo(BigDecimal.ZERO) > 0) {
                        DeudaProveedorDTO deudaDTO = new DeudaProveedorDTO(
                            proveedorId,
                            proveedorNombre,
                            telefonoProveedor,
                            emailProveedor,
                            totalCompras,
                            totalPagos,
                            fechaOrdenMasAntigua,
                            cantidadOrdenesInt
                        );

                        deudasProveedores.add(deudaDTO);
                        logger.debug("Proveedor agregado: {} - Deuda: {}", proveedorNombre, deudaPendiente);
                    }
                } catch (Exception e) {
                    logger.error("Error procesando resultado individual: {}", e.getMessage(), e);
                }
            }

            logger.info("Proceso completado. Total de proveedores con deuda: {}", deudasProveedores.size());
            return deudasProveedores;
        } catch (Exception e) {
            logger.error("Error ejecutando consulta de deudas de proveedores: {}", e.getMessage(), e);
            throw new RuntimeException("Error al obtener deudas de proveedores", e);
        }
    }

    /**
     * Obtiene la deuda específica de un proveedor
     * @param proveedorId ID del proveedor
     * @return DTO con información de deuda del proveedor, o null si no tiene deudas
     */
    public DeudaProveedorDTO obtenerDeudaProveedor(String proveedorId) {
        BigDecimal totalCompras = ordenesDeComprasRepository.calcularTotalComprasProveedor(proveedorId);
        BigDecimal totalPagos = historialCargosProveedoresRepository.calcularTotalPagosProveedor(proveedorId);
        
        BigDecimal deudaPendiente = totalCompras.subtract(totalPagos);
        
        // Solo devolver información si hay deuda pendiente
        if (deudaPendiente.compareTo(BigDecimal.ZERO) > 0) {
            // Obtener información adicional del proveedor
            var ordenesMasAntiguas = ordenesDeComprasRepository.findOrdersMasAntiguasByProveedorId(proveedorId);
            OffsetDateTime fechaOrdenMasAntigua = null;
            if (!ordenesMasAntiguas.isEmpty()) {
                fechaOrdenMasAntigua = ordenesMasAntiguas.get(0).getFechaOrden();
            }
            
            Long cantidadOrdenesPendientes = ordenesDeComprasRepository.contarOrdenesPendientesByProveedorId(proveedorId);
            
            return new DeudaProveedorDTO(
                proveedorId,
                "", // El nombre se puede obtener de otra consulta si es necesario
                "",
                "",
                totalCompras,
                totalPagos,
                fechaOrdenMasAntigua,
                cantidadOrdenesPendientes != null ? cantidadOrdenesPendientes.intValue() : 0
            );
        }
        
        return null;
    }

    /**
     * Calcula el total de deudas pendientes de todos los proveedores
     * @return Total de deudas pendientes
     */
    public BigDecimal calcularTotalDeudasPendientes() {
        List<DeudaProveedorDTO> deudas = obtenerDeudasProveedores();
        return deudas.stream()
                .map(DeudaProveedorDTO::getDeudaPendiente)
                .reduce(BigDecimal.ZERO, BigDecimal::add);
    }

    /**
     * Obtiene estadísticas generales de deudas
     * @return Array con [totalProveedoresConDeuda, totalDeudasPendientes, deudaPromedio]
     */
    public BigDecimal[] obtenerEstadisticasDeudas() {
        List<DeudaProveedorDTO> deudas = obtenerDeudasProveedores();
        
        BigDecimal totalProveedoresConDeuda = new BigDecimal(deudas.size());
        BigDecimal totalDeudasPendientes = calcularTotalDeudasPendientes();
        BigDecimal deudaPromedio = totalProveedoresConDeuda.compareTo(BigDecimal.ZERO) > 0 
            ? totalDeudasPendientes.divide(totalProveedoresConDeuda, 2, RoundingMode.HALF_UP)
            : BigDecimal.ZERO;
        
        return new BigDecimal[]{totalProveedoresConDeuda, totalDeudasPendientes, deudaPromedio};
    }
}
```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/EmpleadoService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.EmpleadoCreateRequestDTO;
import com.posfin.pos_finanzas_backend.dtos.EmpleadoResponseDTO;
import com.posfin.pos_finanzas_backend.models.Estados;
import com.posfin.pos_finanzas_backend.models.Roles;
import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.repositories.EstadosRepository;
import com.posfin.pos_finanzas_backend.repositories.RolesRepository;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

@Service
@Transactional
public class EmpleadoService {

    @Autowired
    private UsuariosRepository usuariosRepository;

    @Autowired
    private RolesRepository rolesRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    @Autowired
    private PasswordEncoder passwordEncoder;

    /**
     * Obtener todos los empleados con información de rol y estado
     */
    public List<EmpleadoResponseDTO> obtenerTodosLosEmpleados() {
        List<Usuarios> usuarios = usuariosRepository.findAll();

        return usuarios.stream()
                .map(this::convertirAEmpleadoResponseDTO)
                .collect(Collectors.toList());
    }

    /**
     * Crear un nuevo empleado
     */
    public EmpleadoResponseDTO crearEmpleado(EmpleadoCreateRequestDTO empleadoRequest) {
        // Validar que el rol existe
        Optional<Roles> rolOpt = rolesRepository.findById(empleadoRequest.getRolId());
        if (rolOpt.isEmpty()) {
            throw new RuntimeException("El rol especificado no existe");
        }

        // Obtener el estado "Activo" (por defecto para nuevos empleados)
        Optional<Estados> estadoActivoOpt = estadosRepository.findByEstado("Activo");
        if (estadoActivoOpt.isEmpty()) {
            throw new RuntimeException("No se encontró el estado 'Activo' en la base de datos");
        }

        // Verificar que no existe otro usuario con el mismo nombre
        Optional<Usuarios> usuarioExistente = usuariosRepository.findByNombre(empleadoRequest.getNombre());
        if (usuarioExistente.isPresent()) {
            throw new RuntimeException("Ya existe un usuario con ese nombre");
        }

        // Crear nuevo usuario
        Usuarios nuevoUsuario = new Usuarios();
        nuevoUsuario.setNombre(empleadoRequest.getNombre());
        nuevoUsuario.setTelefono(empleadoRequest.getTelefono());

        // Hashear la contraseña antes de guardarla
        String contrasenaHasheada = passwordEncoder.encode(empleadoRequest.getContrasena());
        nuevoUsuario.setContrasena(contrasenaHasheada);

        nuevoUsuario.setRoles(rolOpt.get());
        nuevoUsuario.setEstados(estadoActivoOpt.get());

        // Guardar el usuario
        Usuarios usuarioGuardado = usuariosRepository.save(nuevoUsuario);

        // Retornar DTO de respuesta
        return convertirAEmpleadoResponseDTO(usuarioGuardado);
    }

    /**
     * Cambiar el estado de un empleado
     */
    public EmpleadoResponseDTO cambiarEstadoEmpleado(String empleadoId, String nuevoEstado) {
        // Verificar que el empleado existe
        Optional<Usuarios> usuarioOpt = usuariosRepository.findById(empleadoId);
        if (usuarioOpt.isEmpty()) {
            throw new RuntimeException("Empleado no encontrado");
        }

        // Verificar que el estado existe
        Optional<Estados> estadoOpt = estadosRepository.findByEstado(nuevoEstado);
        if (estadoOpt.isEmpty()) {
            throw new RuntimeException("El estado especificado no existe");
        }

        // Actualizar el estado del usuario
        Usuarios usuario = usuarioOpt.get();
        usuario.setEstados(estadoOpt.get());

        Usuarios usuarioActualizado = usuariosRepository.save(usuario);

        return convertirAEmpleadoResponseDTO(usuarioActualizado);
    }

    /**
     * Obtener empleado por ID
     */
    public EmpleadoResponseDTO obtenerEmpleadoPorId(String empleadoId) {
        Optional<Usuarios> usuarioOpt = usuariosRepository.findById(empleadoId);
        if (usuarioOpt.isEmpty()) {
            throw new IllegalArgumentException("Empleado no encontrado");
        }

        return convertirAEmpleadoResponseDTO(usuarioOpt.get());
    }

    /**
     * Método helper para convertir entidad Usuario a DTO de respuesta
     */
    private EmpleadoResponseDTO convertirAEmpleadoResponseDTO(Usuarios usuario) {
        return new EmpleadoResponseDTO(
                usuario.getId(),
                usuario.getNombre(),
                usuario.getTelefono(),
                usuario.getRoles().getId(),
                usuario.getRoles().getRoles(),
                usuario.getEstados().getId(),
                usuario.getEstados().getEstado());
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/JwtService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import io.jsonwebtoken.Claims;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import io.jsonwebtoken.security.Keys;
import org.springframework.stereotype.Service;

import javax.crypto.SecretKey;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.function.Function;

@Service
public class JwtService {

    private final SecretKey SECRET_KEY = Keys.secretKeyFor(SignatureAlgorithm.HS256);
    private final long JWT_EXPIRATION = 86400000; // 24 horas en milisegundos

    public String generateToken(String username, String userId) {
        Map<String, Object> claims = new HashMap<>();
        claims.put("userId", userId);
        return createToken(claims, username);
    }

    private String createToken(Map<String, Object> claims, String subject) {
        return Jwts.builder()
                .setClaims(claims)
                .setSubject(subject)
                .setIssuedAt(new Date(System.currentTimeMillis()))
                .setExpiration(new Date(System.currentTimeMillis() + JWT_EXPIRATION))
                .signWith(SECRET_KEY)
                .compact();
    }

    public String extractUsername(String token) {
        return extractClaim(token, Claims::getSubject);
    }

    public String extractUserId(String token) {
        return extractClaim(token, claims -> claims.get("userId", String.class));
    }

    public Date extractExpiration(String token) {
        return extractClaim(token, Claims::getExpiration);
    }

    public <T> T extractClaim(String token, Function<Claims, T> claimsResolver) {
        final Claims claims = extractAllClaims(token);
        return claimsResolver.apply(claims);
    }

    private Claims extractAllClaims(String token) {
        return Jwts.parserBuilder()
                .setSigningKey(SECRET_KEY)
                .build()
                .parseClaimsJws(token)
                .getBody();
    }

    private Boolean isTokenExpired(String token) {
        return extractExpiration(token).before(new Date());
    }

    public Boolean validateToken(String token, String username) {
        final String extractedUsername = extractUsername(token);
        return (extractedUsername.equals(username) && !isTokenExpired(token));
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/OrdenesWorkspaceService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.models.OrdenesWorkspace;
import com.posfin.pos_finanzas_backend.models.Workspaces;
import com.posfin.pos_finanzas_backend.models.Productos;
import com.posfin.pos_finanzas_backend.models.HistorialPrecios;
import com.posfin.pos_finanzas_backend.models.Inventarios;
import com.posfin.pos_finanzas_backend.dtos.OrdenesWorkspaceDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesWorkspaceRepository;
import com.posfin.pos_finanzas_backend.repositories.WorkspacesRepository;
import com.posfin.pos_finanzas_backend.repositories.ProductosRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialPreciosRepository;
import com.posfin.pos_finanzas_backend.repositories.InventarioRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;
import java.math.BigDecimal;

/**
 * Servicio para gestionar las órdenes de workspace en el punto de venta.
 * Maneja la lógica de negocio para agregar productos al carrito temporal
 * y validar disponibilidad de stock.
 */
@Service
@Transactional
public class OrdenesWorkspaceService {

    @Autowired
    private OrdenesWorkspaceRepository ordenesWorkspaceRepository;

    @Autowired
    private WorkspacesRepository workspacesRepository;

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @Autowired
    private InventarioRepository inventarioRepository;

    /**
     * Obtiene todas las órdenes de un workspace específico.
     */
    public List<OrdenesWorkspaceDTO> obtenerOrdenesPorWorkspace(String workspaceId) {
        List<OrdenesWorkspace> ordenes = ordenesWorkspaceRepository.findByWorkspaceId(workspaceId);

        return ordenes.stream()
                .map(this::convertirADTO)
                .collect(Collectors.toList());
    }

    /**
     * Agrega un producto al workspace o actualiza la cantidad si ya existe.
     * Implementa la lógica de suma de cantidades para productos duplicados.
     */
    public OrdenesWorkspaceDTO agregarOActualizarProducto(String workspaceId, String productoId,
            BigDecimal cantidadPz, BigDecimal cantidadKg) {
        // Validar entidades requeridas
        Workspaces workspace = validarWorkspace(workspaceId);
        Productos producto = validarProducto(productoId);

        // Obtener el precio más reciente del producto
        HistorialPrecios precioActual = obtenerPrecioActual(producto);

        // Validar stock disponible antes de cualquier operación
        validarStockDisponible(producto, cantidadPz, cantidadKg);

        // Buscar si ya existe una orden para este producto en este workspace
        Optional<OrdenesWorkspace> ordenExistente = buscarOrdenExistente(workspaceId, productoId);

        OrdenesWorkspace orden;

        if (ordenExistente.isPresent()) {
            // Actualizar orden existente sumando las cantidades
            orden = ordenExistente.get();

            // Obtener cantidades anteriores para calcular el incremento
            BigDecimal cantidadAnteriorPz = orden.getCantidadPz() != null ? orden.getCantidadPz() : BigDecimal.ZERO;
            BigDecimal cantidadAnteriorKg = orden.getCantidadKg() != null ? orden.getCantidadKg() : BigDecimal.ZERO;

            BigDecimal nuevaCantidadPz = cantidadAnteriorPz.add(cantidadPz != null ? cantidadPz : BigDecimal.ZERO);
            BigDecimal nuevaCantidadKg = cantidadAnteriorKg.add(cantidadKg != null ? cantidadKg : BigDecimal.ZERO);

            // ✅ NOTA: No se necesita segunda validación aquí porque el stock ya fue
            // validado arriba
            // La primera validación ya verificó que hay suficiente stock disponible para la
            // cantidad adicional

            orden.setCantidadPz(nuevaCantidadPz);
            orden.setCantidadKg(nuevaCantidadKg);
            // Actualizar al precio más reciente
            orden.setHistorialPrecio(precioActual);

            // ✅ CORRECCIÓN: Decrementar inventario SOLO por la cantidad adicional (no la
            // total)
            decrementarInventario(producto, cantidadPz, cantidadKg);
        } else {
            // Crear nueva orden
            orden = new OrdenesWorkspace();
            orden.setWorkspace(workspace);
            orden.setProducto(producto);
            orden.setHistorialPrecio(precioActual);
            orden.setCantidadPz(cantidadPz != null ? cantidadPz : BigDecimal.ZERO);
            orden.setCantidadKg(cantidadKg != null ? cantidadKg : BigDecimal.ZERO);

            // Decrementar inventario por la cantidad total (nueva orden)
            decrementarInventario(producto, cantidadPz, cantidadKg);
        }

        OrdenesWorkspace ordenGuardada = ordenesWorkspaceRepository.save(orden);
        return convertirADTO(ordenGuardada);
    }

    /**
     * Elimina todas las órdenes de un workspace específico y restaura el
     * inventario.
     */
    public void limpiarOrdenesWorkspace(String workspaceId) {
        List<OrdenesWorkspace> ordenes = ordenesWorkspaceRepository.findByWorkspaceId(workspaceId);

        // Restaurar inventario antes de eliminar las órdenes
        for (OrdenesWorkspace orden : ordenes) {
            restaurarInventario(orden.getProducto(), orden.getCantidadPz(), orden.getCantidadKg());
        }

        ordenesWorkspaceRepository.deleteAll(ordenes);
    }

    /**
     * Elimina una orden específica del workspace.
     */
    public boolean eliminarOrden(String ordenId) {
        if (ordenesWorkspaceRepository.existsById(ordenId)) {
            ordenesWorkspaceRepository.deleteById(ordenId);
            return true;
        }
        return false;
    }

    // Métodos privados de utilidad

    private Workspaces validarWorkspace(String workspaceId) {
        return workspacesRepository.findById(workspaceId)
                .orElseThrow(() -> new IllegalArgumentException("Workspace no encontrado: " + workspaceId));
    }

    private Productos validarProducto(String productoId) {
        return productosRepository.findById(productoId)
                .orElseThrow(() -> new IllegalArgumentException("Producto no encontrado: " + productoId));
    }

    private HistorialPrecios obtenerPrecioActual(Productos producto) {
        Optional<HistorialPrecios> precioOpt = historialPreciosRepository.findLatestByProducto(producto);
        if (precioOpt.isEmpty()) {
            throw new IllegalStateException("No hay precio disponible para el producto: " + producto.getNombre());
        }
        return precioOpt.get();
    }

    private void validarStockDisponible(Productos producto, BigDecimal cantidadPz, BigDecimal cantidadKg) {
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(producto);

        if (inventarioOpt.isEmpty()) {
            throw new IllegalStateException("No hay inventario disponible para el producto: " + producto.getNombre());
        }

        Inventarios inventario = inventarioOpt.get();

        // Obtener stock disponible actual en inventario
        int stockDisponiblePz = inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0;
        int stockDisponibleKg = inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0;

        // Validar si hay suficiente stock para la cantidad solicitada
        if (cantidadPz != null && cantidadPz.intValue() > stockDisponiblePz) {
            throw new IllegalStateException(
                    String.format("Stock insuficiente en Piezas. Disponible: %d pz, Solicitado: %d pz",
                            stockDisponiblePz, cantidadPz.intValue()));
        }

        if (cantidadKg != null && cantidadKg.intValue() > stockDisponibleKg) {
            throw new IllegalStateException(
                    String.format("Stock insuficiente en Kilogramos. Disponible: %d kg, Solicitado: %d kg",
                            stockDisponibleKg, cantidadKg.intValue()));
        }
    }

    private Optional<OrdenesWorkspace> buscarOrdenExistente(String workspaceId, String productoId) {
        // Buscar entre todas las órdenes del workspace
        List<OrdenesWorkspace> ordenes = ordenesWorkspaceRepository.findByWorkspaceId(workspaceId);
        return ordenes.stream()
                .filter(orden -> orden.getProducto().getId().equals(productoId))
                .findFirst();
    }

    private OrdenesWorkspaceDTO convertirADTO(OrdenesWorkspace orden) {
        OrdenesWorkspaceDTO dto = new OrdenesWorkspaceDTO();
        dto.setId(orden.getId());
        dto.setCantidadPz(orden.getCantidadPz());
        dto.setCantidadKg(orden.getCantidadKg());

        // Mapear workspace
        dto.setWorkspaceId(orden.getWorkspace().getId());
        dto.setWorkspaceNombre(orden.getWorkspace().getNombre());

        // Mapear producto
        dto.setProductoId(orden.getProducto().getId());
        dto.setProductoNombre(orden.getProducto().getNombre());

        // Mapear precio
        dto.setHistorialPrecioId(orden.getHistorialPrecio().getId());
        dto.setPrecio(orden.getHistorialPrecio().getPrecio());

        return dto;
    }

    /**
     * Decrementa el inventario para reflejar que los productos están "reservados"
     * en una orden.
     * Este método se llama cuando se agregan productos al carrito del workspace.
     */
    private void decrementarInventario(Productos producto, BigDecimal cantidadPz, BigDecimal cantidadKg) {
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(producto);

        if (inventarioOpt.isEmpty()) {
            throw new IllegalStateException("No hay inventario disponible para el producto: " + producto.getNombre());
        }

        Inventarios inventario = inventarioOpt.get();

        // Decrementar las cantidades del inventario
        if (cantidadPz != null && cantidadPz.compareTo(BigDecimal.ZERO) > 0) {
            int stockActualPz = inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0;
            inventario.setCantidadPz(stockActualPz - cantidadPz.intValue());
        }

        if (cantidadKg != null && cantidadKg.compareTo(BigDecimal.ZERO) > 0) {
            int stockActualKg = inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0;
            inventario.setCantidadKg(stockActualKg - cantidadKg.intValue());
        }

        inventarioRepository.save(inventario);
    }

    /**
     * Restaura el inventario cuando se cancelan órdenes o se limpian workspace.
     * Este método devuelve el stock al inventario disponible.
     */
    private void restaurarInventario(Productos producto, BigDecimal cantidadPz, BigDecimal cantidadKg) {
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(producto);

        if (inventarioOpt.isEmpty()) {
            // Si no existe inventario, lo creamos con las cantidades restauradas
            Inventarios inventario = new Inventarios();
            inventario.setProducto(producto);
            inventario.setCantidadPz(cantidadPz != null ? cantidadPz.intValue() : 0);
            inventario.setCantidadKg(cantidadKg != null ? cantidadKg.intValue() : 0);
            inventarioRepository.save(inventario);
            return;
        }

        Inventarios inventario = inventarioOpt.get();

        // Incrementar las cantidades del inventario (restaurar)
        if (cantidadPz != null && cantidadPz.compareTo(BigDecimal.ZERO) > 0) {
            int stockActualPz = inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0;
            inventario.setCantidadPz(stockActualPz + cantidadPz.intValue());
        }

        if (cantidadKg != null && cantidadKg.compareTo(BigDecimal.ZERO) > 0) {
            int stockActualKg = inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0;
            inventario.setCantidadKg(stockActualKg + cantidadKg.intValue());
        }

        inventarioRepository.save(inventario);
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/ProductoService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.ProductoCreacionDTO;
import com.posfin.pos_finanzas_backend.dtos.ProductosDTO;
import com.posfin.pos_finanzas_backend.models.*;
import com.posfin.pos_finanzas_backend.repositories.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.math.BigDecimal;
import java.time.OffsetDateTime;
import java.time.ZonedDateTime;
import java.util.Optional;

@Service
public class ProductoService {

    @Autowired
    private ProductosRepository productosRepository;

    @Autowired
    private CategoriasProductosRepository categoriasProductosRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private EstadosRepository estadosRepository;

    @Autowired
    private HistorialPreciosRepository historialPreciosRepository;

    @Autowired
    private HistorialCostosRepository historialCostosRepository;

    @Autowired
    private InventarioRepository inventarioRepository;

    @Autowired
    private MovimientosInventariosRepository movimientosInventariosRepository;

    @Autowired
    private UbicacionesRepository ubicacionesRepository;

    @Autowired
    private TIpoMovimientosRepository tipoMovimientosRepository;

    @Autowired
    private UsuariosRepository usuariosRepository;

    @Transactional
    public ProductosDTO crearProductoCompleto(ProductoCreacionDTO dto) {
        // 1. Validar que todas las entidades relacionadas existan
        Optional<CategoriasProductos> categoria = categoriasProductosRepository
                .findById(dto.getCategoriasProductosId());
        Optional<Personas> proveedor = personasRepository.findById(dto.getProveedorId());
        Optional<Ubicaciones> ubicacion = ubicacionesRepository.findById(dto.getUbicacionId());
        Optional<Usuarios> usuario = usuariosRepository.findById(dto.getUsuarioId());

        if (categoria.isEmpty()) {
            throw new RuntimeException("Categoría no encontrada con ID: " + dto.getCategoriasProductosId());
        }
        if (proveedor.isEmpty()) {
            throw new RuntimeException("Proveedor no encontrado con ID: " + dto.getProveedorId());
        }
        if (ubicacion.isEmpty()) {
            throw new RuntimeException("Ubicación no encontrada con ID: " + dto.getUbicacionId());
        }
        if (usuario.isEmpty()) {
            throw new RuntimeException("Usuario no encontrado con ID: " + dto.getUsuarioId());
        }

        // Buscar el estado "Activo" - asumiendo que existe uno con ese nombre
        Optional<Estados> estadoActivo = estadosRepository.findAll().stream()
                .filter(estado -> "Activo".equalsIgnoreCase(estado.getEstado()))
                .findFirst();

        if (estadoActivo.isEmpty()) {
            throw new RuntimeException("Estado 'Activo' no encontrado en la base de datos");
        }

        // Buscar el tipo de movimiento "Creación" - asumiendo que existe uno con ese
        // nombre
        Optional<TipoMovimientos> tipoCreacion = tipoMovimientosRepository.findAll().stream()
                .filter(tipo -> "Creación".equalsIgnoreCase(tipo.getMovimiento()) ||
                        "Creacion".equalsIgnoreCase(tipo.getMovimiento()) ||
                        "Inicial".equalsIgnoreCase(tipo.getMovimiento()))
                .findFirst();

        if (tipoCreacion.isEmpty()) {
            throw new RuntimeException("Tipo de movimiento 'Creación' no encontrado en la base de datos");
        }

        // 2. Crear y guardar el producto
        Productos nuevoProducto = new Productos();
        nuevoProducto.setNombre(dto.getNombre());
        nuevoProducto.setCategoriasProductos(categoria.get());
        nuevoProducto.setProveedor(proveedor.get());
        nuevoProducto.setEstados(estadoActivo.get());

        Productos productoGuardado = productosRepository.save(nuevoProducto);

        // 3. Crear y guardar el historial de precios
        HistorialPrecios historialPrecio = new HistorialPrecios();
        historialPrecio.setProductos(productoGuardado);
        historialPrecio.setPrecio(dto.getPrecioVenta());
        historialPrecio.setFechaDeRegistro(ZonedDateTime.now());
        historialPreciosRepository.save(historialPrecio);

        // 4. Crear y guardar el historial de costos
        HistorialCostos historialCosto = new HistorialCostos();
        historialCosto.setProductos(productoGuardado);
        historialCosto.setCosto(dto.getPrecioCompra());
        historialCosto.setFechaDeRegistro(ZonedDateTime.now());
        historialCostosRepository.save(historialCosto);

        // 5. Crear y guardar el inventario inicial
        Inventarios nuevoInventario = new Inventarios();
        nuevoInventario.setProducto(productoGuardado);
        nuevoInventario.setUbicacion(ubicacion.get());

        // Asignar la cantidad según la unidad de medida
        if ("piezas".equalsIgnoreCase(dto.getUnidadMedida())) {
            nuevoInventario.setCantidadPz(dto.getStockInicial());
            nuevoInventario.setCantidadKg(0);
        } else {
            nuevoInventario.setCantidadKg(dto.getStockInicial());
            nuevoInventario.setCantidadPz(0);
        }

        nuevoInventario.setCantidadMinima(dto.getStockMinimo());
        nuevoInventario.setCantidadMaxima(dto.getStockMaximo());
        inventarioRepository.save(nuevoInventario);

        // 6. Crear y guardar el movimiento de inventario inicial
        MovimientosInventarios movimientoInicial = new MovimientosInventarios();
        movimientoInicial.setProducto(productoGuardado);
        movimientoInicial.setUbicacion(ubicacion.get());
        movimientoInicial.setTipoMovimiento(tipoCreacion.get());
        movimientoInicial.setCantidad(BigDecimal.valueOf(dto.getStockInicial()));
        movimientoInicial.setFechaMovimiento(OffsetDateTime.now());
        movimientoInicial.setUsuario(usuario.get());
        movimientoInicial.setClaveMovimiento("CREACION-" + productoGuardado.getId().substring(0, 8));
        movimientosInventariosRepository.save(movimientoInicial);

        // 7. Convertir a DTO y retornar
        return convertToDTO(productoGuardado);
    }

    @Transactional
    public ProductosDTO desactivarProducto(String productoId) {
        Optional<Productos> productoOpt = productosRepository.findById(productoId);
        if (productoOpt.isEmpty()) {
            throw new RuntimeException("Producto no encontrado con ID: " + productoId);
        }

        // Buscar el estado "Inactivo"
        Optional<Estados> estadoInactivo = estadosRepository.findAll().stream()
                .filter(estado -> "Inactivo".equalsIgnoreCase(estado.getEstado()))
                .findFirst();

        if (estadoInactivo.isEmpty()) {
            throw new RuntimeException("Estado 'Inactivo' no encontrado en la base de datos");
        }

        Productos producto = productoOpt.get();
        producto.setEstados(estadoInactivo.get());
        Productos productoActualizado = productosRepository.save(producto);

        return convertToDTO(productoActualizado);
    }

    @Transactional
    public void registrarMovimientoEdicion(String productoId, String usuarioId, String motivo) {
        // Buscar el producto
        Optional<Productos> productoOpt = productosRepository.findById(productoId);
        if (productoOpt.isEmpty()) {
            throw new RuntimeException("Producto no encontrado con ID: " + productoId);
        }

        // Buscar el usuario (por ahora usar el primero disponible si no se proporciona)
        Optional<Usuarios> usuarioOpt;
        if (usuarioId != null && !usuarioId.isEmpty()) {
            usuarioOpt = usuariosRepository.findById(usuarioId);
        } else {
            usuarioOpt = usuariosRepository.findAll().stream().findFirst();
        }

        if (usuarioOpt.isEmpty()) {
            throw new RuntimeException("Usuario no encontrado");
        }

        // Buscar una ubicación (usar la primera disponible)
        Optional<Ubicaciones> ubicacionOpt = ubicacionesRepository.findAll().stream().findFirst();
        if (ubicacionOpt.isEmpty()) {
            throw new RuntimeException("No hay ubicaciones disponibles");
        }

        // Buscar o crear el tipo de movimiento "Edición"
        Optional<TipoMovimientos> tipoEdicion = tipoMovimientosRepository.findByMovimiento("Edición");
        if (tipoEdicion.isEmpty()) {
            tipoEdicion = tipoMovimientosRepository.findByMovimiento("Edicion");
        }
        if (tipoEdicion.isEmpty()) {
            tipoEdicion = tipoMovimientosRepository.findByMovimiento("Modificación");
        }
        if (tipoEdicion.isEmpty()) {
            tipoEdicion = tipoMovimientosRepository.findByMovimiento("Modificacion");
        }

        if (tipoEdicion.isEmpty()) {
            // Crear el tipo de movimiento si no existe
            TipoMovimientos nuevoTipo = new TipoMovimientos();
            nuevoTipo.setMovimiento("Edición");
            tipoEdicion = Optional.of(tipoMovimientosRepository.save(nuevoTipo));
        }

        // Crear el movimiento de inventario
        MovimientosInventarios movimientoEdicion = new MovimientosInventarios();
        movimientoEdicion.setProducto(productoOpt.get());
        movimientoEdicion.setUbicacion(ubicacionOpt.get());
        movimientoEdicion.setTipoMovimiento(tipoEdicion.get());
        movimientoEdicion.setCantidad(BigDecimal.ZERO); // Para ediciones la cantidad es 0
        movimientoEdicion.setFechaMovimiento(OffsetDateTime.now());
        movimientoEdicion.setUsuario(usuarioOpt.get());
        
        String claveMovimiento = "EDICION-" + productoOpt.get().getId().substring(0, 8);
        if (motivo != null && !motivo.isEmpty()) {
            claveMovimiento += "-" + motivo.toUpperCase().replace(" ", "_");
        }
        movimientoEdicion.setClaveMovimiento(claveMovimiento);
        
        movimientosInventariosRepository.save(movimientoEdicion);
    }

    // Método auxiliar para convertir Productos a ProductosDTO con información
    // adicional
    public ProductosDTO convertToDTO(Productos producto) {
        ProductosDTO dto = new ProductosDTO();
        dto.setId(producto.getId());
        dto.setNombre(producto.getNombre());

        // Mapear relación con CategoriasProductos
        if (producto.getCategoriasProductos() != null) {
            dto.setCategoriasProductosId(producto.getCategoriasProductos().getId());
            dto.setCategoriasProductosCategoria(producto.getCategoriasProductos().getCategoria());
        }

        // Mapear relación con Proveedor (Personas)
        if (producto.getProveedor() != null) {
            dto.setProveedorId(producto.getProveedor().getId());
            dto.setProveedorNombre(producto.getProveedor().getNombre());
            dto.setProveedorApellidoPaterno(producto.getProveedor().getApellidoPaterno());
            dto.setProveedorApellidoMaterno(producto.getProveedor().getApellidoMaterno());
        }

        // Mapear relación con Estados
        if (producto.getEstados() != null) {
            dto.setEstadosId(producto.getEstados().getId());
            dto.setEstadosEstado(producto.getEstados().getEstado());
        }

        // Obtener el precio de venta más reciente
        Optional<HistorialPrecios> precioActual = historialPreciosRepository.findLatestByProducto(producto);
        if (precioActual.isPresent()) {
            dto.setPrecioVentaActual(precioActual.get().getPrecio());
        } else {
            dto.setPrecioVentaActual(BigDecimal.ZERO); // Valor por defecto
        }

        // Obtener el costo de compra más reciente
        Optional<HistorialCostos> costoActual = historialCostosRepository.findLatestByProducto(producto);
        if (costoActual.isPresent()) {
            dto.setPrecioCompraActual(costoActual.get().getCosto());
        } else {
            dto.setPrecioCompraActual(BigDecimal.ZERO); // Valor por defecto
        }

        // Obtener datos de inventario
        Optional<Inventarios> inventario = inventarioRepository.findByProducto(producto);
        if (inventario.isPresent()) {
            Inventarios inv = inventario.get();
            // Calcular stock total (piezas + kg)
            int stockTotal = (inv.getCantidadPz() != null ? inv.getCantidadPz() : 0) +
                    (inv.getCantidadKg() != null ? inv.getCantidadKg() : 0);
            dto.setCantidadInventario(stockTotal);
        } else {
            dto.setCantidadInventario(0); // Valor por defecto
        }

        return dto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/RolService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.RolResponseDTO;
import com.posfin.pos_finanzas_backend.models.Roles;
import com.posfin.pos_finanzas_backend.repositories.RolesRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Optional;
import java.util.stream.Collectors;

@Service
@Transactional(readOnly = true)
public class RolService {

    @Autowired
    private RolesRepository rolesRepository;

    /**
     * Obtener todos los roles disponibles para el dropdown
     */
    public List<RolResponseDTO> obtenerTodosLosRoles() {
        List<Roles> roles = rolesRepository.findAll();

        return roles.stream()
                .map(this::convertirARolResponseDTO)
                .collect(Collectors.toList());
    }

    /**
     * Obtener rol por ID
     */
    public RolResponseDTO obtenerRolPorId(Long rolId) {
        Optional<Roles> rolOpt = rolesRepository.findById(rolId.toString());
        if (rolOpt.isEmpty()) {
            throw new IllegalArgumentException("Rol no encontrado");
        }

        return convertirARolResponseDTO(rolOpt.get());
    }

    /**
     * Método helper para convertir entidad Rol a DTO de respuesta
     */
    private RolResponseDTO convertirARolResponseDTO(Roles rol) {
        return new RolResponseDTO(
                rol.getId(),
                rol.getRoles());
    }
}

```

`proyecto-pos-finanzas/backend/src/main/java/com/posfin/pos_finanzas_backend/services/VentaService.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.models.OrdenesWorkspace;
import com.posfin.pos_finanzas_backend.models.OrdenesDeVentas;
import com.posfin.pos_finanzas_backend.models.DetallesOrdenesDeVentas;
import com.posfin.pos_finanzas_backend.models.Inventarios;
import com.posfin.pos_finanzas_backend.models.MovimientosInventarios;
import com.posfin.pos_finanzas_backend.models.Personas;
import com.posfin.pos_finanzas_backend.models.Usuarios;
import com.posfin.pos_finanzas_backend.models.MetodosPago;
import com.posfin.pos_finanzas_backend.models.TipoMovimientos;
import com.posfin.pos_finanzas_backend.models.Ubicaciones;
import com.posfin.pos_finanzas_backend.dtos.OrdenesDeVentasDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesWorkspaceRepository;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeVentasRepository;
import com.posfin.pos_finanzas_backend.repositories.DetallesOrdenesDeVentasRepository;
import com.posfin.pos_finanzas_backend.repositories.InventarioRepository;
import com.posfin.pos_finanzas_backend.repositories.MovimientosInventariosRepository;
import com.posfin.pos_finanzas_backend.repositories.PersonasRepository;
import com.posfin.pos_finanzas_backend.repositories.UsuariosRepository;
import com.posfin.pos_finanzas_backend.repositories.MetodosPagoRepository;
import com.posfin.pos_finanzas_backend.repositories.TIpoMovimientosRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import java.util.List;
import java.util.Optional;
import java.math.BigDecimal;
import java.time.OffsetDateTime;
import java.util.UUID;

/**
 * Servicio para procesar ventas completas desde el carrito temporal
 * (ordenes_workspace)
 * hacia las órdenes de venta finales y actualización de inventario.
 */
@Service
@Transactional
public class VentaService {

    @Autowired
    private OrdenesWorkspaceRepository ordenesWorkspaceRepository;

    @Autowired
    private OrdenesDeVentasRepository ordenesDeVentasRepository;

    @Autowired
    private DetallesOrdenesDeVentasRepository detallesOrdenesDeVentasRepository;

    @Autowired
    private InventarioRepository inventarioRepository;

    @Autowired
    private MovimientosInventariosRepository movimientosInventariosRepository;

    @Autowired
    private PersonasRepository personasRepository;

    @Autowired
    private UsuariosRepository usuariosRepository;

    @Autowired
    private MetodosPagoRepository metodosPagoRepository;

    @Autowired
    private TIpoMovimientosRepository tipoMovimientosRepository;

    /**
     * Procesa una venta completa desde las órdenes de workspace.
     * Realiza todas las operaciones en una transacción para garantizar
     * consistencia.
     */
    public OrdenesDeVentasDTO procesarVentaDesdeWorkspace(String workspaceId, String clienteId,
            String usuarioId, String metodoPagoId) {
        // 1. Obtener todas las órdenes del workspace
        List<OrdenesWorkspace> ordenesWorkspace = ordenesWorkspaceRepository.findByWorkspaceId(workspaceId);

        if (ordenesWorkspace.isEmpty()) {
            throw new IllegalStateException("No hay productos en el carrito para procesar la venta");
        }

        // 2. Validar entidades requeridas
        Personas cliente = validarCliente(clienteId);
        Usuarios usuario = validarUsuario(usuarioId);
        MetodosPago metodoPago = validarMetodoPago(metodoPagoId);

        // 3. Calcular total de la venta
        BigDecimal totalVenta = calcularTotalVenta(ordenesWorkspace);

        // 4. Crear la orden de venta principal
        OrdenesDeVentas ordenVenta = crearOrdenVenta(cliente, usuario, metodoPago, totalVenta);

        // 5. Crear los detalles de la venta
        for (OrdenesWorkspace ordenWorkspace : ordenesWorkspace) {
            crearDetalleVenta(ordenVenta, ordenWorkspace);
            actualizarInventario(ordenWorkspace);
            crearMovimientoInventario(ordenWorkspace, usuario);
        }

        // 6. Limpiar órdenes del workspace
        ordenesWorkspaceRepository.deleteAll(ordenesWorkspace);

        // 7. Convertir a DTO y retornar
        return convertirADTO(ordenVenta);
    }

    /**
     * Obtiene un cliente por defecto si no se especifica uno.
     */
    public String obtenerClientePorDefecto() {
        // Buscar un cliente genérico o el primer cliente disponible
        List<Personas> clientes = personasRepository.findAll();
        if (clientes.isEmpty()) {
            throw new IllegalStateException("No hay clientes registrados en el sistema");
        }
        return clientes.get(0).getId(); // Retorna el primer cliente como predeterminado
    }

    // Métodos privados de utilidad

    private Personas validarCliente(String clienteId) {
        if (clienteId == null || clienteId.trim().isEmpty()) {
            // Si no se proporciona cliente, usar el cliente por defecto
            String clienteDefecto = obtenerClientePorDefecto();
            return personasRepository.findById(clienteDefecto)
                    .orElseThrow(() -> new IllegalArgumentException("Cliente por defecto no encontrado"));
        }
        return personasRepository.findById(clienteId)
                .orElseThrow(() -> new IllegalArgumentException("Cliente no encontrado: " + clienteId));
    }

    private Usuarios validarUsuario(String usuarioId) {
        return usuariosRepository.findById(usuarioId)
                .orElseThrow(() -> new IllegalArgumentException("Usuario no encontrado: " + usuarioId));
    }

    private MetodosPago validarMetodoPago(String metodoPagoId) {
        return metodosPagoRepository.findById(metodoPagoId)
                .orElseThrow(() -> new IllegalArgumentException("Método de pago no encontrado: " + metodoPagoId));
    }

    private BigDecimal calcularTotalVenta(List<OrdenesWorkspace> ordenesWorkspace) {
        return ordenesWorkspace.stream()
                .map(orden -> {
                    BigDecimal precio = orden.getHistorialPrecio().getPrecio();
                    BigDecimal cantidadTotal = BigDecimal.ZERO;

                    if (orden.getCantidadPz() != null) {
                        cantidadTotal = cantidadTotal.add(orden.getCantidadPz());
                    }
                    if (orden.getCantidadKg() != null) {
                        cantidadTotal = cantidadTotal.add(orden.getCantidadKg());
                    }

                    return precio.multiply(cantidadTotal);
                })
                .reduce(BigDecimal.ZERO, BigDecimal::add);
    }

    private OrdenesDeVentas crearOrdenVenta(Personas cliente, Usuarios usuario, MetodosPago metodoPago,
            BigDecimal totalVenta) {
        OrdenesDeVentas ordenVenta = new OrdenesDeVentas();
        ordenVenta.setPersona(cliente);
        ordenVenta.setUsuario(usuario);
        ordenVenta.setMetodoPago(metodoPago);
        ordenVenta.setTotalVenta(totalVenta);
        ordenVenta.setFechaOrden(OffsetDateTime.now());

        return ordenesDeVentasRepository.save(ordenVenta);
    }

    private void crearDetalleVenta(OrdenesDeVentas ordenVenta, OrdenesWorkspace ordenWorkspace) {
        DetallesOrdenesDeVentas detalle = new DetallesOrdenesDeVentas();
        detalle.setOrdenDeVenta(ordenVenta);
        detalle.setProducto(ordenWorkspace.getProducto());
        detalle.setHistorialPrecio(ordenWorkspace.getHistorialPrecio());
        detalle.setCantidadPz(ordenWorkspace.getCantidadPz());
        detalle.setCantidadKg(ordenWorkspace.getCantidadKg());

        detallesOrdenesDeVentasRepository.save(detalle);
    }

    private void actualizarInventario(OrdenesWorkspace ordenWorkspace) {
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(ordenWorkspace.getProducto());

        if (inventarioOpt.isEmpty()) {
            throw new IllegalStateException("No se encontró inventario para el producto: " +
                    ordenWorkspace.getProducto().getNombre());
        }

        Inventarios inventario = inventarioOpt.get();

        // Restar cantidades vendidas
        if (ordenWorkspace.getCantidadPz() != null && ordenWorkspace.getCantidadPz().compareTo(BigDecimal.ZERO) > 0) {
            int cantidadActualPz = inventario.getCantidadPz() != null ? inventario.getCantidadPz() : 0;
            int nuevaCantidadPz = cantidadActualPz - ordenWorkspace.getCantidadPz().intValue();
            inventario.setCantidadPz(Math.max(0, nuevaCantidadPz)); // No permitir valores negativos
        }

        if (ordenWorkspace.getCantidadKg() != null && ordenWorkspace.getCantidadKg().compareTo(BigDecimal.ZERO) > 0) {
            int cantidadActualKg = inventario.getCantidadKg() != null ? inventario.getCantidadKg() : 0;
            int nuevaCantidadKg = cantidadActualKg - ordenWorkspace.getCantidadKg().intValue();
            inventario.setCantidadKg(Math.max(0, nuevaCantidadKg)); // No permitir valores negativos
        }

        inventarioRepository.save(inventario);
    }

    private void crearMovimientoInventario(OrdenesWorkspace ordenWorkspace, Usuarios usuario) {
        // Buscar el tipo de movimiento "VENTA"
        Optional<TipoMovimientos> tipoVentaOpt = tipoMovimientosRepository.findByMovimiento("VENTA");
        if (tipoVentaOpt.isEmpty()) {
            throw new IllegalStateException("Tipo de movimiento 'VENTA' no encontrado en el sistema");
        }

        // Obtener la ubicación del inventario
        Optional<Inventarios> inventarioOpt = inventarioRepository.findByProducto(ordenWorkspace.getProducto());
        if (inventarioOpt.isEmpty()) {
            throw new IllegalStateException("No se encontró inventario para crear el movimiento");
        }

        Ubicaciones ubicacion = inventarioOpt.get().getUbicacion();

        // Calcular cantidad total para el movimiento
        BigDecimal cantidadTotal = BigDecimal.ZERO;
        if (ordenWorkspace.getCantidadPz() != null) {
            cantidadTotal = cantidadTotal.add(ordenWorkspace.getCantidadPz());
        }
        if (ordenWorkspace.getCantidadKg() != null) {
            cantidadTotal = cantidadTotal.add(ordenWorkspace.getCantidadKg());
        }

        // Crear el movimiento de inventario
        MovimientosInventarios movimiento = new MovimientosInventarios();
        movimiento.setProducto(ordenWorkspace.getProducto());
        movimiento.setUbicacion(ubicacion);
        movimiento.setTipoMovimiento(tipoVentaOpt.get());
        movimiento.setCantidad(cantidadTotal);
        movimiento.setFechaMovimiento(OffsetDateTime.now());
        movimiento.setUsuario(usuario);
        movimiento.setClaveMovimiento("VENTA-" + UUID.randomUUID().toString().substring(0, 8).toUpperCase());

        movimientosInventariosRepository.save(movimiento);
    }

    private OrdenesDeVentasDTO convertirADTO(OrdenesDeVentas ordenVenta) {
        OrdenesDeVentasDTO dto = new OrdenesDeVentasDTO();
        dto.setId(ordenVenta.getId());
        dto.setFechaOrden(ordenVenta.getFechaOrden());
        dto.setTotalVenta(ordenVenta.getTotalVenta());

        // Mapear persona
        dto.setPersonaId(ordenVenta.getPersona().getId());
        dto.setPersonaNombre(ordenVenta.getPersona().getNombre());
        dto.setPersonaApellidoPaterno(ordenVenta.getPersona().getApellidoPaterno());
        dto.setPersonaApellidoMaterno(ordenVenta.getPersona().getApellidoMaterno());

        // Mapear usuario
        dto.setUsuarioId(ordenVenta.getUsuario().getId());
        dto.setUsuarioNombre(ordenVenta.getUsuario().getNombre());

        // Mapear método de pago
        dto.setMetodoPagoId(ordenVenta.getMetodoPago().getId());
        dto.setMetodoPagoNombre(ordenVenta.getMetodoPago().getMetodoPago());

        return dto;
    }
}

```

`proyecto-pos-finanzas/backend/src/main/resources/application-test.properties`:

```properties
# Configuración para H2 en memoria para testing
spring.datasource.url=jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE
spring.datasource.driver-class-name=org.h2.Driver
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.h2.console.enabled=true
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Activar inicialización de datos de prueba SOLO con data-test.sql
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data-test.sql
spring.jpa.defer-datasource-initialization=true
# Desactivar schema.sql completamente
spring.sql.init.schema-locations=classpath:empty.sql
```

`proyecto-pos-finanzas/backend/src/main/resources/application.properties`:

```properties
# # Datos que se suben a Github (Para producción en Azure)
# spring.datasource.url=jdbc:postgresql://pos-finanzas.postgres.database.azure.com:5432/pos_fin?sslmode=require
# spring.jpa.hibernate.ddl-auto=update
# spring.jpa.show-sql=true

# Datos que no se suben a Github (Para desarrollo local)
# Variables de entorno para conexión a base de datos
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USER}
spring.datasource.password=${DB_PASS}

# Permitir que Hibernate maneje automáticamente las migraciones de esquema
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Ejecutar script de inicialización
# spring.sql.init.mode=always
# spring.sql.init.schema-locations=classpath:schema.sql

```

`proyecto-pos-finanzas/backend/src/main/resources/data-test.sql`:

```sql
-- Datos de prueba para sistema de compras
-- Se ejecuta después de la creación de tablas por Hibernate

-- Insertar estados
INSERT INTO estados (id, estado) VALUES 
('activo-id', 'Activo'),
('inactivo-id', 'Inactivo');

-- Insertar categorías de personas  
INSERT INTO categoria_personas (id, categoria) VALUES 
('proveedor-cat-id', 'Proveedor'),
('cliente-cat-id', 'Cliente');

-- Insertar los 4 proveedores reales del sistema
INSERT INTO personas (id, nombre, apellido_paterno, apellido_materno, telefono, email, estados_id, categoria_personas_id) VALUES 
('prov-jaime', 'Jaime', 'Aguilar', '', '555-1001', 'jaime.aguilar@email.com', 'activo-id', 'proveedor-cat-id'),
('prov-elias', 'Elias', 'Bless', '', '555-1002', 'elias.bless@email.com', 'activo-id', 'proveedor-cat-id'),
('prov-1', 'Distribuidora', 'Mexicana', 'SA', '555-0001', 'ventas@dismex.com', 'activo-id', 'proveedor-cat-id'),
('prov-2', 'Productos', 'del Norte', 'LTDA', '555-0002', 'contacto@prodnorte.com', 'activo-id', 'proveedor-cat-id');

-- Insertar métodos de pago
INSERT INTO metodos_pago (id, metodo_pago) VALUES 
('efectivo-id', 'Efectivo'),
('transferencia-id', 'Transferencia'),
('cheque-id', 'Cheque');
```

`proyecto-pos-finanzas/backend/src/main/resources/db-migration.sql`:

```sql
-- Script para corregir problemas de esquema en la base de datos
-- Este script se ejecutará automáticamente al inicializar el backend

-- 1. Corregir valores NULL en clave_movimiento y asegurar que no sea NULL
UPDATE movimientos_inventarios 
SET clave_movimiento = CONCAT('MIGRATION-', id)
WHERE clave_movimiento IS NULL;

-- 2. Corregir tipos de datos en la tabla inventarios
-- Primero, asegurar que los valores sean convertibles a integer
UPDATE inventarios SET cantidad_pz = 0 WHERE cantidad_pz IS NULL OR cantidad_pz = '';
UPDATE inventarios SET cantidad_kg = 0 WHERE cantidad_kg IS NULL OR cantidad_kg = '';

-- Cambiar tipos de datos usando USING para conversión explícita
ALTER TABLE inventarios ALTER COLUMN cantidad_pz TYPE integer USING cantidad_pz::integer;
ALTER TABLE inventarios ALTER COLUMN cantidad_kg TYPE integer USING cantidad_kg::integer;

-- 3. Asegurar que la columna clave_movimiento no permita NULL en el futuro
-- (Esto lo hará Hibernate automáticamente después de que se ejecute este script)

```

`proyecto-pos-finanzas/backend/src/main/resources/empty.sql`:

```sql
-- Archivo vacío para evitar errores de schema
SELECT 1;
```

`proyecto-pos-finanzas/backend/src/main/resources/schema.sql`:

```sql
-- Schema.sql completamente deshabilitado para desarrollo
-- Hibernate creará las tablas automáticamente con JPA

```

`proyecto-pos-finanzas/backend/src/test/java/com/posfin/pos_finanzas_backend/PosFinanzasBackendApplicationTests.java`:

```java
package com.posfin.pos_finanzas_backend;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class PosFinanzasBackendApplicationTests {

	@Test
	void contextLoads() {
	}

}

```

`proyecto-pos-finanzas/backend/src/test/java/com/posfin/pos_finanzas_backend/services/DeudasProveedoresServiceTest.java`:

```java
package com.posfin.pos_finanzas_backend.services;

import com.posfin.pos_finanzas_backend.dtos.DeudaProveedorDTO;
import com.posfin.pos_finanzas_backend.repositories.OrdenesDeComprasRepository;
import com.posfin.pos_finanzas_backend.repositories.HistorialCargosProveedoresRepository;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;
import org.mockito.InjectMocks;
import org.mockito.Mock;
import org.mockito.junit.jupiter.MockitoExtension;

import java.math.BigDecimal;
import java.time.OffsetDateTime;
import java.util.ArrayList;
import java.util.List;

import static org.mockito.Mockito.*;
import static org.junit.jupiter.api.Assertions.*;

/**
 * Pruebas unitarias para el servicio DeudasProveedoresService
 * Verifica el correcto funcionamiento del cálculo y consulta de deudas
 */
@ExtendWith(MockitoExtension.class)
class DeudasProveedoresServiceTest {

    @Mock
    private OrdenesDeComprasRepository ordenesDeComprasRepository;

    @Mock
    private HistorialCargosProveedoresRepository historialCargosProveedoresRepository;

    @InjectMocks
    private DeudasProveedoresService deudasProveedoresService;

    private Object[] datosMockProveedor;

    @BeforeEach
    void setUp() {
        // Datos mock para simular la respuesta de la consulta nativa
        datosMockProveedor = new Object[]{
            "proveedor-id-1",                    // proveedorId
            "Proveedor Test",                    // proveedorNombre
            "555-1234",                          // telefonoProveedor
            "test@proveedor.com",               // emailProveedor
            new BigDecimal("1000.00"),          // totalCompras
            new BigDecimal("300.00"),           // totalPagos
            OffsetDateTime.now().minusDays(30), // fechaOrdenMasAntigua
            3L                                  // cantidadOrdenes
        };
    }

    @Test
    void testObtenerDeudasProveedores_ConDeudasPendientes() {
        // Arrange
        List<Object[]> resultadosMock = new ArrayList<>();
        resultadosMock.add(datosMockProveedor);
        
        when(ordenesDeComprasRepository.obtenerDeudasProveedores())
            .thenReturn(resultadosMock);

        // Act
        List<DeudaProveedorDTO> resultado = deudasProveedoresService.obtenerDeudasProveedores();

        // Assert
        assertNotNull(resultado);
        assertEquals(1, resultado.size());
        
        DeudaProveedorDTO deuda = resultado.get(0);
        assertEquals("proveedor-id-1", deuda.getProveedorId());
        assertEquals("Proveedor Test", deuda.getProveedorNombre());
        assertEquals("555-1234", deuda.getTelefonoProveedor());
        assertEquals("test@proveedor.com", deuda.getEmailProveedor());
        assertEquals(new BigDecimal("1000.00"), deuda.getTotalCompras());
        assertEquals(new BigDecimal("300.00"), deuda.getTotalPagos());
        assertEquals(new BigDecimal("700.00"), deuda.getDeudaPendiente());
        assertEquals("amarillo", deuda.getEstadoDeuda());
        assertEquals(3, deuda.getCantidadOrdenesPendientes());
        
        verify(ordenesDeComprasRepository).obtenerDeudasProveedores();
    }

    @Test
    void testObtenerDeudasProveedores_SinDeudas() {
        // Arrange
        when(ordenesDeComprasRepository.obtenerDeudasProveedores())
            .thenReturn(new ArrayList<>());

        // Act
        List<DeudaProveedorDTO> resultado = deudasProveedoresService.obtenerDeudasProveedores();

        // Assert
        assertNotNull(resultado);
        assertTrue(resultado.isEmpty());
        
        verify(ordenesDeComprasRepository).obtenerDeudasProveedores();
    }

    @Test
    void testObtenerDeudaProveedor_ConDeuda() {
        // Arrange
        String proveedorId = "proveedor-test";
        BigDecimal totalCompras = new BigDecimal("2000.00");
        BigDecimal totalPagos = new BigDecimal("500.00");
        
        when(ordenesDeComprasRepository.calcularTotalComprasProveedor(proveedorId))
            .thenReturn(totalCompras);
        when(historialCargosProveedoresRepository.calcularTotalPagosProveedor(proveedorId))
            .thenReturn(totalPagos);
        when(ordenesDeComprasRepository.findOrdersMasAntiguasByProveedorId(proveedorId))
            .thenReturn(new ArrayList<>());
        when(ordenesDeComprasRepository.contarOrdenesPendientesByProveedorId(proveedorId))
            .thenReturn(5L);

        // Act
        DeudaProveedorDTO resultado = deudasProveedoresService.obtenerDeudaProveedor(proveedorId);

        // Assert
        assertNotNull(resultado);
        assertEquals(proveedorId, resultado.getProveedorId());
        assertEquals(totalCompras, resultado.getTotalCompras());
        assertEquals(totalPagos, resultado.getTotalPagos());
        assertEquals(new BigDecimal("1500.00"), resultado.getDeudaPendiente());
        assertEquals("amarillo", resultado.getEstadoDeuda());
        assertEquals(5, resultado.getCantidadOrdenesPendientes());
        
        verify(ordenesDeComprasRepository).calcularTotalComprasProveedor(proveedorId);
        verify(historialCargosProveedoresRepository).calcularTotalPagosProveedor(proveedorId);
    }

    @Test
    void testObtenerDeudaProveedor_SinDeuda() {
        // Arrange
        String proveedorId = "proveedor-sin-deuda";
        BigDecimal totalCompras = new BigDecimal("1000.00");
        BigDecimal totalPagos = new BigDecimal("1000.00");
        
        when(ordenesDeComprasRepository.calcularTotalComprasProveedor(proveedorId))
            .thenReturn(totalCompras);
        when(historialCargosProveedoresRepository.calcularTotalPagosProveedor(proveedorId))
            .thenReturn(totalPagos);

        // Act
        DeudaProveedorDTO resultado = deudasProveedoresService.obtenerDeudaProveedor(proveedorId);

        // Assert
        assertNull(resultado);
        
        verify(ordenesDeComprasRepository).calcularTotalComprasProveedor(proveedorId);
        verify(historialCargosProveedoresRepository).calcularTotalPagosProveedor(proveedorId);
    }

    @Test
    void testCalcularTotalDeudasPendientes() {
        // Arrange
        List<Object[]> resultadosMock = new ArrayList<>();
        resultadosMock.add(datosMockProveedor);
        
        // Agregar otro proveedor con deuda
        Object[] segundoProveedor = new Object[]{
            "proveedor-id-2",
            "Segundo Proveedor",
            "555-5678",
            "segundo@proveedor.com",
            new BigDecimal("500.00"),
            new BigDecimal("100.00"),
            OffsetDateTime.now().minusDays(15),
            1L
        };
        resultadosMock.add(segundoProveedor);
        
        when(ordenesDeComprasRepository.obtenerDeudasProveedores())
            .thenReturn(resultadosMock);

        // Act
        BigDecimal totalDeudas = deudasProveedoresService.calcularTotalDeudasPendientes();

        // Assert
        // Primera deuda: 1000 - 300 = 700
        // Segunda deuda: 500 - 100 = 400
        // Total: 700 + 400 = 1100
        assertEquals(new BigDecimal("1100.00"), totalDeudas);
    }

    @Test
    void testObtenerEstadisticasDeudas() {
        // Arrange
        List<Object[]> resultadosMock = new ArrayList<>();
        resultadosMock.add(datosMockProveedor);
        
        when(ordenesDeComprasRepository.obtenerDeudasProveedores())
            .thenReturn(resultadosMock);

        // Act
        BigDecimal[] estadisticas = deudasProveedoresService.obtenerEstadisticasDeudas();

        // Assert
        assertNotNull(estadisticas);
        assertEquals(3, estadisticas.length);
        
        // Verificar total de proveedores con deuda
        assertEquals(new BigDecimal("1"), estadisticas[0]);
        
        // Verificar total de deudas pendientes (1000 - 300 = 700)
        assertEquals(new BigDecimal("700.00"), estadisticas[1]);
        
        // Verificar deuda promedio (700 / 1 = 700)
        assertEquals(new BigDecimal("700.00"), estadisticas[2]);
    }

    @Test
    void testObtenerEstadisticasDeudas_SinProveedores() {
        // Arrange
        when(ordenesDeComprasRepository.obtenerDeudasProveedores())
            .thenReturn(new ArrayList<>());

        // Act
        BigDecimal[] estadisticas = deudasProveedoresService.obtenerEstadisticasDeudas();

        // Assert
        assertNotNull(estadisticas);
        assertEquals(3, estadisticas.length);
        assertEquals(BigDecimal.ZERO, estadisticas[0]); // Total proveedores
        assertEquals(BigDecimal.ZERO, estadisticas[1]); // Total deudas
        assertEquals(BigDecimal.ZERO, estadisticas[2]); // Deuda promedio
    }
}
```

`proyecto-pos-finanzas/docker-compose.override.yml`:

```yml
# Archivo: docker-compose.override.yml
# Este archivo extiende y sobrescribe docker-compose.yml SOLO para desarrollo local.

services:
  backend:
    build:
      context: ./backend
      target: build  # <--- AÑADE ESTA LÍNEA
    ports:
      - "8080:8080"
    volumes:
      - ./backend:/app
    command: ./mvnw spring-boot:run
```

`proyecto-pos-finanzas/docker-compose.yml`:

```yml
# Archivo: docker-compose.yml
services:
  # Servicio del Backend de Java
  backend:
    container_name: pos_backend
    build:
      context: ./backend # Le dice a Compose que construya la imagen desde la carpeta ./backend
    restart: unless-stopped
    env_file:
      - ./.env # Pasa las variables de entorno a la aplicación Spring Boot
    ports:
      - "8080:8080"

  # Servicio del Frontend de React/Nginx
  frontend:
    container_name: pos_frontend
    environment:
      - VITE_API_URL=http://localhost:8080 # URL del backend para el frontend desde el navegador
    build:
      context: ./frontend
    restart: unless-stopped
    ports:
      - "5173:80" # Mapea el puerto 80 del contenedor al 5173 de tu máquina
    depends_on:
      - backend # Se asegura de que el backend se inicie antes que el frontend

```

`proyecto-pos-finanzas/docs/funcionalidad-deudas-proveedores.md`:

```md
# Funcionalidad de Deudas a Proveedores

## Resumen
Se ha implementado una funcionalidad completa para el cálculo y visualización de deudas a proveedores en el sistema POS. Esta funcionalidad permite tener un control preciso de las obligaciones financieras pendientes con los proveedores.

## Componentes Implementados

### Backend (Java/Spring Boot)

#### 1. **DeudaProveedorDTO** 
- **Archivo**: `backend/src/main/java/com/posfin/pos_finanzas_backend/dtos/DeudaProveedorDTO.java`
- **Descripción**: DTO que encapsula la información de deuda de un proveedor
- **Campos principales**:
  - `proveedorId`, `proveedorNombre`: Información del proveedor
  - `telefonoProveedor`, `emailProveedor`: Datos de contacto
  - `totalCompras`, `totalPagos`, `deudaPendiente`: Montos financieros
  - `estadoDeuda`: Estado visual ('verde' sin deuda, 'amarillo' con deuda)
  - `fechaOrdenMasAntigua`, `cantidadOrdenesPendientes`: Información adicional

#### 2. **Consultas de Repositorio Mejoradas**
- **Archivo**: `backend/src/main/java/com/posfin/pos_finanzas_backend/repositories/OrdenesDeComprasRepository.java`
- **Nuevos métodos**:
  - `obtenerDeudasProveedores()`: Consulta nativa SQL optimizada que calcula deudas por proveedor
  - `findOrdersMasAntiguasByProveedorId()`: Obtiene la orden más antigua de un proveedor
  - `contarOrdenesPendientesByProveedorId()`: Cuenta órdenes pendientes

#### 3. **DeudasProveedoresService**
- **Archivo**: `backend/src/main/java/com/posfin/pos_finanzas_backend/services/DeudasProveedoresService.java`
- **Funcionalidades**:
  - Cálculo de deudas por proveedor usando la diferencia entre compras y pagos
  - Obtención de estadísticas generales (total proveedores con deuda, total adeudado, promedio)
  - Filtrado de proveedores que solo tienen deudas pendientes
  - Manejo de valores nulos y casos extremos

#### 4. **DeudasProveedoresController**
- **Archivo**: `backend/src/main/java/com/posfin/pos_finanzas_backend/controllers/DeudasProveedoresController.java`
- **Endpoints REST**:
  - `GET /api/deudas-proveedores`: Lista completa de proveedores con deudas
  - `GET /api/deudas-proveedores/{proveedorId}`: Deuda específica de un proveedor
  - `GET /api/deudas-proveedores/estadisticas`: Estadísticas generales
  - `GET /api/deudas-proveedores/total`: Total de deudas pendientes

#### 5. **Pruebas Unitarias**
- **Archivo**: `backend/src/test/java/com/posfin/pos_finanzas_backend/services/DeudasProveedoresServiceTest.java`
- **Cobertura**: Casos de éxito, casos sin deudas, manejo de nulos, cálculos estadísticos

### Frontend (React/TypeScript)

#### 1. **Tipos TypeScript**
- **Archivo**: `frontend/src/types/index.ts`
- **Nuevos tipos**:
  - `DeudaProveedor`: Interface principal para deudas de proveedores
  - `EstadisticasDeudas`: Interface para estadísticas agregadas

#### 2. **deudasService**
- **Archivo**: `frontend/src/services/deudasService.ts`
- **Funcionalidades**:
  - Comunicación con API REST del backend
  - Métodos de filtrado y ordenamiento client-side
  - Manejo de autenticación JWT
  - Gestión de errores y casos extremos

#### 3. **Componente DeudasProveedores**
- **Archivo**: `frontend/src/components/DeudasProveedores.tsx`
- **Funcionalidades**:
  - Visualización de deudas en tabla responsiva
  - Filtros por estado (con/sin deuda)
  - Búsqueda por nombre de proveedor
  - Ordenamiento por deuda, nombre o fecha
  - Tarjetas de estadísticas en tiempo real
  - Estados de carga y manejo de errores

#### 4. **Estilos CSS**
- **Archivo**: `frontend/src/components/DeudasProveedores.css`
- **Características**:
  - Diseño responsivo para móviles y escritorio
  - Indicadores visuales de estado (verde/amarillo)
  - Animaciones suaves y feedback visual
  - Paleta de colores consistente con el sistema

## Funcionalidades Principales

### 1. **Cálculo Automático de Deudas**
- Resta automática: `Deuda = Total Compras - Total Pagos`
- Filtrado automático de proveedores sin deudas pendientes
- Actualización en tiempo real al realizar nuevos pagos

### 2. **Visualización Intuitiva**
- **Tarjetas de estadísticas**: Resumen ejecutivo en la parte superior
- **Tabla detallada**: Información completa por proveedor
- **Indicadores de estado**: Verde (sin deuda) / Amarillo (con deuda)
- **Información de contacto**: Teléfono y email accesibles

### 3. **Filtros y Búsqueda Avanzada**
- **Filtro por estado**: Todos, Con deuda, Sin deuda
- **Búsqueda por nombre**: Búsqueda en tiempo real
- **Ordenamiento múltiple**: Por deuda (mayor a menor), nombre (A-Z), fecha más antigua

### 4. **Información Contextual**
- **Fecha de orden más antigua**: Para priorizar pagos urgentes
- **Cantidad de órdenes pendientes**: Volumen de transacciones
- **Contacto directo**: Información para comunicación inmediata

## Integración con el Sistema

### Base de Datos
La funcionalidad utiliza las siguientes tablas existentes:
- `ordenes_de_compras`: Para obtener los totales de compras por proveedor
- `historial_cargos_proveedores`: Para sumar los pagos realizados
- `personas`: Para información del proveedor (con filtro de categoría 'Proveedor')

### Seguridad
- Autenticación JWT requerida para todos los endpoints
- Validación de tokens en frontend y backend
- Manejo seguro de errores sin exposición de información sensible

### Performance
- Consulta SQL optimizada con JOINs eficientes
- Paginación potencial para grandes volúmenes de datos
- Carga asíncrona en frontend con estados de loading

## Casos de Uso

1. **Administrador financiero**: Revisar deudas pendientes semanalmente
2. **Gerente de compras**: Priorizar pagos por antigüedad de orden
3. **Contabilidad**: Generar reportes de obligaciones pendientes
4. **Atención a proveedores**: Consultar estado de cuenta específico

## Mantenimiento y Extensibilidad

### Posibles Mejoras Futuras
- **Exportación a Excel/PDF**: Para reportes formales
- **Alertas automáticas**: Notificaciones de deudas vencidas
- **Historial de pagos**: Vista detallada por proveedor
- **Proyección de flujo de caja**: Predicción basada en deudas pendientes

### Consideraciones Técnicas
- El componente es completamente reutilizable
- La lógica de negocio está separada en el servicio
- Los estilos son modulares y customizables
- Las pruebas unitarias garantizan la funcionalidad core

## Configuración y Despliegue

No se requieren configuraciones adicionales. La funcionalidad utiliza:
- La misma base de datos existente
- El mismo sistema de autenticación
- Las mismas dependencias del proyecto
- Los mismos patrones de arquitectura establecidos
```

`proyecto-pos-finanzas/frontend/Dockerfile`:

```
# Archivo: frontend/Dockerfile

# ---- Etapa de Construcción (Build Stage) ----
FROM node:20-alpine AS build

WORKDIR /app

# Copiamos package.json y package-lock.json para cachear las dependencias
COPY package*.json ./
RUN npm install

# Copiamos el resto del código fuente
COPY . .
# Construimos la versión de producción
RUN npm run build

# ---- Etapa de Ejecución (Runtime Stage) ----
# Usamos Nginx, un servidor web ligero y de alto rendimiento
FROM nginx:stable-alpine

# Copiamos los archivos estáticos construidos a la carpeta que sirve Nginx
COPY --from=build /app/dist /usr/share/nginx/html

# Copiamos nuestra configuración personalizada de Nginx
COPY nginx.conf /etc/nginx/conf.d/default.conf

# Exponemos el puerto 80, que es el puerto por defecto de Nginx
EXPOSE 80
```

`proyecto-pos-finanzas/frontend/README.md`:

```md
# React + TypeScript + Vite

This template provides a minimal setup to get React working in Vite with HMR and some ESLint rules.

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config({
  extends: [
    // Remove ...tseslint.configs.recommended and replace with this
    ...tseslint.configs.recommendedTypeChecked,
    // Alternatively, use this for stricter rules
    ...tseslint.configs.strictTypeChecked,
    // Optionally, add this for stylistic rules
    ...tseslint.configs.stylisticTypeChecked,
  ],
  languageOptions: {
    // other options...
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
})
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default tseslint.config({
  plugins: {
    // Add the react-x and react-dom plugins
    'react-x': reactX,
    'react-dom': reactDom,
  },
  rules: {
    // other rules...
    // Enable its recommended typescript rules
    ...reactX.configs['recommended-typescript'].rules,
    ...reactDom.configs.recommended.rules,
  },
})
```

```

`proyecto-pos-finanzas/frontend/check-config.sh`:

```sh
#!/bin/bash

# Script de prueba para verificar la configuración de variables de entorno
echo "=== Verificando configuración de variables de entorno ==="

echo ""
echo "1. Contenido del archivo .env:"
cat .env

echo ""
echo "2. Contenido del archivo .env.local:"
cat .env.local

echo ""
echo "3. Variables de entorno disponibles para Vite (las que empiezan con VITE_):"
grep -E '^VITE_' .env .env.local 2>/dev/null || echo "No se encontraron variables VITE_"

echo ""
echo "4. Construcción de la aplicación:"
echo "   - En desarrollo: usará .env.local (http://localhost:8080/api)"
echo "   - En producción: usará .env (https://pos-finanzas-q2ddz.ondigitalocean.app/api)"

echo ""
echo "5. Archivos actualizados:"
echo "   ✓ src/services/apiService.ts - Actualizado para usar VITE_API_URL"
echo "   ✓ src/services/inventarioService.ts - Actualizado para usar VITE_API_URL"
echo "   ✓ src/vite-env.d.ts - Tipos TypeScript para las variables de entorno"
echo "   ✓ vite.config.ts - Configuración de proxy para desarrollo local"

echo ""
echo "=== Configuración completada ==="
echo "Para probar:"
echo "  - Desarrollo: npm run dev"
echo "  - Producción: npm run build && npm run preview"

```

`proyecto-pos-finanzas/frontend/debug-env.js`:

```js
// Archivo temporal para debug - eliminar después
console.log('VITE_API_URL:', import.meta.env.VITE_API_URL);
console.log('Todas las variables de entorno:', import.meta.env);

```

`proyecto-pos-finanzas/frontend/eslint.config.js`:

```js
import js from '@eslint/js'
import globals from 'globals'
import reactHooks from 'eslint-plugin-react-hooks'
import reactRefresh from 'eslint-plugin-react-refresh'
import tseslint from 'typescript-eslint'

export default tseslint.config(
  { ignores: ['dist'] },
  {
    extends: [js.configs.recommended, ...tseslint.configs.recommended],
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      ecmaVersion: 2020,
      globals: globals.browser,
    },
    plugins: {
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh,
    },
    rules: {
      ...reactHooks.configs.recommended.rules,
      'react-refresh/only-export-components': [
        'warn',
        { allowConstantExport: true },
      ],
    },
  },
)

```

`proyecto-pos-finanzas/frontend/index.html`:

```html
<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="theme-color" content="#6750A4" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <title>Sistema POS - Punto de Venta Moderno</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>

```

`proyecto-pos-finanzas/frontend/nginx.conf`:

```conf
# Archivo: frontend/nginx.conf

server {
    listen 80;

    # Sirve los archivos estáticos de React
    location / {
        root   /usr/share/nginx/html;
        index  index.html;
        try_files $uri $uri/ /index.html;
    }

    # Redirige las peticiones a la API hacia el backend
    location /api {
        proxy_pass http://backend:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

`proyecto-pos-finanzas/frontend/package-lock.json`:

```json
{
  "name": "frontend",
  "version": "0.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "frontend",
      "version": "0.0.0",
      "dependencies": {
        "@emotion/react": "^11.14.0",
        "@emotion/styled": "^11.14.1",
        "@mui/material": "^7.2.0",
        "axios": "^1.10.0",
        "react": "^19.1.0",
        "react-dom": "^19.1.0",
        "react-toastify": "^11.0.5",
        "tailwindcss": "^4.1.11"
      },
      "devDependencies": {
        "@eslint/js": "^9.25.0",
        "@types/react": "^19.1.2",
        "@types/react-dom": "^19.1.2",
        "@vitejs/plugin-react": "^4.4.1",
        "eslint": "^9.25.0",
        "eslint-plugin-react-hooks": "^5.2.0",
        "eslint-plugin-react-refresh": "^0.4.19",
        "globals": "^16.0.0",
        "typescript": "~5.8.3",
        "typescript-eslint": "^8.30.1",
        "vite": "^6.3.5"
      }
    },
    "node_modules/@ampproject/remapping": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@ampproject/remapping/-/remapping-2.3.0.tgz",
      "integrity": "sha512-30iZtAPgz+LTIYoeivqYo853f02jBYSd5uGnGpkFV0M3xOt9aN73erkgYAmZU43x4VfqcnLxW9Kpg3R5LC4YYw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.27.5",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.27.5.tgz",
      "integrity": "sha512-KiRAp/VoJaWkkte84TvUd9qjdbZAdiqyvMxrGl1N6vzFogKmaLgoM3L1kgtLicp2HP5fBJS8JrZKLVIZGVJAVg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.27.4",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.27.4.tgz",
      "integrity": "sha512-bXYxrXFubeYdvB0NhD/NBB3Qi6aZeV20GOWVI47t2dkecCEoneR4NPVcb7abpXDEvejgrUfFtG6vG/zxAKmg+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@ampproject/remapping": "^2.2.0",
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.27.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.27.3",
        "@babel/helpers": "^7.27.4",
        "@babel/parser": "^7.27.4",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.27.4",
        "@babel/types": "^7.27.3",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.27.5",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.27.5.tgz",
      "integrity": "sha512-ZGhA37l0e/g2s1Cnzdix0O3aLYm66eF8aufiVteOgnwxgnRP8GoyMj7VWsgWnQbVKXyge7hqrFh2K2TQM6t1Hw==",
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.27.5",
        "@babel/types": "^7.27.3",
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.25",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.27.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.27.3.tgz",
      "integrity": "sha512-dSOvYwvyLsWBeIRyOeHXp5vPj5l1I011r52FM1+r1jCERv+aFXYk4whgQccYEGYxK2H3ZAIA8nuPkQ0HaUo3qg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.27.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.27.6",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.27.6.tgz",
      "integrity": "sha512-muE8Tt8M22638HU31A3CgfSUciwz1fhATfoVai05aPXGor//CdWDCbnlY1yvBPo07njuVOCNGCSp/GTt12lIug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.27.6"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.27.5",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.27.5.tgz",
      "integrity": "sha512-OsQd175SxWkGlzbny8J3K8TnnDD0N3lrIUtB92xwyRpzaenGZhxDvxN/JgU00U3CDZNj9tPuDJ5H0WS4Nt3vKg==",
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.27.3"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/runtime": {
      "version": "7.27.6",
      "resolved": "https://registry.npmjs.org/@babel/runtime/-/runtime-7.27.6.tgz",
      "integrity": "sha512-vbavdySgbTTrmFE+EsiqUTzlOr5bzlnJtUv9PynGCAKvfQqjIXbvFdumPM/GxMDfyuGMJaJAU6TO4zc1Jf1i8Q==",
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.27.4",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.27.4.tgz",
      "integrity": "sha512-oNcu2QbHqts9BtOWJosOVJapWjBDSxGCpFvikNR5TGDYDQf3JwpIoMzIKrvfoti93cLfPJEG4tH9SPVeyCGgdA==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.27.3",
        "@babel/parser": "^7.27.4",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.27.3",
        "debug": "^4.3.1",
        "globals": "^11.1.0"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse/node_modules/globals": {
      "version": "11.12.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-11.12.0.tgz",
      "integrity": "sha512-WOBp/EEGUiIsJSp7wcv/y6MO+lV9UoncWqxuFfm8eBwzWNgyfBd6Gz+IeKQ9jCmyhoH99g15M3T+QaVHFjizVA==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.27.6",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.27.6.tgz",
      "integrity": "sha512-ETyHEk2VHHvl9b9jZP5IHPavHYk57EhanlRRuae9XCpb/j5bDCbPPMOBfCWhnl/7EDJz0jEMCi/RhccCE8r1+Q==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@emotion/babel-plugin": {
      "version": "11.13.5",
      "resolved": "https://registry.npmjs.org/@emotion/babel-plugin/-/babel-plugin-11.13.5.tgz",
      "integrity": "sha512-pxHCpT2ex+0q+HH91/zsdHkw/lXd468DIN2zvfvLtPKLLMo6gQj7oLObq8PhkrxOZb/gGCq03S3Z7PDhS8pduQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.16.7",
        "@babel/runtime": "^7.18.3",
        "@emotion/hash": "^0.9.2",
        "@emotion/memoize": "^0.9.0",
        "@emotion/serialize": "^1.3.3",
        "babel-plugin-macros": "^3.1.0",
        "convert-source-map": "^1.5.0",
        "escape-string-regexp": "^4.0.0",
        "find-root": "^1.1.0",
        "source-map": "^0.5.7",
        "stylis": "4.2.0"
      }
    },
    "node_modules/@emotion/babel-plugin/node_modules/convert-source-map": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-1.9.0.tgz",
      "integrity": "sha512-ASFBup0Mz1uyiIjANan1jzLQami9z1PoYSZCiiYW2FczPbenXc45FZdBZLzOT+r6+iciuEModtmCti+hjaAk0A==",
      "license": "MIT"
    },
    "node_modules/@emotion/cache": {
      "version": "11.14.0",
      "resolved": "https://registry.npmjs.org/@emotion/cache/-/cache-11.14.0.tgz",
      "integrity": "sha512-L/B1lc/TViYk4DcpGxtAVbx0ZyiKM5ktoIyafGkH6zg/tj+mA+NE//aPYKG0k8kCHSHVJrpLpcAlOBEXQ3SavA==",
      "license": "MIT",
      "dependencies": {
        "@emotion/memoize": "^0.9.0",
        "@emotion/sheet": "^1.4.0",
        "@emotion/utils": "^1.4.2",
        "@emotion/weak-memoize": "^0.4.0",
        "stylis": "4.2.0"
      }
    },
    "node_modules/@emotion/hash": {
      "version": "0.9.2",
      "resolved": "https://registry.npmjs.org/@emotion/hash/-/hash-0.9.2.tgz",
      "integrity": "sha512-MyqliTZGuOm3+5ZRSaaBGP3USLw6+EGykkwZns2EPC5g8jJ4z9OrdZY9apkl3+UP9+sdz76YYkwCKP5gh8iY3g==",
      "license": "MIT"
    },
    "node_modules/@emotion/is-prop-valid": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/@emotion/is-prop-valid/-/is-prop-valid-1.3.1.tgz",
      "integrity": "sha512-/ACwoqx7XQi9knQs/G0qKvv5teDMhD7bXYns9N/wM8ah8iNb8jZ2uNO0YOgiq2o2poIvVtJS2YALasQuMSQ7Kw==",
      "license": "MIT",
      "dependencies": {
        "@emotion/memoize": "^0.9.0"
      }
    },
    "node_modules/@emotion/memoize": {
      "version": "0.9.0",
      "resolved": "https://registry.npmjs.org/@emotion/memoize/-/memoize-0.9.0.tgz",
      "integrity": "sha512-30FAj7/EoJ5mwVPOWhAyCX+FPfMDrVecJAM+Iw9NRoSl4BBAQeqj4cApHHUXOVvIPgLVDsCFoz/hGD+5QQD1GQ==",
      "license": "MIT"
    },
    "node_modules/@emotion/react": {
      "version": "11.14.0",
      "resolved": "https://registry.npmjs.org/@emotion/react/-/react-11.14.0.tgz",
      "integrity": "sha512-O000MLDBDdk/EohJPFUqvnp4qnHeYkVP5B0xEG0D/L7cOKP9kefu2DXn8dj74cQfsEzUqh+sr1RzFqiL1o+PpA==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.18.3",
        "@emotion/babel-plugin": "^11.13.5",
        "@emotion/cache": "^11.14.0",
        "@emotion/serialize": "^1.3.3",
        "@emotion/use-insertion-effect-with-fallbacks": "^1.2.0",
        "@emotion/utils": "^1.4.2",
        "@emotion/weak-memoize": "^0.4.0",
        "hoist-non-react-statics": "^3.3.1"
      },
      "peerDependencies": {
        "react": ">=16.8.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@emotion/serialize": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/@emotion/serialize/-/serialize-1.3.3.tgz",
      "integrity": "sha512-EISGqt7sSNWHGI76hC7x1CksiXPahbxEOrC5RjmFRJTqLyEK9/9hZvBbiYn70dw4wuwMKiEMCUlR6ZXTSWQqxA==",
      "license": "MIT",
      "dependencies": {
        "@emotion/hash": "^0.9.2",
        "@emotion/memoize": "^0.9.0",
        "@emotion/unitless": "^0.10.0",
        "@emotion/utils": "^1.4.2",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@emotion/sheet": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/@emotion/sheet/-/sheet-1.4.0.tgz",
      "integrity": "sha512-fTBW9/8r2w3dXWYM4HCB1Rdp8NLibOw2+XELH5m5+AkWiL/KqYX6dc0kKYlaYyKjrQ6ds33MCdMPEwgs2z1rqg==",
      "license": "MIT"
    },
    "node_modules/@emotion/styled": {
      "version": "11.14.1",
      "resolved": "https://registry.npmjs.org/@emotion/styled/-/styled-11.14.1.tgz",
      "integrity": "sha512-qEEJt42DuToa3gurlH4Qqc1kVpNq8wO8cJtDzU46TjlzWjDlsVyevtYCRijVq3SrHsROS+gVQ8Fnea108GnKzw==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.18.3",
        "@emotion/babel-plugin": "^11.13.5",
        "@emotion/is-prop-valid": "^1.3.0",
        "@emotion/serialize": "^1.3.3",
        "@emotion/use-insertion-effect-with-fallbacks": "^1.2.0",
        "@emotion/utils": "^1.4.2"
      },
      "peerDependencies": {
        "@emotion/react": "^11.0.0-rc.0",
        "react": ">=16.8.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@emotion/unitless": {
      "version": "0.10.0",
      "resolved": "https://registry.npmjs.org/@emotion/unitless/-/unitless-0.10.0.tgz",
      "integrity": "sha512-dFoMUuQA20zvtVTuxZww6OHoJYgrzfKM1t52mVySDJnMSEa08ruEvdYQbhvyu6soU+NeLVd3yKfTfT0NeV6qGg==",
      "license": "MIT"
    },
    "node_modules/@emotion/use-insertion-effect-with-fallbacks": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@emotion/use-insertion-effect-with-fallbacks/-/use-insertion-effect-with-fallbacks-1.2.0.tgz",
      "integrity": "sha512-yJMtVdH59sxi/aVJBpk9FQq+OR8ll5GT8oWd57UpeaKEVGab41JWaCFA7FRLoMLloOZF/c/wsPoe+bfGmRKgDg==",
      "license": "MIT",
      "peerDependencies": {
        "react": ">=16.8.0"
      }
    },
    "node_modules/@emotion/utils": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/@emotion/utils/-/utils-1.4.2.tgz",
      "integrity": "sha512-3vLclRofFziIa3J2wDh9jjbkUz9qk5Vi3IZ/FSTKViB0k+ef0fPV7dYrUIugbgupYDx7v9ud/SjrtEP8Y4xLoA==",
      "license": "MIT"
    },
    "node_modules/@emotion/weak-memoize": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@emotion/weak-memoize/-/weak-memoize-0.4.0.tgz",
      "integrity": "sha512-snKqtPW01tN0ui7yu9rGv69aJXr/a/Ywvl11sUjNtEcRc+ng/mQriFL0wLXMef74iHa/EkftbDzU9F8iFbH+zg==",
      "license": "MIT"
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.5.tgz",
      "integrity": "sha512-9o3TMmpmftaCMepOdA5k/yDw8SfInyzWWTjYTFCX3kPSDJMROQTb8jg+h9Cnwnmm1vOzvxN7gIfB5V2ewpjtGA==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.5.tgz",
      "integrity": "sha512-AdJKSPeEHgi7/ZhuIPtcQKr5RQdo6OO2IL87JkianiMYMPbCtot9fxPbrMiBADOWWm3T2si9stAiVsGbTQFkbA==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.5.tgz",
      "integrity": "sha512-VGzGhj4lJO+TVGV1v8ntCZWJktV7SGCs3Pn1GRWI1SBFtRALoomm8k5E9Pmwg3HOAal2VDc2F9+PM/rEY6oIDg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.5.tgz",
      "integrity": "sha512-D2GyJT1kjvO//drbRT3Hib9XPwQeWd9vZoBJn+bu/lVsOZ13cqNdDeqIF/xQ5/VmWvMduP6AmXvylO/PIc2isw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.5.tgz",
      "integrity": "sha512-GtaBgammVvdF7aPIgH2jxMDdivezgFu6iKpmT+48+F8Hhg5J/sfnDieg0aeG/jfSvkYQU2/pceFPDKlqZzwnfQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.5.tgz",
      "integrity": "sha512-1iT4FVL0dJ76/q1wd7XDsXrSW+oLoquptvh4CLR4kITDtqi2e/xwXwdCVH8hVHU43wgJdsq7Gxuzcs6Iq/7bxQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.5.tgz",
      "integrity": "sha512-nk4tGP3JThz4La38Uy/gzyXtpkPW8zSAmoUhK9xKKXdBCzKODMc2adkB2+8om9BDYugz+uGV7sLmpTYzvmz6Sw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.5.tgz",
      "integrity": "sha512-PrikaNjiXdR2laW6OIjlbeuCPrPaAl0IwPIaRv+SMV8CiM8i2LqVUHFC1+8eORgWyY7yhQY+2U2fA55mBzReaw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.5.tgz",
      "integrity": "sha512-cPzojwW2okgh7ZlRpcBEtsX7WBuqbLrNXqLU89GxWbNt6uIg78ET82qifUy3W6OVww6ZWobWub5oqZOVtwolfw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.5.tgz",
      "integrity": "sha512-Z9kfb1v6ZlGbWj8EJk9T6czVEjjq2ntSYLY2cw6pAZl4oKtfgQuS4HOq41M/BcoLPzrUbNd+R4BXFyH//nHxVg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.5.tgz",
      "integrity": "sha512-sQ7l00M8bSv36GLV95BVAdhJ2QsIbCuCjh/uYrWiMQSUuV+LpXwIqhgJDcvMTj+VsQmqAHL2yYaasENvJ7CDKA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.5.tgz",
      "integrity": "sha512-0ur7ae16hDUC4OL5iEnDb0tZHDxYmuQyhKhsPBV8f99f6Z9KQM02g33f93rNH5A30agMS46u2HP6qTdEt6Q1kg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.5.tgz",
      "integrity": "sha512-kB/66P1OsHO5zLz0i6X0RxlQ+3cu0mkxS3TKFvkb5lin6uwZ/ttOkP3Z8lfR9mJOBk14ZwZ9182SIIWFGNmqmg==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.5.tgz",
      "integrity": "sha512-UZCmJ7r9X2fe2D6jBmkLBMQetXPXIsZjQJCjgwpVDz+YMcS6oFR27alkgGv3Oqkv07bxdvw7fyB71/olceJhkQ==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.5.tgz",
      "integrity": "sha512-kTxwu4mLyeOlsVIFPfQo+fQJAV9mh24xL+y+Bm6ej067sYANjyEw1dNHmvoqxJUCMnkBdKpvOn0Ahql6+4VyeA==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.5.tgz",
      "integrity": "sha512-K2dSKTKfmdh78uJ3NcWFiqyRrimfdinS5ErLSn3vluHNeHVnBAFWC8a4X5N+7FgVE1EjXS1QDZbpqZBjfrqMTQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.5.tgz",
      "integrity": "sha512-uhj8N2obKTE6pSZ+aMUbqq+1nXxNjZIIjCjGLfsWvVpy7gKCOL6rsY1MhRh9zLtUtAI7vpgLMK6DxjO8Qm9lJw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.5.tgz",
      "integrity": "sha512-pwHtMP9viAy1oHPvgxtOv+OkduK5ugofNTVDilIzBLpoWAM16r7b/mxBvfpuQDpRQFMfuVr5aLcn4yveGvBZvw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.5.tgz",
      "integrity": "sha512-WOb5fKrvVTRMfWFNCroYWWklbnXH0Q5rZppjq0vQIdlsQKuw6mdSihwSo4RV/YdQ5UCKKvBy7/0ZZYLBZKIbwQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.5.tgz",
      "integrity": "sha512-7A208+uQKgTxHd0G0uqZO8UjK2R0DDb4fDmERtARjSHWxqMTye4Erz4zZafx7Di9Cv+lNHYuncAkiGFySoD+Mw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.5.tgz",
      "integrity": "sha512-G4hE405ErTWraiZ8UiSoesH8DaCsMm0Cay4fsFWOOUcz8b8rC6uCvnagr+gnioEjWn0wC+o1/TAHt+It+MpIMg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.5.tgz",
      "integrity": "sha512-l+azKShMy7FxzY0Rj4RCt5VD/q8mG/e+mDivgspo+yL8zW7qEwctQ6YqKX34DTEleFAvCIUviCFX1SDZRSyMQA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.5.tgz",
      "integrity": "sha512-O2S7SNZzdcFG7eFKgvwUEZ2VG9D/sn/eIiz8XRZ1Q/DO5a3s76Xv0mdBzVM5j5R639lXQmPmSo0iRpHqUUrsxw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.5.tgz",
      "integrity": "sha512-onOJ02pqs9h1iMJ1PQphR+VZv8qBMQ77Klcsqv9CNW2w6yLqoURLcgERAIurY6QE63bbLuqgP9ATqajFLK5AMQ==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.5.tgz",
      "integrity": "sha512-TXv6YnJ8ZMVdX+SXWVBo/0p8LTcrUYngpWjvm91TMjjBQii7Oz11Lw5lbDV5Y0TzuhSJHwiH4hEtC1I42mMS0g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.7.0.tgz",
      "integrity": "sha512-dyybb3AcajC7uha6CvhdVRJqaKyn7w2YKqKyAN37NKYgZT36w+iRb0Dymmc5qEJ549c/S31cMMSFd75bteCpCw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils/node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.20.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.20.1.tgz",
      "integrity": "sha512-OL0RJzC/CBzli0DrrR31qzj6d6i6Mm3HByuhflhl4LOBiWxN+3i6/t/ZQQNii4tjksXi8r2CRW1wMpWA2ULUEw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.6",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.2.3.tgz",
      "integrity": "sha512-u180qk2Um1le4yf0ruXH3PYFeEZeYC3p/4wCTKrr2U1CmGdzGi3KtY0nuPDH48UJxlKCC5RDzbcbh4X0XlqgHg==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.14.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.14.0.tgz",
      "integrity": "sha512-qIbV0/JZr7iSDjqAc60IqbLdsj9GDt16xQtWD+B78d/HAlvysGdZZ6rpJHGAc2T0FQx1X6thsSPdnoiGKdNtdg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.29.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.29.0.tgz",
      "integrity": "sha512-3PIF4cBw/y+1u2EazflInpV+lYsSG0aByVIQzAgb1m1MhHFSbqTyNqtBKHgWf/9Ykud+DhILS9EGkmekVhbKoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.6",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.6.tgz",
      "integrity": "sha512-RBMg5FRL0I0gs51M/guSAj5/e14VQ4tpZnQNWwuDT66P14I43ItmPfIZRhO9fUVIPOAQXU47atlywZ/czoqFPA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.3.2.tgz",
      "integrity": "sha512-4SaFZCNfJqvk/kenHpI8xvN42DMaoycy4PzKc5otHxRswww1kAt82OlBuwRVLofCACCTZEcla2Ydxv8scMXaTg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.15.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit/node_modules/@eslint/core": {
      "version": "0.15.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.15.0.tgz",
      "integrity": "sha512-b7ePw78tEWWkpgZCDYkbqDOP8dmM6qe+AOC6iuJqlq1R/0ahMAeH3qynpnqKFGkMltrp44ohV4ubGyvLX28tzw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.6",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.6.tgz",
      "integrity": "sha512-YuI2ZHQL78Q5HbhDiBA1X4LmYdXCKCMQIfw0pw7piHJwyREFebJUvrQN4cMssyES6x+vfUbx1CIpaQUKYdQZOw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.3.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node/node_modules/@humanwhocodes/retry": {
      "version": "0.3.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.3.1.tgz",
      "integrity": "sha512-JBxkERygn7Bv/GbN5Rv8Ul6LVknS+5Bp6RgDC/O8gEBU/yeH5Ui5C/OlWrTb6qct7LjjfT6Re2NxB0ln0yYybA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.8",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.8.tgz",
      "integrity": "sha512-imAbBGkb+ebQyxKgzv5Hu2nmROxoDOXHh80evxdoXNOrvAnVx7zimzc1Oo5h9RlfV4vPXaE2iM5pOFbvOCClWA==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/set-array": "^1.2.1",
        "@jridgewell/sourcemap-codec": "^1.4.10",
        "@jridgewell/trace-mapping": "^0.3.24"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/set-array": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/@jridgewell/set-array/-/set-array-1.2.1.tgz",
      "integrity": "sha512-R8gLRTZeyp03ymzP/6Lil/28tGeGEzhx1q2k703KGWRAI1VdvPIXdG70VJc2pAMw3NA6JKL5hhFu1sJX0Mnn/A==",
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.0.tgz",
      "integrity": "sha512-gv3ZRaISU3fjPAgNsriBRqGWQL6quFx04YMPW/zD8XMLsU32mhCCbfbO6KZFLjvYpCZ8zyDEgqsgf+PwPaM7GQ==",
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.25",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.25.tgz",
      "integrity": "sha512-vNk6aEwybGtawWmy/PzwnGDOjCkLWSD2wqvjGGAgOAwCGWySYXfYoxt00IJkTF+8Lb57DwOb3Aa0o9CApepiYQ==",
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@mui/core-downloads-tracker": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/core-downloads-tracker/-/core-downloads-tracker-7.2.0.tgz",
      "integrity": "sha512-d49s7kEgI5iX40xb2YPazANvo7Bx0BLg/MNRwv+7BVpZUzXj1DaVCKlQTDex3gy/0jsCb4w7AY2uH4t4AJvSog==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      }
    },
    "node_modules/@mui/material": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/material/-/material-7.2.0.tgz",
      "integrity": "sha512-NTuyFNen5Z2QY+I242MDZzXnFIVIR6ERxo7vntFi9K1wCgSwvIl0HcAO2OOydKqqKApE6omRiYhpny1ZhGuH7Q==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6",
        "@mui/core-downloads-tracker": "^7.2.0",
        "@mui/system": "^7.2.0",
        "@mui/types": "^7.4.4",
        "@mui/utils": "^7.2.0",
        "@popperjs/core": "^2.11.8",
        "@types/react-transition-group": "^4.4.12",
        "clsx": "^2.1.1",
        "csstype": "^3.1.3",
        "prop-types": "^15.8.1",
        "react-is": "^19.1.0",
        "react-transition-group": "^4.4.5"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      },
      "peerDependencies": {
        "@emotion/react": "^11.5.0",
        "@emotion/styled": "^11.3.0",
        "@mui/material-pigment-css": "^7.2.0",
        "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0",
        "react": "^17.0.0 || ^18.0.0 || ^19.0.0",
        "react-dom": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/react": {
          "optional": true
        },
        "@emotion/styled": {
          "optional": true
        },
        "@mui/material-pigment-css": {
          "optional": true
        },
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@mui/private-theming": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/private-theming/-/private-theming-7.2.0.tgz",
      "integrity": "sha512-y6N1Yt3T5RMxVFnCh6+zeSWBuQdNDm5/UlM0EAYZzZR/1u+XKJWYQmbpx4e+F+1EpkYi3Nk8KhPiQDi83M3zIw==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6",
        "@mui/utils": "^7.2.0",
        "prop-types": "^15.8.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      },
      "peerDependencies": {
        "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0",
        "react": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@mui/styled-engine": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/styled-engine/-/styled-engine-7.2.0.tgz",
      "integrity": "sha512-yq08xynbrNYcB1nBcW9Fn8/h/iniM3ewRguGJXPIAbHvxEF7Pz95kbEEOAAhwzxMX4okhzvHmk0DFuC5ayvgIQ==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6",
        "@emotion/cache": "^11.14.0",
        "@emotion/serialize": "^1.3.3",
        "@emotion/sheet": "^1.4.0",
        "csstype": "^3.1.3",
        "prop-types": "^15.8.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      },
      "peerDependencies": {
        "@emotion/react": "^11.4.1",
        "@emotion/styled": "^11.3.0",
        "react": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/react": {
          "optional": true
        },
        "@emotion/styled": {
          "optional": true
        }
      }
    },
    "node_modules/@mui/system": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/system/-/system-7.2.0.tgz",
      "integrity": "sha512-PG7cm/WluU6RAs+gNND2R9vDwNh+ERWxPkqTaiXQJGIFAyJ+VxhyKfzpdZNk0z0XdmBxxi9KhFOpgxjehf/O0A==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6",
        "@mui/private-theming": "^7.2.0",
        "@mui/styled-engine": "^7.2.0",
        "@mui/types": "^7.4.4",
        "@mui/utils": "^7.2.0",
        "clsx": "^2.1.1",
        "csstype": "^3.1.3",
        "prop-types": "^15.8.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      },
      "peerDependencies": {
        "@emotion/react": "^11.5.0",
        "@emotion/styled": "^11.3.0",
        "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0",
        "react": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@emotion/react": {
          "optional": true
        },
        "@emotion/styled": {
          "optional": true
        },
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@mui/types": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@mui/types/-/types-7.4.4.tgz",
      "integrity": "sha512-p63yhbX52MO/ajXC7hDHJA5yjzJekvWD3q4YDLl1rSg+OXLczMYPvTuSuviPRCgRX8+E42RXz1D/dz9SxPSlWg==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6"
      },
      "peerDependencies": {
        "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@mui/utils": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/@mui/utils/-/utils-7.2.0.tgz",
      "integrity": "sha512-O0i1GQL6MDzhKdy9iAu5Yr0Sz1wZjROH1o3aoztuivdCXqEeQYnEjTDiRLGuFxI9zrUbTHBwobMyQH5sNtyacw==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.27.6",
        "@mui/types": "^7.4.4",
        "@types/prop-types": "^15.7.15",
        "clsx": "^2.1.1",
        "prop-types": "^15.8.1",
        "react-is": "^19.1.0"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/mui-org"
      },
      "peerDependencies": {
        "@types/react": "^17.0.0 || ^18.0.0 || ^19.0.0",
        "react": "^17.0.0 || ^18.0.0 || ^19.0.0"
      },
      "peerDependenciesMeta": {
        "@types/react": {
          "optional": true
        }
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@popperjs/core": {
      "version": "2.11.8",
      "resolved": "https://registry.npmjs.org/@popperjs/core/-/core-2.11.8.tgz",
      "integrity": "sha512-P1st0aksCrn9sGZhp8GMYwBnQsbvAWsZAX44oXNNvLHGqAOcoVxmjZiohstwQ7SqKnbR47akdNi+uleWD8+g6A==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/popperjs"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.11",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.11.tgz",
      "integrity": "sha512-L/gAA/hyCSuzTF1ftlzUSI/IKr2POHsv1Dd78GfqkR83KMNuswWD61JxGV2L7nRwBBBSDr6R1gCkdTmoN7W4ag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.43.0.tgz",
      "integrity": "sha512-Krjy9awJl6rKbruhQDgivNbD1WuLb8xAclM4IR4cN5pHGAs2oIMMQJEiC3IC/9TZJ+QZkmZhlMO/6MBGxPidpw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.43.0.tgz",
      "integrity": "sha512-ss4YJwRt5I63454Rpj+mXCXicakdFmKnUNxr1dLK+5rv5FJgAxnN7s31a5VchRYxCFWdmnDWKd0wbAdTr0J5EA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.43.0.tgz",
      "integrity": "sha512-eKoL8ykZ7zz8MjgBenEF2OoTNFAPFz1/lyJ5UmmFSz5jW+7XbH1+MAgCVHy72aG59rbuQLcJeiMrP8qP5d/N0A==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.43.0.tgz",
      "integrity": "sha512-SYwXJgaBYW33Wi/q4ubN+ldWC4DzQY62S4Ll2dgfr/dbPoF50dlQwEaEHSKrQdSjC6oIe1WgzosoaNoHCdNuMg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.43.0.tgz",
      "integrity": "sha512-SV+U5sSo0yujrjzBF7/YidieK2iF6E7MdF6EbYxNz94lA+R0wKl3SiixGyG/9Klab6uNBIqsN7j4Y/Fya7wAjQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.43.0.tgz",
      "integrity": "sha512-J7uCsiV13L/VOeHJBo5SjasKiGxJ0g+nQTrBkAsmQBIdil3KhPnSE9GnRon4ejX1XDdsmK/l30IYLiAaQEO0Cg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.43.0.tgz",
      "integrity": "sha512-gTJ/JnnjCMc15uwB10TTATBEhK9meBIY+gXP4s0sHD1zHOaIh4Dmy1X9wup18IiY9tTNk5gJc4yx9ctj/fjrIw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.43.0.tgz",
      "integrity": "sha512-ZJ3gZynL1LDSIvRfz0qXtTNs56n5DI2Mq+WACWZ7yGHFUEirHBRt7fyIk0NsCKhmRhn7WAcjgSkSVVxKlPNFFw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.43.0.tgz",
      "integrity": "sha512-8FnkipasmOOSSlfucGYEu58U8cxEdhziKjPD2FIa0ONVMxvl/hmONtX/7y4vGjdUhjcTHlKlDhw3H9t98fPvyA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.43.0.tgz",
      "integrity": "sha512-KPPyAdlcIZ6S9C3S2cndXDkV0Bb1OSMsX0Eelr2Bay4EsF9yi9u9uzc9RniK3mcUGCLhWY9oLr6er80P5DE6XA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loongarch64-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loongarch64-gnu/-/rollup-linux-loongarch64-gnu-4.43.0.tgz",
      "integrity": "sha512-HPGDIH0/ZzAZjvtlXj6g+KDQ9ZMHfSP553za7o2Odegb/BEfwJcR0Sw0RLNpQ9nC6Gy8s+3mSS9xjZ0n3rhcYg==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-powerpc64le-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-powerpc64le-gnu/-/rollup-linux-powerpc64le-gnu-4.43.0.tgz",
      "integrity": "sha512-gEmwbOws4U4GLAJDhhtSPWPXUzDfMRedT3hFMyRAvM9Mrnj+dJIFIeL7otsv2WF3D7GrV0GIewW0y28dOYWkmw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.43.0.tgz",
      "integrity": "sha512-XXKvo2e+wFtXZF/9xoWohHg+MuRnvO29TI5Hqe9xwN5uN8NKUYy7tXUG3EZAlfchufNCTHNGjEx7uN78KsBo0g==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.43.0.tgz",
      "integrity": "sha512-ruf3hPWhjw6uDFsOAzmbNIvlXFXlBQ4nk57Sec8E8rUxs/AI4HD6xmiiasOOx/3QxS2f5eQMKTAwk7KHwpzr/Q==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.43.0.tgz",
      "integrity": "sha512-QmNIAqDiEMEvFV15rsSnjoSmO0+eJLoKRD9EAa9rrYNwO/XRCtOGM3A5A0X+wmG+XRrw9Fxdsw+LnyYiZWWcVw==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.43.0.tgz",
      "integrity": "sha512-jAHr/S0iiBtFyzjhOkAics/2SrXE092qyqEg96e90L3t9Op8OTzS6+IX0Fy5wCt2+KqeHAkti+eitV0wvblEoQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.43.0.tgz",
      "integrity": "sha512-3yATWgdeXyuHtBhrLt98w+5fKurdqvs8B53LaoKD7P7H7FKOONLsBVMNl9ghPQZQuYcceV5CDyPfyfGpMWD9mQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.43.0.tgz",
      "integrity": "sha512-wVzXp2qDSCOpcBCT5WRWLmpJRIzv23valvcTwMHEobkjippNf+C3ys/+wf07poPkeNix0paTNemB2XrHr2TnGw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.43.0.tgz",
      "integrity": "sha512-fYCTEyzf8d+7diCw8b+asvWDCLMjsCEA8alvtAutqJOJp/wL5hs1rWSqJ1vkjgW0L2NB4bsYJrpKkiIPRR9dvw==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.43.0.tgz",
      "integrity": "sha512-SnGhLiE5rlK0ofq8kzuDkM0g7FN1s5VYY+YSMTibP7CqShxCQvqtNxTARS4xX4PFJfHjG0ZQYX9iGzI3FQh5Aw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.20.7",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.20.7.tgz",
      "integrity": "sha512-dkO5fhS7+/oos4ciWxyEyjWe48zmG6wbCheo/G2ZnHx4fs3EU6YC6UM8rk56gAjNJ9P3MTH2jo5jb92/K6wbng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.20.7"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/parse-json": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/parse-json/-/parse-json-4.0.2.tgz",
      "integrity": "sha512-dISoDXWWQwUquiKsyZ4Ng+HX2KsPL7LyHKHQwgGFEA3IaKac4Obd+h2a/a6waisAoepJlBcx9paWqjA8/HVjCw==",
      "license": "MIT"
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "19.1.8",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-19.1.8.tgz",
      "integrity": "sha512-AwAfQ2Wa5bCx9WP8nZL2uMZWod7J7/JSplxbTmBQ5ms6QpqNYm672H0Vu9ZVKVngQ+ii4R/byguVEUZQyeg44g==",
      "license": "MIT",
      "dependencies": {
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "19.1.6",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-19.1.6.tgz",
      "integrity": "sha512-4hOiT/dwO8Ko0gV1m/TJZYk3y0KBnY9vzDh7W+DH17b2HFSOGgdj33dhihPeuy3l0q23+4e+hoXHV6hCC4dCXw==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^19.0.0"
      }
    },
    "node_modules/@types/react-transition-group": {
      "version": "4.4.12",
      "resolved": "https://registry.npmjs.org/@types/react-transition-group/-/react-transition-group-4.4.12.tgz",
      "integrity": "sha512-8TV6R3h2j7a91c+1DXdJi3Syo69zzIZbz7Lg5tORM5LEJG7X/E6a1V3drRyBRZq7/utz7A+c4OgYLiLcYGHG6w==",
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.34.1.tgz",
      "integrity": "sha512-STXcN6ebF6li4PxwNeFnqF8/2BNDvBupf2OPx2yWNzr6mKNGF7q49VM00Pz5FaomJyqvbXpY6PhO+T9w139YEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.34.1",
        "@typescript-eslint/type-utils": "8.34.1",
        "@typescript-eslint/utils": "8.34.1",
        "@typescript-eslint/visitor-keys": "8.34.1",
        "graphemer": "^1.4.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.34.1",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin/node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.34.1.tgz",
      "integrity": "sha512-4O3idHxhyzjClSMJ0a29AcoK0+YwnEqzI6oz3vlRf3xw0zbzt15MzXwItOlnr5nIth6zlY2RENLsOPvhyrKAQA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.34.1",
        "@typescript-eslint/types": "8.34.1",
        "@typescript-eslint/typescript-estree": "8.34.1",
        "@typescript-eslint/visitor-keys": "8.34.1",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.34.1.tgz",
      "integrity": "sha512-nuHlOmFZfuRwLJKDGQOVc0xnQrAmuq1Mj/ISou5044y1ajGNp2BNliIqp7F2LPQ5sForz8lempMFCovfeS1XoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.34.1",
        "@typescript-eslint/types": "^8.34.1",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.34.1.tgz",
      "integrity": "sha512-beu6o6QY4hJAgL1E8RaXNC071G4Kso2MGmJskCFQhRhg8VOH/FDbC8soP8NHN7e/Hdphwp8G8cE6OBzC8o41ZA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.34.1",
        "@typescript-eslint/visitor-keys": "8.34.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.34.1.tgz",
      "integrity": "sha512-K4Sjdo4/xF9NEeA2khOb7Y5nY6NSXBnod87uniVYW9kHP+hNlDV8trUSFeynA2uxWam4gIWgWoygPrv9VMWrYg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.34.1.tgz",
      "integrity": "sha512-Tv7tCCr6e5m8hP4+xFugcrwTOucB8lshffJ6zf1mF1TbU67R+ntCc6DzLNKM+s/uzDyv8gLq7tufaAhIBYeV8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/typescript-estree": "8.34.1",
        "@typescript-eslint/utils": "8.34.1",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.34.1.tgz",
      "integrity": "sha512-rjLVbmE7HR18kDsjNIZQHxmv9RZwlgzavryL5Lnj2ujIRTeXlKtILHgRNmQ3j4daw7zd+mQgy+uyt6Zo6I0IGA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.34.1.tgz",
      "integrity": "sha512-rjCNqqYPuMUF5ODD+hWBNmOitjBWghkGKJg6hiCHzUvXRy6rK22Jd3rwbP2Xi+R7oYVvIKhokHVhH41BxPV5mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.34.1",
        "@typescript-eslint/tsconfig-utils": "8.34.1",
        "@typescript-eslint/types": "8.34.1",
        "@typescript-eslint/visitor-keys": "8.34.1",
        "debug": "^4.3.4",
        "fast-glob": "^3.3.2",
        "is-glob": "^4.0.3",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree/node_modules/semver": {
      "version": "7.7.2",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
      "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.34.1.tgz",
      "integrity": "sha512-mqOwUdZ3KjtGk7xJJnLbHxTuWVn3GO2WZZuM+Slhkun4+qthLdXx32C8xIXbO1kfCECb3jIs3eoxK3eryk7aoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.34.1",
        "@typescript-eslint/types": "8.34.1",
        "@typescript-eslint/typescript-estree": "8.34.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.34.1.tgz",
      "integrity": "sha512-xoh5rJ+tgsRKoXnkBPFRLZ7rjKM0AfVbC68UZ/ECXoDbfggb9RbEySN359acY1vS3qZ0jVTVWzbtfapwm5ztxw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.34.1",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.5.2",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.5.2.tgz",
      "integrity": "sha512-QNVT3/Lxx99nMQWJWF7K4N6apUEuT0KlZA3mx/mVaoGj3smm/8rc8ezz15J1pcbcjDK0V15rpHetVfya08r76Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.27.4",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.11",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.17.0"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0-beta.0"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.10.0",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.10.0.tgz",
      "integrity": "sha512-/1xYAC4MP/HEG+3duIhFr4ZQXR4sQXOIe+o6sdqzeykGLx6Upp/1p8MHqhINOvGeP7xyNHe7tsiJByc4SSVUxw==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.0",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/babel-plugin-macros": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/babel-plugin-macros/-/babel-plugin-macros-3.1.0.tgz",
      "integrity": "sha512-Cg7TFGpIr01vOQNODXOOaGz2NpCU5gl8x1qJFbb6hbZxR7XrcE2vtbAsTAbJ7/xwJtUuJEw8K8Zr/AE0LHlesg==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.12.5",
        "cosmiconfig": "^7.0.0",
        "resolve": "^1.19.0"
      },
      "engines": {
        "node": ">=10",
        "npm": ">=6"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.25.0",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.25.0.tgz",
      "integrity": "sha512-PJ8gYKeS5e/whHBh8xrwYK+dAvEj7JXtz6uTucnMRB8OiGTsKccFekoRrjajPBHV8oOY+2tI4uxeceSimKwMFA==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "caniuse-lite": "^1.0.30001718",
        "electron-to-chromium": "^1.5.160",
        "node-releases": "^2.0.19",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001723",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001723.tgz",
      "integrity": "sha512-1R/elMjtehrFejxwmexeXAtae5UO9iSyFn6G/I806CYC/BLyyBk1EPhrKBkWhy6wM6Xnm47dSJQec+tLJ39WHw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cosmiconfig": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/cosmiconfig/-/cosmiconfig-7.1.0.tgz",
      "integrity": "sha512-AdmX6xUzdNASswsFtmwSt7Vj8po9IuqXm0UXz7QKPuEUmPB4XyjGfaAr2PSuELMwkRMVH1EpIkX5bTZGRB3eCA==",
      "license": "MIT",
      "dependencies": {
        "@types/parse-json": "^4.0.0",
        "import-fresh": "^3.2.1",
        "parse-json": "^5.0.0",
        "path-type": "^4.0.0",
        "yaml": "^1.10.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/cosmiconfig/node_modules/yaml": {
      "version": "1.10.2",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-1.10.2.tgz",
      "integrity": "sha512-r3vXyErRCYJ7wg28yvBY5VSoAF8ZvlcW9/BwUzEtUsjvX/DKs24dIkuwjtuprwJJHsbyUbLApepYTR1BN4uHrg==",
      "license": "ISC",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/debug": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.1.tgz",
      "integrity": "sha512-KcKCqiftBJcZr++7ykoDIEwSa3XWowTfNPo92BYxjXiyYEVrUQh2aLyhxBCwww+heortUFxEJYcRzosstTEBYQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/dom-helpers": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/dom-helpers/-/dom-helpers-5.2.1.tgz",
      "integrity": "sha512-nRCa7CK3VTrM2NmGkIy4cbK7IZlgBE/PYMn55rrXefr5xXDP0LdtfPnblFDoVdcAfslJ7or6iqAUnx0CCGIWQA==",
      "license": "MIT",
      "dependencies": {
        "@babel/runtime": "^7.8.7",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.168",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.168.tgz",
      "integrity": "sha512-RUNQmFLNIWVW6+z32EJQ5+qx8ci6RGvdtDC0Ls+F89wz6I2AthpXF0w0DIrn2jpLX0/PU9ZCo+Qp7bg/EckJmA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/error-ex": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/error-ex/-/error-ex-1.3.2.tgz",
      "integrity": "sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==",
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.2.1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.5",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.5.tgz",
      "integrity": "sha512-P8OtKZRv/5J5hhz0cUAdu/cLuPIKXpQl1R9pZtvmHWQvrAUVd0UNIPT4IB4W3rNOqVO0rlqHmCIbSwxh/c9yUQ==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.5",
        "@esbuild/android-arm": "0.25.5",
        "@esbuild/android-arm64": "0.25.5",
        "@esbuild/android-x64": "0.25.5",
        "@esbuild/darwin-arm64": "0.25.5",
        "@esbuild/darwin-x64": "0.25.5",
        "@esbuild/freebsd-arm64": "0.25.5",
        "@esbuild/freebsd-x64": "0.25.5",
        "@esbuild/linux-arm": "0.25.5",
        "@esbuild/linux-arm64": "0.25.5",
        "@esbuild/linux-ia32": "0.25.5",
        "@esbuild/linux-loong64": "0.25.5",
        "@esbuild/linux-mips64el": "0.25.5",
        "@esbuild/linux-ppc64": "0.25.5",
        "@esbuild/linux-riscv64": "0.25.5",
        "@esbuild/linux-s390x": "0.25.5",
        "@esbuild/linux-x64": "0.25.5",
        "@esbuild/netbsd-arm64": "0.25.5",
        "@esbuild/netbsd-x64": "0.25.5",
        "@esbuild/openbsd-arm64": "0.25.5",
        "@esbuild/openbsd-x64": "0.25.5",
        "@esbuild/sunos-x64": "0.25.5",
        "@esbuild/win32-arm64": "0.25.5",
        "@esbuild/win32-ia32": "0.25.5",
        "@esbuild/win32-x64": "0.25.5"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "9.29.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.29.0.tgz",
      "integrity": "sha512-GsGizj2Y1rCWDu6XoEekL3RLilp0voSePurjZIkxL3wlm5o5EC9VpgaP7lrCvjnkuLvzFBQWB3vWB3K5KQTveQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.20.1",
        "@eslint/config-helpers": "^0.2.1",
        "@eslint/core": "^0.14.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.29.0",
        "@eslint/plugin-kit": "^0.3.1",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "@types/json-schema": "^7.0.15",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.2.0.tgz",
      "integrity": "sha512-+f15FfK64YQwZdJNELETdn5ibXEUQmW1DZL6KXhNnc2heoy/sg9VJJeT7n8TlMWouzWqSWavFkIhHyIbIAEapg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.20",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.20.tgz",
      "integrity": "sha512-XpbHQ2q5gUF8BGOX4dHe+71qoirYMhApEPZ7sfhF/dNnOF1UXnCMGZf79SFTBO7Bz5YEIT4TMieSlJBWhP9WBA==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/find-root": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/find-root/-/find-root-1.1.0.tgz",
      "integrity": "sha512-NKfW6bec6GfKc0SGx1e07QZY9PE99u0Bft/0rzSD5k3sO/vwkVUpDUKVm5Gpp5Ue3YfShPFTX2070tDs5kB9Ng==",
      "license": "MIT"
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.9",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.9.tgz",
      "integrity": "sha512-gew4GsXizNgdoRyqmyfMHyAmXsZDk6mHkSxZFCzW9gwlbtOW44CDtYavM+y+72qD/Vq2l550kMF52DT8fOLJqQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.3.tgz",
      "integrity": "sha512-qsITQPfmvMOSAdeyZ+12I1c+CKSstAFAwu+97zrnWAbIr5u8wfsExUzCesVLC8NgHuRUqNN4Zy6UPWUTRGslcA==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/globals": {
      "version": "16.2.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-16.2.0.tgz",
      "integrity": "sha512-O+7l9tPdHCU320IigZZPj5zmRCFG9xHmx9cU8FqU2Rp+JN714seHV+2S9+JslCpY4gJwU2vOGox0wzgae/MCEg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hoist-non-react-statics": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/hoist-non-react-statics/-/hoist-non-react-statics-3.3.2.tgz",
      "integrity": "sha512-/gGivxi8JPKWNm/W0jSmzcMPpfpPLc3dY/6GxhX2hQ9iGj3aDfklV4ET7NjKpSinLpJ5vafa9iiGIEZg10SfBw==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "react-is": "^16.7.0"
      }
    },
    "node_modules/hoist-non-react-statics/node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "license": "MIT"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/is-arrayish": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.2.1.tgz",
      "integrity": "sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==",
      "license": "MIT"
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-even-better-errors": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz",
      "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.19",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.19.tgz",
      "integrity": "sha512-xxOWJsBKtzAq7DY0J+DTzuz58K8e7sJbdgwkbMWQe8UYB6ekmsQ45q0M/tJDsGaZmbC+l7n57UV8Hl5tHxO9uw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-json": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/parse-json/-/parse-json-5.2.0.tgz",
      "integrity": "sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==",
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.0.0",
        "error-ex": "^1.3.1",
        "json-parse-even-better-errors": "^2.3.0",
        "lines-and-columns": "^1.1.6"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "license": "MIT"
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prop-types": {
      "version": "15.8.1",
      "resolved": "https://registry.npmjs.org/prop-types/-/prop-types-15.8.1.tgz",
      "integrity": "sha512-oj87CgZICdulUohogVAR7AjlC0327U4el4L6eAvOqCeudMDVU0NThNaV+b9Df4dXgSP1gXMTnPdhfe/2qDH5cg==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.4.0",
        "object-assign": "^4.1.1",
        "react-is": "^16.13.1"
      }
    },
    "node_modules/prop-types/node_modules/react-is": {
      "version": "16.13.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-16.13.1.tgz",
      "integrity": "sha512-24e6ynE2H+OKt4kqsOvNd8kBpV65zoxbA4BVsEOB3ARVWQki/DHzaUoC5KuON/BiccDaCCTZBuOcfZs70kR8bQ==",
      "license": "MIT"
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/react": {
      "version": "19.1.0",
      "resolved": "https://registry.npmjs.org/react/-/react-19.1.0.tgz",
      "integrity": "sha512-FS+XFBNvn3GTAWq26joslQgWNoFu08F4kl0J4CgdNKADkdSGXQyTCnKteIAJy96Br6YbpEU1LSzV5dYtjMkMDg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "19.1.0",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-19.1.0.tgz",
      "integrity": "sha512-Xs1hdnE+DyKgeHJeJznQmYMIBG3TKIHJJT95Q58nHLSrElKlGQqDTR2HQ9fx5CN/Gk6Vh/kupBTDLU11/nDk/g==",
      "license": "MIT",
      "dependencies": {
        "scheduler": "^0.26.0"
      },
      "peerDependencies": {
        "react": "^19.1.0"
      }
    },
    "node_modules/react-is": {
      "version": "19.1.0",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-19.1.0.tgz",
      "integrity": "sha512-Oe56aUPnkHyyDxxkvqtd7KkdQP5uIUfHxd5XTb3wE9d/kRnZLmKbDB0GWk919tdQ+mxxPtG6EAs6RMT6i1qtHg==",
      "license": "MIT"
    },
    "node_modules/react-refresh": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.17.0.tgz",
      "integrity": "sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-toastify": {
      "version": "11.0.5",
      "resolved": "https://registry.npmjs.org/react-toastify/-/react-toastify-11.0.5.tgz",
      "integrity": "sha512-EpqHBGvnSTtHYhCPLxML05NLY2ZX0JURbAdNYa6BUkk+amz4wbKBQvoKQAB0ardvSarUBuY4Q4s1sluAzZwkmA==",
      "license": "MIT",
      "dependencies": {
        "clsx": "^2.1.1"
      },
      "peerDependencies": {
        "react": "^18 || ^19",
        "react-dom": "^18 || ^19"
      }
    },
    "node_modules/react-transition-group": {
      "version": "4.4.5",
      "resolved": "https://registry.npmjs.org/react-transition-group/-/react-transition-group-4.4.5.tgz",
      "integrity": "sha512-pZcd1MCJoiKiBR2NRxeCRg13uCXbydPnmB4EOeRrY7480qNWO8IIgQG6zlDkm6uRMsURXPuKq0GWtiM59a5Q6g==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/runtime": "^7.5.5",
        "dom-helpers": "^5.0.1",
        "loose-envify": "^1.4.0",
        "prop-types": "^15.6.2"
      },
      "peerDependencies": {
        "react": ">=16.6.0",
        "react-dom": ">=16.6.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rollup": {
      "version": "4.43.0",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.43.0.tgz",
      "integrity": "sha512-wdN2Kd3Twh8MAEOEJZsuxuLKCsBEo4PVNLK6tQWAn10VhsVewQLzcucMgLolRlhFybGxfclbPeEYBaP6RvUFGg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.7"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.43.0",
        "@rollup/rollup-android-arm64": "4.43.0",
        "@rollup/rollup-darwin-arm64": "4.43.0",
        "@rollup/rollup-darwin-x64": "4.43.0",
        "@rollup/rollup-freebsd-arm64": "4.43.0",
        "@rollup/rollup-freebsd-x64": "4.43.0",
        "@rollup/rollup-linux-arm-gnueabihf": "4.43.0",
        "@rollup/rollup-linux-arm-musleabihf": "4.43.0",
        "@rollup/rollup-linux-arm64-gnu": "4.43.0",
        "@rollup/rollup-linux-arm64-musl": "4.43.0",
        "@rollup/rollup-linux-loongarch64-gnu": "4.43.0",
        "@rollup/rollup-linux-powerpc64le-gnu": "4.43.0",
        "@rollup/rollup-linux-riscv64-gnu": "4.43.0",
        "@rollup/rollup-linux-riscv64-musl": "4.43.0",
        "@rollup/rollup-linux-s390x-gnu": "4.43.0",
        "@rollup/rollup-linux-x64-gnu": "4.43.0",
        "@rollup/rollup-linux-x64-musl": "4.43.0",
        "@rollup/rollup-win32-arm64-msvc": "4.43.0",
        "@rollup/rollup-win32-ia32-msvc": "4.43.0",
        "@rollup/rollup-win32-x64-msvc": "4.43.0",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/rollup/node_modules/@types/estree": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.7.tgz",
      "integrity": "sha512-w28IoSUCJpidD/TGviZwwMJckNESJZXFu7NBZ5YJ4mEUnNraUn9Pm8HSZm/jDF1pDWYKspWE7oVphigUPRakIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/scheduler": {
      "version": "0.26.0",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.26.0.tgz",
      "integrity": "sha512-NlHwttCI/l5gCPR3D1nNXtWABUmBwvZpEQiD4IXSbIDq8BzLIK/7Ir5gTFSGZDUu37K5cMNp0hFtzO38sC7gWA==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map": {
      "version": "0.5.7",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.5.7.tgz",
      "integrity": "sha512-LbrmJOMUSdEVxIKvdcJzQC+nQhe8FUZQTXQy6+I75skNgn3OoQ0DZA8YnFa7gp8tqtL3KPf1kmo0R5DoApeSGQ==",
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/stylis": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/stylis/-/stylis-4.2.0.tgz",
      "integrity": "sha512-Orov6g6BB1sDfYgzWfTHDOxamtX1bE/zo104Dh9e6fqJ3PooipYyfJ0pUmrZO2wAvO8YbEyeFrkV91XTsGMSrw==",
      "license": "MIT"
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tailwindcss": {
      "version": "4.1.11",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-4.1.11.tgz",
      "integrity": "sha512-2E9TBm6MDD/xKYe+dvJZAmg3yxIEDNRc0jwlNyDg/4Fil2QcSLjFKGVff0lAf1jjeaArlG/M75Ey/EYr/OJtBA==",
      "license": "MIT"
    },
    "node_modules/tinyglobby": {
      "version": "0.2.14",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.14.tgz",
      "integrity": "sha512-tX5e7OM1HnYr2+a2C/4V0htOcSQcoSTH9KgJnVvNm5zm/cyEWKJ7j7YutsH9CxMdtOkkLFy2AHrMci9IM8IPZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.4.6",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.4.6.tgz",
      "integrity": "sha512-hiFoqpyZcfNm1yc4u8oWCf9A2c4D3QjCrks3zmoVKVxpQRzmPNar1hUJcBG2RQHvEVGDN+Jm81ZheVLAQMK6+w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.2.tgz",
      "integrity": "sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/typescript": {
      "version": "5.8.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.8.3.tgz",
      "integrity": "sha512-p1diW6TqL9L07nNxvRMM7hMMw4c5XOo/1ibL4aAIGmSAt9slTE1Xgw5KWuof2uTOvCg9BY7ZRi+GaF+7sfgPeQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/typescript-eslint": {
      "version": "8.34.1",
      "resolved": "https://registry.npmjs.org/typescript-eslint/-/typescript-eslint-8.34.1.tgz",
      "integrity": "sha512-XjS+b6Vg9oT1BaIUfkW3M3LvqZE++rbzAMEHuccCfO/YkP43ha6w3jTEMilQxMF92nVOYCcdjv1ZUhAa1D/0ow==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/eslint-plugin": "8.34.1",
        "@typescript-eslint/parser": "8.34.1",
        "@typescript-eslint/utils": "8.34.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <5.9.0"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/vite": {
      "version": "6.3.5",
      "resolved": "https://registry.npmjs.org/vite/-/vite-6.3.5.tgz",
      "integrity": "sha512-cZn6NDFE7wdTpINgs++ZJ4N49W2vRp8LCKrn3Ob1kYNtOo21vfDoaV5GzBfLU4MovSAB8uNRm4jgzVQZ+mBzPQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2",
        "postcss": "^8.5.3",
        "rollup": "^4.34.9",
        "tinyglobby": "^0.2.13"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
        "jiti": ">=1.21.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/fdir": {
      "version": "6.4.6",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.4.6.tgz",
      "integrity": "sha512-hiFoqpyZcfNm1yc4u8oWCf9A2c4D3QjCrks3zmoVKVxpQRzmPNar1hUJcBG2RQHvEVGDN+Jm81ZheVLAQMK6+w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/picomatch": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.2.tgz",
      "integrity": "sha512-M7BAV6Rlcy5u+m6oPhAPFgJTzAioX/6B0DxyvDlo9l8+T3nLKbrczg2WLUyzd45L8RqfUMyGPzekbMvX2Ldkwg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.0",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.0.tgz",
      "integrity": "sha512-4lLa/EcQCB0cJkyts+FpIRx5G/llPxfP6VQU5KByHEhLxY3IJCH0f0Hy1MHI8sClTvsIb8qwRJ6R/ZdlDJ/leQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "peer": true,
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    }
  }
}

```

`proyecto-pos-finanzas/frontend/package.json`:

```json
{
  "name": "frontend",
  "private": true,
  "version": "0.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc -b && vite build",
    "lint": "eslint .",
    "preview": "vite preview"
  },
  "dependencies": {
    "@emotion/react": "^11.14.0",
    "@emotion/styled": "^11.14.1",
    "@mui/material": "^7.2.0",
    "axios": "^1.10.0",
    "react": "^19.1.0",
    "react-dom": "^19.1.0",
    "react-toastify": "^11.0.5",
    "tailwindcss": "^4.1.11"
  },
  "devDependencies": {
    "@eslint/js": "^9.25.0",
    "@types/react": "^19.1.2",
    "@types/react-dom": "^19.1.2",
    "@vitejs/plugin-react": "^4.4.1",
    "eslint": "^9.25.0",
    "eslint-plugin-react-hooks": "^5.2.0",
    "eslint-plugin-react-refresh": "^0.4.19",
    "globals": "^16.0.0",
    "typescript": "~5.8.3",
    "typescript-eslint": "^8.30.1",
    "vite": "^6.3.5"
  }
}

```

`proyecto-pos-finanzas/frontend/public/vite.svg`:

```svg
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="31.88" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 257"><defs><linearGradient id="IconifyId1813088fe1fbc01fb466" x1="-.828%" x2="57.636%" y1="7.652%" y2="78.411%"><stop offset="0%" stop-color="#41D1FF"></stop><stop offset="100%" stop-color="#BD34FE"></stop></linearGradient><linearGradient id="IconifyId1813088fe1fbc01fb467" x1="43.376%" x2="50.316%" y1="2.242%" y2="89.03%"><stop offset="0%" stop-color="#FFEA83"></stop><stop offset="8.333%" stop-color="#FFDD35"></stop><stop offset="100%" stop-color="#FFA800"></stop></linearGradient></defs><path fill="url(#IconifyId1813088fe1fbc01fb466)" d="M255.153 37.938L134.897 252.976c-2.483 4.44-8.862 4.466-11.382.048L.875 37.958c-2.746-4.814 1.371-10.646 6.827-9.67l120.385 21.517a6.537 6.537 0 0 0 2.322-.004l117.867-21.483c5.438-.991 9.574 4.796 6.877 9.62Z"></path><path fill="url(#IconifyId1813088fe1fbc01fb467)" d="M185.432.063L96.44 17.501a3.268 3.268 0 0 0-2.634 3.014l-5.474 92.456a3.268 3.268 0 0 0 3.997 3.378l24.777-5.718c2.318-.535 4.413 1.507 3.936 3.838l-7.361 36.047c-.495 2.426 1.782 4.5 4.151 3.78l15.304-4.649c2.372-.72 4.652 1.36 4.15 3.788l-11.698 56.621c-.732 3.542 3.979 5.473 5.943 2.437l1.313-2.028l72.516-144.72c1.215-2.423-.88-5.186-3.54-4.672l-25.505 4.922c-2.396.462-4.435-1.77-3.759-4.114l16.646-57.705c.677-2.35-1.37-4.583-3.769-4.113Z"></path></svg>
```

`proyecto-pos-finanzas/frontend/src/App.css`:

```css
/* App Component Styles */
.App {
  width: 100%;
  min-height: 100vh;
}

/* Comentario para forzar despliegue */

/* Header responsivo mejorado */
.app-header {
  background-color: var(--md-surface-container);
  border-bottom: 1px solid var(--md-outline-variant);
  box-shadow: var(--md-elevation-1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.app-header__content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--md-spacing-md);
  min-height: 64px;
}

.app-header__back-btn {
  gap: var(--md-spacing-sm);
}

.app-header__back-icon,
.app-header__logout-icon {
  width: 20px;
  height: 20px;
}

.app-header__title {
  color: var(--md-on-surface);
  margin: 0;
  font-weight: 500;
  flex: 1;
  text-align: center;
}

.app-header__logout-btn {
  gap: var(--md-spacing-sm);
  color: var(--md-error);
}

.app-header__logout-btn:hover {
  background-color: var(--md-error-container);
}

/* Responsividad del header */
@media (max-width: 768px) {
  .app-header__content {
    padding: var(--md-spacing-md);
    flex-wrap: wrap;
  }
  
  .app-header__back-text,
  .app-header__logout-text {
    display: none;
  }
  
  .app-header__back-btn,
  .app-header__logout-btn {
    min-width: 48px;
    padding: var(--md-spacing-md);
  }
  
  .app-header__title {
    font-size: var(--md-title-medium);
  }
}

@media (max-width: 480px) {
  .app-header__content {
    padding: var(--md-spacing-sm) var(--md-spacing-md);
    min-height: 56px;
  }
  
  .app-header__title {
    font-size: var(--md-body-large);
  }
}

/* Mejoras para el layout de inventario */
.inventory-layout {
  min-height: calc(100vh - 64px);
  background-color: var(--md-surface);
}

.inventory-layout__content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
}

@media (max-width: 768px) {
  .inventory-layout {
    min-height: calc(100vh - 56px);
  }
  
  .inventory-layout__content {
    padding: var(--md-spacing-md);
  }
}

/* Inventory Screen Styles */
.inventory-screen {
  min-height: 100vh;
  background-color: var(--md-surface);
  display: flex;
  flex-direction: column;
}

.inventory-screen__header {
  background-color: var(--md-surface-container);
  border-bottom: 1px solid var(--md-outline-variant);
  box-shadow: var(--md-elevation-1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.inventory-screen__header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
}

.inventory-screen__nav {
  display: flex;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
  flex: 1;
}

.inventory-screen__back-btn {
  gap: var(--md-spacing-sm);
  flex-shrink: 0;
}

.inventory-screen__back-icon {
  width: 18px;
  height: 18px;
}

.inventory-screen__title-section h1 {
  margin: 0 0 var(--md-spacing-xs) 0;
  color: var(--md-on-surface);
}

.inventory-screen__title-section p {
  margin: 0;
  color: var(--md-on-surface-variant);
}

.inventory-screen__main {
  flex: 1;
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
  width: 100%;
}

/* Legacy styles for compatibility */
.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}

.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}

.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2em;
}

.read-the-docs {
  color: #888;
}

```

`proyecto-pos-finanzas/frontend/src/App.tsx`:

```tsx
import { useState } from 'react';
import { ToastContainer } from 'react-toastify';
import { AuthProvider } from './contexts/AuthContext';
import { useAuth } from './hooks/useAuth';
import LoginScreen from './components/LoginScreen';
import MainMenu from './components/MainMenu';
import WorkspaceScreen from './components/WorkspaceScreen';
import Inventario from './components/Inventario';
import PuntoDeVenta from './components/PuntoDeVenta';
import GestionEmpleados from './components/GestionEmpleados';
import SeleccionProveedores from './components/SeleccionProveedores';
import PuntoDeCompras from './components/PuntoDeCompras';
import ProtectedRoute from './components/ProtectedRoute';
import type { Proveedor } from './types';
import './App.css';
import 'react-toastify/dist/ReactToastify.css';

type AppState = 'login' | 'main-menu' | 'workspaces' | 'inventario' | 'punto-de-venta' | 'empleados' | 'seleccion-proveedores' | 'compras';

function App() {
  const [appState, setAppState] = useState<AppState>('login');
  const [selectedWorkspaceId, setSelectedWorkspaceId] = useState<string>('');
  const [selectedProveedor, setSelectedProveedor] = useState<Proveedor | null>(null);
  
  // Usar el hook de autenticación
  const { logout: authLogout, isAuthenticated } = useAuth();

  const handleLoginSuccess = () => {
    // Solo cambiar al menú principal - AuthContext ya tiene la información del usuario
    setAppState('main-menu');
  };

  const handleLogout = () => {
    // Limpiar el contexto de autenticación
    authLogout();
    // Volver al login
    setAppState('login');
  };

  const handlePuntoDeVentaClick = () => {
    setAppState('workspaces');
  };

  const handleInventarioClick = () => {
    setAppState('inventario');
  };

  const handleEmpleadosClick = () => {
    setAppState('empleados');
  };

  const handleBackToMainMenu = () => {
    setAppState('main-menu');
  };

  const handleWorkspaceSelect = (workspaceId: string) => {
    // Guardar el workspace seleccionado y navegar al punto de venta
    setSelectedWorkspaceId(workspaceId);
    setAppState('punto-de-venta');
  };

  const handleBackToWorkspaces = () => {
    setAppState('workspaces');
  };

  const handleNavigateToCompras = () => {
    setAppState('seleccion-proveedores');
  };

  const handleProveedorSelect = (proveedor: Proveedor) => {
    setSelectedProveedor(proveedor);
    setAppState('compras');
  };

  const handleBackToInventario = () => {
    setAppState('inventario');
  };

  const handleBackToProveedores = () => {
    setAppState('seleccion-proveedores');
  };

  switch (appState) {
    case 'login':
      return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
    
    case 'main-menu':
      if (!isAuthenticated) return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
      return (
        <MainMenu 
          onPuntoDeVentaClick={handlePuntoDeVentaClick}
          onInventarioClick={handleInventarioClick}
          onEmpleadosClick={handleEmpleadosClick}
          onLogout={handleLogout}
        />
      );
    
    case 'workspaces':
      if (!isAuthenticated) return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
      return (
        <WorkspaceScreen 
          onWorkspaceSelect={handleWorkspaceSelect}
          onBackToMainMenu={handleBackToMainMenu}
        />
      );
    
    case 'punto-de-venta':
      if (!isAuthenticated) return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
      return (
        <PuntoDeVenta
          workspaceId={selectedWorkspaceId}
          onBackToWorkspaces={handleBackToWorkspaces}
        />
      );
    
    case 'inventario':
      return (
        <ProtectedRoute adminOnly={true}>
          <div className="inventory-screen">
            {/* Header */}
            <header className="inventory-screen__header">
              <div className="inventory-screen__header-content">
                <div className="inventory-screen__nav">
                  <button
                    onClick={handleBackToMainMenu}
                    className="md-button md-button--outlined inventory-screen__back-btn"
                    aria-label="Volver al menú principal"
                  >
                    <svg className="inventory-screen__back-icon" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
                    </svg>
                    <span>Volver</span>
                  </button>
                  <div className="inventory-screen__title-section">
                    <h1 className="md-headline-medium">Inventario</h1>
                    <p className="md-body-medium">Gestión de productos y stock</p>
                  </div>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="inventory-screen__main">
              <Inventario onNavigateToCompras={handleNavigateToCompras} />
            </main>
          </div>
        </ProtectedRoute>
      );
    
    case 'empleados':
      if (!isAuthenticated) return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
      return (
        <ProtectedRoute adminOnly={true}>
          <div className="min-h-screen bg-gray-50">
            {/* Header */}
            <header className="bg-white shadow-sm border-b border-gray-200">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div className="flex justify-between items-center h-16">
                  <div className="flex items-center">
                    <button
                      onClick={handleBackToMainMenu}
                      style={{
                        backgroundColor: '#f44336',
                        color: 'white',
                        border: 'none',
                        padding: '12px 24px',
                        borderRadius: '6px',
                        fontWeight: '600',
                        fontSize: '14px',
                        cursor: 'pointer',
                        transition: 'all 0.2s ease',
                        boxShadow: '0 2px 4px rgba(244, 67, 54, 0.3)',
                        minHeight: '40px',
                        minWidth: '140px',
                        display: 'inline-flex',
                        alignItems: 'center',
                        justifyContent: 'center'
                      }}
                      onMouseOver={(e) => {
                        e.currentTarget.style.backgroundColor = '#d32f2f';
                        e.currentTarget.style.boxShadow = '0 4px 8px rgba(244, 67, 54, 0.4)';
                        e.currentTarget.style.transform = 'translateY(-1px)';
                      }}
                      onMouseOut={(e) => {
                        e.currentTarget.style.backgroundColor = '#f44336';
                        e.currentTarget.style.boxShadow = '0 2px 4px rgba(244, 67, 54, 0.3)';
                        e.currentTarget.style.transform = 'translateY(0)';
                      }}
                      onMouseDown={(e) => {
                        e.currentTarget.style.transform = 'translateY(0)';
                        e.currentTarget.style.boxShadow = '0 2px 4px rgba(244, 67, 54, 0.3)';
                      }}
                    >
                      ← Volver al Menú
                    </button>
                  </div>
                </div>
              </div>
            </header>

            {/* Main Content */}
            <main className="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
              <div className="px-4 py-6 sm:px-0">
                <GestionEmpleados />
              </div>
            </main>
          </div>
        </ProtectedRoute>
      );
    
    case 'seleccion-proveedores':
      return (
        <ProtectedRoute adminOnly={true}>
          <SeleccionProveedores 
            onProveedorSelect={handleProveedorSelect}
            onBackToInventario={handleBackToInventario}
          />
        </ProtectedRoute>
      );
    
    case 'compras':
      if (!selectedProveedor) {
        // Si no hay proveedor seleccionado, volver a la selección
        setAppState('seleccion-proveedores');
        return null;
      }
      return (
        <ProtectedRoute adminOnly={true}>
          <PuntoDeCompras 
            proveedor={selectedProveedor}
            onBackToProveedores={handleBackToProveedores}
          />
        </ProtectedRoute>
      );
    
    default:
      return <LoginScreen onLoginSuccess={handleLoginSuccess} />;
  }
}

function AppWithToast() {
  return (
    <AuthProvider>
      <App />
      <ToastContainer 
        position="top-right"
        autoClose={8000}
        hideProgressBar={false}
        newestOnTop={false}
        closeOnClick
        rtl={false}
        pauseOnFocusLoss
        draggable
        pauseOnHover
        style={{ zIndex: 99999 }}
        toastStyle={{
          fontSize: '16px',
          fontWeight: '500',
          padding: '16px',
          borderRadius: '8px',
          boxShadow: '0 8px 32px rgba(0, 0, 0, 0.3)',
          minHeight: '80px',
        }}
      />
    </AuthProvider>
  );
}

export default AppWithToast;

```

`proyecto-pos-finanzas/frontend/src/TestComponent.tsx`:

```tsx
const TestComponent = () => {
  return (
    <div style={{ padding: '20px', background: 'lightblue' }}>
      <h1>Test Component</h1>
      <p>Si puedes ver esto, React está funcionando correctamente.</p>
    </div>
  );
};

export default TestComponent;

```

`proyecto-pos-finanzas/frontend/src/assets/react.svg`:

```svg
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--logos" width="35.93" height="32" preserveAspectRatio="xMidYMid meet" viewBox="0 0 256 228"><path fill="#00D8FF" d="M210.483 73.824a171.49 171.49 0 0 0-8.24-2.597c.465-1.9.893-3.777 1.273-5.621c6.238-30.281 2.16-54.676-11.769-62.708c-13.355-7.7-35.196.329-57.254 19.526a171.23 171.23 0 0 0-6.375 5.848a155.866 155.866 0 0 0-4.241-3.917C100.759 3.829 77.587-4.822 63.673 3.233C50.33 10.957 46.379 33.89 51.995 62.588a170.974 170.974 0 0 0 1.892 8.48c-3.28.932-6.445 1.924-9.474 2.98C17.309 83.498 0 98.307 0 113.668c0 15.865 18.582 31.778 46.812 41.427a145.52 145.52 0 0 0 6.921 2.165a167.467 167.467 0 0 0-2.01 9.138c-5.354 28.2-1.173 50.591 12.134 58.266c13.744 7.926 36.812-.22 59.273-19.855a145.567 145.567 0 0 0 5.342-4.923a168.064 168.064 0 0 0 6.92 6.314c21.758 18.722 43.246 26.282 56.54 18.586c13.731-7.949 18.194-32.003 12.4-61.268a145.016 145.016 0 0 0-1.535-6.842c1.62-.48 3.21-.974 4.76-1.488c29.348-9.723 48.443-25.443 48.443-41.52c0-15.417-17.868-30.326-45.517-39.844Zm-6.365 70.984c-1.4.463-2.836.91-4.3 1.345c-3.24-10.257-7.612-21.163-12.963-32.432c5.106-11 9.31-21.767 12.459-31.957c2.619.758 5.16 1.557 7.61 2.4c23.69 8.156 38.14 20.213 38.14 29.504c0 9.896-15.606 22.743-40.946 31.14Zm-10.514 20.834c2.562 12.94 2.927 24.64 1.23 33.787c-1.524 8.219-4.59 13.698-8.382 15.893c-8.067 4.67-25.32-1.4-43.927-17.412a156.726 156.726 0 0 1-6.437-5.87c7.214-7.889 14.423-17.06 21.459-27.246c12.376-1.098 24.068-2.894 34.671-5.345a134.17 134.17 0 0 1 1.386 6.193ZM87.276 214.515c-7.882 2.783-14.16 2.863-17.955.675c-8.075-4.657-11.432-22.636-6.853-46.752a156.923 156.923 0 0 1 1.869-8.499c10.486 2.32 22.093 3.988 34.498 4.994c7.084 9.967 14.501 19.128 21.976 27.15a134.668 134.668 0 0 1-4.877 4.492c-9.933 8.682-19.886 14.842-28.658 17.94ZM50.35 144.747c-12.483-4.267-22.792-9.812-29.858-15.863c-6.35-5.437-9.555-10.836-9.555-15.216c0-9.322 13.897-21.212 37.076-29.293c2.813-.98 5.757-1.905 8.812-2.773c3.204 10.42 7.406 21.315 12.477 32.332c-5.137 11.18-9.399 22.249-12.634 32.792a134.718 134.718 0 0 1-6.318-1.979Zm12.378-84.26c-4.811-24.587-1.616-43.134 6.425-47.789c8.564-4.958 27.502 2.111 47.463 19.835a144.318 144.318 0 0 1 3.841 3.545c-7.438 7.987-14.787 17.08-21.808 26.988c-12.04 1.116-23.565 2.908-34.161 5.309a160.342 160.342 0 0 1-1.76-7.887Zm110.427 27.268a347.8 347.8 0 0 0-7.785-12.803c8.168 1.033 15.994 2.404 23.343 4.08c-2.206 7.072-4.956 14.465-8.193 22.045a381.151 381.151 0 0 0-7.365-13.322Zm-45.032-43.861c5.044 5.465 10.096 11.566 15.065 18.186a322.04 322.04 0 0 0-30.257-.006c4.974-6.559 10.069-12.652 15.192-18.18ZM82.802 87.83a323.167 323.167 0 0 0-7.227 13.238c-3.184-7.553-5.909-14.98-8.134-22.152c7.304-1.634 15.093-2.97 23.209-3.984a321.524 321.524 0 0 0-7.848 12.897Zm8.081 65.352c-8.385-.936-16.291-2.203-23.593-3.793c2.26-7.3 5.045-14.885 8.298-22.6a321.187 321.187 0 0 0 7.257 13.246c2.594 4.48 5.28 8.868 8.038 13.147Zm37.542 31.03c-5.184-5.592-10.354-11.779-15.403-18.433c4.902.192 9.899.29 14.978.29c5.218 0 10.376-.117 15.453-.343c-4.985 6.774-10.018 12.97-15.028 18.486Zm52.198-57.817c3.422 7.8 6.306 15.345 8.596 22.52c-7.422 1.694-15.436 3.058-23.88 4.071a382.417 382.417 0 0 0 7.859-13.026a347.403 347.403 0 0 0 7.425-13.565Zm-16.898 8.101a358.557 358.557 0 0 1-12.281 19.815a329.4 329.4 0 0 1-23.444.823c-7.967 0-15.716-.248-23.178-.732a310.202 310.202 0 0 1-12.513-19.846h.001a307.41 307.41 0 0 1-10.923-20.627a310.278 310.278 0 0 1 10.89-20.637l-.001.001a307.318 307.318 0 0 1 12.413-19.761c7.613-.576 15.42-.876 23.31-.876H128c7.926 0 15.743.303 23.354.883a329.357 329.357 0 0 1 12.335 19.695a358.489 358.489 0 0 1 11.036 20.54a329.472 329.472 0 0 1-11 20.722Zm22.56-122.124c8.572 4.944 11.906 24.881 6.52 51.026c-.344 1.668-.73 3.367-1.15 5.09c-10.622-2.452-22.155-4.275-34.23-5.408c-7.034-10.017-14.323-19.124-21.64-27.008a160.789 160.789 0 0 1 5.888-5.4c18.9-16.447 36.564-22.941 44.612-18.3ZM128 90.808c12.625 0 22.86 10.235 22.86 22.86s-10.235 22.86-22.86 22.86s-22.86-10.235-22.86-22.86s10.235-22.86 22.86-22.86Z"></path></svg>
```

`proyecto-pos-finanzas/frontend/src/components/DeudasProveedores.css`:

```css
/* Estilos para el componente DeudasProveedores */

.deudas-proveedores {
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 15px;
  border-bottom: 2px solid #e0e0e0;
}

.header h1 {
  color: #2c3e50;
  margin: 0;
  font-size: 2rem;
  font-weight: 600;
}

.btn-actualizar {
  background: #3498db;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.3s ease;
}

.btn-actualizar:hover {
  background: #2980b9;
}

.btn-actualizar:disabled {
  background: #bdc3c7;
  cursor: not-allowed;
}

/* Estadísticas */
.estadisticas {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.tarjeta-estadistica {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.tarjeta-estadistica h3 {
  margin: 0 0 10px 0;
  font-size: 16px;
  opacity: 0.9;
}

.tarjeta-estadistica .numero {
  font-size: 24px;
  font-weight: bold;
  display: block;
}

/* Controles de filtrado */
.controles {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap: 20px;
  margin-bottom: 25px;
  padding: 20px;
  background: #f8f9fa;
  border-radius: 8px;
}

.grupo-control {
  display: flex;
  flex-direction: column;
}

.grupo-control label {
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 5px;
  font-size: 14px;
}

.input-busqueda,
.select-filtro,
.select-ordenamiento {
  padding: 10px;
  border: 2px solid #e0e0e0;
  border-radius: 6px;
  font-size: 14px;
  transition: border-color 0.3s ease;
}

.input-busqueda:focus,
.select-filtro:focus,
.select-ordenamiento:focus {
  outline: none;
  border-color: #3498db;
}

/* Tabla */
.tabla-container {
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

.tabla-deudas {
  width: 100%;
  border-collapse: collapse;
}

.tabla-deudas th {
  background: #34495e;
  color: white;
  padding: 15px 12px;
  text-align: left;
  font-weight: 600;
  font-size: 14px;
}

.tabla-deudas td {
  padding: 12px;
  border-bottom: 1px solid #ecf0f1;
  vertical-align: middle;
}

.tabla-deudas tbody tr:hover {
  background: #f8f9fa;
}

/* Estilos específicos de celdas */
.proveedor-info .nombre {
  font-weight: 600;
  color: #2c3e50;
  font-size: 16px;
}

.proveedor-info .alerta-deuda {
  font-size: 12px;
  color: #856404;
  background: #fff3cd;
  padding: 4px 8px;
  border-radius: 4px;
  margin-top: 5px;
  border: 1px solid #ffc107;
  font-weight: 600;
}

.contacto-info {
  font-size: 12px;
  color: #7f8c8d;
}

.contacto-info .telefono,
.contacto-info .email {
  margin: 2px 0;
}

.monto {
  text-align: right;
  font-family: 'Courier New', monospace;
  font-weight: 600;
}

.deuda-pendiente {
  color: #d63384;
  font-size: 16px;
  font-weight: 700;
}

.estado {
  text-align: center;
}

.indicador-estado {
  padding: 4px 8px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 600;
}

.indicador-estado.verde {
  background: #d5eedd;
  color: #27ae60;
  border: 1px solid #27ae60;
}

.indicador-estado.amarillo {
  background: #fff3cd;
  color: #856404;
  border: 1px solid #ffc107;
  font-weight: 700;
}

.ordenes-pendientes {
  text-align: center;
  font-weight: 600;
  color: #8e44ad;
}

.fecha {
  color: #7f8c8d;
  font-size: 13px;
}

/* Estados de las filas */
.estado-sin-deuda {
  background: rgba(39, 174, 96, 0.05);
}

.estado-con-deuda {
  background: rgba(255, 193, 7, 0.1);
  border-left: 4px solid #ffc107;
}

/* Estados de carga y error */
.cargando,
.error {
  text-align: center;
  padding: 60px 20px;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 20px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.error h3 {
  color: #e74c3c;
  margin-bottom: 10px;
}

.error p {
  color: #7f8c8d;
  margin-bottom: 20px;
}

.btn-reintentar {
  background: #e74c3c;
  color: white;
  border: none;
  padding: 10px 20px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 14px;
}

.btn-reintentar:hover {
  background: #c0392b;
}

/* Sin resultados */
.sin-resultados {
  text-align: center;
  padding: 40px;
  color: #7f8c8d;
  font-style: italic;
}

/* Resumen */
.resumen {
  text-align: center;
  color: #7f8c8d;
  font-size: 14px;
  padding: 10px;
  background: #f8f9fa;
  border-radius: 6px;
}

/* Responsive */
@media (max-width: 768px) {
  .deudas-proveedores {
    padding: 10px;
  }
  
  .header {
    flex-direction: column;
    gap: 15px;
  }
  
  .header h1 {
    font-size: 1.5rem;
  }
  
  .controles {
    grid-template-columns: 1fr;
    gap: 15px;
  }
  
  .estadisticas {
    grid-template-columns: 1fr;
  }
  
  .tabla-container {
    overflow-x: auto;
  }
  
  .tabla-deudas {
    min-width: 800px;
  }
  
  .tabla-deudas th,
  .tabla-deudas td {
    padding: 8px 6px;
    font-size: 12px;
  }
}

@media (max-width: 480px) {
  .tabla-deudas th,
  .tabla-deudas td {
    padding: 6px 4px;
    font-size: 11px;
  }
  
  .tarjeta-estadistica {
    padding: 15px;
  }
  
  .tarjeta-estadistica .numero {
    font-size: 20px;
  }
}
```

`proyecto-pos-finanzas/frontend/src/components/DeudasProveedores.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { deudasProveedoresService } from '../services/deudasService';
import type { DeudaProveedor, EstadisticasDeudas } from '../types/index';
import './DeudasProveedores.css';

/**
 * Componente para visualizar las deudas a proveedores
 * Muestra una tabla con información detallada de las deudas pendientes
 * Incluye filtros, búsqueda y estadísticas generales
 */
export const DeudasProveedores: React.FC = () => {
  // Estado principal
  const [deudas, setDeudas] = useState<DeudaProveedor[]>([]);
  const [deudasFiltradas, setDeudasFiltradas] = useState<DeudaProveedor[]>([]);
  const [estadisticas, setEstadisticas] = useState<EstadisticasDeudas | null>(null);
  const [cargando, setCargando] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Estado para filtros y búsqueda
  const [filtroEstado, setFiltroEstado] = useState<'todos' | 'verde' | 'amarillo'>('todos');
  const [terminoBusqueda, setTerminoBusqueda] = useState('');
  const [ordenamiento, setOrdenamiento] = useState<'nombre' | 'deuda' | 'fecha'>('deuda');

  // Cargar datos iniciales
  useEffect(() => {
    cargarDatos();
  }, []);

  // Aplicar filtros cuando cambien los criterios
  useEffect(() => {
    aplicarFiltros();
  }, [deudas, filtroEstado, terminoBusqueda, ordenamiento]);

  /**
   * Carga los datos de deudas y estadísticas desde el backend
   */
  const cargarDatos = async () => {
    try {
      setCargando(true);
      setError(null);

      const [deudasData, estadisticasData] = await Promise.all([
        deudasProveedoresService.obtenerDeudasProveedores(),
        deudasProveedoresService.obtenerEstadisticasDeudas()
      ]);

      // LOGS DE DEPURACIÓN
      console.log('=== DATOS RECIBIDOS DE LA API ===');
      console.log('Deudas data:', deudasData);
      console.log('Estadísticas data:', estadisticasData);
      
      if (deudasData && deudasData.length > 0) {
        console.log('=== PRIMER PROVEEDOR ===');
        console.log('Proveedor:', deudasData[0].proveedorNombre);
        console.log('Estado de deuda:', deudasData[0].estadoDeuda);
        console.log('Deuda pendiente:', deudasData[0].deudaPendiente);
        console.log('Total compras:', deudasData[0].totalCompras);
        console.log('Total pagos:', deudasData[0].totalPagos);
      }

      setDeudas(deudasData);
      setEstadisticas(estadisticasData);
    } catch (err) {
      console.error('ERROR AL CARGAR DATOS:', err);
      setError(err instanceof Error ? err.message : 'Error al cargar los datos');
    } finally {
      setCargando(false);
    }
  };

  /**
   * Aplica filtros, búsqueda y ordenamiento a las deudas
   */
  const aplicarFiltros = () => {
    let resultado = [...deudas];

    console.log('=== APLICANDO FILTROS ===');
    console.log('Deudas originales:', deudas.length);
    console.log('Filtro estado:', filtroEstado);

    // Filtrar por estado
    if (filtroEstado !== 'todos') {
      resultado = deudasProveedoresService.filtrarPorEstado(resultado, filtroEstado);
      console.log('Después de filtrar por estado:', resultado.length);
    }

    // Buscar por nombre
    resultado = deudasProveedoresService.buscarPorNombre(resultado, terminoBusqueda);
    console.log('Después de buscar por nombre:', resultado.length);

    // Ordenar
    switch (ordenamiento) {
      case 'deuda':
        resultado = deudasProveedoresService.ordenarPorDeuda(resultado);
        break;
      case 'fecha':
        resultado = deudasProveedoresService.ordenarPorFecha(resultado);
        break;
      case 'nombre':
        resultado.sort((a, b) => a.proveedorNombre.localeCompare(b.proveedorNombre));
        break;
    }

    console.log('Resultado final:', resultado);
    if (resultado.length > 0) {
      console.log('Primer elemento del resultado:', resultado[0]);
    }

    setDeudasFiltradas(resultado);
  };

  /**
   * Formatea un número como moneda mexicana
   */
  const formatearMoneda = (cantidad: number): string => {
    return new Intl.NumberFormat('es-MX', {
      style: 'currency',
      currency: 'MXN'
    }).format(cantidad);
  };

  /**
   * Formatea una fecha para mostrar
   */
  const formatearFecha = (fecha: string | undefined): string => {
    if (!fecha) return 'N/A';
    return new Date(fecha).toLocaleDateString('es-MX');
  };

  /**
   * Obtiene la clase CSS para el estado de la deuda
   */
  const obtenerClaseEstado = (estado: 'verde' | 'amarillo'): string => {
    return estado === 'verde' ? 'estado-sin-deuda' : 'estado-con-deuda';
  };

  /**
   * Obtiene estilos inline para el estado de la deuda (fallback para garantizar visualización)
   */
  const obtenerEstilosEstado = (estado: 'verde' | 'amarillo'): React.CSSProperties => {
    if (estado === 'amarillo') {
      return {
        backgroundColor: 'rgba(255, 193, 7, 0.1)',
        borderLeft: '4px solid #ffc107'
      };
    }
    return {
      backgroundColor: 'rgba(39, 174, 96, 0.05)'
    };
  };

  /**
   * Obtiene estilos inline para el indicador de estado
   */
  const obtenerEstilosIndicador = (estado: 'verde' | 'amarillo'): React.CSSProperties => {
    if (estado === 'amarillo') {
      return {
        background: '#fff3cd',
        color: '#856404',
        border: '1px solid #ffc107',
        fontWeight: '700',
        padding: '4px 8px',
        borderRadius: '12px',
        fontSize: '12px'
      };
    }
    return {
      background: '#d5eedd',
      color: '#27ae60',
      border: '1px solid #27ae60',
      padding: '4px 8px',
      borderRadius: '12px',
      fontSize: '12px',
      fontWeight: '600'
    };
  };

  if (cargando) {
    return (
      <div className="deudas-proveedores">
        <div className="cargando">
          <div className="spinner"></div>
          <p>Cargando deudas de proveedores...</p>
        </div>
      </div>
    );
  }

  if (error) {
    return (
      <div className="deudas-proveedores">
        <div className="error">
          <h3>Error al cargar los datos</h3>
          <p>{error}</p>
          <button onClick={cargarDatos} className="btn-reintentar">
            Reintentar
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="deudas-proveedores">
      <div className="header">
        <h1>Deudas a Proveedores</h1>
        <button onClick={cargarDatos} className="btn-actualizar" disabled={cargando}>
          🔄 Actualizar
        </button>
      </div>

      {/* Estadísticas generales */}
      {estadisticas && (
        <div className="estadisticas">
          <div className="tarjeta-estadistica">
            <h3>Proveedores con Deuda</h3>
            <span className="numero">{estadisticas.totalProveedoresConDeuda}</span>
          </div>
          <div className="tarjeta-estadistica">
            <h3>Total Adeudado</h3>
            <span className="numero">{formatearMoneda(estadisticas.totalDeudasPendientes)}</span>
          </div>
          <div className="tarjeta-estadistica">
            <h3>Deuda Promedio</h3>
            <span className="numero">{formatearMoneda(estadisticas.deudaPromedio)}</span>
          </div>
        </div>
      )}

      {/* Controles de filtrado */}
      <div className="controles">
        <div className="grupo-control">
          <label>Buscar proveedor:</label>
          <input
            type="text"
            value={terminoBusqueda}
            onChange={(e) => setTerminoBusqueda(e.target.value)}
            placeholder="Nombre del proveedor..."
            className="input-busqueda"
          />
        </div>

        <div className="grupo-control">
          <label>Estado:</label>
          <select
            value={filtroEstado}
            onChange={(e) => setFiltroEstado(e.target.value as 'todos' | 'verde' | 'amarillo')}
            className="select-filtro"
          >
            <option value="todos">Todos</option>
            <option value="amarillo">Con deuda</option>
            <option value="verde">Sin deuda</option>
          </select>
        </div>

        <div className="grupo-control">
          <label>Ordenar por:</label>
          <select
            value={ordenamiento}
            onChange={(e) => setOrdenamiento(e.target.value as 'nombre' | 'deuda' | 'fecha')}
            className="select-ordenamiento"
          >
            <option value="deuda">Deuda (mayor a menor)</option>
            <option value="nombre">Nombre (A-Z)</option>
            <option value="fecha">Fecha más antigua</option>
          </select>
        </div>
      </div>

      {/* Tabla de deudas */}
      <div className="tabla-container">
        {deudasFiltradas.length === 0 ? (
          <div className="sin-resultados">
            <p>No se encontraron deudas que coincidan con los filtros aplicados.</p>
          </div>
        ) : (
          <table className="tabla-deudas">
            <thead>
              <tr>
                <th>Proveedor</th>
                <th>Contacto</th>
                <th>Total Compras</th>
                <th>Total Pagos</th>
                <th>Deuda Pendiente</th>
                <th>Estado</th>
                <th>Órdenes Pendientes</th>
                <th>Fecha Más Antigua</th>
              </tr>
            </thead>
            <tbody>
              {deudasFiltradas.map((deuda) => {
                // LOG DE DEPURACIÓN PARA CADA FILA
                console.log(`=== RENDERIZANDO ${deuda.proveedorNombre} ===`);
                console.log('Estado de deuda:', deuda.estadoDeuda);
                console.log('Deuda pendiente:', deuda.deudaPendiente);
                console.log('Estilos que se aplicarán:', obtenerEstilosEstado(deuda.estadoDeuda));
                
                return (
                  <tr 
                    key={deuda.proveedorId} 
                    className={obtenerClaseEstado(deuda.estadoDeuda)}
                    style={obtenerEstilosEstado(deuda.estadoDeuda)}
                  >
                    <td className="proveedor-info">
                      <div className="nombre">{deuda.proveedorNombre}</div>
                      {deuda.estadoDeuda === 'amarillo' && (
                        <div 
                          className="alerta-deuda"
                          style={{
                            fontSize: '12px',
                            color: '#856404',
                            background: '#fff3cd',
                            padding: '4px 8px',
                            borderRadius: '4px',
                            marginTop: '5px',
                            border: '1px solid #ffc107',
                            fontWeight: '600'
                          }}
                        >
                          ⚠️ Deuda pendiente: {formatearMoneda(deuda.deudaPendiente)}
                        </div>
                      )}
                    </td>
                    <td className="contacto-info">
                      {deuda.telefonoProveedor && (
                        <div className="telefono">📞 {deuda.telefonoProveedor}</div>
                      )}
                      {deuda.emailProveedor && (
                        <div className="email">📧 {deuda.emailProveedor}</div>
                      )}
                    </td>
                    <td className="monto">{formatearMoneda(deuda.totalCompras)}</td>
                    <td className="monto">{formatearMoneda(deuda.totalPagos)}</td>
                    <td className="monto deuda-pendiente" style={{ color: '#d63384', fontWeight: '700' }}>
                      {formatearMoneda(deuda.deudaPendiente)}
                    </td>
                    <td className={`estado ${deuda.estadoDeuda}`}>
                      <span 
                        className={`indicador-estado ${deuda.estadoDeuda}`}
                        style={obtenerEstilosIndicador(deuda.estadoDeuda)}
                      >
                        {deuda.estadoDeuda === 'verde' ? '✅ Sin deuda' : '⚠️ Con deuda'}
                      </span>
                    </td>
                    <td className="ordenes-pendientes">
                      {deuda.cantidadOrdenesPendientes}
                    </td>
                    <td className="fecha">
                      {formatearFecha(deuda.fechaOrdenMasAntigua)}
                    </td>
                  </tr>
                );
              })}
            </tbody>
          </table>
        )}
      </div>

      {/* Resumen de resultados */}
      <div className="resumen">
        <p>
          Mostrando {deudasFiltradas.length} de {deudas.length} proveedores
          {filtroEstado !== 'todos' && ` (filtrado por: ${filtroEstado})`}
          {terminoBusqueda && ` (búsqueda: "${terminoBusqueda}")`}
        </p>
      </div>
    </div>
  );
};
```

`proyecto-pos-finanzas/frontend/src/components/EmployeeMainScreen.tsx`:

```tsx
import React from 'react';
import type { UsuarioDTO } from '../types';

interface EmployeeMainScreenProps {
  usuario: UsuarioDTO;
  onPuntoDeVentaClick: () => void;
  onLogout: () => void;
}

const EmployeeMainScreen: React.FC<EmployeeMainScreenProps> = ({ 
  usuario, 
  onPuntoDeVentaClick, 
  onLogout 
}) => {
  return (
    <>
      <style>
        {`
          /* --- Global Styles & Fonts --- */
          @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap');
          :root {
            --background-color: #f5f5f5; /* Cambiado a fondo claro */
            --text-light: #1a1a1a; /* Cambiado a texto oscuro */
            --font-family-main: 'Roboto Mono', monospace;
            --color-logout: #CC7A53;
            --color-punto-venta: #4E9A91;
          }

          .employee-main-page {
            box-sizing: border-box;
            min-height: 100vh;
            background-color: var(--background-color);
            font-family: var(--font-family-main);
            padding: 2rem 3rem;
            display: flex;
            flex-direction: column;
          }

          .main-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4rem;
          }

          .welcome-text {
            color: var(--text-light);
            font-size: 1.5rem;
            font-weight: 500;
          }

          .logout-btn {
            border: none;
            border-radius: 12px;
            padding: 0.8rem 1.5rem;
            font-family: var(--font-family-main);
            font-size: 1rem;
            font-weight: 500;
            color: #3a3a3a;
            cursor: pointer;
            transition: transform 0.2s ease, opacity 0.2s ease;
            background-color: var(--color-logout);
          }

          .logout-btn:hover {
            transform: translateY(-2px);
            opacity: 0.9;
          }

          .main-content {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
          }

          .punto-venta-btn {
            border: none;
            border-radius: 24px;
            padding: 3rem 4rem;
            font-family: var(--font-family-main);
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff; /* Color blanco para contraste con fondo verde */
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            background-color: var(--color-punto-venta);
            min-width: 300px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
          }

          .punto-venta-btn:hover {
            transform: scale(1.05);
            box-shadow: 0px 15px 30px rgba(0, 0, 0, 0.3);
          }
        `}
      </style>
      <div className="employee-main-page">
        <header className="main-header">
          <div className="welcome-text">
            Bienvenido, {usuario.nombre}
          </div>
          <button className="logout-btn" onClick={onLogout}>
            Cerrar Sesión
          </button>
        </header>

        <div className="main-content">
          <button className="punto-venta-btn" onClick={onPuntoDeVentaClick}>
            Punto de Venta
          </button>
        </div>
      </div>
    </>
  );
};

export default EmployeeMainScreen;

```

`proyecto-pos-finanzas/frontend/src/components/GestionEmpleados.css`:

```css
/* ==================== GESTIÓN DE EMPLEADOS ==================== */

.gestion-empleados {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* Header */
.gestion-empleados__header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e0e0e0;
}

.gestion-empleados__titulo {
  margin: 0;
  color: #1a1a1a;
  font-size: 2rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.gestion-empleados__titulo::before {
  content: "people";
  font-family: 'Material Icons';
  font-size: 2.2rem;
  color: var(--primary-color, #2196F3);
}

.gestion-empleados__btn-crear {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  white-space: nowrap;
}

.gestion-empleados__btn-crear:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Estados de carga y error */
.gestion-empleados__loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
}

.gestion-empleados__loading .loading-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #e0e0e0;
  border-top: 4px solid var(--primary-color, #2196F3);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

.gestion-empleados__loading p {
  color: #666;
  font-size: 1.1rem;
  margin: 0;
}

.gestion-empleados__error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 3rem;
  text-align: center;
  background: #fff3f3;
  border: 1px solid #ffcdd2;
  border-radius: 8px;
}

.gestion-empleados__error .material-icons {
  font-size: 3rem;
  color: #f44336;
  margin-bottom: 1rem;
}

.gestion-empleados__error p {
  color: #d32f2f;
  font-size: 1.1rem;
  margin: 0 0 1rem 0;
}

/* Tabla de empleados */
.gestion-empleados__tabla-container {
  overflow-x: auto;
  border-radius: 8px;
  border: 1px solid #e0e0e0;
}

.gestion-empleados__tabla {
  width: 100%;
  border-collapse: collapse;
  background: #ffffff;
}

.gestion-empleados__tabla th {
  background: #f5f5f5;
  color: #333;
  font-weight: 600;
  padding: 1rem;
  text-align: left;
  border-bottom: 2px solid #e0e0e0;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.gestion-empleados__tabla td {
  padding: 1rem;
  border-bottom: 1px solid #e0e0e0;
  vertical-align: middle;
}

.gestion-empleados__fila:hover {
  background: #f9f9f9;
}

.gestion-empleados__fila:last-child td {
  border-bottom: none;
}

/* Columnas específicas */
.gestion-empleados__nombre {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
  color: #1a1a1a;
}

.gestion-empleados__nombre .material-icons {
  color: var(--primary-color, #2196F3);
  font-size: 1.2rem;
}

.gestion-empleados__telefono {
  color: #666;
  font-family: monospace;
}

.gestion-empleados__rol .rol-badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.75rem;
  background: #e3f2fd;
  color: #1976d2;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 500;
}

.gestion-empleados__estado .estado-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
  padding: 0.25rem 0.75rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 500;
}

.estado-badge.estado-activo {
  background: #e8f5e8;
  color: #2e7d32;
}

.estado-badge.estado-inactivo {
  background: #ffebee;
  color: #c62828;
}

.estado-badge .material-icons {
  font-size: 1rem;
}

/* Botones de acción */
.gestion-empleados__acciones {
  text-align: center;
}

.btn-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-toggle:hover {
  background: rgba(0, 0, 0, 0.1);
}

.btn-toggle:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-toggle--activo .material-icons {
  color: #4caf50;
  font-size: 1.5rem;
}

.btn-toggle--inactivo .material-icons {
  color: #9e9e9e;
  font-size: 1.5rem;
}

/* Estado vacío */
.gestion-empleados__vacio {
  text-align: center;
  padding: 3rem;
  color: #666;
}

.gestion-empleados__vacio .material-icons {
  font-size: 3rem;
  color: #bbb;
  display: block;
  margin-bottom: 1rem;
}

.gestion-empleados__vacio p {
  margin: 0;
  font-size: 1.1rem;
}

/* Animaciones */
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Responsive Design */
@media (max-width: 768px) {
  .gestion-empleados {
    padding: 1rem;
    margin: 1rem;
  }

  .gestion-empleados__header {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }

  .gestion-empleados__titulo {
    font-size: 1.5rem;
    text-align: center;
  }

  .gestion-empleados__btn-crear {
    width: 100%;
    justify-content: center;
  }

  .gestion-empleados__tabla-container {
    font-size: 0.9rem;
  }

  .gestion-empleados__tabla th,
  .gestion-empleados__tabla td {
    padding: 0.75rem 0.5rem;
  }

  /* Ocultar columna de teléfono en móviles si es necesario */
  .gestion-empleados__telefono {
    display: none;
  }

  .gestion-empleados__tabla th:nth-child(2) {
    display: none;
  }
}

@media (max-width: 480px) {
  .gestion-empleados__titulo {
    font-size: 1.25rem;
  }

  .gestion-empleados__tabla th,
  .gestion-empleados__tabla td {
    padding: 0.5rem 0.25rem;
  }

  .rol-badge,
  .estado-badge {
    font-size: 0.75rem;
    padding: 0.2rem 0.5rem;
  }
}

/* ==================== MODAL CREAR EMPLEADO ==================== */

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 1rem;
}

.modal-content {
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  width: 100%;
  max-width: 500px;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid #e0e0e0;
  position: sticky;
  top: 0;
  background-color: #ffffff;
  z-index: 1;
}

.modal-titulo {
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.modal-titulo .material-icons {
  color: var(--primary-color, #2196F3);
  font-size: 1.5rem;
}

.modal-cerrar {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  border-radius: 50%;
  color: #666;
  transition: all 0.2s ease;
}

.modal-cerrar:hover {
  background: rgba(0, 0, 0, 0.1);
  color: #333;
}

.modal-cerrar:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.modal-cerrar .material-icons {
  font-size: 1.5rem;
}

/* Formulario */
.modal-formulario {
  padding: 1.5rem;
}

.campo-formulario {
  margin-bottom: 1.5rem;
}

.campo-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 500;
  color: #1a1a1a;
  margin-bottom: 0.5rem;
  font-size: 0.95rem;
}

.campo-label .material-icons {
  font-size: 1.2rem;
  color: var(--primary-color, #2196F3);
}

.campo-input {
  width: 100%;
  padding: 0.75rem;
  border: 2px solid #e0e0e0;
  border-radius: 8px;
  font-size: 1rem;
  transition: all 0.2s ease;
  box-sizing: border-box;
}

.campo-input:focus {
  outline: none;
  border-color: var(--primary-color, #2196F3);
  box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
}

.campo-input:disabled {
  background-color: #f5f5f5;
  color: #666;
  cursor: not-allowed;
}

.campo-input--error {
  border-color: #f44336;
}

.campo-input--error:focus {
  border-color: #f44336;
  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);
}

.campo-select {
  cursor: pointer;
}

.campo-error {
  display: block;
  color: #f44336;
  font-size: 0.85rem;
  margin-top: 0.25rem;
  font-weight: 500;
}

/* Información adicional */
.info-adicional {
  background: #f3f4f6;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.info-adicional .material-icons {
  color: var(--primary-color, #2196F3);
  font-size: 1.2rem;
  margin-top: 0.1rem;
}

.info-adicional p {
  margin: 0;
  color: #666;
  font-size: 0.9rem;
  line-height: 1.4;
}

/* Botones del modal */
.modal-botones {
  display: flex;
  gap: 1rem;
  justify-content: flex-end;
  margin-top: 2rem;
}

.modal-botones .btn-secondary,
.modal-botones .btn-primary {
  padding: 0.75rem 1.5rem;
  font-size: 1rem;
  font-weight: 500;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.modal-botones .btn-secondary {
  background: #f5f5f5;
  color: #666;
}

.modal-botones .btn-secondary:hover:not(:disabled) {
  background: #e0e0e0;
  color: #333;
}

.modal-botones .btn-primary {
  background: var(--primary-color, #2196F3);
  color: #ffffff;
}

.modal-botones .btn-primary:hover:not(:disabled) {
  background: #1976d2;
}

.modal-botones button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Spinner pequeño para botón */
.loading-spinner-small {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top: 2px solid #ffffff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

/* Responsive para modal */
@media (max-width: 768px) {
  .modal-overlay {
    padding: 0.5rem;
  }

  .modal-content {
    max-width: none;
    width: 100%;
  }

  .modal-header,
  .modal-formulario {
    padding: 1rem;
  }

  .modal-titulo {
    font-size: 1.1rem;
  }

  .modal-botones {
    flex-direction: column;
  }

  .modal-botones .btn-secondary,
  .modal-botones .btn-primary {
    width: 100%;
    justify-content: center;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/GestionEmpleados.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import './GestionEmpleados.css';
import { empleadoService } from '../services/empleadoService';
import { rolService } from '../services/rolService';
import { useToast } from '../hooks/useToast';
import type { 
  Empleado, 
  Rol, 
  EstadoCargaEmpleados 
} from '../types/index';
import ModalCrearEmpleado from './ModalCrearEmpleado';

const GestionEmpleados: React.FC = () => {
  // Estados principales
  const [empleados, setEmpleados] = useState<Empleado[]>([]);
  const [roles, setRoles] = useState<Rol[]>([]);
  const [estadoCarga, setEstadoCarga] = useState<EstadoCargaEmpleados>({
    cargando: true,
    error: null,
    creando: false,
    cambiandoEstado: false
  });

  // Estados para modal
  const [modalAbierto, setModalAbierto] = useState(false);

  // Hook personalizado para toasts
  const { showSuccess, showError } = useToast();

  /**
   * 🔄 Cargar empleados desde la API
   */
  const cargarEmpleados = async () => {
    try {
      setEstadoCarga(prev => ({ ...prev, cargando: true, error: null }));
      const empleadosData = await empleadoService.obtenerEmpleados();
      setEmpleados(empleadosData);
    } catch (error: any) {
      const errorMessage = error.message || 'Error al cargar empleados';
      setEstadoCarga(prev => ({ ...prev, error: errorMessage }));
      showError(errorMessage);
    } finally {
      setEstadoCarga(prev => ({ ...prev, cargando: false }));
    }
  };

  /**
   * 🔄 Cargar roles desde la API
   */
  const cargarRoles = async () => {
    try {
      const rolesData = await rolService.obtenerRoles();
      setRoles(rolesData);
    } catch (error: any) {
      const errorMessage = error.message || 'Error al cargar roles';
      showError(errorMessage);
    }
  };

  /**
   * 🔄 Cambiar estado de empleado (Activo/Inactivo)
   */
  const cambiarEstadoEmpleado = async (empleadoId: string, estadoActual: string) => {
    const nuevoEstado = estadoActual === 'Activo' ? 'Inactivo' : 'Activo';
    const nombreEmpleado = empleados.find(emp => emp.id === empleadoId)?.nombre || 'empleado';

    // Confirmación antes de cambiar estado
    if (!window.confirm(`¿Está seguro de cambiar el estado de ${nombreEmpleado} a ${nuevoEstado}?`)) {
      return;
    }

    try {
      setEstadoCarga(prev => ({ ...prev, cambiandoEstado: true }));
      
      const empleadoActualizado = await empleadoService.cambiarEstadoEmpleado(
        empleadoId, 
        nuevoEstado
      );

      // Actualizar el empleado en la lista local
      setEmpleados(prev => 
        prev.map(emp => 
          emp.id === empleadoId ? empleadoActualizado : emp
        )
      );

      showSuccess(`Estado de ${nombreEmpleado} cambiado a ${nuevoEstado}`);
    } catch (error: any) {
      const errorMessage = error.message || 'Error al cambiar estado del empleado';
      showError(errorMessage);
    } finally {
      setEstadoCarga(prev => ({ ...prev, cambiandoEstado: false }));
    }
  };

  /**
   * ➕ Manejar creación de nuevo empleado
   */
  const manejarEmpleadoCreado = (nuevoEmpleado: Empleado) => {
    setEmpleados(prev => [...prev, nuevoEmpleado]);
    setModalAbierto(false);
    showSuccess(`Empleado ${nuevoEmpleado.nombre} creado exitosamente`);
  };

  // Cargar datos iniciales
  useEffect(() => {
    cargarEmpleados();
    cargarRoles();
  }, []);

  return (
    <div className="gestion-empleados">
      {/* Header */}
      <div className="gestion-empleados__header">
        <h1 className="gestion-empleados__titulo">
          <i className="material-icons">people</i>
          Gestión de Empleados
        </h1>
        <button 
          className="btn-primary gestion-empleados__btn-crear"
          onClick={() => setModalAbierto(true)}
          disabled={estadoCarga.creando}
        >
          <i className="material-icons">person_add</i>
          Agregar Empleado
        </button>
      </div>

      {/* Estados de carga y error */}
      {estadoCarga.cargando && (
        <div className="gestion-empleados__loading">
          <div className="loading-spinner"></div>
          <p>Cargando empleados...</p>
        </div>
      )}

      {estadoCarga.error && (
        <div className="gestion-empleados__error">
          <i className="material-icons">error</i>
          <p>{estadoCarga.error}</p>
          <button 
            className="btn-secondary"
            onClick={cargarEmpleados}
          >
            Reintentar
          </button>
        </div>
      )}

      {/* Tabla de empleados */}
      {!estadoCarga.cargando && !estadoCarga.error && (
        <div className="gestion-empleados__tabla-container">
          <table className="gestion-empleados__tabla">
            <thead>
              <tr>
                <th>Nombre</th>
                <th>Teléfono</th>
                <th>Rol</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              {empleados.length === 0 ? (
                <tr>
                  <td colSpan={5} className="gestion-empleados__vacio">
                    <i className="material-icons">people_outline</i>
                    <p>No hay empleados registrados</p>
                  </td>
                </tr>
              ) : (
                empleados.map((empleado) => (
                  <tr key={empleado.id} className="gestion-empleados__fila">
                    <td className="gestion-empleados__nombre">
                      <i className="material-icons">person</i>
                      {empleado.nombre}
                    </td>
                    <td className="gestion-empleados__telefono">
                      {empleado.telefono || 'No especificado'}
                    </td>
                    <td className="gestion-empleados__rol">
                      <span className="rol-badge">
                        {empleado.rolNombre}
                      </span>
                    </td>
                    <td className="gestion-empleados__estado">
                      <span 
                        className={`estado-badge ${
                          empleado.estadoNombre === 'Activo' ? 'estado-activo' : 'estado-inactivo'
                        }`}
                      >
                        <i className="material-icons">
                          {empleado.estadoNombre === 'Activo' ? 'check_circle' : 'cancel'}
                        </i>
                        {empleado.estadoNombre}
                      </span>
                    </td>
                    <td className="gestion-empleados__acciones">
                      <button
                        className={`btn-toggle ${
                          empleado.estadoNombre === 'Activo' ? 'btn-toggle--activo' : 'btn-toggle--inactivo'
                        }`}
                        onClick={() => cambiarEstadoEmpleado(empleado.id, empleado.estadoNombre)}
                        disabled={estadoCarga.cambiandoEstado}
                        title={`Cambiar a ${empleado.estadoNombre === 'Activo' ? 'Inactivo' : 'Activo'}`}
                      >
                        {empleado.estadoNombre === 'Activo' ? 'Desactivar' : 'Activar'}
                      </button>
                    </td>
                  </tr>
                ))
              )}
            </tbody>
          </table>
        </div>
      )}

      {/* Modal de creación */}
      {modalAbierto && (
        <ModalCrearEmpleado
          roles={roles}
          onEmpleadoCreado={manejarEmpleadoCreado}
          onCerrar={() => setModalAbierto(false)}
          estadoCarga={estadoCarga}
          setEstadoCarga={setEstadoCarga}
        />
      )}
    </div>
  );
};

export default GestionEmpleados;

```

`proyecto-pos-finanzas/frontend/src/components/Inventario.css`:

```css
/* Modern Inventory Management CSS with Material Design 3 */

/* CSS Variables for Material Design 3 */
:root {
  /* Colors */
  --md-primary: #6750a4;
  --md-primary-container: #eaddff;
  --md-on-primary: #ffffff;
  --md-on-primary-container: #21005d;
  --md-secondary: #625b71;
  --md-secondary-container: #e8def8;
  --md-on-secondary: #ffffff;
  --md-on-secondary-container: #1d192b;
  --md-tertiary: #7d5260;
  --md-tertiary-container: #ffd8e4;
  --md-on-tertiary: #ffffff;
  --md-on-tertiary-container: #31111d;
  --md-error: #ba1a1a;
  --md-error-container: #ffdad6;
  --md-on-error: #ffffff;
  --md-on-error-container: #410002;
  --md-surface: #fffbfe;
  --md-surface-variant: #f4eff4;
  --md-surface-container: #f7f2fa;
  --md-surface-container-high: #f1ecf4;
  --md-on-surface: #1c1b1f;
  --md-on-surface-variant: #49454f;
  --md-outline: #79747e;
  --md-outline-variant: #cab6cf;

  /* Typography */
  --md-display-large: 57px;
  --md-display-medium: 45px;
  --md-display-small: 36px;
  --md-headline-large: 32px;
  --md-headline-medium: 28px;
  --md-headline-small: 24px;
  --md-title-large: 22px;
  --md-title-medium: 16px;
  --md-title-small: 14px;
  --md-label-large: 14px;
  --md-label-medium: 12px;
  --md-label-small: 11px;
  --md-body-large: 16px;
  --md-body-medium: 14px;
  --md-body-small: 12px;

  /* Spacing */
  --md-spacing-xs: 4px;
  --md-spacing-sm: 8px;
  --md-spacing-md: 16px;
  --md-spacing-lg: 24px;
  --md-spacing-xl: 32px;
  --md-spacing-xxl: 48px;

  /* Border Radius */
  --md-border-radius-xs: 4px;
  --md-border-radius-sm: 8px;
  --md-border-radius-md: 12px;
  --md-border-radius-lg: 16px;
  --md-border-radius-xl: 28px;

  /* Shadows */
  --md-elevation-1: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-elevation-2: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  --md-elevation-3: 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
}

/* Base styles */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Roboto', 'Segoe UI', 'Arial', sans-serif;
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  margin: 0;
  padding: 0;
}

/* Main inventory page */
.inventory-page {
  background-color: var(--md-surface);
  min-height: 100vh;
  padding: var(--md-spacing-lg);
}

.inventory-container {
  max-width: 1400px;
  margin: 0 auto;
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
}

/* Header */
.inventory-header {
  margin-bottom: var(--md-spacing-xl);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
  flex-wrap: wrap;
}

.header-title {
  flex: 1;
  min-width: 300px;
}

.inventory-title {
  font-size: var(--md-headline-medium);
  font-weight: 500;
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-sm) 0;
  line-height: 1.2;
}

.inventory-subtitle {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
  line-height: 1.4;
}

.create-product-btn {
  background-color: var(--md-primary);
  color: var(--md-on-primary);
  border: none;
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  white-space: nowrap;
  box-shadow: var(--md-elevation-1);
}

.create-product-btn:hover {
  background-color: #5a3d9b;
  box-shadow: var(--md-elevation-2);
  transform: translateY(-1px);
}

.create-product-btn:active {
  transform: translateY(0);
  box-shadow: var(--md-elevation-1);
}

.btn-icon {
  font-size: 18px;
  line-height: 1;
}

/* Error message */
.error-message {
  background-color: var(--md-error-container);
  color: var(--md-on-error-container);
  padding: var(--md-spacing-md);
  border-radius: var(--md-border-radius-md);
  margin-bottom: var(--md-spacing-lg);
  display: flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  font-size: var(--md-body-medium);
}

.error-icon {
  font-size: 18px;
}

/* Loading */
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--md-spacing-xxl);
  text-align: center;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid var(--md-outline-variant);
  border-top: 4px solid var(--md-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: var(--md-spacing-md);
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Table */
.inventory-table-container {
  background-color: var(--md-surface);
  border-radius: var(--md-border-radius-lg);
  overflow: hidden;
  box-shadow: var(--md-elevation-1);
  margin-bottom: var(--md-spacing-xl);
}

.table-wrapper {
  overflow-x: auto;
}

.inventory-table {
  width: 100%;
  border-collapse: collapse;
  font-size: var(--md-body-medium);
}

.inventory-table thead {
  background-color: var(--md-surface-variant);
}

.inventory-table th {
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  text-align: left;
  font-weight: 500;
  color: var(--md-on-surface-variant);
  font-size: var(--md-title-small);
  border-bottom: 1px solid var(--md-outline-variant);
}

.inventory-table td {
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  border-bottom: 1px solid var(--md-outline-variant);
  vertical-align: middle;
}

.table-row:hover {
  background-color: var(--md-surface-variant);
}

/* Product info cell */
.product-name-cell {
  min-width: 200px;
}

.product-info {
  display: flex;
  flex-direction: column;
}

.product-name {
  font-weight: 500;
  color: var(--md-on-surface);
  font-size: var(--md-body-large);
}

/* Category badge */
.category-badge {
  display: inline-block;
  background-color: var(--md-secondary-container);
  color: var(--md-on-secondary-container);
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-small);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Supplier info */
.supplier-info {
  min-width: 150px;
}

.supplier-name {
  color: var(--md-on-surface-variant);
  font-size: var(--md-body-medium);
}

/* Price values */
.price-value {
  font-weight: 500;
  color: var(--md-on-surface);
  font-size: var(--md-body-medium);
}

/* Stock info */
.stock-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.stock-value {
  font-weight: 500;
  font-size: var(--md-body-large);
  color: var(--md-on-surface);
}

.stock-value.low-stock {
  color: var(--md-error);
}

.stock-unit {
  font-size: var(--md-label-small);
  color: var(--md-on-surface-variant);
}

/* Status badges */
.status-badge {
  display: inline-block;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-small);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.status-active {
  background-color: #e8f5e8;
  color: #2e7d32;
}

.status-inactive {
  background-color: var(--md-outline-variant);
  color: var(--md-on-surface-variant);
}

.status-out-of-stock {
  background-color: var(--md-error-container);
  color: var(--md-on-error-container);
}

.status-unknown {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface-variant);
}

/* Action buttons */
.action-buttons {
  display: flex;
  gap: var(--md-spacing-sm);
  align-items: center;
}

.action-btn {
  background: none;
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  font-size: var(--md-label-small);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 4px;
  white-space: nowrap;
}

.edit-btn {
  color: var(--md-primary);
  border-color: var(--md-primary);
}

.edit-btn:hover {
  background-color: var(--md-primary-container);
  color: var(--md-on-primary-container);
}

.deactivate-btn {
  color: var(--md-error);
  border-color: var(--md-error);
}

.deactivate-btn:hover {
  background-color: var(--md-error-container);
  color: var(--md-on-error-container);
}

/* No data state */
.no-data {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--md-spacing-xxl);
  text-align: center;
  color: var(--md-on-surface-variant);
}

.no-data-icon {
  font-size: 64px;
  margin-bottom: var(--md-spacing-lg);
  opacity: 0.6;
}

.no-data h3 {
  font-size: var(--md-title-large);
  font-weight: 500;
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
}

.no-data p {
  font-size: var(--md-body-large);
  margin: 0;
  max-width: 400px;
}

/* Quick stats */
.quick-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--md-spacing-lg);
  margin-top: var(--md-spacing-xl);
}

.stat-card {
  background-color: var(--md-surface);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-lg);
  text-align: center;
  box-shadow: var(--md-elevation-1);
  transition: box-shadow 0.2s ease;
}

.stat-card:hover {
  box-shadow: var(--md-elevation-2);
}

.stat-value {
  font-size: var(--md-headline-medium);
  font-weight: 500;
  color: var(--md-primary);
  margin-bottom: var(--md-spacing-xs);
}

.stat-label {
  font-size: var(--md-label-large);
  color: var(--md-on-surface-variant);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* Modal styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--md-spacing-lg);
}

.modal-content {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  box-shadow: var(--md-elevation-3);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
}

.modal-lg {
  max-width: 800px;
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--md-spacing-lg) var(--md-spacing-xl);
  border-bottom: 1px solid var(--md-outline-variant);
  position: sticky;
  top: 0;
  background-color: var(--md-surface-container);
  z-index: 1;
}

.modal-title {
  font-size: var(--md-title-large);
  font-weight: 500;
  color: var(--md-on-surface);
  margin: 0;
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--md-on-surface-variant);
  padding: var(--md-spacing-xs);
  border-radius: var(--md-border-radius-sm);
  transition: background-color 0.2s ease;
}

.close-btn:hover {
  background-color: var(--md-surface-variant);
}

/* Form styles */
.product-form {
  padding: var(--md-spacing-xl);
}

.form-section {
  margin-bottom: var(--md-spacing-xl);
}

.form-section:last-of-type {
  margin-bottom: 0;
}

.form-section-title {
  font-size: var(--md-title-medium);
  font-weight: 500;
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-lg) 0;
  padding-bottom: var(--md-spacing-sm);
  border-bottom: 2px solid var(--md-primary);
}

.form-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--md-spacing-lg);
  margin-bottom: var(--md-spacing-lg);
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.form-label {
  font-size: var(--md-label-large);
  font-weight: 500;
  color: var(--md-on-surface);
}

.form-input,
.form-select {
  padding: var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-body-medium);
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.form-input:focus,
.form-select:focus {
  outline: none;
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.2);
}

.form-input:disabled,
.form-select:disabled {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface-variant);
  cursor: not-allowed;
}

.form-help-text {
  font-size: var(--md-body-small);
  color: var(--md-on-surface-variant);
  margin-bottom: var(--md-spacing-md);
  line-height: 1.4;
}

.form-readonly {
  padding: var(--md-spacing-md);
  background-color: var(--md-surface-variant);
  border-radius: var(--md-border-radius-sm);
  color: var(--md-on-surface-variant);
  font-size: var(--md-body-medium);
}

/* Form actions */
.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--md-spacing-md);
  padding-top: var(--md-spacing-lg);
  border-top: 1px solid var(--md-outline-variant);
  margin-top: var(--md-spacing-xl);
}

.btn {
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  border: none;
  border-radius: var(--md-border-radius-lg);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 120px;
  text-align: center;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  background-color: var(--md-primary);
  color: var(--md-on-primary);
  box-shadow: var(--md-elevation-1);
}

.btn-primary:hover:not(:disabled) {
  background-color: #5a3d9b;
  box-shadow: var(--md-elevation-2);
}

.btn-cancel {
  background-color: transparent;
  color: var(--md-on-surface-variant);
  border: 1px solid var(--md-outline);
}

.btn-cancel:hover:not(:disabled) {
  background-color: var(--md-surface-variant);
}

/* Utility classes */
.mb-4 {
  margin-bottom: var(--md-spacing-lg);
}

/* Responsive design */
@media (max-width: 768px) {
  .inventory-page {
    padding: var(--md-spacing-md);
  }
  
  .inventory-container {
    padding: var(--md-spacing-lg);
  }
  
  .header-content {
    flex-direction: column;
    align-items: stretch;
  }
  
  .create-product-btn {
    justify-content: center;
  }
  
  .form-row {
    grid-template-columns: 1fr;
  }
  
  .action-buttons {
    flex-direction: column;
    align-items: stretch;
  }
  
  .action-btn {
    justify-content: center;
  }
  
  .quick-stats {
    grid-template-columns: 1fr;
  }
  
  .modal-overlay {
    padding: var(--md-spacing-md);
  }
  
  .table-wrapper {
    font-size: var(--md-body-small);
  }
  
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-sm);
  }
}

@media (max-width: 480px) {
  .inventory-title {
    font-size: var(--md-headline-small);
  }
  
  .inventory-subtitle {
    font-size: var(--md-body-medium);
  }
  
  .form-actions {
    flex-direction: column;
  }
}
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  box-shadow: var(--md-elevation-1);
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.create-product-btn:hover {
  background-color: #5A41A0;
  box-shadow: var(--md-elevation-2);
}

.create-product-btn:active {
  box-shadow: var(--md-elevation-1);
}

/* Contenedor y estilos de la tabla */
.inventory-table-container {
  overflow-x: auto;
  border-radius: var(--md-border-radius-md);
  border: 1px solid var(--md-outline-variant);
  background-color: var(--md-surface);
}

.inventory-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 0;
  min-width: 800px; /* Ancho mínimo para scroll horizontal */
}

.inventory-table th,
.inventory-table td {
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  text-align: left;
  vertical-align: middle;
  font-size: var(--md-body-medium);
  color: var(--md-on-surface);
  border-bottom: 1px solid var(--md-outline-variant);
}

.inventory-table thead th {
  background-color: var(--md-surface-container-high);
  font-weight: 500;
  color: var(--md-on-surface);
  position: sticky;
  top: 0;
  z-index: 10;
}

.inventory-table tbody tr:hover {
  background-color: var(--md-surface-container-low);
}

.inventory-table tbody tr:last-child td {
  border-bottom: none;
}

/* Contenedor para los botones de acción */
.action-buttons {
  display: flex;
  gap: var(--md-spacing-sm);
  flex-wrap: wrap;
}

/* Estilo base para los botones de acción en la tabla */
.action-btn {
  padding: var(--md-spacing-sm) var(--md-spacing-md);
  border-radius: var(--md-border-radius-sm);
  border: 1px solid var(--md-outline);
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  cursor: pointer;
  font-size: var(--md-label-medium);
  font-weight: 500;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  min-height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.action-btn:hover {
  background-color: var(--md-surface-container);
  border-color: var(--md-outline);
}

.edit-btn {
  color: var(--md-primary);
  border-color: var(--md-primary);
}

.edit-btn:hover {
  background-color: var(--md-primary-container);
}

.delete-btn {
  color: var(--md-error);
  border-color: var(--md-error);
}

.delete-btn:hover {
  background-color: var(--md-error-container);
}

/* Estilos para estados de carga y error */
.loading {
  text-align: center;
  padding: var(--md-spacing-xxl);
  font-size: var(--md-title-medium);
  color: var(--md-on-surface-variant);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--md-spacing-lg);
}

.error-message {
  background-color: var(--md-error-container);
  color: var(--md-error);
  padding: var(--md-spacing-lg);
  border-radius: var(--md-border-radius-md);
  margin-bottom: var(--md-spacing-lg);
  border: 1px solid rgba(186, 26, 26, 0.2);
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
}

.no-data {
  text-align: center;
  padding: var(--md-spacing-xxl);
  color: var(--md-on-surface-variant);
  font-style: italic;
  font-size: var(--md-body-large);
}

/* Estilos del Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  padding: var(--md-spacing-lg);
}

.modal-content {
  background-color: var(--md-surface);
  border-radius: var(--md-border-radius-xl);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: var(--md-elevation-5);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--md-spacing-xl) var(--md-spacing-xl) var(--md-spacing-lg);
  border-bottom: 1px solid var(--md-outline-variant);
}

.modal-header h2 {
  margin: 0;
  color: var(--md-on-surface);
  font-size: var(--md-title-large);
  font-weight: 500;
}

.close-btn {
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--md-on-surface-variant);
  padding: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--md-border-radius-full);
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.close-btn:hover {
  color: var(--md-on-surface);
  background-color: var(--md-surface-container);
}

/* Estilos del formulario */
.inventory-form {
  padding: var(--md-spacing-xl);
}

.form-group {
  margin-bottom: var(--md-spacing-lg);
}

.form-group label {
  display: block;
  margin-bottom: var(--md-spacing-sm);
  font-weight: 500;
  color: var(--md-on-surface);
  font-size: var(--md-body-medium);
}

.form-group input,
.form-group select {
  width: 100%;
  height: 56px;
  padding: var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-body-large);
  font-family: inherit;
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  box-sizing: border-box;
  outline: none;
}

.form-group input:focus,
.form-group select:focus {
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

.form-group input::placeholder {
  color: var(--md-on-surface-variant);
  opacity: 0.7;
}

.form-row {
  display: flex;
  gap: var(--md-spacing-lg);
}

.form-row .form-group {
  flex: 1;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--md-spacing-md);
  margin-top: var(--md-spacing-xl);
  padding-top: var(--md-spacing-lg);
  border-top: 1px solid var(--md-outline-variant);
}

.btn-cancel {
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-md) var(--md-spacing-xl);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  min-height: 40px;
}

.btn-cancel:hover {
  background-color: var(--md-surface-container);
}

.btn-save {
  background-color: var(--md-primary);
  color: white;
  border: none;
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-md) var(--md-spacing-xl);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  box-shadow: var(--md-elevation-1);
  min-height: 40px;
}

.btn-save:hover {
  background-color: #5A41A0;
  box-shadow: var(--md-elevation-2);
}

/* Responsividad */
@media (max-width: 768px) {
  .inventory-container {
    margin: var(--md-spacing-md);
    padding: var(--md-spacing-lg);
    width: calc(100% - 2 * var(--md-spacing-md));
  }
  
  .inventory-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-md);
    text-align: center;
  }

  .inventory-title {
    font-size: var(--md-headline-small);
  }

  .create-product-btn {
    width: 100%;
    padding: var(--md-spacing-lg);
    min-height: 48px;
  }
  
  .form-row {
    flex-direction: column;
    gap: var(--md-spacing-md);
  }
  
  .form-actions {
    flex-direction: column;
    align-items: stretch;
  }

  .btn-cancel,
  .btn-save {
    width: 100%;
    min-height: 48px;
    padding: var(--md-spacing-lg);
  }
  
  .modal-content {
    width: calc(100% - 2 * var(--md-spacing-md));
    margin: var(--md-spacing-md);
  }

  .modal-header,
  .inventory-form {
    padding: var(--md-spacing-lg);
  }

  .action-buttons {
    flex-direction: column;
    align-items: stretch;
  }

  .action-btn {
    width: 100%;
    min-height: 40px;
    justify-content: center;
  }
}

@media (max-width: 480px) {
  .inventory-container {
    margin: var(--md-spacing-sm);
    padding: var(--md-spacing-md);
    width: calc(100% - 2 * var(--md-spacing-sm));
  }

  .inventory-title {
    font-size: var(--md-title-large);
  }

  .modal-overlay {
    padding: var(--md-spacing-sm);
  }

  .modal-content {
    width: calc(100% - 2 * var(--md-spacing-sm));
  }

  .modal-header,
  .inventory-form {
    padding: var(--md-spacing-md);
  }

  .form-group input,
  .form-group select {
    height: 48px;
    font-size: var(--md-body-medium);
  }
}

/* Mejoras para táctil */
@media (max-width: 768px) {
  .create-product-btn,
  .action-btn,
  .btn-cancel,
  .btn-save,
  .close-btn {
    touch-action: manipulation;
  }
}

/* Modo de alto contraste */
@media (prefers-contrast: high) {
  .inventory-table th,
  .inventory-table td {
    border-bottom-width: 2px;
  }

  .action-btn,
  .btn-cancel {
    border-width: 2px;
  }

  .form-group input,
  .form-group select {
    border-width: 2px;
  }

  .form-group input:focus,
  .form-group select:focus {
    border-width: 3px;
  }
}

/* Reducir movimiento */
@media (prefers-reduced-motion: reduce) {
  .create-product-btn,
  .action-btn,
  .btn-cancel,
  .btn-save,
  .close-btn,
  .form-group input,
  .form-group select {
    transition: none;
  }
}

/* Cabecera del contenedor */
.inventory-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
}

.inventory-title {
  font-size: 1.75rem;
  font-weight: 600;
  color: #172b4d;
  margin: 0;
}

/* Botón para crear nuevo inventario */
.create-product-btn {
  background-color: #0052cc;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.create-product-btn:hover {
  background-color: #0065ff;
}

/* Contenedor y estilos de la tabla */
.inventory-table-container {
  overflow-x: auto;
}

.inventory-table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 1rem;
}

.inventory-table th,
.inventory-table td {
  border: 1px solid #dfe1e6;
  padding: 0.8rem 1rem;
  text-align: left;
  vertical-align: middle;
  font-size: 0.9rem;
  color: #42526e;
}

.inventory-table thead th {
  background-color: #f9fafb;
  font-weight: 600;
  color: #172b4d;
}

/* Contenedor para los botones de acción */
.action-buttons {
  display: flex;
  gap: 0.5rem;
}

/* Estilo base para los botones de acción en la tabla */
.action-btn {
  padding: 0.4rem 0.8rem;
  border-radius: 5px;
  border: 1px solid #cccccc;
  background-color: #f4f4f4;
  cursor: pointer;
  font-size: 0.85rem;
  transition: background-color 0.2s, border-color 0.2s;
}

.action-btn:hover {
  background-color: #e9e9e9;
  border-color: #bbbbbb;
}

/* Estilos para estados de carga y error */
.loading {
  text-align: center;
  padding: 2rem;
  font-size: 1.1rem;
  color: #666;
}

.error-message {
  background-color: #ffebee;
  color: #c62828;
  padding: 1rem;
  border-radius: 6px;
  margin-bottom: 1rem;
  border: 1px solid #ffcdd2;
}

.no-data {
  text-align: center;
  padding: 2rem;
  color: #666;
  font-style: italic;
}

/* Estilos del Modal */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background-color: #ffffff;
  border-radius: 8px;
  width: 90%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem 2rem;
  border-bottom: 1px solid #dfe1e6;
}

.modal-header h2 {
  margin: 0;
  color: #172b4d;
  font-size: 1.25rem;
}

.close-btn {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: #666;
  padding: 0;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-btn:hover {
  color: #333;
}

/* Estilos del formulario */
.inventory-form {
  padding: 2rem;
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: #172b4d;
}

.form-group input,
.form-group select {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #dfe1e6;
  border-radius: 6px;
  font-size: 0.9rem;
  transition: border-color 0.2s;
  box-sizing: border-box;
}

.form-group input:focus,
.form-group select:focus {
  outline: none;
  border-color: #0052cc;
}

.form-row {
  display: flex;
  gap: 1rem;
}

.form-row .form-group {
  flex: 1;
}

.form-actions {
  display: flex;
  justify-content: flex-end;
  gap: 1rem;
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid #dfe1e6;
}

.btn-cancel {
  background-color: #ffffff;
  color: #42526e;
  border: 1px solid #dfe1e6;
  border-radius: 6px;
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btn-cancel:hover {
  background-color: #f4f5f7;
}

.btn-save {
  background-color: #0052cc;
  color: #ffffff;
  border: none;
  border-radius: 6px;
  padding: 0.75rem 1.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.btn-save:hover {
  background-color: #0065ff;
}

/* Responsividad */
@media (max-width: 768px) {
  .inventory-page {
    padding: 1rem;
  }
  
  .inventory-container {
    padding: 1rem;
  }
  
  .inventory-header {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }
  
  .form-row {
    flex-direction: column;
  }
  
  .form-actions {
    flex-direction: column;
  }
  
  .modal-content {
    width: 95%;
    margin: 1rem;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/Inventario.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import './InventarioModerno.css';
import { inventarioService } from '../services/inventarioService';
import ModalCrearProducto from './ModalCrearProducto';
import ModalEditarProducto from './ModalEditarProducto';
import type { ProductoDTO } from '../services/inventarioService';

interface InventarioProps {
  onNavigateToCompras?: () => void;
}

const Inventario: React.FC<InventarioProps> = ({ onNavigateToCompras }) => {
  // Estados principales
  const [productos, setProductos] = useState<ProductoDTO[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Estados de los modales
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [showEditModal, setShowEditModal] = useState(false);
  const [selectedProduct, setSelectedProduct] = useState<ProductoDTO | null>(null);

  // Cargar datos iniciales
  useEffect(() => {
    loadProductos();
  }, []);

  const loadProductos = async () => {
    try {
      setLoading(true);
      const productosData = await inventarioService.getAllProductos();
      // Filtrar solo productos activos
      const productosActivos = productosData.filter(producto => 
        producto.estadosEstado?.toLowerCase() === 'activo'
      );
      setProductos(productosActivos);
      setError(null);
    } catch (err) {
      setError('Error al cargar los productos');
      console.error('Error loading productos:', err);
    } finally {
      setLoading(false);
    }
  };

  // Abrir modal para crear nuevo producto
  const handleCrearNuevo = () => {
    setShowCreateModal(true);
  };

  // Navegar a compras a proveedores
  const handleComprarProducto = () => {
    console.log('🛒 Botón Comprar Producto clickeado!');
    console.log('onNavigateToCompras:', onNavigateToCompras);
    if (onNavigateToCompras) {
      onNavigateToCompras();
    } else {
      console.warn('onNavigateToCompras no está definido');
    }
  };

  // Abrir modal para editar producto
  const handleEditarProducto = (producto: ProductoDTO) => {
    setSelectedProduct(producto);
    setShowEditModal(true);
  };

  // Desactivar producto
  const handleDesactivarProducto = async (id: string, nombre: string) => {
    console.log('🚀 handleDesactivarProducto called with:', { id, nombre });
    
    if (window.confirm(`¿Estás seguro de que deseas desactivar el producto "${nombre}"?`)) {
      console.log('✅ User confirmed deactivation');
      try {
        console.log('🔄 Calling inventarioService.desactivarProducto...');
        const result = await inventarioService.desactivarProducto(id);
        console.log('✅ Deactivation successful:', result);
        
        console.log('🔄 Reloading products...');
        await loadProductos(); // Recargar datos
        console.log('✅ Products reloaded');
        setError(null);
      } catch (err) {
        console.error('❌ Error deactivating product:', err);
        setError('Error al desactivar el producto');
      }
    } else {
      console.log('❌ User cancelled deactivation');
    }
  };

  // Manejar éxito en creación/edición
  const handleModalSuccess = () => {
    loadProductos();
  };

  // Función para formatear precio
  const formatPrice = (price: number | undefined) => {
    if (price === undefined || price === null) return 'N/A';
    return new Intl.NumberFormat('es-MX', {
      style: 'currency',
      currency: 'MXN'
    }).format(price);
  };

  // Función para obtener clase CSS del estado
  const getStatusClass = (estado: string | undefined) => {
    if (!estado) return 'status-unknown';
    switch (estado.toLowerCase()) {
      case 'activo':
        return 'status-active';
      case 'inactivo':
        return 'status-inactive';
      case 'agotado':
        return 'status-out-of-stock';
      default:
        return 'status-unknown';
    }
  };

  if (loading) {
    return (
      <div className="loading-container">
        <div className="loading-spinner"></div>
        <p>Cargando productos...</p>
      </div>
    );
  }

  return (
    <div className="inventory-content">
      {error && (
        <div className="error-message">
          <span className="error-icon">⚠️</span>
          {error}
        </div>
      )}

      <div className="inventory-controls">
        <button
          className="purchase-btn"
          onClick={handleComprarProducto}
          title="Ir a compras a proveedores"
          style={{
            backgroundColor: '#4CAF50',
            color: 'white',
            border: 'none',
            padding: '12px 24px',
            borderRadius: '8px',
            fontWeight: 'bold',
            fontSize: '16px',
            cursor: 'pointer',
            boxShadow: '0 2px 4px rgba(0,0,0,0.2)',
            display: 'flex',
            alignItems: 'center',
            gap: '8px',
            transition: 'all 0.2s ease'
          }}
          onMouseOver={(e) => {
            e.currentTarget.style.backgroundColor = '#45a049';
            e.currentTarget.style.boxShadow = '0 4px 8px rgba(0,0,0,0.3)';
          }}
          onMouseOut={(e) => {
            e.currentTarget.style.backgroundColor = '#4CAF50';
            e.currentTarget.style.boxShadow = '0 2px 4px rgba(0,0,0,0.2)';
          }}
        >
          <span className="btn-icon">🛒</span>
          Comprar productos
        </button>
        <button
          className="create-product-btn"
          onClick={handleCrearNuevo}
        >
          <span className="btn-icon">+</span>
          CREAR NUEVO PRODUCTO
        </button>
      </div>

      <main className="inventory-table-container">
          <div className="table-wrapper">
            <table className="inventory-table">
              <thead>
                <tr>
                  <th>Producto</th>
                  <th>Categoría</th>
                  <th>Proveedor</th>
                  <th>Precio Compra</th>
                  <th>Precio Venta</th>
                  <th>Stock</th>
                  <th>Estado</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                {productos.map((producto) => (
                  <tr key={producto.id} className="table-row">
                    <td className="product-name-cell">
                      <div className="product-info">
                        <span className="product-name">{producto.nombre}</span>
                      </div>
                    </td>
                    <td>
                      <span className="category-badge">
                        {producto.categoriasProductosCategoria || 'Sin categoría'}
                      </span>
                    </td>
                    <td>
                      <div className="supplier-info">
                        <span className="supplier-name">
                          {producto.proveedorNombre || 'Sin proveedor'}
                          {producto.proveedorApellidoPaterno && ` ${producto.proveedorApellidoPaterno}`}
                        </span>
                      </div>
                    </td>
                    <td>
                      <span className="price-value">
                        {formatPrice(producto.precioCompraActual)}
                      </span>
                    </td>
                    <td>
                      <span className="price-value">
                        {formatPrice(producto.precioVentaActual)}
                      </span>
                    </td>
                    <td>
                      <div className="stock-info">
                        <span className={`stock-value ${(producto.cantidadInventario || 0) <= 10 ? 'low-stock' : ''}`}>
                          {producto.cantidadInventario || 0}
                        </span>
                        <span className="stock-unit">unidades</span>
                      </div>
                    </td>
                    <td>
                      <span className={`status-badge ${getStatusClass(producto.estadosEstado)}`}>
                        {producto.estadosEstado || 'No definido'}
                      </span>
                    </td>
                    <td>
                      <div className="action-buttons">
                        <button 
                          className="action-btn edit-btn" 
                          onClick={() => handleEditarProducto(producto)}
                          title="Editar producto"
                        >
                          <span className="btn-icon">✏️</span>
                          Editar
                        </button>
                        {producto.estadosEstado !== 'inactivo' && (
                          <button 
                            className="action-btn deactivate-btn" 
                            onClick={() => handleDesactivarProducto(producto.id, producto.nombre)}
                            title="Desactivar producto"
                          >
                            <span className="btn-icon">🚫</span>
                            Desactivar
                          </button>
                        )}
                      </div>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>

            {productos.length === 0 && (
              <div className="no-data">
                <div className="no-data-icon">📦</div>
                <h3>No hay productos registrados</h3>
                <p>Comienza creando tu primer producto con el botón "Crear Nuevo Producto"</p>
              </div>
            )}
          </div>
        </main>

        {/* Estadísticas rápidas */}
        <div className="quick-stats">
          <div className="stat-card">
            <div className="stat-value">{productos.length}</div>
            <div className="stat-label">Total Productos</div>
          </div>
          <div className="stat-card">
            <div className="stat-value">
              {productos.filter(p => {
                const estado = p.estadosEstado?.toLowerCase() || '';
                return estado === 'activo' || estado === 'active';
              }).length}
            </div>
            <div className="stat-label">Activos</div>
          </div>
          <div className="stat-card">
            <div className="stat-value">
              {productos.filter(p => (p.cantidadInventario || 0) <= 10).length}
            </div>
            <div className="stat-label">Stock Bajo</div>
          </div>
        </div>

        {/* Modal para crear producto */}
        <ModalCrearProducto
          isOpen={showCreateModal}
          onClose={() => setShowCreateModal(false)}
          onSuccess={handleModalSuccess}
        />

        {/* Modal para editar producto */}
        <ModalEditarProducto
          isOpen={showEditModal}
          onClose={() => setShowEditModal(false)}
          onSuccess={handleModalSuccess}
          producto={selectedProduct}
        />
      </div>
    );
  };

export default Inventario;

```

`proyecto-pos-finanzas/frontend/src/components/InventarioModerno.css`:

```css
/* ===== MODERN INVENTORY MANAGEMENT - MATERIAL DESIGN 3 ===== */

/* CSS Variables for Material Design 3 */
:root {
  /* Primary Color Palette */
  --md-primary: #6750a4;
  --md-primary-container: #eaddff;
  --md-on-primary: #ffffff;
  --md-on-primary-container: #21005d;
  
  /* Secondary Color Palette */
  --md-secondary: #625b71;
  --md-secondary-container: #e8def8;
  --md-on-secondary: #ffffff;
  --md-on-secondary-container: #1d192b;
  
  /* Tertiary Color Palette */
  --md-tertiary: #7d5260;
  --md-tertiary-container: #ffd8e4;
  --md-on-tertiary: #ffffff;
  --md-on-tertiary-container: #31111d;
  
  /* Error Color Palette */
  --md-error: #ba1a1a;
  --md-error-container: #ffdad6;
  --md-on-error: #ffffff;
  --md-on-error-container: #410002;
  
  /* Success Color Palette */
  --md-success: #4caf50;
  --md-success-container: #e8f5e8;
  --md-on-success: #ffffff;
  --md-on-success-container: #1b5e20;
  
  /* Warning Color Palette */
  --md-warning: #ff9800;
  --md-warning-container: #fff3e0;
  --md-on-warning: #ffffff;
  --md-on-warning-container: #e65100;
  
  /* Surface Color Palette */
  --md-surface: #fffbfe;
  --md-surface-dim: #ded8e1;
  --md-surface-bright: #fffbfe;
  --md-surface-variant: #f4eff4;
  --md-surface-container-lowest: #ffffff;
  --md-surface-container-low: #f7f2fa;
  --md-surface-container: #f1ecf4;
  --md-surface-container-high: #ebe6ed;
  --md-surface-container-highest: #e6e0e9;
  --md-on-surface: #1c1b1f;
  --md-on-surface-variant: #49454f;
  --md-inverse-surface: #313033;
  --md-inverse-on-surface: #f2eff2;
  
  /* Outline Color Palette */
  --md-outline: #79747e;
  --md-outline-variant: #cab6cf;
  
  /* Typography Scale */
  --md-display-large: 57px;
  --md-display-medium: 45px;
  --md-display-small: 36px;
  --md-headline-large: 32px;
  --md-headline-medium: 28px;
  --md-headline-small: 24px;
  --md-title-large: 22px;
  --md-title-medium: 16px;
  --md-title-small: 14px;
  --md-label-large: 14px;
  --md-label-medium: 12px;
  --md-label-small: 11px;
  --md-body-large: 16px;
  --md-body-medium: 14px;
  --md-body-small: 12px;
  
  /* Spacing Scale */
  --md-spacing-xs: 4px;
  --md-spacing-sm: 8px;
  --md-spacing-md: 16px;
  --md-spacing-lg: 24px;
  --md-spacing-xl: 32px;
  --md-spacing-xxl: 48px;
  --md-spacing-xxxl: 64px;

  /* Border Radius */
  --md-border-radius-xs: 4px;
  --md-border-radius-sm: 8px;
  --md-border-radius-md: 12px;
  --md-border-radius-lg: 16px;
  --md-border-radius-xl: 28px;
  --md-border-radius-full: 9999px;

  /* Shadows */
  --md-elevation-1: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-elevation-2: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  --md-elevation-3: 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  --md-elevation-4: 0px 2px 3px rgba(0, 0, 0, 0.3), 0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  --md-elevation-5: 0px 4px 4px rgba(0, 0, 0, 0.3), 0px 8px 12px 6px rgba(0, 0, 0, 0.15);

  /* Transitions */
  --md-motion-duration-short2: 100ms;
  --md-motion-duration-medium2: 300ms;
  --md-motion-duration-medium4: 400ms;
  --md-motion-easing-linear: cubic-bezier(0, 0, 1, 1);
  --md-motion-easing-standard: cubic-bezier(0.2, 0, 0, 1);
}

/* Base styles */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-feature-settings: 'cv11', 'ss01';
  font-variation-settings: 'opsz' 32;
}

/* ===== MAIN CONTAINER ===== */
.inventory-page {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--md-surface) 0%, var(--md-surface-container-low) 100%);
  color: var(--md-on-surface);
  font-family: inherit;
}

.inventory-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
}

/* ===== LOADING STATE ===== */
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  max-width: 400px;
  margin: 0 auto;
  gap: var(--md-spacing-lg);
  padding: var(--md-spacing-xl);
}

.loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid var(--md-outline-variant);
  border-top: 4px solid var(--md-primary);
  border-radius: var(--md-border-radius-full);
  animation: spin var(--md-motion-duration-medium4) var(--md-motion-easing-linear) infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-container p {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
}

/* ===== HEADER SECTION ===== */
.inventory-header {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-xl);
  margin-bottom: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  backdrop-filter: blur(10px);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
}

.header-title {
  flex: 1;
}

.inventory-title {
  font-size: var(--md-headline-large);
  font-weight: 600;
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-sm) 0;
  letter-spacing: -0.025em;
  line-height: 1.2;
}

.inventory-subtitle {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
  line-height: 1.5;
  max-width: 600px;
}

/* ===== PRIMARY ACTION BUTTON ===== */
.create-product-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  padding: var(--md-spacing-md) var(--md-spacing-xl);
  background: var(--md-primary);
  color: var(--md-on-primary);
  border: none;
  border-radius: var(--md-border-radius-xl);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
  box-shadow: var(--md-elevation-1);
  position: relative;
  overflow: hidden;
  min-height: 56px;
  letter-spacing: 0.1px;
}

/* ===== PURCHASE BUTTON (Comprar Producto) ===== */
.purchase-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  padding: var(--md-spacing-md) var(--md-spacing-xl);
  background: var(--md-secondary);
  color: var(--md-on-secondary);
  border: none;
  border-radius: var(--md-border-radius-xl);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
  box-shadow: var(--md-elevation-1);
  position: relative;
  overflow: hidden;
  min-height: 56px;
  letter-spacing: 0.1px;
}

.purchase-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--md-on-secondary);
  opacity: 0;
  transition: opacity var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.purchase-btn:hover::before {
  opacity: 0.08;
}

.purchase-btn:focus {
  outline: none;
  box-shadow: var(--md-elevation-2);
}

.purchase-btn:active {
  box-shadow: var(--md-elevation-1);
}

.purchase-btn .btn-icon {
  font-size: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.create-product-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--md-on-primary);
  opacity: 0;
  transition: opacity var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.create-product-btn:hover::before {
  opacity: 0.08;
}

.create-product-btn:focus {
  outline: none;
  box-shadow: var(--md-elevation-1), 0 0 0 3px rgba(103, 80, 164, 0.12);
}

.create-product-btn:active {
  transform: translateY(1px);
  box-shadow: var(--md-elevation-1);
}

.create-product-btn .btn-icon {
  font-size: 18px;
  font-weight: bold;
}

/* ===== ERROR MESSAGE ===== */
.error-message {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
  padding: var(--md-spacing-lg);
  background: var(--md-error-container);
  color: var(--md-on-error-container);
  border-radius: var(--md-border-radius-md);
  margin-bottom: var(--md-spacing-xl);
  border-left: 4px solid var(--md-error);
}

.error-icon {
  font-size: 20px;
  flex-shrink: 0;
}

/* ===== TABLE CONTAINER ===== */
.inventory-table-container {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  overflow: hidden;
  box-shadow: var(--md-elevation-1);
  margin-bottom: var(--md-spacing-xl);
}

.table-wrapper {
  overflow-x: auto;
}

/* ===== TABLE STYLES ===== */
.inventory-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--md-surface);
}

.inventory-table thead {
  background: var(--md-surface-container-high);
}

.inventory-table th {
  padding: var(--md-spacing-lg) var(--md-spacing-md);
  text-align: left;
  font-size: var(--md-title-small);
  font-weight: 500;
  color: var(--md-on-surface);
  border-bottom: 2px solid var(--md-outline-variant);
  position: sticky;
  top: 0;
  background: var(--md-surface-container-high);
  z-index: 1;
  letter-spacing: 0.1px;
}

.inventory-table th:first-child {
  padding-left: var(--md-spacing-xl);
}

.inventory-table th:last-child {
  padding-right: var(--md-spacing-xl);
}

.inventory-table td {
  padding: var(--md-spacing-lg) var(--md-spacing-md);
  font-size: var(--md-body-medium);
  color: var(--md-on-surface);
  border-bottom: 1px solid var(--md-outline-variant);
  vertical-align: middle;
}

.inventory-table td:first-child {
  padding-left: var(--md-spacing-xl);
}

.inventory-table td:last-child {
  padding-right: var(--md-spacing-xl);
}

.table-row {
  transition: background-color var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.table-row:hover {
  background: var(--md-surface-container-low);
}

/* ===== TABLE CELL STYLES ===== */
.product-name-cell {
  font-weight: 500;
  color: var(--md-on-surface);
}

.product-info {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.product-name {
  font-weight: 500;
  color: var(--md-on-surface);
  line-height: 1.4;
}

.category-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  background: var(--md-secondary-container);
  color: var(--md-on-secondary-container);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-medium);
  font-weight: 500;
  max-width: fit-content;
}

.supplier-info {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.supplier-name {
  color: var(--md-on-surface-variant);
  font-size: var(--md-body-medium);
  line-height: 1.4;
}

.price-value {
  font-weight: 600;
  color: var(--md-on-surface);
  font-variant-numeric: tabular-nums;
}

.stock-info {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-xs);
}

.stock-value {
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  color: var(--md-on-surface);
}

.stock-value.low-stock {
  color: var(--md-error);
}

.stock-unit {
  font-size: var(--md-label-small);
  color: var(--md-on-surface-variant);
}

/* ===== STATUS BADGES ===== */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-small);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  min-width: 70px;
  justify-content: center;
}

.status-active {
  background: var(--md-success-container);
  color: var(--md-on-success-container);
}

.status-inactive {
  background: var(--md-error-container);
  color: var(--md-on-error-container);
}

.status-out-of-stock {
  background: var(--md-warning-container);
  color: var(--md-on-warning-container);
}

.status-unknown {
  background: var(--md-outline-variant);
  color: var(--md-on-surface-variant);
}

/* ===== ACTION BUTTONS ===== */
.action-buttons {
  display: flex;
  gap: var(--md-spacing-sm);
  align-items: center;
}

.action-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-xs);
  padding: var(--md-spacing-sm) var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  background: var(--md-surface);
  color: var(--md-on-surface);
  font-size: var(--md-label-small);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
  min-height: 32px;
  white-space: nowrap;
}

.action-btn:hover {
  background: var(--md-surface-container);
  border-color: var(--md-outline);
}

.action-btn:focus {
  outline: none;
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

.edit-btn:hover {
  background: var(--md-primary-container);
  border-color: var(--md-primary);
  color: var(--md-on-primary-container);
}

.deactivate-btn:hover {
  background: var(--md-error-container);
  border-color: var(--md-error);
  color: var(--md-on-error-container);
}

.action-btn .btn-icon {
  font-size: 14px;
}

/* ===== NO DATA STATE ===== */
.no-data {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--md-spacing-xxxl);
  text-align: center;
  color: var(--md-on-surface-variant);
}

.no-data-icon {
  font-size: 64px;
  margin-bottom: var(--md-spacing-lg);
  opacity: 0.6;
}

.no-data h3 {
  font-size: var(--md-headline-small);
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-md) 0;
  font-weight: 400;
}

.no-data p {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
  max-width: 400px;
  line-height: 1.5;
}

/* ===== QUICK STATS ===== */
.quick-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--md-spacing-lg);
  margin-top: var(--md-spacing-xl);
}

.stat-card {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-xl);
  text-align: center;
  box-shadow: var(--md-elevation-1);
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.stat-card:hover {
  box-shadow: var(--md-elevation-2);
  transform: translateY(-2px);
}

.stat-value {
  font-size: var(--md-display-small);
  font-weight: 600;
  color: var(--md-primary);
  margin-bottom: var(--md-spacing-xs);
  font-variant-numeric: tabular-nums;
  line-height: 1;
}

.stat-label {
  font-size: var(--md-body-medium);
  color: var(--md-on-surface-variant);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ===== RESPONSIVE DESIGN ===== */

/* Large Desktop (1200px+) */
@media (min-width: 1200px) {
  .inventory-container {
    padding: var(--md-spacing-xl);
  }
  
  .inventory-header {
    padding: var(--md-spacing-xxl);
  }
  
  .inventory-title {
    font-size: var(--md-display-small);
  }
}

/* Tablet (768px - 1199px) */
@media (max-width: 1199px) {
  .inventory-container {
    padding: var(--md-spacing-md);
  }
  
  .header-content {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--md-spacing-lg);
  }
  
  .create-product-btn {
    align-self: stretch;
    justify-content: center;
  }
  
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-md) var(--md-spacing-sm);
  }
  
  .inventory-table th:first-child,
  .inventory-table td:first-child {
    padding-left: var(--md-spacing-md);
  }
  
  .inventory-table th:last-child,
  .inventory-table td:last-child {
    padding-right: var(--md-spacing-md);
  }
}

/* Small Tablet / Large Phone (600px - 767px) */
@media (max-width: 767px) {
  .inventory-container {
    padding: var(--md-spacing-sm);
  }
  
  .inventory-header {
    padding: var(--md-spacing-lg);
  }
  
  .inventory-title {
    font-size: var(--md-headline-medium);
  }
  
  .inventory-subtitle {
    font-size: var(--md-body-medium);
  }
  
  /* Hide less important columns on smaller screens */
  .inventory-table th:nth-child(4),
  .inventory-table td:nth-child(4),
  .inventory-table th:nth-child(2),
  .inventory-table td:nth-child(2) {
    display: none;
  }
  
  .action-buttons {
    flex-direction: column;
    gap: var(--md-spacing-xs);
  }
  
  .action-btn {
    font-size: var(--md-label-small);
    padding: var(--md-spacing-xs) var(--md-spacing-sm);
    min-height: 28px;
  }
  
  .quick-stats {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--md-spacing-md);
  }
  
  .stat-card {
    padding: var(--md-spacing-lg);
  }
  
  .stat-value {
    font-size: var(--md-headline-large);
  }
}

/* Mobile (480px and below) */
@media (max-width: 480px) {
  .inventory-container {
    padding: var(--md-spacing-xs);
  }
  
  .inventory-header {
    padding: var(--md-spacing-md);
  }
  
  .inventory-title {
    font-size: var(--md-headline-small);
  }
  
  .create-product-btn,
  .purchase-btn {
    font-size: var(--md-label-medium);
    padding: var(--md-spacing-sm) var(--md-spacing-lg);
    min-height: 48px;
  }
  
  /* Show only essential columns on mobile */
  .inventory-table th:nth-child(3),
  .inventory-table td:nth-child(3),
  .inventory-table th:nth-child(5),
  .inventory-table td:nth-child(5),
  .inventory-table th:nth-child(7),
  .inventory-table td:nth-child(7) {
    display: none;
  }
  
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-sm) var(--md-spacing-xs);
    font-size: var(--md-body-small);
  }
  
  .inventory-table th:first-child,
  .inventory-table td:first-child {
    padding-left: var(--md-spacing-sm);
  }
  
  .inventory-table th:last-child,
  .inventory-table td:last-child {
    padding-right: var(--md-spacing-sm);
  }
  
  .action-btn {
    font-size: var(--md-label-small);
    padding: var(--md-spacing-xs);
    min-height: 32px;
  }
  
  .action-btn .btn-icon {
    display: none;
  }
  
  .quick-stats {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-sm);
  }
  
  .no-data {
    padding: var(--md-spacing-xl);
  }
  
  .no-data-icon {
    font-size: 48px;
  }
  
  .no-data h3 {
    font-size: var(--md-title-large);
  }
  
  .no-data p {
    font-size: var(--md-body-medium);
  }
}

/* ===== ACCESSIBILITY ===== */

/* Focus styles for keyboard navigation */
*:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

button:focus,
.action-btn:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .inventory-table th,
  .inventory-table td {
    border-color: var(--md-on-surface);
  }
  
  .status-badge,
  .category-badge {
    border: 1px solid currentColor;
  }
  
  .action-btn {
    border-width: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .loading-spinner {
    animation: none;
    border: 4px solid var(--md-outline-variant);
    border-top: 4px solid var(--md-primary);
  }
}

/* Print styles */
@media print {
  .create-product-btn,
  .purchase-btn,
  .action-buttons,
  .quick-stats {
    display: none;
  }
  
  .inventory-page {
    background: white;
  }
  
  .inventory-table {
    border-collapse: collapse;
    border: 1px solid black;
  }
  
  .inventory-table th,
  .inventory-table td {
    border: 1px solid black;
    padding: 8px;
  }
}

/* ===== INVENTORY CONTENT STYLES ===== */
.inventory-content {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
}

.inventory-controls {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  gap: var(--md-spacing-md);
  margin-bottom: var(--md-spacing-xl);
  padding: 0 var(--md-spacing-md);
}

/* Responsive adjustments for inventory content */
@media (max-width: 768px) {
  .inventory-content {
    padding: var(--md-spacing-md);
  }
  
  .inventory-controls {
    justify-content: center;
    padding: 0;
    flex-direction: column;
    gap: var(--md-spacing-sm);
  }
}

@media (max-width: 480px) {
  .inventory-content {
    padding: var(--md-spacing-xs);
  }
  
  .inventory-controls {
    flex-direction: column;
    gap: var(--md-spacing-sm);
  }
  
  .create-product-btn,
  .purchase-btn {
    width: 100%;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/InventarioModerno.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { inventarioService } from '../services/inventarioService';
import type { 
  InventarioDTO, 
  ProductoDTO, 
  UbicacionDTO, 
  CategoriaDTO, 
  ProveedorDTO,
  ProductoCreacionRequest 
} from '../services/inventarioService';
import './InventarioModerno.css';

interface InventarioModernoProps {
  usuarioId?: string; // Para los movimientos de inventario
}

const InventarioModerno: React.FC<InventarioModernoProps> = ({ usuarioId = "default-user-id" }) => {
  // Estados principales
  const [inventarios, setInventarios] = useState<InventarioDTO[]>([]);
  const [productos, setProductos] = useState<ProductoDTO[]>([]);
  const [ubicaciones, setUbicaciones] = useState<UbicacionDTO[]>([]);
  const [categorias, setCategorias] = useState<CategoriaDTO[]>([]);
  const [proveedores, setProveedores] = useState<ProveedorDTO[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // Estados del modal de creación de producto
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [formData, setFormData] = useState<ProductoCreacionRequest>({
    nombre: '',
    categoriasProductosId: '',
    proveedorId: '',
    precioVenta: 0,
    precioCompra: 0,
    unidadMedida: 'piezas',
    stockInicial: 0,
    ubicacionId: '',
    stockMinimo: 0,
    stockMaximo: 0,
    usuarioId: usuarioId
  });

  // Estados del modal de edición de producto (reserved for future use)
  // const [showEditModal, setShowEditModal] = useState(false);
  // const [editingProduct, setEditingProduct] = useState<ProductoDTO | null>(null);

  // Estado para vista de tabla
  const [viewMode, setViewMode] = useState<'productos' | 'inventario'>('productos');

  // Cargar datos iniciales
  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    try {
      setLoading(true);
      const [inventariosData, productosData, ubicacionesData, categoriasData, proveedoresData] = await Promise.all([
        inventarioService.getAllInventarios(),
        inventarioService.getAllProductos(),
        inventarioService.getAllUbicaciones(),
        inventarioService.getAllCategorias(),
        inventarioService.getAllProveedores()
      ]);
      
      // Filtrar solo productos activos
      const productosActivos = productosData.filter(producto => 
        producto.estadosEstado?.toLowerCase() === 'activo'
      );
      
      setInventarios(inventariosData);
      setProductos(productosActivos);
      setUbicaciones(ubicacionesData);
      setCategorias(categoriasData);
      setProveedores(proveedoresData);
      setError(null);
    } catch (err) {
      setError('Error al cargar los datos');
      console.error('Error loading data:', err);
    } finally {
      setLoading(false);
    }
  };

  // Manejar cambios en el formulario de creación
  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: ['precioVenta', 'precioCompra', 'stockInicial', 'stockMinimo', 'stockMaximo'].includes(name) 
        ? parseFloat(value) || 0 
        : value
    }));
  };

  // Crear nuevo producto completo
  const handleCreateProduct = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!formData.nombre || !formData.categoriasProductosId || !formData.proveedorId || !formData.ubicacionId) {
      setError('Todos los campos obligatorios deben ser completados');
      return;
    }

    try {
      await inventarioService.createProductoCompleto(formData);
      setShowCreateModal(false);
      resetForm();
      await loadData();
      setError(null);
    } catch (err) {
      setError('Error al crear el producto');
      console.error('Error creating product:', err);
    }
  };

  // Desactivar producto
  const handleDeactivateProduct = async (productId: string) => {
    if (window.confirm('¿Estás seguro de que deseas desactivar este producto?')) {
      try {
        await inventarioService.desactivarProducto(productId);
        await loadData();
        setError(null);
      } catch (err) {
        setError('Error al desactivar el producto');
        console.error('Error deactivating product:', err);
      }
    }
  };

  // Abrir modal de edición
  const handleEditProduct = (product: ProductoDTO) => {
    // TODO: Implement edit modal
    console.log('Editing product:', product);
    // setEditingProduct(product);
    // setShowEditModal(true);
  };

  // Resetear formulario
  const resetForm = () => {
    setFormData({
      nombre: '',
      categoriasProductosId: '',
      proveedorId: '',
      precioVenta: 0,
      precioCompra: 0,
      unidadMedida: 'piezas',
      stockInicial: 0,
      ubicacionId: '',
      stockMinimo: 0,
      stockMaximo: 0,
      usuarioId: usuarioId
    });
  };

  // Cerrar modales
  const handleCloseCreateModal = () => {
    setShowCreateModal(false);
    resetForm();
    setError(null);
  };

  // const handleCloseEditModal = () => {
  //   setShowEditModal(false);
  //   setEditingProduct(null);
  //   setError(null);
  // };

  if (loading) {
    return (
      <div className="inventory-loading">
        <div className="loading-spinner"></div>
        <p>Cargando inventario...</p>
      </div>
    );
  }

  return (
    <div className="inventory-modern">
      {/* Header */}
      <header className="inventory-header">
        <div className="inventory-header-content">
          <div className="inventory-title-section">
            <h1 className="inventory-title">Gestión de Inventario</h1>
            <p className="inventory-subtitle">
              {viewMode === 'productos' ? 'Administra tu catálogo de productos' : 'Controla las existencias de inventario'}
            </p>
          </div>
          
          <div className="inventory-actions">
            <div className="view-toggle">
              <button 
                className={`toggle-btn ${viewMode === 'productos' ? 'active' : ''}`}
                onClick={() => setViewMode('productos')}
              >
                Productos
              </button>
              <button 
                className={`toggle-btn ${viewMode === 'inventario' ? 'active' : ''}`}
                onClick={() => setViewMode('inventario')}
              >
                Inventario
              </button>
            </div>
            
            <button 
              className="create-btn primary"
              onClick={() => setShowCreateModal(true)}
            >
              <span className="btn-icon">+</span>
              Crear Nuevo Producto
            </button>
          </div>
        </div>
      </header>

      {/* Error Message */}
      {error && (
        <div className="error-banner">
          <span className="error-icon">⚠️</span>
          <span>{error}</span>
          <button onClick={() => setError(null)} className="error-close">×</button>
        </div>
      )}

      {/* Main Content */}
      <main className="inventory-content">
        {viewMode === 'productos' ? (
          <div className="products-view">
            <div className="data-table-container">
              <table className="data-table">
                <thead>
                  <tr>
                    <th>Producto</th>
                    <th>Categoría</th>
                    <th>Proveedor</th>
                    <th>Precio Venta</th>
                    <th>Precio Compra</th>
                    <th>Stock</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  {productos.map((producto) => (
                    <tr key={producto.id}>
                      <td>
                        <div className="product-info">
                          <span className="product-name">{producto.nombre}</span>
                        </div>
                      </td>
                      <td>
                        <span className="category-badge">
                          {producto.categoriasProductosCategoria || 'Sin categoría'}
                        </span>
                      </td>
                      <td>
                        {producto.proveedorNombre} {producto.proveedorApellidoPaterno}
                      </td>
                      <td>
                        <span className="price">
                          ${producto.precioVentaActual?.toFixed(2) || '0.00'}
                        </span>
                      </td>
                      <td>
                        <span className="price">
                          ${producto.precioCompraActual?.toFixed(2) || '0.00'}
                        </span>
                      </td>
                      <td>
                        <span className={`stock ${(producto.cantidadInventario || 0) < 10 ? 'low' : ''}`}>
                          {producto.cantidadInventario || 0}
                        </span>
                      </td>
                      <td>
                        <span className={`status-badge ${producto.estadosEstado?.toLowerCase()}`}>
                          {producto.estadosEstado || 'Desconocido'}
                        </span>
                      </td>
                      <td>
                        <div className="actions">
                          <button 
                            className="action-btn edit"
                            onClick={() => handleEditProduct(producto)}
                            title="Editar producto"
                          >
                            ✏️
                          </button>
                          <button 
                            className="action-btn delete"
                            onClick={() => handleDeactivateProduct(producto.id)}
                            title="Desactivar producto"
                          >
                            🗑️
                          </button>
                        </div>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        ) : (
          <div className="inventory-view">
            <div className="data-table-container">
              <table className="data-table">
                <thead>
                  <tr>
                    <th>Producto</th>
                    <th>Ubicación</th>
                    <th>Cantidad (Pz)</th>
                    <th>Cantidad (Kg)</th>
                    <th>Stock Mínimo</th>
                    <th>Stock Máximo</th>
                    <th>Estado</th>
                  </tr>
                </thead>
                <tbody>
                  {inventarios.map((inventario) => (
                    <tr key={inventario.id}>
                      <td>{inventario.productoNombre}</td>
                      <td>{inventario.ubicacionNombre}</td>
                      <td>
                        <span className={`stock ${(inventario.cantidadPz || 0) < inventario.cantidadMinima ? 'low' : ''}`}>
                          {inventario.cantidadPz || 0}
                        </span>
                      </td>
                      <td>{inventario.cantidadKg || 0}</td>
                      <td>{inventario.cantidadMinima}</td>
                      <td>{inventario.cantidadMaxima}</td>
                      <td>
                        <span className={`status-indicator ${
                          (inventario.cantidadPz || 0) < inventario.cantidadMinima ? 'low' : 
                          (inventario.cantidadPz || 0) > inventario.cantidadMaxima ? 'high' : 'normal'
                        }`}>
                          {(inventario.cantidadPz || 0) < inventario.cantidadMinima ? 'Bajo' : 
                           (inventario.cantidadPz || 0) > inventario.cantidadMaxima ? 'Alto' : 'Normal'}
                        </span>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}
      </main>

      {/* Modal de Creación de Producto */}
      {showCreateModal && (
        <div className="modal-overlay" onClick={handleCloseCreateModal}>
          <div className="modal-content" onClick={(e) => e.stopPropagation()}>
            <div className="modal-header">
              <h2>Crear Nuevo Producto</h2>
              <button className="modal-close" onClick={handleCloseCreateModal}>×</button>
            </div>
            
            <form onSubmit={handleCreateProduct} className="product-form">
              <div className="form-grid">
                <div className="form-group">
                  <label htmlFor="nombre">Nombre del Producto *</label>
                  <input
                    type="text"
                    id="nombre"
                    name="nombre"
                    value={formData.nombre}
                    onChange={handleInputChange}
                    required
                    placeholder="Ingresa el nombre del producto"
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="categoriasProductosId">Categoría *</label>
                  <select
                    id="categoriasProductosId"
                    name="categoriasProductosId"
                    value={formData.categoriasProductosId}
                    onChange={handleInputChange}
                    required
                  >
                    <option value="">Selecciona una categoría</option>
                    {categorias.map(categoria => (
                      <option key={categoria.id} value={categoria.id}>
                        {categoria.categoria}
                      </option>
                    ))}
                  </select>
                </div>

                <div className="form-group">
                  <label htmlFor="proveedorId">Proveedor *</label>
                  <select
                    id="proveedorId"
                    name="proveedorId"
                    value={formData.proveedorId}
                    onChange={handleInputChange}
                    required
                  >
                    <option value="">Selecciona un proveedor</option>
                    {proveedores.map(proveedor => (
                      <option key={proveedor.id} value={proveedor.id}>
                        {proveedor.nombre} {proveedor.apellidoPaterno}
                      </option>
                    ))}
                  </select>
                </div>

                <div className="form-group">
                  <label htmlFor="precioVenta">Precio de Venta *</label>
                  <input
                    type="number"
                    id="precioVenta"
                    name="precioVenta"
                    value={formData.precioVenta}
                    onChange={handleInputChange}
                    min="0"
                    step="0.01"
                    required
                    placeholder="0.00"
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="precioCompra">Precio de Compra *</label>
                  <input
                    type="number"
                    id="precioCompra"
                    name="precioCompra"
                    value={formData.precioCompra}
                    onChange={handleInputChange}
                    min="0"
                    step="0.01"
                    required
                    placeholder="0.00"
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="unidadMedida">Unidad de Medida *</label>
                  <select
                    id="unidadMedida"
                    name="unidadMedida"
                    value={formData.unidadMedida}
                    onChange={handleInputChange}
                    required
                  >
                    <option value="piezas">Piezas</option>
                    <option value="kilogramos">Kilogramos</option>
                  </select>
                </div>

                <div className="form-group">
                  <label htmlFor="stockInicial">Stock Inicial *</label>
                  <input
                    type="number"
                    id="stockInicial"
                    name="stockInicial"
                    value={formData.stockInicial}
                    onChange={handleInputChange}
                    min="0"
                    required
                    placeholder="0"
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="ubicacionId">Ubicación Inicial *</label>
                  <select
                    id="ubicacionId"
                    name="ubicacionId"
                    value={formData.ubicacionId}
                    onChange={handleInputChange}
                    required
                  >
                    <option value="">Selecciona una ubicación</option>
                    {ubicaciones.map(ubicacion => (
                      <option key={ubicacion.id} value={ubicacion.id}>
                        {ubicacion.nombre} - {ubicacion.ubicacion}
                      </option>
                    ))}
                  </select>
                </div>

                <div className="form-group">
                  <label htmlFor="stockMinimo">Stock Mínimo *</label>
                  <input
                    type="number"
                    id="stockMinimo"
                    name="stockMinimo"
                    value={formData.stockMinimo}
                    onChange={handleInputChange}
                    min="0"
                    required
                    placeholder="0"
                  />
                </div>

                <div className="form-group">
                  <label htmlFor="stockMaximo">Stock Máximo *</label>
                  <input
                    type="number"
                    id="stockMaximo"
                    name="stockMaximo"
                    value={formData.stockMaximo}
                    onChange={handleInputChange}
                    min="0"
                    required
                    placeholder="0"
                  />
                </div>
              </div>

              <div className="form-actions">
                <button type="button" className="btn secondary" onClick={handleCloseCreateModal}>
                  Cancelar
                </button>
                <button type="submit" className="btn primary">
                  Crear Producto
                </button>
              </div>
            </form>
          </div>
        </div>
      )}
    </div>
  );
};

export default InventarioModerno;

```

`proyecto-pos-finanzas/frontend/src/components/InventarioModernoNew.css`:

```css
/* ===== MODERN INVENTORY MANAGEMENT - MATERIAL DESIGN 3 ===== */

/* CSS Variables for Material Design 3 */
:root {
  /* Primary Color Palette */
  --md-primary: #6750a4;
  --md-primary-container: #eaddff;
  --md-on-primary: #ffffff;
  --md-on-primary-container: #21005d;
  
  /* Secondary Color Palette */
  --md-secondary: #625b71;
  --md-secondary-container: #e8def8;
  --md-on-secondary: #ffffff;
  --md-on-secondary-container: #1d192b;
  
  /* Tertiary Color Palette */
  --md-tertiary: #7d5260;
  --md-tertiary-container: #ffd8e4;
  --md-on-tertiary: #ffffff;
  --md-on-tertiary-container: #31111d;
  
  /* Error Color Palette */
  --md-error: #ba1a1a;
  --md-error-container: #ffdad6;
  --md-on-error: #ffffff;
  --md-on-error-container: #410002;
  
  /* Success Color Palette */
  --md-success: #4caf50;
  --md-success-container: #e8f5e8;
  --md-on-success: #ffffff;
  --md-on-success-container: #1b5e20;
  
  /* Warning Color Palette */
  --md-warning: #ff9800;
  --md-warning-container: #fff3e0;
  --md-on-warning: #ffffff;
  --md-on-warning-container: #e65100;
  
  /* Surface Color Palette */
  --md-surface: #fffbfe;
  --md-surface-dim: #ded8e1;
  --md-surface-bright: #fffbfe;
  --md-surface-variant: #f4eff4;
  --md-surface-container-lowest: #ffffff;
  --md-surface-container-low: #f7f2fa;
  --md-surface-container: #f1ecf4;
  --md-surface-container-high: #ebe6ed;
  --md-surface-container-highest: #e6e0e9;
  --md-on-surface: #1c1b1f;
  --md-on-surface-variant: #49454f;
  --md-inverse-surface: #313033;
  --md-inverse-on-surface: #f2eff2;
  
  /* Outline Color Palette */
  --md-outline: #79747e;
  --md-outline-variant: #cab6cf;
  
  /* Typography Scale */
  --md-display-large: 57px;
  --md-display-medium: 45px;
  --md-display-small: 36px;
  --md-headline-large: 32px;
  --md-headline-medium: 28px;
  --md-headline-small: 24px;
  --md-title-large: 22px;
  --md-title-medium: 16px;
  --md-title-small: 14px;
  --md-label-large: 14px;
  --md-label-medium: 12px;
  --md-label-small: 11px;
  --md-body-large: 16px;
  --md-body-medium: 14px;
  --md-body-small: 12px;
  
  /* Spacing Scale */
  --md-spacing-xs: 4px;
  --md-spacing-sm: 8px;
  --md-spacing-md: 16px;
  --md-spacing-lg: 24px;
  --md-spacing-xl: 32px;
  --md-spacing-xxl: 48px;
  --md-spacing-xxxl: 64px;

  /* Border Radius */
  --md-border-radius-xs: 4px;
  --md-border-radius-sm: 8px;
  --md-border-radius-md: 12px;
  --md-border-radius-lg: 16px;
  --md-border-radius-xl: 28px;
  --md-border-radius-full: 9999px;

  /* Shadows */
  --md-elevation-1: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 1px 3px 1px rgba(0, 0, 0, 0.15);
  --md-elevation-2: 0px 1px 2px rgba(0, 0, 0, 0.3), 0px 2px 6px 2px rgba(0, 0, 0, 0.15);
  --md-elevation-3: 0px 1px 3px rgba(0, 0, 0, 0.3), 0px 4px 8px 3px rgba(0, 0, 0, 0.15);
  --md-elevation-4: 0px 2px 3px rgba(0, 0, 0, 0.3), 0px 6px 10px 4px rgba(0, 0, 0, 0.15);
  --md-elevation-5: 0px 4px 4px rgba(0, 0, 0, 0.3), 0px 8px 12px 6px rgba(0, 0, 0, 0.15);

  /* Transitions */
  --md-motion-duration-short2: 100ms;
  --md-motion-duration-medium2: 300ms;
  --md-motion-duration-medium4: 400ms;
  --md-motion-easing-linear: cubic-bezier(0, 0, 1, 1);
  --md-motion-easing-standard: cubic-bezier(0.2, 0, 0, 1);
}

/* Base styles */
* {
  box-sizing: border-box;
}

body {
  font-family: 'Inter', 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-feature-settings: 'cv11', 'ss01';
  font-variation-settings: 'opsz' 32;
}

/* ===== MAIN CONTAINER ===== */
.inventory-page {
  min-height: 100vh;
  background: linear-gradient(135deg, var(--md-surface) 0%, var(--md-surface-container-low) 100%);
  color: var(--md-on-surface);
  font-family: inherit;
}

.inventory-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
}

/* ===== LOADING STATE ===== */
.loading-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 60vh;
  gap: var(--md-spacing-lg);
}

.loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid var(--md-outline-variant);
  border-top: 4px solid var(--md-primary);
  border-radius: var(--md-border-radius-full);
  animation: spin var(--md-motion-duration-medium4) var(--md-motion-easing-linear) infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-container p {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
}

/* ===== HEADER SECTION ===== */
.inventory-header {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-xl);
  margin-bottom: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  backdrop-filter: blur(10px);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
}

.header-title {
  flex: 1;
}

.inventory-title {
  font-size: var(--md-headline-large);
  font-weight: 600;
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-sm) 0;
  letter-spacing: -0.025em;
  line-height: 1.2;
}

.inventory-subtitle {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
  line-height: 1.5;
  max-width: 600px;
}

/* ===== PRIMARY ACTION BUTTON ===== */
.create-product-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  padding: var(--md-spacing-md) var(--md-spacing-xl);
  background: var(--md-primary);
  color: var(--md-on-primary);
  border: none;
  border-radius: var(--md-border-radius-xl);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
  box-shadow: var(--md-elevation-1);
  position: relative;
  overflow: hidden;
  min-height: 56px;
  letter-spacing: 0.1px;
}

.create-product-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--md-on-primary);
  opacity: 0;
  transition: opacity var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.create-product-btn:hover::before {
  opacity: 0.08;
}

.create-product-btn:focus {
  outline: none;
  box-shadow: var(--md-elevation-1), 0 0 0 3px rgba(103, 80, 164, 0.12);
}

.create-product-btn:active {
  transform: translateY(1px);
  box-shadow: var(--md-elevation-1);
}

.create-product-btn .btn-icon {
  font-size: 18px;
  font-weight: bold;
}

/* ===== ERROR MESSAGE ===== */
.error-message {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
  padding: var(--md-spacing-lg);
  background: var(--md-error-container);
  color: var(--md-on-error-container);
  border-radius: var(--md-border-radius-md);
  margin-bottom: var(--md-spacing-xl);
  border-left: 4px solid var(--md-error);
}

.error-icon {
  font-size: 20px;
  flex-shrink: 0;
}

/* ===== TABLE CONTAINER ===== */
.inventory-table-container {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  overflow: hidden;
  box-shadow: var(--md-elevation-1);
  margin-bottom: var(--md-spacing-xl);
}

.table-wrapper {
  overflow-x: auto;
}

/* ===== TABLE STYLES ===== */
.inventory-table {
  width: 100%;
  border-collapse: collapse;
  background: var(--md-surface);
}

.inventory-table thead {
  background: var(--md-surface-container-high);
}

.inventory-table th {
  padding: var(--md-spacing-lg) var(--md-spacing-md);
  text-align: left;
  font-size: var(--md-title-small);
  font-weight: 500;
  color: var(--md-on-surface);
  border-bottom: 2px solid var(--md-outline-variant);
  position: sticky;
  top: 0;
  background: var(--md-surface-container-high);
  z-index: 1;
  letter-spacing: 0.1px;
}

.inventory-table th:first-child {
  padding-left: var(--md-spacing-xl);
}

.inventory-table th:last-child {
  padding-right: var(--md-spacing-xl);
}

.inventory-table td {
  padding: var(--md-spacing-lg) var(--md-spacing-md);
  font-size: var(--md-body-medium);
  color: var(--md-on-surface);
  border-bottom: 1px solid var(--md-outline-variant);
  vertical-align: middle;
}

.inventory-table td:first-child {
  padding-left: var(--md-spacing-xl);
}

.inventory-table td:last-child {
  padding-right: var(--md-spacing-xl);
}

.table-row {
  transition: background-color var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.table-row:hover {
  background: var(--md-surface-container-low);
}

/* ===== TABLE CELL STYLES ===== */
.product-name-cell {
  font-weight: 500;
  color: var(--md-on-surface);
}

.product-info {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.product-name {
  font-weight: 500;
  color: var(--md-on-surface);
  line-height: 1.4;
}

.category-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  background: var(--md-secondary-container);
  color: var(--md-on-secondary-container);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-medium);
  font-weight: 500;
  max-width: fit-content;
}

.supplier-info {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.supplier-name {
  color: var(--md-on-surface-variant);
  font-size: var(--md-body-medium);
  line-height: 1.4;
}

.price-value {
  font-weight: 600;
  color: var(--md-on-surface);
  font-variant-numeric: tabular-nums;
}

.stock-info {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-xs);
}

.stock-value {
  font-weight: 600;
  font-variant-numeric: tabular-nums;
  color: var(--md-on-surface);
}

.stock-value.low-stock {
  color: var(--md-error);
}

.stock-unit {
  font-size: var(--md-label-small);
  color: var(--md-on-surface-variant);
}

/* ===== STATUS BADGES ===== */
.status-badge {
  display: inline-flex;
  align-items: center;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-sm);
  font-size: var(--md-label-small);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  min-width: 70px;
  justify-content: center;
}

.status-active {
  background: var(--md-success-container);
  color: var(--md-on-success-container);
}

.status-inactive {
  background: var(--md-error-container);
  color: var(--md-on-error-container);
}

.status-out-of-stock {
  background: var(--md-warning-container);
  color: var(--md-on-warning-container);
}

.status-unknown {
  background: var(--md-outline-variant);
  color: var(--md-on-surface-variant);
}

/* ===== ACTION BUTTONS ===== */
.action-buttons {
  display: flex;
  gap: var(--md-spacing-sm);
  align-items: center;
}

.action-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-xs);
  padding: var(--md-spacing-sm) var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  background: var(--md-surface);
  color: var(--md-on-surface);
  font-size: var(--md-label-small);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
  min-height: 32px;
  white-space: nowrap;
}

.action-btn:hover {
  background: var(--md-surface-container);
  border-color: var(--md-outline);
}

.action-btn:focus {
  outline: none;
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

.edit-btn:hover {
  background: var(--md-primary-container);
  border-color: var(--md-primary);
  color: var(--md-on-primary-container);
}

.deactivate-btn:hover {
  background: var(--md-error-container);
  border-color: var(--md-error);
  color: var(--md-on-error-container);
}

.action-btn .btn-icon {
  font-size: 14px;
}

/* ===== NO DATA STATE ===== */
.no-data {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--md-spacing-xxxl);
  text-align: center;
  color: var(--md-on-surface-variant);
}

.no-data-icon {
  font-size: 64px;
  margin-bottom: var(--md-spacing-lg);
  opacity: 0.6;
}

.no-data h3 {
  font-size: var(--md-headline-small);
  color: var(--md-on-surface);
  margin: 0 0 var(--md-spacing-md) 0;
  font-weight: 400;
}

.no-data p {
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
  margin: 0;
  max-width: 400px;
  line-height: 1.5;
}

/* ===== QUICK STATS ===== */
.quick-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--md-spacing-lg);
  margin-top: var(--md-spacing-xl);
}

.stat-card {
  background: var(--md-surface-container);
  border-radius: var(--md-border-radius-lg);
  padding: var(--md-spacing-xl);
  text-align: center;
  box-shadow: var(--md-elevation-1);
  transition: all var(--md-motion-duration-short2) var(--md-motion-easing-standard);
}

.stat-card:hover {
  box-shadow: var(--md-elevation-2);
  transform: translateY(-2px);
}

.stat-value {
  font-size: var(--md-display-small);
  font-weight: 600;
  color: var(--md-primary);
  margin-bottom: var(--md-spacing-xs);
  font-variant-numeric: tabular-nums;
  line-height: 1;
}

.stat-label {
  font-size: var(--md-body-medium);
  color: var(--md-on-surface-variant);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

/* ===== RESPONSIVE DESIGN ===== */

/* Large Desktop (1200px+) */
@media (min-width: 1200px) {
  .inventory-container {
    padding: var(--md-spacing-xl);
  }
  
  .inventory-header {
    padding: var(--md-spacing-xxl);
  }
  
  .inventory-title {
    font-size: var(--md-display-small);
  }
}

/* Tablet (768px - 1199px) */
@media (max-width: 1199px) {
  .inventory-container {
    padding: var(--md-spacing-md);
  }
  
  .header-content {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--md-spacing-lg);
  }
  
  .create-product-btn {
    align-self: stretch;
    justify-content: center;
  }
  
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-md) var(--md-spacing-sm);
  }
  
  .inventory-table th:first-child,
  .inventory-table td:first-child {
    padding-left: var(--md-spacing-md);
  }
  
  .inventory-table th:last-child,
  .inventory-table td:last-child {
    padding-right: var(--md-spacing-md);
  }
}

/* Small Tablet / Large Phone (600px - 767px) */
@media (max-width: 767px) {
  .inventory-container {
    padding: var(--md-spacing-sm);
  }
  
  .inventory-header {
    padding: var(--md-spacing-lg);
  }
  
  .inventory-title {
    font-size: var(--md-headline-medium);
  }
  
  .inventory-subtitle {
    font-size: var(--md-body-medium);
  }
  
  /* Hide less important columns on smaller screens */
  .inventory-table th:nth-child(4),
  .inventory-table td:nth-child(4),
  .inventory-table th:nth-child(2),
  .inventory-table td:nth-child(2) {
    display: none;
  }
  
  .action-buttons {
    flex-direction: column;
    gap: var(--md-spacing-xs);
  }
  
  .action-btn {
    font-size: var(--md-label-small);
    padding: var(--md-spacing-xs) var(--md-spacing-sm);
    min-height: 28px;
  }
  
  .quick-stats {
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--md-spacing-md);
  }
  
  .stat-card {
    padding: var(--md-spacing-lg);
  }
  
  .stat-value {
    font-size: var(--md-headline-large);
  }
}

/* Mobile (480px and below) */
@media (max-width: 480px) {
  .inventory-container {
    padding: var(--md-spacing-xs);
  }
  
  .inventory-header {
    padding: var(--md-spacing-md);
  }
  
  .inventory-title {
    font-size: var(--md-headline-small);
  }
  
  .create-product-btn {
    font-size: var(--md-label-medium);
    padding: var(--md-spacing-sm) var(--md-spacing-lg);
    min-height: 48px;
  }
  
  /* Show only essential columns on mobile */
  .inventory-table th:nth-child(3),
  .inventory-table td:nth-child(3),
  .inventory-table th:nth-child(5),
  .inventory-table td:nth-child(5),
  .inventory-table th:nth-child(7),
  .inventory-table td:nth-child(7) {
    display: none;
  }
  
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-sm) var(--md-spacing-xs);
    font-size: var(--md-body-small);
  }
  
  .inventory-table th:first-child,
  .inventory-table td:first-child {
    padding-left: var(--md-spacing-sm);
  }
  
  .inventory-table th:last-child,
  .inventory-table td:last-child {
    padding-right: var(--md-spacing-sm);
  }
  
  .action-btn {
    font-size: var(--md-label-small);
    padding: var(--md-spacing-xs);
    min-height: 32px;
  }
  
  .action-btn .btn-icon {
    display: none;
  }
  
  .quick-stats {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-sm);
  }
  
  .no-data {
    padding: var(--md-spacing-xl);
  }
  
  .no-data-icon {
    font-size: 48px;
  }
  
  .no-data h3 {
    font-size: var(--md-title-large);
  }
  
  .no-data p {
    font-size: var(--md-body-medium);
  }
}

/* ===== ACCESSIBILITY ===== */

/* Focus styles for keyboard navigation */
*:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

button:focus,
.action-btn:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .inventory-table th,
  .inventory-table td {
    border-color: var(--md-on-surface);
  }
  
  .status-badge,
  .category-badge {
    border: 1px solid currentColor;
  }
  
  .action-btn {
    border-width: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .loading-spinner {
    animation: none;
    border: 4px solid var(--md-outline-variant);
    border-top: 4px solid var(--md-primary);
  }
}

/* Print styles */
@media print {
  .create-product-btn,
  .action-buttons,
  .quick-stats {
    display: none;
  }
  
  .inventory-page {
    background: white;
  }
  
  .inventory-table {
    border-collapse: collapse;
    border: 1px solid black;
  }
  
  .inventory-table th,
  .inventory-table td {
    border: 1px solid black;
    padding: 8px;
  }
}

/* ===== INVENTORY CONTENT STYLES ===== */

```

`proyecto-pos-finanzas/frontend/src/components/LoginScreen.css`:

```css
/* Login Screen Container */
.login-screen {
  min-height: 100vh;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--md-spacing-lg);
  overflow: hidden;
}

/* Background */
.login-screen__background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(135deg, var(--md-primary) 0%, var(--md-tertiary) 100%);
  z-index: -2;
}

.login-screen__background-pattern {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
    radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.05) 0%, transparent 50%);
  z-index: -1;
}

/* Main Container */
.login-screen__container {
  width: 100%;
  max-width: 400px;
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xl);
}

/* Header */
.login-screen__header {
  text-align: center;
  color: white; /* Mantenemos blanco para subtítulos */
}

.login-screen__logo {
  display: flex;
  justify-content: center;
  margin-bottom: var(--md-spacing-lg);
}

.login-screen__logo-icon {
  width: 80px;
  height: 80px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.3);
  box-shadow: var(--md-elevation-3);
}

.login-screen__logo-icon svg {
  width: 40px;
  height: 40px;
  color: #1a1a1a; /* Cambiado de white a color oscuro para visibilidad */
}

.login-screen__title {
  margin: 0 0 var(--md-spacing-sm) 0;
  /* ✅ CORRECCIÓN: Color oscuro con fondo blanco semitransparente para máxima legibilidad */
  color: #1a1a1a;
  background: rgba(255, 255, 255, 0.95);
  padding: var(--md-spacing-sm) var(--md-spacing-lg);
  border-radius: var(--md-border-radius-md);
  text-shadow: none;
  font-weight: 700;
  display: inline-block;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.login-screen__subtitle {
  margin: 0;
  color: #1a1a1a; /* Cambiado de blanco a color oscuro */
  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8); /* Sombra blanca para contraste */
  background: rgba(255, 255, 255, 0.9); /* Fondo blanco semitransparente */
  padding: 8px 16px;
  border-radius: 12px;
  display: inline-block;
}

/* Login Card */
.login-screen__card {
  background-color: var(--md-surface);
  border-radius: var(--md-border-radius-xl);
  box-shadow: var(--md-elevation-5);
  overflow: hidden;
  backdrop-filter: blur(10px);
}

.login-screen__card-header {
  padding: var(--md-spacing-xl) var(--md-spacing-xl) var(--md-spacing-lg);
  text-align: center;
  border-bottom: 1px solid var(--md-outline-variant);
}

.login-screen__card-header h2 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
}

.login-screen__card-header p {
  margin: 0;
  color: var(--md-on-surface-variant);
}

/* Form */
.login-screen__form {
  padding: var(--md-spacing-xl);
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-lg);
}

/* Form Fields */
.login-screen__field {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-sm);
}

.login-screen__label {
  color: var(--md-on-surface);
  font-weight: 500;
}

.login-screen__input-container {
  /* ✅ NUEVO: Diseño horizontal con iconos a la izquierda */
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md); /* Espacio entre icono e input */
}

.login-screen__input-icon {
  /* ✅ NUEVO: Icono posicionado estáticamente a la izquierda */
  width: 24px;
  height: 24px;
  color: var(--md-on-surface-variant);
  flex-shrink: 0; /* Evitar que el icono se reduzca */
}

.login-screen__input {
  /* ✅ NUEVO: Input sin padding izquierdo extra, ocupa espacio restante */
  flex: 1; /* Ocupa el espacio restante */
  height: 56px;
  padding: var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  font-family: inherit;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  outline: none;
}

.login-screen__input:focus {
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

.login-screen__input:disabled {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface-variant);
  border-color: var(--md-outline-variant);
  cursor: not-allowed;
}

.login-screen__input::placeholder {
  color: var(--md-on-surface-variant);
  opacity: 0.7;
}

/* Error Message */
.login-screen__error {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  padding: var(--md-spacing-md);
  background-color: var(--md-error-container);
  color: var(--md-error);
  border-radius: var(--md-border-radius-sm);
  border: 1px solid rgba(186, 26, 26, 0.2);
}

.login-screen__error-icon {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
}

/* Submit Button */
.login-screen__submit-btn {
  width: 100%;
  height: 56px;
  gap: var(--md-spacing-sm);
  font-weight: 500;
  text-transform: none;
  box-shadow: var(--md-elevation-1);
}

.login-screen__submit-btn:hover {
  box-shadow: var(--md-elevation-2);
}

.login-screen__submit-btn:disabled {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface-variant);
  box-shadow: none;
}

.login-screen__loading-icon {
  width: 20px;
  height: 20px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Demo Credentials */
.login-screen__demo {
  padding: var(--md-spacing-lg) var(--md-spacing-xl);
  background-color: var(--md-surface-variant);
  border-top: 1px solid var(--md-outline-variant);
}

.login-screen__demo-divider {
  text-align: center;
  margin-bottom: var(--md-spacing-md);
  position: relative;
}

.login-screen__demo-divider::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 1px;
  background-color: var(--md-outline-variant);
  z-index: 1;
}

.login-screen__demo-divider span {
  background-color: var(--md-surface-variant);
  padding: 0 var(--md-spacing-md);
  color: var(--md-on-surface-variant);
  position: relative;
  z-index: 2;
}

.login-screen__demo-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--md-spacing-md);
}

.login-screen__demo-item {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
  text-align: center;
}

.login-screen__demo-item span:first-child {
  color: var(--md-on-surface-variant);
}

.login-screen__demo-item span:last-child {
  color: var(--md-on-surface);
  font-weight: 500;
  background-color: var(--md-surface);
  padding: var(--md-spacing-sm);
  border-radius: var(--md-border-radius-xs);
  border: 1px solid var(--md-outline-variant);
}

/* Footer */
.login-screen__footer {
  text-align: center;
  color: #1a1a1a; /* Cambiado de blanco a color oscuro */
  background: rgba(255, 255, 255, 0.9); /* Fondo blanco semitransparente */
  padding: 12px 20px;
  border-radius: 8px;
  display: inline-block;
  margin: 0 auto;
}

.login-screen__footer p {
  margin: 0;
}

/* Responsive Design */
@media (max-width: 768px) {
  .login-screen {
    padding: var(--md-spacing-md);
  }

  .login-screen__container {
    max-width: 100%;
    gap: var(--md-spacing-lg);
  }

  .login-screen__logo-icon {
    width: 64px;
    height: 64px;
  }

  .login-screen__logo-icon svg {
    width: 32px;
    height: 32px;
  }

  .login-screen__card-header,
  .login-screen__form {
    padding: var(--md-spacing-lg);
  }

  .login-screen__demo {
    padding: var(--md-spacing-md) var(--md-spacing-lg);
  }

  .login-screen__demo-grid {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-sm);
  }
}

@media (max-width: 480px) {
  .login-screen {
    padding: var(--md-spacing-sm);
  }

  .login-screen__card-header,
  .login-screen__form {
    padding: var(--md-spacing-md);
  }

  .login-screen__input {
    height: 48px;
    font-size: var(--md-body-medium);
    /* ✅ NUEVO: Sin padding extra ya que el icono está separado */
    padding: var(--md-spacing-sm);
  }

  .login-screen__input-icon {
    /* ✅ NUEVO: Iconos más pequeños para móviles */
    width: 20px;
    height: 20px;
  }

  .login-screen__submit-btn {
    height: 48px;
  }

  /* ✅ CORRECCIÓN: Mejorar spacing en formulario para móviles */
  .login-screen__form {
    gap: var(--md-spacing-md);
    padding: var(--md-spacing-sm);
  }

  .login-screen__field {
    gap: var(--md-spacing-xs);
  }
}

/* ✅ NUEVA: Media query para pantallas muy pequeñas */
@media (max-width: 320px) {
  .login-screen {
    padding: var(--md-spacing-xs);
  }

  .login-screen__card-header,
  .login-screen__form {
    padding: var(--md-spacing-sm);
  }

  .login-screen__input {
    height: 44px;
    font-size: 14px;
    /* ✅ NUEVO: Padding uniforme sin espacio extra para icono */
    padding: var(--md-spacing-xs);
  }

  .login-screen__input-icon {
    /* ✅ NUEVO: Iconos más pequeños para pantallas muy pequeñas */
    width: 18px;
    height: 18px;
  }

  .login-screen__submit-btn {
    height: 44px;
    font-size: 14px;
  }

  .login-screen__form {
    gap: var(--md-spacing-sm);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .login-screen__input {
    border-width: 2px;
  }

  .login-screen__input:focus {
    border-width: 3px;
  }

  .login-screen__error {
    border-width: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .login-screen__input,
  .login-screen__submit-btn {
    transition: none;
  }

  .login-screen__loading-icon {
    animation: none;
  }
}

/* Touch enhancements */
@media (max-width: 768px) {
  .login-screen__input,
  .login-screen__submit-btn {
    min-height: 48px;
    touch-action: manipulation;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/LoginScreen.tsx`:

```tsx
import React, { useState } from 'react';
import { authService } from '../services/apiService';
import { useAuth } from '../hooks/useAuth';
import './LoginScreen.css';

interface LoginScreenProps {
  onLoginSuccess: () => void;
}

const LoginScreen: React.FC<LoginScreenProps> = ({ onLoginSuccess }) => {
  const [credentials, setCredentials] = useState({
    nombre: '',
    contrasena: ''
  });
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);
  
  // Usar el hook de autenticación
  const { login: authLogin } = useAuth();

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setCredentials(prev => ({
      ...prev,
      [name]: value
    }));
    setError(null);
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!credentials.nombre || !credentials.contrasena) {
      setError('Por favor, ingresa usuario y contraseña');
      return;
    }

    setIsLoading(true);
    setError(null);

    try {
      // Llamar al servicio de login (nueva respuesta con rol)
      const loginResponse = await authService.login(credentials);
      
      // Actualizar el contexto de autenticación con los nuevos datos
      authLogin(loginResponse);
      
      // Notificar que el login fue exitoso
      onLoginSuccess();
    } catch (error: any) {
      if (error.response?.data) {
        setError(typeof error.response.data === 'string' ? error.response.data : 'Error de autenticación');
      } else {
        setError('Error de conexión');
      }
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="login-screen">
      <div className="login-screen__background">
        <div className="login-screen__background-pattern"></div>
      </div>
      
      <div className="login-screen__container">
        {/* Logo and Brand */}
        <div className="login-screen__header">
          <div className="login-screen__logo">
            <div className="login-screen__logo-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            </div>
          </div>
          <h1 className="md-headline-medium login-screen__title">Sistema POS</h1>
          <p className="md-body-large login-screen__subtitle">Punto de Venta Moderno</p>
        </div>

        {/* Login Card */}
        <div className="login-screen__card">
          <div className="login-screen__card-header">
            <h2 className="md-title-large">Iniciar Sesión</h2>
            <p className="md-body-medium">Ingresa tus credenciales para continuar</p>
          </div>

          <form onSubmit={handleSubmit} className="login-screen__form">
            {/* Username Field */}
            <div className="login-screen__field">
              <label htmlFor="nombre" className="login-screen__label md-body-medium">
                Usuario
              </label>
              <div className="login-screen__input-container">
                <svg className="login-screen__input-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                <input
                  type="text"
                  id="nombre"
                  name="nombre"
                  value={credentials.nombre}
                  onChange={handleInputChange}
                  className="login-screen__input md-body-large"
                  placeholder="Ingresa tu usuario"
                  disabled={isLoading}
                  required
                />
              </div>
            </div>

            {/* Password Field */}
            <div className="login-screen__field">
              <label htmlFor="contrasena" className="login-screen__label md-body-medium">
                Contraseña
              </label>
              <div className="login-screen__input-container">
                <svg className="login-screen__input-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M18,8h-1V6c0-2.76-2.24-5-5-5S7,3.24,7,6v2H6c-1.1,0-2,0.9-2,2v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10C20,8.9,19.1,8,18,8z M12,17c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S13.1,17,12,17z M15.1,8H8.9V6c0-1.71,1.39-3.1,3.1-3.1s3.1,1.39,3.1,3.1V8z"/>
                </svg>
                <input
                  type="password"
                  id="contrasena"
                  name="contrasena"
                  value={credentials.contrasena}
                  onChange={handleInputChange}
                  className="login-screen__input md-body-large"
                  placeholder="Ingresa tu contraseña"
                  disabled={isLoading}
                  required
                />
              </div>
            </div>

            {/* Error Message */}
            {error && (
              <div className="login-screen__error" role="alert">
                <svg className="login-screen__error-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
                </svg>
                <span className="md-body-medium">{error}</span>
              </div>
            )}

            {/* Submit Button */}
            <button
              type="submit"
              disabled={isLoading}
              className="md-button md-button--filled login-screen__submit-btn"
            >
              {isLoading && (
                <svg className="login-screen__loading-icon" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"/>
                </svg>
              )}
              <span>{isLoading ? 'Iniciando sesión...' : 'Iniciar Sesión'}</span>
            </button>
          </form>
        </div>

        {/* Footer */}
        <div className="login-screen__footer">
          <p className="md-body-small">© 2024 Sistema POS. Todos los derechos reservados.</p>
        </div>
      </div>
    </div>
  );
};

export default LoginScreen;

```

`proyecto-pos-finanzas/frontend/src/components/MainMenu.css`:

```css
/* Main Menu Container */
.main-menu {
  min-height: 100vh;
  background-color: var(--md-surface);
  display: flex;
  flex-direction: column;
}

/* Header */
.main-menu__header {
  background-color: var(--md-surface-container);
  border-bottom: 1px solid var(--md-outline-variant);
  box-shadow: var(--md-elevation-1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.main-menu__header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--md-spacing-md);
}

.main-menu__brand {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
}

.main-menu__logo {
  width: 48px;
  height: 48px;
  background: linear-gradient(135deg, var(--md-primary), var(--md-tertiary));
  border-radius: var(--md-border-radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--md-elevation-2);
}

.main-menu__logo-icon {
  width: 24px;
  height: 24px;
  color: #1a1a1a; /* Cambiado de white a color oscuro */
}

.main-menu__brand-text h1 {
  margin: 0;
  color: var(--md-on-surface);
}

.main-menu__subtitle {
  color: var(--md-on-surface-variant);
  display: block;
  margin-top: -4px;
}

.main-menu__user-section {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-lg);
}

.main-menu__user-info {
  text-align: right;
  display: flex;
  flex-direction: column;
}

.main-menu__user-name {
  color: var(--md-on-surface);
  font-weight: 500;
}

.main-menu__user-role {
  color: var(--md-on-surface-variant);
  margin-top: -2px;
}

.main-menu__logout-btn {
  gap: var(--md-spacing-sm);
  border-color: var(--md-error);
  color: var(--md-error);
}

.main-menu__logout-btn:hover {
  background-color: var(--md-error-container);
}

.main-menu__logout-icon {
  width: 18px;
  height: 18px;
}

.main-menu__logout-text {
  display: none;
}

/* Main Content */
.main-menu__content {
  flex: 1;
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-xxl) var(--md-spacing-lg);
  width: 100%;
}

.main-menu__welcome {
  text-align: center;
  margin-bottom: var(--md-spacing-xxl);
}

.main-menu__welcome h2 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
}

.main-menu__welcome p {
  margin: 0;
  color: var(--md-on-surface-variant);
}

/* Cards Grid */
.main-menu__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--md-spacing-lg);
  margin-bottom: var(--md-spacing-xxl);
}

/* Action Cards */
.main-menu__card {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: var(--md-spacing-lg);
  text-align: left;
  min-height: 120px;
  width: 100%;
  text-decoration: none;
}

.main-menu__card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.main-menu__card:hover {
  box-shadow: var(--md-elevation-3);
  transform: translateY(-2px);
}

.main-menu__card:hover::before {
  opacity: 0.04;
}

.main-menu__card:active {
  transform: translateY(0);
  box-shadow: var(--md-elevation-2);
}

.main-menu__card:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

/* Card Icons */
.main-menu__card-icon {
  width: 56px;
  height: 56px;
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
}

.main-menu__card-icon svg {
  width: 28px;
  height: 28px;
}

/* Card Variants */
.main-menu__card--pos .main-menu__card-icon {
  background-color: #E3F2FD;
  color: #1976D2;
}

.main-menu__card--pos:hover .main-menu__card-icon {
  background-color: #BBDEFB;
  transform: scale(1.1);
}

.main-menu__card--inventory .main-menu__card-icon {
  background-color: #E8F5E8;
  color: #388E3C;
}

.main-menu__card--inventory:hover .main-menu__card-icon {
  background-color: #C8E6C9;
  transform: scale(1.1);
}

.main-menu__card--finance .main-menu__card-icon {
  background-color: #F3E5F5;
  color: #7B1FA2;
}

.main-menu__card--finance:hover .main-menu__card-icon {
  background-color: #E1BEE7;
  transform: scale(1.1);
}

/* Card Content */
.main-menu__card-content {
  flex: 1;
  min-width: 0;
}

.main-menu__card-content h3 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
}

.main-menu__card-content p {
  margin: 0;
  color: var(--md-on-surface-variant);
  line-height: 1.4;
}

/* Card Arrow */
.main-menu__card-arrow {
  color: var(--md-on-surface-variant);
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  flex-shrink: 0;
}

.main-menu__card-arrow svg {
  width: 24px;
  height: 24px;
}

.main-menu__card:hover .main-menu__card-arrow {
  color: var(--md-on-surface);
  transform: translateX(4px);
}

/* Profile Card */
.main-menu__profile-card {
  background-color: var(--md-primary-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  display: flex;
  align-items: center;
  gap: var(--md-spacing-lg);
  box-shadow: var(--md-elevation-1);
  max-width: 400px;
  margin: 0 auto;
}

.main-menu__profile-avatar {
  width: 64px;
  height: 64px;
  background-color: var(--md-primary);
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.main-menu__profile-avatar svg {
  width: 32px;
  height: 32px;
  color: #1a1a1a; /* Cambiado de white a color oscuro */
}

.main-menu__profile-info h4 {
  margin: 0 0 var(--md-spacing-xs) 0;
  color: var(--md-on-surface);
}

.main-menu__profile-role {
  margin: 0 0 var(--md-spacing-xs) 0;
  color: var(--md-on-surface-variant);
}

.main-menu__profile-phone {
  margin: 0;
  color: var(--md-on-surface-variant);
}

/* Responsive Design */
@media (max-width: 768px) {
  .main-menu__header-content {
    padding: var(--md-spacing-md);
    flex-wrap: wrap;
  }

  .main-menu__brand {
    order: 1;
    flex: 1;
  }

  .main-menu__user-section {
    order: 2;
    width: 100%;
    justify-content: space-between;
    margin-top: var(--md-spacing-sm);
    padding-top: var(--md-spacing-sm);
    border-top: 1px solid var(--md-outline-variant);
  }

  .main-menu__user-info {
    text-align: left;
  }

  .main-menu__logout-text {
    display: inline;
  }

  .main-menu__content {
    padding: var(--md-spacing-xl) var(--md-spacing-md);
  }

  .main-menu__grid {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-md);
  }

  .main-menu__card {
    padding: var(--md-spacing-lg);
    flex-direction: column;
    text-align: center;
    min-height: 160px;
  }

  .main-menu__card-arrow {
    display: none;
  }

  .main-menu__profile-card {
    flex-direction: column;
    text-align: center;
    margin-top: var(--md-spacing-xl);
  }
}

@media (max-width: 480px) {
  .main-menu__header-content {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-md);
  }

  .main-menu__brand {
    order: 1;
    justify-content: center;
  }

  .main-menu__user-section {
    order: 2;
    border-top: none;
    margin-top: 0;
    padding-top: 0;
  }

  .main-menu__logout-btn {
    flex: 1;
    justify-content: center;
  }
}

/* Touch enhancements for mobile */
@media (max-width: 768px) {
  .main-menu__card {
    min-height: 140px;
    touch-action: manipulation;
  }

  .main-menu__logout-btn {
    min-height: 48px;
    padding: var(--md-spacing-md) var(--md-spacing-lg);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .main-menu__card {
    border: 2px solid var(--md-outline);
  }

  .main-menu__card:focus {
    outline-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .main-menu__card {
    transition: none;
  }

  .main-menu__card:hover {
    transform: none;
  }

  .main-menu__card-icon,
  .main-menu__card-arrow {
    transition: none;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/MainMenu.tsx`:

```tsx
import React from 'react';
import { useAuth } from '../hooks/useAuth';
import RoleBasedNavigation from './RoleBasedNavigation';
import './MainMenu.css';

interface MainMenuProps {
  onPuntoDeVentaClick: () => void;
  onInventarioClick: () => void;
  onEmpleadosClick: () => void;
  onLogout: () => void;
}

const MainMenu: React.FC<MainMenuProps> = ({ 
  onPuntoDeVentaClick, 
  onInventarioClick,
  onEmpleadosClick,
  onLogout 
}) => {
  const { getUserName, getUserRole } = useAuth();

  // Función para manejar navegación desde RoleBasedNavigation
  const handleNavigation = (view: string) => {
    switch (view) {
      case 'pdv':
        onPuntoDeVentaClick();
        break;
      case 'inventario':
        onInventarioClick();
        break;
      case 'empleados':
        onEmpleadosClick();
        break;
      default:
        console.warn('Vista no reconocida:', view);
    }
  };

  return (
    <div className="main-menu">
      {/* Top App Bar */}
      <header className="main-menu__header">
        <div className="main-menu__header-content">
          <div className="main-menu__brand">
            <div className="main-menu__logo">
              <svg viewBox="0 0 24 24" fill="currentColor" className="main-menu__logo-icon">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            </div>
            <div className="main-menu__brand-text">
              <h1 className="md-title-large">Sistema POS</h1>
              <span className="md-body-small main-menu__subtitle">Punto de Venta Moderno</span>
            </div>
          </div>
          
          <div className="main-menu__user-section">
            <div className="main-menu__user-info">
              <span className="md-body-medium main-menu__user-name">
                Hola, {getUserName() || 'Usuario'}
              </span>
              <span className="md-body-small main-menu__user-role">
                {getUserRole() || 'Usuario'}
              </span>
            </div>
            <button
              onClick={onLogout}
              className="md-button md-button--outlined main-menu__logout-btn"
              aria-label="Cerrar sesión"
            >
              <svg viewBox="0 0 24 24" fill="currentColor" className="main-menu__logout-icon">
                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
              </svg>
              <span className="main-menu__logout-text">Salir</span>
            </button>
          </div>
        </div>
      </header>

      {/* Main Content con navegación basada en roles */}
      <main className="main-menu__content">
        <RoleBasedNavigation onNavigation={handleNavigation} />
      </main>
    </div>
  );
};

export default MainMenu;

```

`proyecto-pos-finanzas/frontend/src/components/ModalCrearEmpleado.tsx`:

```tsx
import React, { useState } from 'react';
import { empleadoService } from '../services/empleadoService';
import type { 
  Empleado, 
  EmpleadoCreate, 
  Rol, 
  FormularioEmpleado,
  EstadoCargaEmpleados 
} from '../types/index';

interface ModalCrearEmpleadoProps {
  roles: Rol[];
  onEmpleadoCreado: (empleado: Empleado) => void;
  onCerrar: () => void;
  estadoCarga: EstadoCargaEmpleados;
  setEstadoCarga: React.Dispatch<React.SetStateAction<EstadoCargaEmpleados>>;
}

const ModalCrearEmpleado: React.FC<ModalCrearEmpleadoProps> = ({
  roles,
  onEmpleadoCreado,
  onCerrar,
  estadoCarga,
  setEstadoCarga
}) => {
  // Estado del formulario
  const [formulario, setFormulario] = useState<FormularioEmpleado>({
    nombre: '',
    contrasena: '',
    telefono: '',
    rolId: '',
    errores: {}
  });

  /**
   * 📝 Validar formulario
   */
  const validarFormulario = (): boolean => {
    const errores: FormularioEmpleado['errores'] = {};

    // Validar nombre
    if (!formulario.nombre.trim()) {
      errores.nombre = 'El nombre es requerido';
    } else if (formulario.nombre.trim().length < 2) {
      errores.nombre = 'El nombre debe tener al menos 2 caracteres';
    }

    // Validar contraseña
    if (!formulario.contrasena) {
      errores.contrasena = 'La contraseña es requerida';
    } else if (formulario.contrasena.length < 4) {
      errores.contrasena = 'La contraseña debe tener al menos 4 caracteres';
    }

    // Validar teléfono (opcional pero si se proporciona debe tener formato válido)
    if (formulario.telefono && !/^\d{10}$/.test(formulario.telefono.replace(/\s/g, ''))) {
      errores.telefono = 'El teléfono debe tener 10 dígitos';
    }

    // Validar rol
    if (!formulario.rolId) {
      errores.rolId = 'Debe seleccionar un rol';
    }

    setFormulario(prev => ({ ...prev, errores }));
    return Object.keys(errores).length === 0;
  };

  /**
   * 📝 Manejar cambios en inputs
   */
  const manejarCambio = (campo: keyof FormularioEmpleado, valor: string) => {
    setFormulario(prev => ({
      ...prev,
      [campo]: valor,
      errores: {
        ...prev.errores,
        [campo]: undefined // Limpiar error al escribir
      }
    }));
  };

  /**
   * 📤 Manejar envío del formulario
   */
  const manejarEnvio = async (e: React.FormEvent) => {
    e.preventDefault();

    if (!validarFormulario()) {
      return;
    }

    try {
      setEstadoCarga(prev => ({ ...prev, creando: true }));

      const empleadoData: EmpleadoCreate = {
        nombre: formulario.nombre.trim(),
        contrasena: formulario.contrasena,
        telefono: formulario.telefono.trim() || '',
        rolId: formulario.rolId
      };

      const nuevoEmpleado = await empleadoService.crearEmpleado(empleadoData);
      onEmpleadoCreado(nuevoEmpleado);
    } catch (error: any) {
      // Mostrar error específico del servidor
      const errorMessage = error.message || 'Error al crear empleado';
      
      // Si es un error de validación específico, mostrarlo en el campo correspondiente
      if (errorMessage.toLowerCase().includes('nombre')) {
        setFormulario(prev => ({
          ...prev,
          errores: { ...prev.errores, nombre: errorMessage }
        }));
      } else if (errorMessage.toLowerCase().includes('rol')) {
        setFormulario(prev => ({
          ...prev,
          errores: { ...prev.errores, rolId: errorMessage }
        }));
      } else {
        // Error general
        alert(errorMessage);
      }
    } finally {
      setEstadoCarga(prev => ({ ...prev, creando: false }));
    }
  };

  /**
   * 🔄 Resetear formulario
   */
  const resetearFormulario = () => {
    setFormulario({
      nombre: '',
      contrasena: '',
      telefono: '',
      rolId: '',
      errores: {}
    });
  };

  /**
   * ❌ Cerrar modal
   */
  const cerrarModal = () => {
    resetearFormulario();
    onCerrar();
  };

  return (
    <div className="modal-overlay" onClick={cerrarModal}>
      <div className="modal-content" onClick={(e) => e.stopPropagation()}>
        {/* Header del modal */}
        <div className="modal-header">
          <h2 className="modal-titulo">
            <span className="material-icons">person_add</span>
            Crear Nuevo Empleado
          </h2>
          <button 
            className="modal-cerrar"
            onClick={cerrarModal}
            disabled={estadoCarga.creando}
          >
            <span className="material-icons">close</span>
          </button>
        </div>

        {/* Formulario */}
        <form onSubmit={manejarEnvio} className="modal-formulario">
          {/* Campo Nombre */}
          <div className="campo-formulario">
            <label htmlFor="nombre" className="campo-label">
              <span className="material-icons">person</span>
              Nombre Completo *
            </label>
            <input
              type="text"
              id="nombre"
              value={formulario.nombre}
              onChange={(e) => manejarCambio('nombre', e.target.value)}
              className={`campo-input ${formulario.errores.nombre ? 'campo-input--error' : ''}`}
              placeholder="Ingrese el nombre completo"
              disabled={estadoCarga.creando}
              maxLength={100}
            />
            {formulario.errores.nombre && (
              <span className="campo-error">{formulario.errores.nombre}</span>
            )}
          </div>

          {/* Campo Contraseña */}
          <div className="campo-formulario">
            <label htmlFor="contrasena" className="campo-label">
              <span className="material-icons">lock</span>
              Contraseña *
            </label>
            <input
              type="password"
              id="contrasena"
              value={formulario.contrasena}
              onChange={(e) => manejarCambio('contrasena', e.target.value)}
              className={`campo-input ${formulario.errores.contrasena ? 'campo-input--error' : ''}`}
              placeholder="Ingrese la contraseña"
              disabled={estadoCarga.creando}
              maxLength={50}
            />
            {formulario.errores.contrasena && (
              <span className="campo-error">{formulario.errores.contrasena}</span>
            )}
          </div>

          {/* Campo Teléfono */}
          <div className="campo-formulario">
            <label htmlFor="telefono" className="campo-label">
              <span className="material-icons">phone</span>
              Teléfono
            </label>
            <input
              type="tel"
              id="telefono"
              value={formulario.telefono}
              onChange={(e) => manejarCambio('telefono', e.target.value)}
              className={`campo-input ${formulario.errores.telefono ? 'campo-input--error' : ''}`}
              placeholder="1234567890"
              disabled={estadoCarga.creando}
              maxLength={15}
            />
            {formulario.errores.telefono && (
              <span className="campo-error">{formulario.errores.telefono}</span>
            )}
          </div>

          {/* Campo Rol */}
          <div className="campo-formulario">
            <label htmlFor="rolId" className="campo-label">
              <span className="material-icons">work</span>
              Rol *
            </label>
            <select
              id="rolId"
              value={formulario.rolId}
              onChange={(e) => manejarCambio('rolId', e.target.value)}
              className={`campo-input campo-select ${formulario.errores.rolId ? 'campo-input--error' : ''}`}
              disabled={estadoCarga.creando}
            >
              <option value="">Seleccione un rol</option>
              {roles.map((rol) => (
                <option key={rol.id} value={rol.id}>
                  {rol.nombre}
                </option>
              ))}
            </select>
            {formulario.errores.rolId && (
              <span className="campo-error">{formulario.errores.rolId}</span>
            )}
          </div>

          {/* Información adicional */}
          <div className="info-adicional">
            <span className="material-icons">info</span>
            <p>
              El empleado será creado con estado <strong>Activo</strong> por defecto.
              La contraseña será hasheada de forma segura.
            </p>
          </div>

          {/* Botones */}
          <div className="modal-botones">
            <button
              type="button"
              className="btn-secondary"
              onClick={cerrarModal}
              disabled={estadoCarga.creando}
            >
              Cancelar
            </button>
            <button
              type="submit"
              className="btn-primary"
              disabled={estadoCarga.creando}
            >
              {estadoCarga.creando ? (
                <>
                  <div className="loading-spinner-small"></div>
                  Creando...
                </>
              ) : (
                <>
                  <span className="material-icons">save</span>
                  Crear Empleado
                </>
              )}
            </button>
          </div>
        </form>
      </div>
    </div>
  );
};

export default ModalCrearEmpleado;

```

`proyecto-pos-finanzas/frontend/src/components/ModalCrearProducto.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { inventarioService } from '../services/inventarioService';
import type { ProductoCreacionRequest, CategoriaDTO, ProveedorDTO, UbicacionDTO } from '../services/inventarioService';
import {
  Dialog,
  DialogActions,
  DialogContent,
  DialogTitle,
  TextField,
  Button,
  Select,
  MenuItem,
  FormControl,
  InputLabel,
  CircularProgress,
  Alert,
  type SelectChangeEvent,
} from '@mui/material';

interface ModalCrearProductoProps {
  isOpen: boolean;
  onClose: () => void;
  onSuccess: () => void;
}

const ModalCrearProducto: React.FC<ModalCrearProductoProps> = ({ isOpen, onClose, onSuccess }) => {
  const [formData, setFormData] = useState<ProductoCreacionRequest>({
    nombre: '',
    categoriasProductosId: '',
    proveedorId: '',
    precioVenta: 0,
    precioCompra: 0,
    unidadMedida: 'piezas',
    stockInicial: 0,
    ubicacionId: '',
    stockMinimo: 0,
    stockMaximo: 0,
    usuarioId: '' // Will be populated when loading dropdown data
  });

  const [categorias, setCategorias] = useState<CategoriaDTO[]>([]);
  const [proveedores, setProveedores] = useState<ProveedorDTO[]>([]);
  const [ubicaciones, setUbicaciones] = useState<UbicacionDTO[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load dropdown data when modal opens
  useEffect(() => {
    if (isOpen) {
      loadDropdownData();
    }
  }, [isOpen]);

  const loadDropdownData = async () => {
    try {
      const [categoriasData, proveedoresData, ubicacionesData, usuarioId] = await Promise.all([
        inventarioService.getAllCategorias(),
        inventarioService.getAllProveedores(),
        inventarioService.getAllUbicaciones(),
        inventarioService.getFirstAvailableUser()
      ]);
      
      setCategorias(categoriasData);
      setProveedores(proveedoresData);
      setUbicaciones(ubicacionesData);
      
      // Set the user ID from the first available user
      setFormData(prev => ({
        ...prev,
        usuarioId: usuarioId
      }));
    } catch (err) {
      console.error('Error loading dropdown data:', err);
      setError('Error al cargar los datos del formulario');
    }
  };

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement> | SelectChangeEvent<string | number>) => {
    const target = e.target as HTMLInputElement; // Asumir estructura de input para simplicidad
    const { name, value } = target;
    
    setFormData(prev => ({
      ...prev,
      [name as string]: ['precioVenta', 'precioCompra', 'stockInicial', 'stockMinimo', 'stockMaximo'].includes(name as string)
        ? parseFloat(value as string) || 0
        : value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError(null);
    setLoading(true);

    // Validate required fields
    if (!formData.nombre.trim()) {
      setError('El nombre del producto es requerido');
      setLoading(false);
      return;
    }

    if (!formData.categoriasProductosId) {
      setError('Debe seleccionar una categoría');
      setLoading(false);
      return;
    }

    if (!formData.proveedorId) {
      setError('Debe seleccionar un proveedor');
      setLoading(false);
      return;
    }

    if (!formData.ubicacionId) {
      setError('Debe seleccionar una ubicación');
      setLoading(false);
      return;
    }

    if (formData.precioVenta <= 0) {
      setError('El precio de venta debe ser mayor a 0');
      setLoading(false);
      return;
    }

    if (formData.precioCompra <= 0) {
      setError('El precio de compra debe ser mayor a 0');
      setLoading(false);
      return;
    }

    try {
      await inventarioService.createProductoCompleto(formData);
      onSuccess();
      onClose();
      resetForm();
    } catch (err) {
      console.error('Error creating product:', err);
      setError('Error al crear el producto. Por favor, intente nuevamente.');
    } finally {
      setLoading(false);
    }
  };

  const resetForm = () => {
    setFormData({
      nombre: '',
      categoriasProductosId: '',
      proveedorId: '',
      precioVenta: 0,
      precioCompra: 0,
      unidadMedida: 'piezas',
      stockInicial: 0,
      ubicacionId: '',
      stockMinimo: 0,
      stockMaximo: 0,
      usuarioId: '' // Will be populated when modal opens again
    });
    setError(null);
  };

  const handleClose = () => {
    resetForm();
    onClose();
  };

  return (
    <Dialog open={isOpen} onClose={handleClose} maxWidth="sm" fullWidth>
      <DialogTitle>Crear Nuevo Producto</DialogTitle>
      <DialogContent>
        {error && <Alert severity="error" sx={{ mb: 2 }}>{error}</Alert>}
        <TextField
          autoFocus
          margin="dense"
          name="nombre"
          label="Nombre del Producto"
          type="text"
          fullWidth
          variant="outlined"
          value={formData.nombre}
          onChange={handleInputChange}
          required
          disabled={loading}
        />
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Categoría</InputLabel>
          <Select
            name="categoriasProductosId"
            value={formData.categoriasProductosId}
            label="Categoría"
            onChange={handleInputChange}
          >
            {categorias.map((categoria) => (
              <MenuItem key={categoria.id} value={categoria.id}>
                {categoria.categoria}
              </MenuItem>
            ))}
          </Select>
        </FormControl>
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Proveedor</InputLabel>
          <Select
            name="proveedorId"
            value={formData.proveedorId}
            label="Proveedor"
            onChange={handleInputChange}
          >
            {proveedores.map((proveedor) => (
              <MenuItem key={proveedor.id} value={proveedor.id}>
                {proveedor.nombre} {proveedor.apellidoPaterno || ''}
              </MenuItem>
            ))}
          </Select>
        </FormControl>
        <TextField
          margin="dense"
          name="precioCompra"
          label="Precio de Compra"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.precioCompra}
          onChange={handleInputChange}
          required
          disabled={loading}
        />
        <TextField
          margin="dense"
          name="precioVenta"
          label="Precio de Venta"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.precioVenta}
          onChange={handleInputChange}
          required
          disabled={loading}
        />
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Unidad de Medida</InputLabel>
          <Select
            name="unidadMedida"
            value={formData.unidadMedida}
            label="Unidad de Medida"
            onChange={handleInputChange}
          >
            <MenuItem value="piezas">Piezas</MenuItem>
            <MenuItem value="kilogramos">Kilogramos</MenuItem>
          </Select>
        </FormControl>
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Ubicación</InputLabel>
          <Select
            name="ubicacionId"
            value={formData.ubicacionId}
            label="Ubicación"
            onChange={handleInputChange}
          >
            {ubicaciones.map((ubicacion) => (
              <MenuItem key={ubicacion.id} value={ubicacion.id}>
                {ubicacion.ubicacion}
              </MenuItem>
            ))}
          </Select>
        </FormControl>
        <TextField
          margin="dense"
          name="stockInicial"
          label="Stock Inicial"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.stockInicial}
          onChange={handleInputChange}
          disabled={loading}
        />
        <TextField
          margin="dense"
          name="stockMinimo"
          label="Stock Mínimo"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.stockMinimo}
          onChange={handleInputChange}
          disabled={loading}
        />
        <TextField
          margin="dense"
          name="stockMaximo"
          label="Stock Máximo"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.stockMaximo}
          onChange={handleInputChange}
          disabled={loading}
        />
      </DialogContent>
      <DialogActions>
        <Button onClick={handleClose} disabled={loading}>Cancelar</Button>
        <Button onClick={handleSubmit} variant="contained" disabled={loading}>
          {loading ? <CircularProgress size={24} /> : 'Crear Producto'}
        </Button>
      </DialogActions>
    </Dialog>
  );
};

export default ModalCrearProducto;

```

`proyecto-pos-finanzas/frontend/src/components/ModalEditarProducto.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { inventarioService } from '../services/inventarioService';
import type { ProductoDTO, CategoriaDTO, ProveedorDTO } from '../services/inventarioService';
import {
  Dialog,
  DialogActions,
  DialogContent,
  DialogTitle,
  TextField,
  Button,
  Select,
  MenuItem,
  FormControl,
  InputLabel,
  CircularProgress,
  Alert,
  type SelectChangeEvent,
} from '@mui/material';

interface ModalEditarProductoProps {
  isOpen: boolean;
  onClose: () => void;
  onSuccess: () => void;
  producto: ProductoDTO | null;
}

const ModalEditarProducto: React.FC<ModalEditarProductoProps> = ({ 
  isOpen, 
  onClose, 
  onSuccess, 
  producto 
}) => {
  const [formData, setFormData] = useState<Partial<ProductoDTO>>({});
  const [categorias, setCategorias] = useState<CategoriaDTO[]>([]);
  const [proveedores, setProveedores] = useState<ProveedorDTO[]>([]);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Load form data when modal opens or producto changes
  useEffect(() => {
    if (isOpen && producto) {
      setFormData({
        id: producto.id,
        nombre: producto.nombre,
        categoriasProductosId: producto.categoriasProductosId || '',
        proveedorId: producto.proveedorId || '',
        precioVentaActual: producto.precioVentaActual || 0,
        precioCompraActual: producto.precioCompraActual || 0,
      });
      loadDropdownData();
    }
  }, [isOpen, producto]);

  const loadDropdownData = async () => {
    try {
      const [categoriasData, proveedoresData] = await Promise.all([
        inventarioService.getAllCategorias(),
        inventarioService.getAllProveedores()
      ]);
      
      setCategorias(categoriasData);
      setProveedores(proveedoresData);
    } catch (err) {
      console.error('Error loading dropdown data:', err);
      setError('Error al cargar los datos del formulario');
    }
  };

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement> | SelectChangeEvent<string | number>) => {
    const { name, value } = e.target;
    
    setFormData(prev => ({
      ...prev,
      [name as string]: ['precioVentaActual', 'precioCompraActual'].includes(name as string)
        ? parseFloat(value as string) || 0
        : value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!producto) return;
    
    setError(null);
    setLoading(true);

    // Validate required fields
    if (!formData.nombre?.trim()) {
      setError('El nombre del producto es requerido');
      setLoading(false);
      return;
    }

    if (!formData.categoriasProductosId) {
      setError('Debe seleccionar una categoría');
      setLoading(false);
      return;
    }

    if (!formData.proveedorId) {
      setError('Debe seleccionar un proveedor');
      setLoading(false);
      return;
    }

    try {
      await inventarioService.updateProducto(producto.id, formData);
      onSuccess();
      onClose();
    } catch (err) {
      console.error('Error updating product:', err);
      setError('Error al actualizar el producto. Por favor, intente nuevamente.');
    } finally {
      setLoading(false);
    }
  };

  const handleClose = () => {
    setFormData({});
    setError(null);
    onClose();
  };

  if (!isOpen || !producto) return null;

  return (
    <Dialog open={isOpen} onClose={handleClose} maxWidth="sm" fullWidth>
      <DialogTitle>Editar Producto</DialogTitle>
      <DialogContent>
        {error && <Alert severity="error" sx={{ mb: 2 }}>{error}</Alert>}
        <TextField
          autoFocus
          margin="dense"
          name="nombre"
          label="Nombre del Producto"
          type="text"
          fullWidth
          variant="outlined"
          value={formData.nombre || ''}
          onChange={handleInputChange}
          required
          disabled={loading}
        />
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Categoría</InputLabel>
          <Select
            name="categoriasProductosId"
            value={formData.categoriasProductosId || ''}
            label="Categoría"
            onChange={handleInputChange}
          >
            {categorias.map((categoria) => (
              <MenuItem key={categoria.id} value={categoria.id}>
                {categoria.categoria}
              </MenuItem>
            ))}
          </Select>
        </FormControl>
        <FormControl fullWidth margin="dense" required disabled={loading}>
          <InputLabel>Proveedor</InputLabel>
          <Select
            name="proveedorId"
            value={formData.proveedorId || ''}
            label="Proveedor"
            onChange={handleInputChange}
          >
            {proveedores.map((proveedor) => (
              <MenuItem key={proveedor.id} value={proveedor.id}>
                {proveedor.nombre} {proveedor.apellidoPaterno || ''}
              </MenuItem>
            ))}
          </Select>
        </FormControl>
        <TextField
          margin="dense"
          name="precioCompraActual"
          label="Precio de Compra Actual"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.precioCompraActual || 0}
          onChange={handleInputChange}
          disabled={loading}
        />
        <TextField
          margin="dense"
          name="precioVentaActual"
          label="Precio de Venta Actual"
          type="number"
          fullWidth
          variant="outlined"
          value={formData.precioVentaActual || 0}
          onChange={handleInputChange}
          disabled={loading}
        />
      </DialogContent>
      <DialogActions>
        <Button onClick={handleClose} disabled={loading}>Cancelar</Button>
        <Button onClick={handleSubmit} variant="contained" disabled={loading}>
          {loading ? <CircularProgress size={24} /> : 'Actualizar Producto'}
        </Button>
      </DialogActions>
    </Dialog>
  );
};

export default ModalEditarProducto;

```

`proyecto-pos-finanzas/frontend/src/components/ProtectedRoute.tsx`:

```tsx
import React from 'react';
import { useAuth } from '../hooks/useAuth';
import type { RolUsuario } from '../types/index';
import type { ReactNode } from 'react';

interface ProtectedRouteProps {
  children: ReactNode;
  requiredRole?: RolUsuario;
  adminOnly?: boolean;
  employeeAccess?: boolean;
  fallback?: ReactNode;
}

/**
 * Componente para proteger rutas basándose en el rol del usuario
 * 
 * @param children - Componente a renderizar si el usuario tiene permisos
 * @param requiredRole - Rol específico requerido ('Administrador' | 'Empleado')
 * @param adminOnly - Solo administradores (equivale a requiredRole='Administrador')
 * @param employeeAccess - Permite acceso a empleados y administradores
 * @param fallback - Componente a mostrar si no tiene permisos
 */
const ProtectedRoute: React.FC<ProtectedRouteProps> = ({
  children,
  requiredRole,
  adminOnly = false,
  employeeAccess = false,
  fallback
}) => {
  const { isAuthenticated, isAdmin, isEmployee, getUserRole } = useAuth();

  // Si no está autenticado, no mostrar nada (debería redirigir a login en un nivel superior)
  if (!isAuthenticated) {
    return fallback || <div>No autorizado - inicie sesión</div>;
  }

  const userRole = getUserRole();

  // Determinar si el usuario tiene acceso
  const hasAccess = (() => {
    // Si se especifica adminOnly, solo administradores
    if (adminOnly) {
      return isAdmin();
    }

    // Si se especifica un rol requerido
    if (requiredRole) {
      return userRole === requiredRole;
    }

    // Si se permite acceso a empleados (empleados y administradores)
    if (employeeAccess) {
      return isEmployee() || isAdmin();
    }

    // Por defecto, negar acceso
    return false;
  })();

  if (hasAccess) {
    return <>{children}</>;
  }

  // Mostrar mensaje de acceso denegado
  return fallback || (
    <div className="protected-route-denied">
      <div className="min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div className="max-w-md w-full space-y-8">
          <div className="text-center">
            <i className="material-icons text-6xl text-red-500 mb-4">block</i>
            <h2 className="mt-6 text-3xl font-extrabold text-gray-900">
              Acceso Denegado
            </h2>
            <p className="mt-2 text-sm text-gray-600">
              No tienes permisos para acceder a esta sección.
            </p>
            <div className="mt-4 p-4 bg-red-50 rounded-lg border border-red-200">
              <div className="flex items-center space-x-2">
                <i className="material-icons text-red-500">info</i>
                <div className="text-left">
                  <p className="text-sm text-red-800">
                    <strong>Tu rol actual:</strong> {userRole || 'Sin definir'}
                  </p>
                  <p className="text-sm text-red-600 mt-1">
                    Esta funcionalidad requiere permisos de{' '}
                    {adminOnly || requiredRole === 'Administrador' 
                      ? 'Administrador' 
                      : employeeAccess 
                        ? 'Empleado o Administrador'
                        : 'nivel superior'
                    }.
                  </p>
                </div>
              </div>
            </div>
            <div className="mt-6">
              <button
                onClick={() => window.history.back()}
                className="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
              >
                <i className="material-icons mr-2">arrow_back</i>
                Volver
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ProtectedRoute;

```

`proyecto-pos-finanzas/frontend/src/components/PuntoDeCompras.css`:

```css
/* ==================== PUNTO DE COMPRAS - MATERIAL DESIGN ==================== */

:root {
  --md-primary: #1976d2;
  --md-primary-variant: #0d47a1;
  --md-secondary: #03dac6;
  --md-surface: #ffffff;
  --md-background: #f5f5f5;
  --md-error: #b00020;
  --md-success: #4caf50;
  --md-warning: #ff9800;
  --md-text-primary: #212121;
  --md-text-secondary: #757575;
  --md-divider: #e0e0e0;
  --md-shadow-1: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
  --md-shadow-2: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
  --md-shadow-3: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
  --md-border-radius: 8px;
  --md-transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.punto-compras {
  padding: 24px;
  max-width: 1400px;
  margin: 0 auto;
  background-color: var(--md-background);
  min-height: 100vh;
  font-family: 'Roboto', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: var(--md-text-primary);
}

/* ==================== LOADING Y ERROR ==================== */

.loading-spinner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(4px);
  z-index: 9999;
  color: var(--md-text-secondary);
}

.spinner {
  width: 60px;
  height: 60px;
  border: 4px solid var(--md-divider);
  border-top: 4px solid var(--md-primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 24px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.error-container {
  background: var(--md-surface);
  padding: 32px;
  border-radius: var(--md-border-radius);
  box-shadow: var(--md-shadow-2);
  text-align: center;
  max-width: 500px;
  margin: 32px auto;
}

.error-container h2 {
  color: var(--md-error);
  margin-bottom: 16px;
  font-weight: 500;
}

/* ==================== HEADER SECTION ==================== */

.header-section {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 32px;
  background: var(--md-surface);
  padding: 24px;
  border-radius: var(--md-border-radius);
  box-shadow: var(--md-shadow-1);
}

.header-left {
  display: flex;
  align-items: center;
  gap: 16px;
}

.btn-back {
  background: var(--md-text-secondary);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: var(--md-border-radius);
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: var(--md-transition);
  display: flex;
  align-items: center;
  gap: 8px;
  box-shadow: var(--md-shadow-1);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.btn-back:hover {
  background: #5a6268;
  box-shadow: var(--md-shadow-2);
  transform: translateY(-1px);
}

.proveedor-info h2 {
  margin: 0;
  color: var(--md-text-primary);
  font-size: 24px;
  font-weight: 400;
}

.deuda-info {
  margin: 8px 0 0 0;
  padding: 8px 16px;
  border-radius: var(--md-border-radius);
  font-size: 14px;
  font-weight: 500;
}

.deuda-info.warning {
  background: #fff3e0;
  color: #e65100;
  border-left: 4px solid var(--md-warning);
}

.header-right .carrito-resumen {
  text-align: right;
  background: #e3f2fd;
  padding: 16px 24px;
  border-radius: var(--md-border-radius);
  border-left: 4px solid var(--md-primary);
}

.carrito-resumen h3 {
  margin: 0 0 8px 0;
  color: var(--md-primary);
  font-size: 16px;
  font-weight: 500;
}

.total-carrito {
  margin: 0;
  font-size: 24px;
  font-weight: 600;
  color: var(--md-text-primary);
}

/* ==================== MAIN CONTENT ==================== */

.main-content {
  display: grid;
  grid-template-columns: 2fr 1fr;
  gap: 32px;
  align-items: start;
}

@media (max-width: 1024px) {
  .main-content {
    grid-template-columns: 1fr;
  }
}

/* ==================== PRODUCTOS SECTION - MATERIAL DESIGN ==================== */

.productos-section {
  background: var(--md-surface);
  padding: 32px;
  border-radius: var(--md-border-radius);
  box-shadow: var(--md-shadow-1);
  position: relative;
  overflow: hidden;
}

.productos-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(90deg, var(--md-primary), var(--md-secondary));
}

/* ==================== FILTRO PRODUCTO - MATERIAL DESIGN ==================== */

.filtro-producto {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 32px;
  position: relative;
}

.filtro-producto label {
  font-weight: 500;
  color: var(--md-text-primary);
  font-size: 14px;
  margin-bottom: 4px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.filtro-producto select {
  padding: 16px 12px;
  border: 2px solid var(--md-divider);
  border-radius: var(--md-border-radius);
  font-size: 16px;
  background: var(--md-surface);
  transition: var(--md-transition);
  font-family: inherit;
  color: var(--md-text-primary);
  box-shadow: var(--md-shadow-1);
  cursor: pointer;
}

.filtro-producto select:focus {
  outline: none;
  border-color: var(--md-primary);
  box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.12);
  transform: translateY(-1px);
}

.filtro-producto select:hover {
  border-color: var(--md-primary);
  box-shadow: var(--md-shadow-2);
}

/* ==================== FORM AGREGAR PRODUCTO - MATERIAL DESIGN ==================== */

.agregar-producto-form {
  background: linear-gradient(135deg, #f1f8ff 0%, #e3f2fd 100%);
  padding: 32px;
  border-radius: var(--md-border-radius);
  border: 1px solid var(--md-divider);
  position: relative;
  overflow: hidden;
}

.agregar-producto-form::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--md-primary);
}

.cantidades-costos {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  margin-bottom: 32px;
}

.cantidad-grupo,
.costo-grupo {
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: relative;
}

.cantidad-grupo label,
.costo-grupo label {
  font-weight: 500;
  color: var(--md-text-primary);
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.cantidad-grupo input,
.costo-grupo input {
  padding: 16px 12px;
  border: 2px solid var(--md-divider);
  border-radius: var(--md-border-radius);
  font-size: 16px;
  transition: var(--md-transition);
  font-family: inherit;
  background: var(--md-surface);
  color: var(--md-text-primary);
  box-shadow: var(--md-shadow-1);
}

.cantidad-grupo input:focus,
.costo-grupo input:focus {
  outline: none;
  border-color: var(--md-primary);
  box-shadow: 0 0 0 4px rgba(25, 118, 210, 0.12);
  transform: translateY(-1px);
}

.cantidad-grupo input:hover,
.costo-grupo input:hover {
  border-color: var(--md-primary);
  box-shadow: var(--md-shadow-2);
}

.readonly-field {
  background-color: #f8f9fa !important;
  cursor: not-allowed !important;
  color: var(--md-text-secondary) !important;
  border-style: dashed !important;
}

.btn-agregar {
  background: var(--md-success);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: var(--md-border-radius);
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--md-transition);
  width: 100%;
  box-shadow: var(--md-shadow-2);
  text-transform: uppercase;
  letter-spacing: 1px;
  position: relative;
  overflow: hidden;
}

.btn-agregar::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s;
}

.btn-agregar:hover::before {
  width: 300px;
  height: 300px;
}

.btn-agregar:hover:not(:disabled) {
  background: #45a049;
  box-shadow: var(--md-shadow-3);
  transform: translateY(-2px);
}

.btn-agregar:active {
  transform: translateY(0);
  box-shadow: var(--md-shadow-1);
}

.btn-agregar:disabled {
  background: var(--md-text-secondary);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* ==================== CARRITO SECTION - MATERIAL DESIGN ==================== */

.carrito-section {
  background: var(--md-surface);
  padding: 32px;
  border-radius: var(--md-border-radius);
  box-shadow: var(--md-shadow-1);
  height: fit-content;
  position: sticky;
  top: 24px;
  border: 1px solid var(--md-divider);
}

.carrito-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 2px solid var(--md-divider);
  position: relative;
}

.carrito-header::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 60px;
  height: 2px;
  background: var(--md-primary);
}

.carrito-header h3 {
  margin: 0;
  color: var(--md-text-primary);
  font-size: 20px;
  font-weight: 500;
}

.btn-finalizar {
  background: var(--md-primary);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: var(--md-border-radius);
  font-weight: 500;
  cursor: pointer;
  transition: var(--md-transition);
  box-shadow: var(--md-shadow-2);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}

.btn-finalizar::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s;
}

.btn-finalizar:hover::before {
  width: 200px;
  height: 200px;
}

.btn-finalizar:hover:not(:disabled) {
  background: var(--md-primary-variant);
  box-shadow: var(--md-shadow-3);
  transform: translateY(-1px);
}

.btn-finalizar:active {
  transform: translateY(0);
  box-shadow: var(--md-shadow-1);
}

.btn-finalizar:disabled {
  background: var(--md-text-secondary);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

.carrito-items {
  max-height: 400px;
  overflow-y: auto;
  margin-bottom: 16px;
  padding-right: 8px;
}

.carrito-items::-webkit-scrollbar {
  width: 6px;
}

.carrito-items::-webkit-scrollbar-track {
  background: var(--md-background);
  border-radius: 3px;
}

.carrito-items::-webkit-scrollbar-thumb {
  background: var(--md-divider);
  border-radius: 3px;
}

.carrito-items::-webkit-scrollbar-thumb:hover {
  background: var(--md-text-secondary);
}

.carrito-vacio {
  text-align: center;
  color: var(--md-text-secondary);
  font-style: italic;
  padding: 32px;
  background: var(--md-background);
  border-radius: var(--md-border-radius);
}

.carrito-item {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  padding: 16px;
  margin-bottom: 12px;
  background: var(--md-background);
  border-radius: var(--md-border-radius);
  border-left: 4px solid var(--md-success);
  transition: var(--md-transition);
  position: relative;
  overflow: hidden;
}

.carrito-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(45deg, transparent 0%, rgba(76, 175, 80, 0.05) 100%);
  opacity: 0;
  transition: opacity 0.3s;
}

.carrito-item:hover::before {
  opacity: 1;
}

.carrito-item:hover {
  box-shadow: var(--md-shadow-1);
  transform: translateY(-1px);
}

.item-info h4 {
  margin: 0 0 8px 0;
  color: var(--md-text-primary);
  font-size: 16px;
  font-weight: 500;
}

.cantidades-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 14px;
  color: var(--md-text-secondary);
}

.item-total {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
}

.subtotal {
  font-weight: 600;
  color: var(--md-success);
  font-size: 18px;
}

.btn-eliminar {
  background: var(--md-error);
  color: white;
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  font-size: 16px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: var(--md-transition);
  box-shadow: var(--md-shadow-1);
}

.btn-eliminar:hover {
  background: #c62828;
  box-shadow: var(--md-shadow-2);
  transform: scale(1.1);
}

.btn-eliminar:active {
  transform: scale(0.95);
}

.carrito-total {
  text-align: center;
  padding: 16px;
  background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
  border-radius: var(--md-border-radius);
  font-size: 20px;
  font-weight: 600;
  border: 2px solid var(--md-success);
  color: var(--md-success);
}

/* ==================== RESUMEN COMPRA - MATERIAL DESIGN ==================== */

.resumen-compra-container {
  background: var(--md-surface);
  padding: 32px;
  border-radius: var(--md-border-radius);
  box-shadow: var(--md-shadow-3);
  max-width: 800px;
  margin: 32px auto;
  border: 1px solid var(--md-divider);
}

.resumen-header {
  text-align: center;
  margin-bottom: 32px;
  padding-bottom: 24px;
  border-bottom: 3px solid var(--md-primary);
  position: relative;
}

.resumen-header::after {
  content: '';
  position: absolute;
  bottom: -3px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 3px;
  background: var(--md-secondary);
}

.resumen-header h2 {
  margin: 0 0 16px 0;
  color: var(--md-text-primary);
  font-size: 32px;
  font-weight: 300;
}

.proveedor-info {
  margin: 0;
  font-size: 18px;
  color: var(--md-text-secondary);
}

.deuda-actual {
  color: var(--md-warning);
  font-weight: 600;
  margin-left: 16px;
}

.productos-resumen {
  margin-bottom: 32px;
}

.productos-resumen h3 {
  margin-bottom: 16px;
  color: var(--md-text-primary);
  font-size: 20px;
  font-weight: 500;
  border-bottom: 2px solid var(--md-divider);
  padding-bottom: 8px;
  position: relative;
}

.productos-resumen h3::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 40px;
  height: 2px;
  background: var(--md-primary);
}

.productos-lista {
  background: var(--md-background);
  border-radius: var(--md-border-radius);
  padding: 16px;
  border: 1px solid var(--md-divider);
}

.producto-resumen-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  margin-bottom: 12px;
  background: var(--md-surface);
  border-radius: var(--md-border-radius);
  border-left: 4px solid var(--md-primary);
  box-shadow: var(--md-shadow-1);
  transition: var(--md-transition);
}

.producto-resumen-item:hover {
  box-shadow: var(--md-shadow-2);
  transform: translateY(-1px);
}

.producto-resumen-item:last-child {
  margin-bottom: 0;
}

.producto-info h4 {
  margin: 0 0 8px 0;
  color: var(--md-text-primary);
  font-weight: 500;
}

.cantidades {
  display: flex;
  gap: 16px;
  font-size: 14px;
  color: var(--md-text-secondary);
}

.total-compra {
  text-align: center;
  padding: 24px;
  background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
  border-radius: var(--md-border-radius);
  margin-top: 16px;
  font-size: 24px;
  font-weight: 600;
  color: var(--md-primary);
  border: 2px solid var(--md-primary);
}

/* ==================== PAGO INMEDIATO - MATERIAL DESIGN ==================== */

.pago-inmediato-section {
  background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
  padding: 24px;
  border-radius: var(--md-border-radius);
  border: 1px solid #ffcc02;
  margin-bottom: 32px;
  position: relative;
  overflow: hidden;
}

.pago-inmediato-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--md-warning);
}

.checkbox-container {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.checkbox-container input[type="checkbox"] {
  width: 20px;
  height: 20px;
  accent-color: var(--md-warning);
  cursor: pointer;
}

.checkbox-container label {
  font-weight: 500;
  color: #e65100;
  cursor: pointer;
  font-size: 16px;
}

.pago-form {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  padding-top: 16px;
  border-top: 1px solid #ffcc02;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-group label {
  font-weight: 500;
  color: #5d4037;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.form-group select,
.form-group input {
  padding: 16px 12px;
  border: 2px solid #ffcc02;
  border-radius: var(--md-border-radius);
  font-size: 16px;
  background: var(--md-surface);
  transition: var(--md-transition);
  font-family: inherit;
  box-shadow: var(--md-shadow-1);
}

.form-group select:focus,
.form-group input:focus {
  outline: none;
  border-color: var(--md-warning);
  box-shadow: 0 0 0 4px rgba(255, 152, 0, 0.12);
  transform: translateY(-1px);
}

.form-group select:hover,
.form-group input:hover {
  border-color: var(--md-warning);
  box-shadow: var(--md-shadow-2);
}

/* ==================== ACCIONES RESUMEN - MATERIAL DESIGN ==================== */

.acciones-resumen {
  display: flex;
  gap: 16px;
  justify-content: center;
}

.btn-cancelar,
.btn-confirmar {
  border: none;
  padding: 16px 32px;
  border-radius: var(--md-border-radius);
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: var(--md-transition);
  flex: 1;
  max-width: 200px;
  box-shadow: var(--md-shadow-2);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  position: relative;
  overflow: hidden;
}

.btn-cancelar {
  background: var(--md-text-secondary);
  color: white;
}

.btn-confirmar {
  background: var(--md-success);
  color: white;
}

.btn-cancelar::before,
.btn-confirmar::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: width 0.3s, height 0.3s;
}

.btn-cancelar:hover::before,
.btn-confirmar:hover::before {
  width: 200px;
  height: 200px;
}

.btn-cancelar:hover:not(:disabled) {
  background: #5a6268;
  box-shadow: var(--md-shadow-3);
  transform: translateY(-1px);
}

.btn-confirmar:hover:not(:disabled) {
  background: #45a049;
  box-shadow: var(--md-shadow-3);
  transform: translateY(-1px);
}

.btn-cancelar:active,
.btn-confirmar:active {
  transform: translateY(0);
  box-shadow: var(--md-shadow-1);
}

.btn-cancelar:disabled,
.btn-confirmar:disabled {
  background: var(--md-text-secondary);
  cursor: not-allowed;
  transform: none;
  box-shadow: none;
}

/* ==================== RESPONSIVE DESIGN ==================== */

@media (max-width: 768px) {
  .punto-compras {
    padding: 16px;
  }

  .header-section {
    flex-direction: column;
    gap: 16px;
  }

  .header-left {
    flex-direction: column;
    align-items: flex-start;
  }

  .cantidades-costos {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .pago-form {
    grid-template-columns: 1fr;
  }

  .acciones-resumen {
    flex-direction: column;
  }

  .acciones-resumen .btn-cancelar,
  .acciones-resumen .btn-confirmar {
    max-width: none;
  }

  .main-content {
    gap: 24px;
  }

  .productos-section,
  .carrito-section {
    padding: 24px;
  }
}
```

`proyecto-pos-finanzas/frontend/src/components/PuntoDeCompras.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import axios from 'axios';
import { inventarioService } from '../services/inventarioService';
import { comprasService } from '../services/comprasService';
import { metodoPagoService } from '../services/apiService';
import { useAuth } from '../hooks/useAuth';
import { useToast } from '../hooks/useToast';
import type { ProductoDTO } from '../services/inventarioService';
import type { 
  ItemCarritoCompra, 
  Proveedor, 
  PagoRequest, 
  MetodoPago 
} from '../types';
import './PuntoDeCompras.css';

interface PuntoDeComprasProps {
  proveedor: Proveedor;
  onBackToProveedores: () => void;
}

const PuntoDeCompras: React.FC<PuntoDeComprasProps> = ({ 
  proveedor, 
  onBackToProveedores 
}) => {
  // Hooks
  const toast = useToast();
  const { usuario } = useAuth();

  // Estados principales
  const [productos, setProductos] = useState<ProductoDTO[]>([]);
  const [metodosPago, setMetodosPago] = useState<MetodoPago[]>([]);
  const [carrito, setCarrito] = useState<ItemCarritoCompra[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false);
  const [error, setError] = useState<string | null>(null);

  // Estados para selección
  const [productoSeleccionado, setProductoSeleccionado] = useState<string>('');
  const [cantidad, setCantidad] = useState<number>(0);
  const [costoUnitario, setCostoUnitario] = useState<number>(0);

  // Estados para finalización
  const [mostrarResumenCompra, setMostrarResumenCompra] = useState(false);
  const [pagoInmediato, setPagoInmediato] = useState(false);
  const [metodoPagoSeleccionado, setMetodoPagoSeleccionado] = useState<string>('');
  const [montoPago, setMontoPago] = useState<number>(0);

  // Cargar datos iniciales
  useEffect(() => {
    const cargarDatos = async () => {
      try {
        setIsLoading(true);
        setError(null);
        console.log('🔄 [PuntoDeCompras] Iniciando carga datos para compras');
        console.log('🔄 [PuntoDeCompras] Proveedor seleccionado:', proveedor);

        console.log('⏳ [PuntoDeCompras] Cargando productos del proveedor...');
        // Cargar todos los productos y filtrar por proveedor
        const todosLosProductos = await inventarioService.getAllProductos();
        console.log('📦 [PuntoDeCompras] Todos los productos cargados:', todosLosProductos.length);
        const productosData = todosLosProductos.filter(p => p.proveedorId === proveedor.id);
        console.log('✅ [PuntoDeCompras] Productos del proveedor cargados:', productosData.length, 'de', todosLosProductos.length, 'totales');

        console.log('⏳ [PuntoDeCompras] Cargando métodos de pago...');
        const metodosData = await metodoPagoService.getAll();
        console.log('✅ [PuntoDeCompras] Métodos de pago cargados:', metodosData.length);

        console.log('💾 [PuntoDeCompras] Guardando datos en estado...');
        setProductos(productosData);
        setMetodosPago(metodosData);

        console.log('✅ [PuntoDeCompras] Todos los datos cargados correctamente');
        setError(null);
      } catch (error) {
        console.error('❌ [PuntoDeCompras] Error cargando datos:', error);
        if (axios.isAxiosError(error)) {
          console.error('❌ [PuntoDeCompras] Axios Error Details:');
          console.error('- Status:', error.response?.status);
          console.error('- StatusText:', error.response?.statusText);
          console.error('- URL:', error.config?.url);
          console.error('- Data:', error.response?.data);
        }
        const errorMessage = `Error al cargar datos del sistema: ${error instanceof Error ? error.message : 'Error desconocido'}`;
        console.error('❌ [PuntoDeCompras] Error message:', errorMessage);
        setError(errorMessage);
        toast.showError('Error al cargar los datos del sistema');
      } finally {
        console.log('🏁 [PuntoDeCompras] Finalizando carga de datos - setIsLoading(false)');
        setIsLoading(false);
      }
    };

    cargarDatos();
  }, [proveedor.id]); // Solo proveedor.id como dependencia

  // Obtener precio automático cuando se selecciona un producto
  useEffect(() => {
    const obtenerPrecioAutomatico = async () => {
      if (!productoSeleccionado) {
        setCostoUnitario(0);
        return;
      }

      try {
        console.log('🔄 [PuntoDeCompras] Obteniendo último precio para producto:', productoSeleccionado);
        const ultimoPrecio = await comprasService.obtenerUltimoPrecioCompra(productoSeleccionado);
        
        if (ultimoPrecio && ultimoPrecio.costo > 0) {
          console.log('✅ [PuntoDeCompras] Precio automático encontrado:', ultimoPrecio.costo);
          setCostoUnitario(ultimoPrecio.costo);
          toast.showInfo(`Precio automático cargado: $${ultimoPrecio.costo.toFixed(2)}`);
        } else {
          console.log('⚠️ [PuntoDeCompras] No hay historial de precios, manteniendo costo en 0');
          setCostoUnitario(0);
        }
      } catch (error) {
        console.error('❌ [PuntoDeCompras] Error obteniendo precio automático:', error);
        setCostoUnitario(0);
      }
    };

    obtenerPrecioAutomatico();
  }, [productoSeleccionado]);

  // Calcular total del carrito
  const calcularTotal = (): number => {
    return carrito.reduce((total, item) => total + item.subtotal, 0);
  };

  // Limpiar formulario de producto
  const limpiarFormulario = () => {
    setProductoSeleccionado('');
    setCantidad(0);
    setCostoUnitario(0);
  };

  // Agregar producto al carrito
  const agregarAlCarrito = () => {
    if (!productoSeleccionado) {
      toast.showError('Debe seleccionar un producto');
      return;
    }

    if (cantidad <= 0) {
      toast.showError('Debe especificar una cantidad mayor a 0');
      return;
    }

    if (costoUnitario < 0) {
      toast.showError('El costo unitario no puede ser negativo');
      return;
    }

    const producto = productos.find(p => p.id === productoSeleccionado);
    if (!producto) {
      toast.showError('Producto no encontrado');
      return;
    }

    const subtotal = cantidad * costoUnitario;

    // Detectar automáticamente la unidad: buscar item existente en el carrito
    const itemExistenteKg = carrito.find(item => 
      item.productoId === productoSeleccionado && item.cantidadKg > 0
    );
    const itemExistentePz = carrito.find(item => 
      item.productoId === productoSeleccionado && item.cantidadPz > 0
    );

    // Determinar la unidad automáticamente
    let unidadDetectada: 'kg' | 'pz';
    if (itemExistenteKg && !itemExistentePz) {
      unidadDetectada = 'kg';
    } else if (itemExistentePz && !itemExistenteKg) {
      unidadDetectada = 'pz';
    } else {
      // Si no hay items existentes o hay conflicto, usar piezas por defecto
      unidadDetectada = 'pz';
    }
    
    // Verificar si el producto ya está en el carrito con la unidad detectada
    const indiceExistente = carrito.findIndex(item => 
      item.productoId === productoSeleccionado && 
      ((unidadDetectada === 'kg' && item.cantidadKg > 0) || (unidadDetectada === 'pz' && item.cantidadPz > 0))
    );
    
    if (indiceExistente >= 0) {
      // Actualizar item existente
      const carritoActualizado = [...carrito];
      if (unidadDetectada === 'kg') {
        carritoActualizado[indiceExistente] = {
          ...carritoActualizado[indiceExistente],
          cantidadKg: carritoActualizado[indiceExistente].cantidadKg + cantidad,
          costoUnitarioKg: costoUnitario,
          subtotal: carritoActualizado[indiceExistente].subtotal + subtotal
        };
      } else {
        carritoActualizado[indiceExistente] = {
          ...carritoActualizado[indiceExistente],
          cantidadPz: carritoActualizado[indiceExistente].cantidadPz + cantidad,
          costoUnitarioPz: costoUnitario,
          subtotal: carritoActualizado[indiceExistente].subtotal + subtotal
        };
      }
      setCarrito(carritoActualizado);
    } else {
      // Agregar nuevo item
      const nuevoItem: ItemCarritoCompra = {
        productoId: producto.id,
        productoNombre: producto.nombre,
        cantidadKg: unidadDetectada === 'kg' ? cantidad : 0,
        cantidadPz: unidadDetectada === 'pz' ? cantidad : 0,
        costoUnitarioKg: unidadDetectada === 'kg' ? costoUnitario : 0,
        costoUnitarioPz: unidadDetectada === 'pz' ? costoUnitario : 0,
        subtotal
      };
      setCarrito([...carrito, nuevoItem]);
    }

    // Mostrar mensaje indicando la unidad utilizada
    toast.showSuccess(`Producto agregado al carrito (${unidadDetectada === 'kg' ? 'Kilogramos' : 'Piezas'})`);
    limpiarFormulario();
  };

  // Eliminar producto del carrito
  const eliminarDelCarrito = (index: number) => {
    const carritoActualizado = carrito.filter((_, i) => i !== index);
    setCarrito(carritoActualizado);
    toast.showInfo('Producto eliminado del carrito');
  };

  // Crear compra
  const crearCompra = async () => {
    if (carrito.length === 0) {
      toast.showError('El carrito está vacío');
      return;
    }

    if (!usuario) {
      toast.showError('Error de autenticación');
      return;
    }

    setIsSaving(true);
    try {
      // Crear una sola compra con todos los productos del carrito
      const compraRequest = {
        proveedorId: proveedor.id,
        metodoPagoId: metodoPagoSeleccionado || "1", // Efectivo por defecto
        productos: carrito.map(item => ({
          productoId: item.productoId,
          cantidadKg: item.cantidadKg,
          cantidadPz: item.cantidadPz
        }))
      };

      const ordenCreada = await comprasService.crearCompra(compraRequest);

      toast.showSuccess('Compra registrada exitosamente');

      // Si hay pago inmediato, procesarlo con el ID de la orden creada
      if (pagoInmediato && montoPago > 0 && metodoPagoSeleccionado) {
        await procesarPago(ordenCreada.id);
      }

      // Limpiar carrito y volver
      setCarrito([]);
      setMostrarResumenCompra(false);
      
    } catch (error) {
      console.error('❌ Error creando compra:', error);
      toast.showError('Error al registrar la compra');
    } finally {
      setIsSaving(false);
    }
  };

  // Procesar pago
  const procesarPago = async (ordenCompraId: string) => {
    if (!usuario || !metodoPagoSeleccionado || montoPago <= 0) {
      toast.showError('Datos de pago incompletos');
      return;
    }

    try {
      const pagoRequest: PagoRequest = {
        proveedorId: proveedor.id,
        ordenCompraId,
        montoPagado: montoPago,
        metodoPagoId: metodoPagoSeleccionado,
        pagarTodoElTotal: false
      };

      await comprasService.registrarPago(pagoRequest);
      toast.showSuccess(`Pago de $${montoPago.toFixed(2)} registrado exitosamente`);
    } catch (error) {
      console.error('❌ Error procesando pago:', error);
      toast.showError('Error al procesar el pago');
    }
  };

  if (isLoading) {
    console.log('🔄 [PuntoDeCompras] Renderizando loading spinner...');
    return (
      <div className="loading-spinner">
        <div className="spinner"></div>
        <p>Cargando datos del sistema...</p>
      </div>
    );
  }

  if (error) {
    console.log('❌ [PuntoDeCompras] Renderizando pantalla de error:', error);
    return (
      <div className="punto-compras">
        <div className="error-container">
          <h2>Error del Sistema</h2>
          <p>{error}</p>
          <button onClick={onBackToProveedores} className="btn-back">
            Volver a Proveedores
          </button>
        </div>
      </div>
    );
  }

  if (mostrarResumenCompra) {
    const total = calcularTotal();
    
    return (
      <div className="punto-compras">
        <div className="resumen-compra-container">
          <div className="resumen-header">
            <h2>Resumen de Compra</h2>
            <p className="proveedor-info">
              Proveedor: <strong>{proveedor.nombreCompleto}</strong>
              {proveedor.deudaTotal > 0 && (
                <span className="deuda-actual">
                  (Deuda actual: ${proveedor.deudaTotal.toFixed(2)})
                </span>
              )}
            </p>
          </div>

          <div className="productos-resumen">
            <h3>Productos a Comprar</h3>
            <div className="productos-lista">
              {carrito.map((item, index) => (
                <div key={index} className="producto-resumen-item">
                  <div className="producto-info">
                    <h4>{item.productoNombre}</h4>
                    <div className="cantidades">
                      {item.cantidadKg > 0 && (
                        <span>Kg: {item.cantidadKg} × ${item.costoUnitarioKg.toFixed(2)}</span>
                      )}
                      {item.cantidadPz > 0 && (
                        <span>Pz: {item.cantidadPz} × ${item.costoUnitarioPz.toFixed(2)}</span>
                      )}
                    </div>
                  </div>
                  <div className="subtotal">
                    ${item.subtotal.toFixed(2)}
                  </div>
                </div>
              ))}
            </div>
            <div className="total-compra">
              <strong>Total de Compra: ${total.toFixed(2)}</strong>
            </div>
          </div>

          <div className="pago-inmediato-section">
            <div className="checkbox-container">
              <input
                type="checkbox"
                id="pagoInmediato"
                checked={pagoInmediato}
                onChange={(e) => setPagoInmediato(e.target.checked)}
              />
              <label htmlFor="pagoInmediato">Realizar pago inmediato</label>
            </div>

            {pagoInmediato && (
              <div className="pago-form">
                <div className="form-group">
                  <label>Método de Pago:</label>
                  <select
                    value={metodoPagoSeleccionado}
                    onChange={(e) => setMetodoPagoSeleccionado(e.target.value)}
                    required
                  >
                    <option value="">Seleccionar método</option>
                    {metodosPago.map(metodo => (
                      <option key={metodo.id} value={metodo.id}>
                        {metodo.metodoPago}
                      </option>
                    ))}
                  </select>
                </div>

                <div className="form-group">
                  <label>Monto del Pago:</label>
                  <input
                    type="number"
                    step="0.01"
                    min="0"
                    value={montoPago}
                    onChange={(e) => setMontoPago(Number(e.target.value))}
                    placeholder="0.00"
                  />
                </div>
              </div>
            )}
          </div>

          <div className="acciones-resumen">
            <button
              onClick={() => setMostrarResumenCompra(false)}
              className="btn-cancelar"
              disabled={isSaving}
            >
              Modificar Compra
            </button>
            <button
              onClick={crearCompra}
              className="btn-confirmar"
              disabled={isSaving || (pagoInmediato && (!metodoPagoSeleccionado || montoPago <= 0))}
            >
              {isSaving ? 'Procesando...' : 'Confirmar Compra'}
            </button>
          </div>
        </div>
      </div>
    );
  }

  console.log('✅ [PuntoDeCompras] Renderizando pantalla principal de compras');
  console.log('📊 [PuntoDeCompras] Estado actual:', {
    productos: productos.length,
    metodosPago: metodosPago.length,
    carrito: carrito.length,
    isLoading,
    error
  });

  return (
    <div className="punto-compras">
      <div className="header-section">
        <div className="header-left">
          <button onClick={onBackToProveedores} className="btn-back">
            ← Volver a Proveedores
          </button>
          <div className="proveedor-info">
            <h2>Compra a: {proveedor.nombreCompleto}</h2>
            {proveedor.deudaTotal > 0 && (
              <p className="deuda-info warning">
                Deuda pendiente: <strong>${proveedor.deudaTotal.toFixed(2)}</strong>
              </p>
            )}
          </div>
        </div>
        <div className="header-right">
          <div className="carrito-resumen">
            <h3>Carrito: {carrito.length} productos</h3>
            <p className="total-carrito">${calcularTotal().toFixed(2)}</p>
          </div>
        </div>
      </div>

      <div className="main-content">
        <div className="productos-section">
          <div className="agregar-producto-form">
            <div className="filtro-producto">
              <label>Producto:</label>
              <select
                value={productoSeleccionado}
                onChange={(e) => setProductoSeleccionado(e.target.value)}
              >
                <option value="">Seleccionar producto</option>
                {productos.map(producto => (
                  <option key={producto.id} value={producto.id}>
                    {producto.nombre} - Stock: {producto.cantidadInventario || 0}
                  </option>
                ))}
              </select>
            </div>
            <div className="cantidades-costos">
              <div className="cantidad-grupo">
                <label>Cantidad:</label>
                <input
                  type="number"
                  step="0.01"
                  min="0"
                  value={cantidad}
                  onChange={(e) => setCantidad(Number(e.target.value))}
                  placeholder="0.00"
                />
              </div>

              <div className="costo-grupo">
                <label>Precio por unidad:</label>
                <input
                  type="number"
                  step="0.01"
                  min="0"
                  value={costoUnitario}
                  readOnly
                  placeholder="0.00"
                  className="readonly-field"
                />
              </div>
            </div>

            <button
              onClick={agregarAlCarrito}
              className="btn-agregar"
              disabled={!productoSeleccionado || cantidad <= 0}
            >
              Agregar al Carrito
            </button>
          </div>
        </div>

        <div className="carrito-section">
          <div className="carrito-header">
            <h3>Carrito de Compras</h3>
            <button
              onClick={() => setMostrarResumenCompra(true)}
              className="btn-finalizar"
              disabled={carrito.length === 0}
            >
              Finalizar Compra
            </button>
          </div>

          <div className="carrito-items">
            {carrito.length === 0 ? (
              <p className="carrito-vacio">El carrito está vacío</p>
            ) : (
              carrito.map((item, index) => (
                <div key={index} className="carrito-item">
                  <div className="item-info">
                    <h4>{item.productoNombre}</h4>
                     <div className="cantidades-info">
                       {item.cantidadKg > 0 && (
                         <span>Kg: {Number.isInteger(item.cantidadKg) ? item.cantidadKg : item.cantidadKg.toFixed(2)} × ${item.costoUnitarioKg.toFixed(2)}</span>
                       )}
                       {item.cantidadPz > 0 && (
                         <span>Pz: {Number.isInteger(item.cantidadPz) ? item.cantidadPz : item.cantidadPz.toFixed(2)} × ${item.costoUnitarioPz.toFixed(2)}</span>
                       )}
                     </div>                  </div>
                  <div className="item-total">
                    <span className="subtotal">${item.subtotal.toFixed(2)}</span>
                    <button
                      onClick={() => eliminarDelCarrito(index)}
                      className="btn-eliminar"
                      aria-label="Eliminar producto"
                    >
                      ×
                    </button>
                  </div>
                </div>
              ))
            )}
          </div>

          {carrito.length > 0 && (
            <div className="carrito-total">
              <strong>Total: ${calcularTotal().toFixed(2)}</strong>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default PuntoDeCompras;
```

`proyecto-pos-finanzas/frontend/src/components/PuntoDeVenta.css`:

```css
/* PuntoDeVenta.css */

/* Layout Principal */
.punto-venta {
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: #f5f5f5;
}

/* Header */
.punto-venta__header {
  background-color: #fff;
  border-bottom: 1px solid #e0e0e0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  z-index: 100;
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 2rem;
  max-width: 1400px;
  margin: 0 auto;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.header-left h1 {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1a1a1a;
  margin: 0;
}

/* Botón de regreso destacado */
.btn-back {
  background-color: #f44336 !important;
  color: white !important;
  border: none !important;
  padding: 0.75rem 1.5rem !important;
  border-radius: 6px !important;
  font-weight: 600 !important;
  font-size: 0.9rem !important;
  cursor: pointer !important;
  transition: all 0.2s ease !important;
  box-shadow: 0 2px 4px rgba(244, 67, 54, 0.3) !important;
}

.btn-back:hover {
  background-color: #d32f2f !important;
  box-shadow: 0 4px 8px rgba(244, 67, 54, 0.4) !important;
  transform: translateY(-1px) !important;
}

.btn-back:active {
  transform: translateY(0) !important;
  box-shadow: 0 2px 4px rgba(244, 67, 54, 0.3) !important;
}

/* Main Content */
.punto-venta__main {
  display: flex;
  flex: 1;
  gap: 1rem;
  padding: 1rem;
  max-width: 1400px;
  margin: 0 auto;
  width: 100%;
}

/* Paneles */
.panel-productos,
.panel-carrito {
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.panel-productos {
  flex: 2;
  min-width: 400px;
}

.panel-carrito {
  flex: 1;
  min-width: 300px;
}

.panel-header {
  background-color: #2196F3;
  color: white;
  padding: 1rem;
  text-align: center;
}

.panel-header h2 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
}

/* Filtros de Categorías */
.categorias-filter {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  padding: 1rem;
  border-bottom: 1px solid #e0e0e0;
  background-color: #fafafa;
}

.categoria-btn {
  padding: 0.5rem 1rem;
  border: 1px solid #ddd;
  background-color: #fff;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.875rem;
  font-weight: 500;
}

.categoria-btn:hover {
  background-color: #f0f0f0;
  border-color: #bbb;
}

.categoria-btn.active {
  background-color: #2196F3;
  border-color: #2196F3;
  color: white;
}

/* Lista de Productos */
.productos-lista {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 1rem;
  /* Asegurar que los productos mantengan aspecto cuadrado */
  grid-auto-rows: minmax(200px, 200px);
}

.producto-item {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 1rem;
  cursor: pointer;
  transition: all 0.2s ease;
  background-color: #fff;
  /* Forzar aspecto cuadrado con altura fija igual al ancho mínimo */
  height: 200px;
  width: 100%;
  display: flex;
  flex-direction: column;
  justify-content: center;
  text-align: center;
  box-sizing: border-box;
}

.producto-item:hover {
  border-color: #2196F3;
  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
}

.producto-item.selected {
  border-color: #2196F3;
  background-color: #e3f2fd;
  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.3);
}

.producto-info h3 {
  margin: 0 0 0.5rem 0;
  font-size: 1.1rem;
  font-weight: 600;
  color: #1a1a1a;
  line-height: 1.3;
  /* Limitar texto largo para mantener diseño */
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  -webkit-box-orient: vertical;
}

.producto-info .stock {
  margin: 0.25rem 0;
  font-size: 0.875rem;
  color: #666;
  font-weight: 500;
}

.producto-info .precio {
  margin: 0.5rem 0 0 0;
  font-size: 1.2rem;
  font-weight: bold;
  color: #2196F3;
}

.producto-info .precio {
  margin: 0.25rem 0 0 0;
  font-size: 1.125rem;
  font-weight: 600;
  color: #2196F3;
}

/* Controles de Cantidad */
.cantidad-controls {
  padding: 1rem;
  border-top: 1px solid #e0e0e0;
  background-color: #fafafa;
}

.cantidad-controls h3 {
  margin: 0 0 1rem 0;
  font-size: 1rem;
  font-weight: 600;
  color: #1a1a1a;
}

.cantidad-input {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
}

.cantidad-input input {
  flex: 1;
  padding: 0.5rem;
  border: 1px solid #ddd;
  border-radius: 4px;
  text-align: center;
  font-size: 1rem;
}

/* Carrito */
.carrito-lista {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

.carrito-vacio {
  text-align: center;
  color: #666;
  padding: 2rem 1rem;
}

.carrito-vacio p {
  margin: 0.5rem 0;
}

.carrito-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem;
  border-bottom: 1px solid #e0e0e0;
  background-color: #fff;
}

.carrito-item:last-child {
  border-bottom: none;
}

.item-info h4 {
  margin: 0 0 0.25rem 0;
  font-size: 0.875rem;
  font-weight: 600;
  color: #1a1a1a;
}

.item-info .cantidad {
  margin: 0.25rem 0;
  font-size: 0.75rem;
  color: #666;
}

.item-info .subtotal {
  margin: 0.25rem 0 0 0;
  font-size: 0.875rem;
  font-weight: 600;
  color: #2196F3;
}

/* Footer del Carrito */
.carrito-footer {
  padding: 1rem;
  border-top: 1px solid #e0e0e0;
  background-color: #fafafa;
}

.total {
  margin-bottom: 1rem;
  text-align: center;
}

.total h3 {
  margin: 0;
  font-size: 1.25rem;
  font-weight: 600;
  color: #1a1a1a;
}

.acciones {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

/* Botones */
.btn {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.875rem;
  font-weight: 500;
  transition: all 0.2s ease;
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  background-color: #2196F3;
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background-color: #1976D2;
}

.btn-secondary {
  background-color: #f5f5f5;
  color: #333;
  border: 1px solid #ddd;
}

.btn-secondary:hover:not(:disabled) {
  background-color: #e8e8e8;
  border-color: #bbb;
}

.btn-success {
  background-color: #4CAF50;
  color: white;
}

.btn-success:hover:not(:disabled) {
  background-color: #45a049;
}

.btn-danger {
  background-color: #f44336;
  color: white;
}

.btn-danger:hover:not(:disabled) {
  background-color: #d32f2f;
}

.btn-sm {
  padding: 0.25rem 0.5rem;
  font-size: 0.75rem;
  min-width: 2rem;
}

.btn-block {
  width: 100%;
}

/* Loading y Error */
.punto-venta__loading,
.punto-venta__error {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background-color: #f5f5f5;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 4px solid #f3f3f3;
  border-top: 4px solid #2196F3;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Overlay sutil para operaciones de guardado */
.saving-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 8000; /* Menor que los toasts (z-index: 9999) */
}

.saving-indicator {
  background: white;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.saving-indicator p {
  margin: 0;
  color: #666;
  font-weight: 500;
}

/* Responsive */
@media (max-width: 768px) {
  .punto-venta__main {
    flex-direction: column;
    gap: 1rem;
  }
  
  .panel-productos,
  .panel-carrito {
    min-width: unset;
  }

  /* ✅ CORRECCIÓN: Carrito más alto en tablets */
  .panel-carrito {
    min-height: 400px;
    max-height: 500px;
  }

  .carrito-lista {
    flex: 1;
    overflow-y: auto;
    max-height: 300px; /* ✅ Altura específica con scroll interno */
  }
  
  .productos-lista {
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
  }
  
  .header-content {
    padding: 1rem;
  }
  
  .header-left h1 {
    font-size: 1.25rem;
  }
}

/* ✅ NUEVA: Media query específica para móviles */
@media (max-width: 480px) {
  .punto-venta__main {
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.5rem;
  }

  /* ✅ CORRECCIÓN: Carrito aún más alto en móviles */
  .panel-carrito {
    min-height: 50vh; /* 50% de la altura de la pantalla */
    max-height: 60vh; /* Máximo 60% para dejar espacio a productos */
  }

  .carrito-lista {
    flex: 1;
    overflow-y: auto;
    max-height: calc(50vh - 120px); /* ✅ Altura adaptativa restando header y footer */
    padding: 0.5rem;
  }

  .panel-productos {
    min-height: 35vh; /* Productos ocupan menos espacio en móviles */
  }

  .productos-lista {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
    gap: 0.5rem;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/PuntoDeVenta.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { inventarioService } from '../services/inventarioService';
import { workspaceService } from '../services/apiService';
import { useToast } from '../hooks/useToast';
import type { ProductoDTO, CategoriaDTO } from '../services/inventarioService';
import type { ItemCarrito } from '../types';
import './PuntoDeVenta.css';

interface PuntoDeVentaProps {
  workspaceId: string;
  onBackToWorkspaces: () => void;
}

const PuntoDeVenta: React.FC<PuntoDeVentaProps> = ({ 
  workspaceId, 
  onBackToWorkspaces
}) => {
  // Hook para notificaciones toast
  const toast = useToast();

  // Verificar que workspaceId sea válido, usar Mesa 1 como fallback para desarrollo
  const workspaceIdFinal = workspaceId && workspaceId.trim() !== '' 
    ? workspaceId 
    : 'b63c0e93-62a7-483b-82dc-4e2e9430e7af'; // Mesa 1 por defecto

  // Estados principales
  const [productos, setProductos] = useState<ProductoDTO[]>([]);
  const [categorias, setCategorias] = useState<CategoriaDTO[]>([]);
  const [carrito, setCarrito] = useState<ItemCarrito[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [isSaving, setIsSaving] = useState(false); // Estado separado para operaciones de guardado
  const [ordenGuardada, setOrdenGuardada] = useState(false); // ✅ NUEVO: Controlar si la orden actual está guardada
  const [error, setError] = useState<string | null>(null);
  const [workspaceName, setWorkspaceName] = useState<string>('');

  // Estados para filtros y selección
  const [categoriaSeleccionada, setCategoriaSeleccionada] = useState<string>('');
  const [productoSeleccionado, setProductoSeleccionado] = useState<string>('');
  const [cantidad, setCantidad] = useState<number>(1);

  // Estados para productos filtrados
  const [productosFiltrados, setProductosFiltrados] = useState<ProductoDTO[]>([]);

  // Cargar datos iniciales
  useEffect(() => {
    const cargarDatos = async () => {
      try {
        setIsLoading(true);
        console.log('🔄 Iniciando carga POS para workspace:', workspaceIdFinal);
        
        // Cargar productos activos con stock usando el nuevo servicio
        console.log('📦 Cargando productos con stock...');
        const productosConStock = await inventarioService.getProductosConStock();
        console.log('✅ Productos cargados:', productosConStock.length, 'productos');
        
        // Cargar categorías
        console.log('🏷️ Cargando categorías...');
        const categoriasData = await inventarioService.getAllCategorias();
        console.log('✅ Categorías cargadas:', categoriasData.length, 'categorías');

        // Cargar información del workspace
        console.log('🏢 Cargando información del workspace...');
        const workspaceData = await workspaceService.getById(workspaceIdFinal);
        console.log('✅ Workspace cargado:', workspaceData.nombre);

        // Actualizar estados con datos básicos primero
        setProductos(productosConStock);
        setCategorias(categoriasData);
        setProductosFiltrados(productosConStock);
        setWorkspaceName(workspaceData.nombre);

        // Cargar órdenes workspace existentes (con fallback)
        let carritoInicial: ItemCarrito[] = [];
        try {
          console.log('📋 Cargando órdenes existentes para workspace:', workspaceIdFinal);
          const ordenesExistentes = await inventarioService.getOrdenesWorkspace(workspaceIdFinal);
          console.log('✅ Órdenes cargadas:', ordenesExistentes.length, 'órdenes');
          
          // Convertir órdenes workspace existentes a items de carrito
          carritoInicial = ordenesExistentes.map(orden => ({
            productoId: orden.productoId,
            productoNombre: orden.productoNombre,
            precio: orden.precio,
            cantidadPz: orden.cantidadPz,
            cantidadKg: orden.cantidadKg,
            stockDisponiblePz: productosConStock.find(p => p.id === orden.productoId)?.cantidadInventario || 0,
            stockDisponibleKg: 0
          }));
          
        } catch (ordenesError: any) {
          console.warn('⚠️ No se pudieron cargar órdenes existentes:', ordenesError);
          console.warn('⚠️ Continuando con carrito vacío...');
          // No es un error crítico, continuar con carrito vacío
          carritoInicial = [];
        }
        
        setCarrito(carritoInicial);
        setOrdenGuardada(carritoInicial.length === 0); // ✅ Si carrito está vacío, no hay nada que guardar. Si hay productos, asumir que necesitan guardarse
        setError(null);
        console.log('🎉 Carga completa exitosa');
        
      } catch (error: any) {
        console.error('❌ Error detallado al cargar POS:', error);
        console.error('❌ Error response:', error.response);
        console.error('❌ Error status:', error.response?.status);
        console.error('❌ Error data:', error.response?.data);
        
        // Manejo de errores más específico
        if (error.response?.status === 404) {
          setError('Workspace no encontrado o algunos datos no están disponibles');
        } else if (error.response?.status === 500) {
          setError('Error del servidor. Por favor intente nuevamente');
        } else if (error.message?.includes('Network Error')) {
          setError('Error de conexión. Verifique que el backend esté ejecutándose');
        } else {
          setError(`Error al cargar los datos del punto de venta: ${error.message || 'Error desconocido'}`);
        }
      } finally {
        setIsLoading(false);
      }
    };

    cargarDatos();
  }, [workspaceIdFinal]);

  // Filtrar productos por categoría
  useEffect(() => {
    if (categoriaSeleccionada === '') {
      setProductosFiltrados(productos);
    } else {
      const filtrados = productos.filter(
        producto => producto.categoriasProductosId === categoriaSeleccionada
      );
      setProductosFiltrados(filtrados);
    }
    // Resetear producto seleccionado cuando cambia la categoría
    setProductoSeleccionado('');
    setCantidad(1);
  }, [categoriaSeleccionada, productos]);

  // Manejar selección de categoría
  const handleCategoriaSelect = (categoriaId: string) => {
    setCategoriaSeleccionada(categoriaId === categoriaSeleccionada ? '' : categoriaId);
  };

  // Manejar selección de producto
  const handleProductoSelect = (productoId: string) => {
    setProductoSeleccionado(productoId === productoSeleccionado ? '' : productoId);
    setCantidad(1);
  };

  // Obtener producto seleccionado
  const getProductoSeleccionado = () => {
    return productos.find(p => p.id === productoSeleccionado);
  };

  // Recargar datos del workspace
  const recargarDatos = async () => {
    try {
      // Recargar productos con stock actualizado
      const productosConStock = await inventarioService.getProductosConStock();
      setProductos(productosConStock);
      setProductosFiltrados(
        categoriaSeleccionada === '' 
          ? productosConStock 
          : productosConStock.filter(p => p.categoriasProductosId === categoriaSeleccionada)
      );

      // Recargar órdenes workspace existentes
      const ordenesExistentes = await inventarioService.getOrdenesWorkspace(workspaceIdFinal);
      
      // Actualizar carrito con datos frescos
      const carritoActualizado: ItemCarrito[] = ordenesExistentes.map(orden => ({
        productoId: orden.productoId,
        productoNombre: orden.productoNombre,
        precio: orden.precio,
        cantidadPz: orden.cantidadPz,
        cantidadKg: orden.cantidadKg,
        stockDisponiblePz: productosConStock.find(p => p.id === orden.productoId)?.cantidadInventario || 0,
        stockDisponibleKg: 0
      }));
      
      setCarrito(carritoActualizado);
      
    } catch (error) {
      console.error('Error al recargar datos:', error);
    }
  };

  // Agregar producto al carrito (mejorado con validaciones)
  const agregarAlCarrito = async () => {
    const producto = getProductoSeleccionado();
    if (!producto) return;

    try {
      // Verificar stock disponible en tiempo real
      const stockValido = await inventarioService.verificarStock(producto.id, cantidad);
      if (!stockValido) {
        toast.showError(`❌ STOCK INSUFICIENTE

Verifique la disponibilidad actual del producto.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
        await recargarDatos(); // Recargar datos para mostrar stock actualizado
        return;
      }

      const stockDisponible = producto.cantidadInventario || 0;
      
      if (cantidad > stockDisponible) {
        toast.showError(`❌ STOCK INSUFICIENTE

Disponible: ${stockDisponible} unidades

👆 HAZ CLIC AQUÍ PARA CERRAR`);
        return;
      }

      // Buscar si el producto ya está en el carrito
      const itemExistente = carrito.find(item => item.productoId === producto.id);
      
      if (itemExistente) {
        // Actualizar cantidad del item existente
        const nuevaCantidad = itemExistente.cantidadPz + cantidad;
        if (nuevaCantidad > stockDisponible) {
          toast.showError(`❌ STOCK INSUFICIENTE

Ya tienes ${itemExistente.cantidadPz} en el carrito.
Máximo disponible: ${stockDisponible} unidades

👆 HAZ CLIC AQUÍ PARA CERRAR`);
          return;
        }
        
        setCarrito(carrito.map(item =>
          item.productoId === producto.id
            ? { ...item, cantidadPz: nuevaCantidad }
            : item
        ));
        setOrdenGuardada(false); // ✅ Marcar que la orden necesita guardarse nuevamente
      } else {
        // Agregar nuevo item al carrito
        const nuevoItem: ItemCarrito = {
          productoId: producto.id,
          productoNombre: producto.nombre,
          precio: producto.precioVentaActual || 0,
          cantidadPz: cantidad,
          cantidadKg: 0,
          stockDisponiblePz: stockDisponible,
          stockDisponibleKg: 0
        };
        
        setCarrito([...carrito, nuevoItem]);
        setOrdenGuardada(false); // ✅ Marcar que la orden necesita guardarse nuevamente
      }

      // Resetear selección
      setProductoSeleccionado('');
      setCantidad(1);
      
    } catch (error) {
      console.error('Error al agregar producto al carrito:', error);
      toast.showError(`❌ ERROR

No se pudo agregar el producto al carrito. Intente nuevamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
    }
  };

  // Remover producto del carrito
  const removerDelCarrito = (productoId: string) => {
    setCarrito(carrito.filter(item => item.productoId !== productoId));
    setOrdenGuardada(false); // ✅ Marcar que la orden necesita guardarse nuevamente
  };

  // Calcular total del carrito
  const calcularTotal = () => {
    return carrito.reduce((total, item) => {
      return total + (item.precio * item.cantidadPz);
    }, 0);
  };

  // Guardar orden en workspace
  const guardarOrden = async () => {
    if (carrito.length === 0) {
      toast.showWarning(`⚠️ CARRITO VACÍO

Agregue productos antes de guardar la orden.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      return;
    }

    try {
      setIsSaving(true);
      
      // Limpiar órdenes workspace existentes antes de agregar nuevas
      await inventarioService.limpiarOrdenesWorkspace(workspaceIdFinal);
      
      // Agregar cada producto del carrito a ordenes_workspace
      for (const item of carrito) {
        await inventarioService.agregarProductoOrden(
          workspaceIdFinal,
          item.productoId,
          item.cantidadPz,
          item.cantidadKg
        );
      }
      
      // Mostrar confirmación
      toast.showSuccess(`✅ ORDEN GUARDADA EXITOSAMENTE

🏪 Mesa: ${workspaceName || workspaceIdFinal}
📦 Productos: ${carrito.length}
💰 Total: $${calcularTotal().toFixed(2)}

La orden se ha registrado correctamente en el sistema.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      
      // ✅ Marcar la orden como guardada
      setOrdenGuardada(true);
      
      console.log('✅ Orden guardada en workspace:', {
        workspaceId: workspaceIdFinal,
        productos: carrito.length,
        total: calcularTotal()
      });
      
      // ✅ ESPERAR 3 segundos antes de recargar para que el toast sea visible
      setTimeout(async () => {
        await recargarDatos();
      }, 3000);
      
    } catch (error) {
      console.error('❌ Error al guardar orden:', error);
      toast.showError(`❌ ERROR AL GUARDAR

No se pudo guardar la orden. Intente nuevamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
    } finally {
      setIsSaving(false);
    }
  };

  // Solicitar cuenta (procesar venta final)
  const solicitarCuenta = async () => {
    if (carrito.length === 0) {
      toast.showWarning(`⚠️ CARRITO VACÍO

Agregue productos antes de solicitar la cuenta.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      return;
    }

    // ✅ NUEVA VALIDACIÓN: Verificar que la orden esté guardada antes de solicitar cuenta
    if (!ordenGuardada) {
      toast.showWarning(`⚠️ ORDEN NO GUARDADA

Debe guardar la orden antes de solicitar la cuenta.
Presione "Guardar Orden" primero.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      return;
    }

    try {
      setIsSaving(true);
      
      // Solo cambiar estado del workspace a "cuenta" - NO volver a guardar
      console.log('📋 Solicitando cuenta para workspace:', workspaceIdFinal);
      await workspaceService.cambiarSolicitudCuenta(workspaceIdFinal, true);
      
      toast.showSuccess(`✅ CUENTA SOLICITADA EXITOSAMENTE

El administrador puede proceder a generar el ticket de venta.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      
      // ✅ ESPERAR 4 segundos antes de redirigir para que el toast sea visible
      setTimeout(() => {
        onBackToWorkspaces();
      }, 4000);
      
    } catch (error) {
      console.error('❌ Error al solicitar cuenta:', error);
      toast.showError(`❌ ERROR AL SOLICITAR CUENTA

No se pudo procesar la solicitud. Intente nuevamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
    } finally {
      setIsSaving(false);
    }
  };

  if (isLoading) {
    return (
      <div className="punto-venta__loading">
        <div className="loading-spinner"></div>
        <p>Cargando punto de venta...</p>
      </div>
    );
  }

  if (error) {
    return (
      <div className="punto-venta__error">
        <p>{error}</p>
        <button onClick={onBackToWorkspaces} className="btn btn-primary">
          Volver a Workspaces
        </button>
      </div>
    );
  }

  return (
    <div className="punto-venta">
      {/* Header */}
      <header className="punto-venta__header">
        <div className="header-content">
          <div className="header-left">
            <button onClick={onBackToWorkspaces} className="btn btn-back">
              ← Regresar
            </button>
            <h1>Punto de Venta - {workspaceName || `Mesa ${workspaceIdFinal}`}</h1>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="punto-venta__main">
        {/* Panel Izquierdo - Menú de Productos */}
        <div className="panel-productos">
          <div className="panel-header">
            <h2>Menú de Productos</h2>
          </div>

          {/* Filtros de Categorías */}
          <div className="categorias-filter">
            <button
              onClick={() => handleCategoriaSelect('')}
              className={`categoria-btn ${categoriaSeleccionada === '' ? 'active' : ''}`}
            >
              Todas
            </button>
            {categorias.map(categoria => (
              <button
                key={categoria.id}
                onClick={() => handleCategoriaSelect(categoria.id)}
                className={`categoria-btn ${categoriaSeleccionada === categoria.id ? 'active' : ''}`}
              >
                {categoria.categoria}
              </button>
            ))}
          </div>

          {/* Lista de Productos */}
          <div className="productos-lista">
            {productosFiltrados.map(producto => (
              <div
                key={producto.id}
                onClick={() => handleProductoSelect(producto.id)}
                className={`producto-item ${productoSeleccionado === producto.id ? 'selected' : ''}`}
              >
                <div className="producto-info">
                  <h3>{producto.nombre}</h3>
                  <p className="stock">Stock: {producto.cantidadInventario || 0}</p>
                  <p className="precio">${producto.precioVentaActual || 0}</p>
                </div>
              </div>
            ))}
          </div>

          {/* Controles de Cantidad */}
          {productoSeleccionado && (
            <div className="cantidad-controls">
              <h3>Cantidad</h3>
              <div className="cantidad-input">
                <button
                  onClick={() => setCantidad(Math.max(1, cantidad - 1))}
                  className="btn btn-sm"
                >
                  -
                </button>
                <input
                  type="number"
                  value={cantidad}
                  onChange={(e) => setCantidad(Math.max(1, parseInt(e.target.value) || 1))}
                  min="1"
                  max={getProductoSeleccionado()?.cantidadInventario || 1}
                />
                <button
                  onClick={() => {
                    const maxStock = getProductoSeleccionado()?.cantidadInventario || 1;
                    setCantidad(Math.min(maxStock, cantidad + 1));
                  }}
                  className="btn btn-sm"
                >
                  +
                </button>
              </div>
              <button onClick={agregarAlCarrito} className="btn btn-primary btn-block">
                Agregar al Carrito
              </button>
            </div>
          )}
        </div>

        {/* Panel Derecho - Carrito de Compras */}
        <div className="panel-carrito">
          <div className="panel-header">
            <h2>Carrito de Compras</h2>
          </div>

          {/* Lista del Carrito */}
          <div className="carrito-lista">
            {carrito.length === 0 ? (
              <div className="carrito-vacio">
                <p>El carrito está vacío</p>
                <p>Selecciona productos del menú para agregar</p>
              </div>
            ) : (
              carrito.map(item => (
                <div key={item.productoId} className="carrito-item">
                  <div className="item-info">
                    <h4>{item.productoNombre}</h4>
                    <p className="cantidad">{item.cantidadPz}x ${item.precio}</p>
                    <p className="subtotal">${(item.precio * item.cantidadPz).toFixed(2)}</p>
                  </div>
                  <button
                    onClick={() => removerDelCarrito(item.productoId)}
                    className="btn btn-danger btn-sm"
                  >
                    ×
                  </button>
                </div>
              ))
            )}
          </div>

          {/* Total y Acciones */}
          <div className="carrito-footer">
            <div className="total">
              <h3>Total: ${calcularTotal().toFixed(2)}</h3>
            </div>
            <div className="acciones">
              <button
                onClick={guardarOrden}
                disabled={carrito.length === 0 || isSaving}
                className="btn btn-success btn-block"
              >
                {isSaving ? 'Guardando...' : 'Guardar Orden'}
              </button>
              <button
                onClick={solicitarCuenta}
                disabled={carrito.length === 0 || isSaving || !ordenGuardada}
                className={`btn btn-block ${!ordenGuardada ? 'btn-secondary' : 'btn-primary'}`}
                title={!ordenGuardada ? 'Debe guardar la orden primero' : 'Solicitar cuenta para proceder al pago'}
              >
                {isSaving ? 'Procesando...' : !ordenGuardada ? 'Guardar Orden Primero' : 'Solicitar Cuenta'}
              </button>
            </div>
          </div>
        </div>
      </main>
      
      {/* Overlay sutil para operaciones de guardado - permite que los toasts sean visibles */}
      {isSaving && (
        <div className="saving-overlay">
          <div className="saving-indicator">
            <div className="loading-spinner"></div>
            <p>Procesando operación...</p>
          </div>
        </div>
      )}
    </div>
  );
};

export default PuntoDeVenta;

```

`proyecto-pos-finanzas/frontend/src/components/RoleBasedNavigation.css`:

```css
/* Role Based Navigation Styles - Material Design */

.role-based-navigation {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
}

/* Welcome Section */
.role-nav__welcome {
  text-align: center;
  margin-bottom: var(--md-spacing-xxl);
}

.role-nav__welcome h2 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
  font-size: 2rem;
  font-weight: 700;
}

.role-nav__welcome-subtitle {
  margin: 0;
  color: var(--md-on-surface-variant);
  font-size: 1rem;
}

.role-nav__user-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-xs);
  padding: var(--md-spacing-sm) var(--md-spacing-md);
  background-color: var(--md-primary-container);
  color: var(--md-on-primary-container);
  border-radius: var(--md-border-radius-full);
  font-size: 0.875rem;
  font-weight: 500;
  margin-top: var(--md-spacing-md);
}

.role-nav__user-badge svg {
  width: 16px;
  height: 16px;
}

/* Cards Grid */
.role-nav__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--md-spacing-lg);
  margin-bottom: var(--md-spacing-xxl);
}

/* Action Cards - Same style as MainMenu */
.role-nav__card {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  gap: var(--md-spacing-lg);
  text-align: left;
  min-height: 120px;
  width: 100%;
  text-decoration: none;
}

.role-nav__card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.role-nav__card:hover {
  box-shadow: var(--md-elevation-3);
  transform: translateY(-2px);
}

.role-nav__card:hover::before {
  opacity: 0.04;
}

.role-nav__card:active {
  transform: translateY(0);
  box-shadow: var(--md-elevation-2);
}

.role-nav__card:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

/* Card Icons */
.role-nav__card-icon {
  width: 56px;
  height: 56px;
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
}

.role-nav__card-icon svg {
  width: 28px;
  height: 28px;
}

/* Card Variants - Same colors as MainMenu */
.role-nav__card--pos .role-nav__card-icon {
  background-color: #E3F2FD;
  color: #1976D2;
}

.role-nav__card--pos:hover .role-nav__card-icon {
  background-color: #BBDEFB;
  transform: scale(1.1);
}

.role-nav__card--inventory .role-nav__card-icon {
  background-color: #E8F5E8;
  color: #388E3C;
}

.role-nav__card--inventory:hover .role-nav__card-icon {
  background-color: #C8E6C9;
  transform: scale(1.1);
}

.role-nav__card--employees .role-nav__card-icon {
  background-color: #F3E5F5;
  color: #7B1FA2;
}

.role-nav__card--employees:hover .role-nav__card-icon {
  background-color: #E1BEE7;
  transform: scale(1.1);
}

/* Card Content */
.role-nav__card-content {
  flex: 1;
  min-width: 0;
}

.role-nav__card-content h3 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface);
  font-size: 1.25rem;
  font-weight: 600;
}

.role-nav__card-content p {
  margin: 0;
  color: var(--md-on-surface-variant);
  line-height: 1.4;
  font-size: 0.875rem;
}

/* Card Arrow */
.role-nav__card-arrow {
  color: var(--md-on-surface-variant);
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  flex-shrink: 0;
}

.role-nav__card-arrow svg {
  width: 24px;
  height: 24px;
}

.role-nav__card:hover .role-nav__card-arrow {
  color: var(--md-on-surface);
  transform: translateX(4px);
}

/* Info Messages */
.role-nav__info {
  margin-top: var(--md-spacing-xl);
  padding: var(--md-spacing-lg);
  border-radius: var(--md-border-radius-lg);
  display: flex;
  align-items: flex-start;
  gap: var(--md-spacing-md);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.role-nav__info--employee {
  background-color: var(--md-primary-container);
  border: 1px solid var(--md-primary);
}

.role-nav__info--admin {
  background-color: #E8F5E8;
  border: 1px solid #4CAF50;
}

.role-nav__info--error {
  background-color: var(--md-error-container);
  border: 1px solid var(--md-error);
}

.role-nav__info-icon {
  color: var(--md-primary);
  flex-shrink: 0;
  margin-top: 2px;
}

.role-nav__info--admin .role-nav__info-icon {
  color: #4CAF50;
}

.role-nav__info--error .role-nav__info-icon {
  color: var(--md-error);
}

.role-nav__info-icon svg {
  width: 20px;
  height: 20px;
}

.role-nav__info-content h4 {
  margin: 0 0 var(--md-spacing-xs) 0;
  font-size: 0.875rem;
  font-weight: 600;
  color: var(--md-on-surface);
}

.role-nav__info-content p {
  margin: 0;
  font-size: 0.8125rem;
  line-height: 1.4;
  color: var(--md-on-surface-variant);
}

/* No Access State */
.role-nav__no-access {
  text-align: center;
  padding: var(--md-spacing-xxl);
}

.role-nav__no-access-icon {
  width: 64px;
  height: 64px;
  color: var(--md-on-surface-variant);
  margin: 0 auto var(--md-spacing-lg);
  opacity: 0.5;
}

.role-nav__no-access h3 {
  margin: 0 0 var(--md-spacing-sm) 0;
  color: var(--md-on-surface-variant);
  font-size: 1.25rem;
  font-weight: 600;
}

.role-nav__no-access p {
  margin: 0;
  color: var(--md-on-surface-variant);
  line-height: 1.5;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

/* Responsive Design */
@media (max-width: 768px) {
  .role-nav__grid {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-md);
  }

  .role-nav__card {
    padding: var(--md-spacing-lg);
    flex-direction: column;
    text-align: center;
    min-height: 160px;
  }

  .role-nav__card-arrow {
    display: none;
  }

  .role-nav__welcome h2 {
    font-size: 1.75rem;
  }

  .role-nav__info {
    margin-left: var(--md-spacing-md);
    margin-right: var(--md-spacing-md);
  }
}

@media (max-width: 480px) {
  .role-nav__welcome h2 {
    font-size: 1.5rem;
  }

  .role-nav__card {
    min-height: 140px;
    touch-action: manipulation;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .role-nav__card {
    border: 2px solid var(--md-outline);
  }

  .role-nav__card:focus {
    outline-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .role-nav__card {
    transition: none;
  }

  .role-nav__card:hover {
    transform: none;
  }

  .role-nav__card-icon,
  .role-nav__card-arrow {
    transition: none;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/RoleBasedNavigation.tsx`:

```tsx
import React from 'react';
import { useAuth } from '../hooks/useAuth';
import './RoleBasedNavigation.css';

interface RoleBasedNavigationProps {
  onNavigation: (view: string) => void;
}

const RoleBasedNavigation: React.FC<RoleBasedNavigationProps> = ({ onNavigation }) => {
  const { isAdmin, isEmployee, getUserRole, getUserName } = useAuth();

  // Definir botones disponibles según el rol
  const getAvailableButtons = () => {
    if (isAdmin()) {
      // Administradores ven todos los botones
      return [
        {
          id: 'pdv',
          title: 'Punto de Venta',
          description: 'Gestión de ventas y cobros',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z"/>
              <path d="M9 8V17H11V8H9ZM13 8V17H15V8H13Z"/>
            </svg>
          ),
          variant: 'pos',
          action: () => onNavigation('pdv')
        },
        {
          id: 'inventario',
          title: 'Inventario',
          description: 'Gestión de productos y stock',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 7L12 12L22 7L12 2ZM2 17L12 22L22 17M2 12L12 17L22 12"/>
            </svg>
          ),
          variant: 'inventory',
          action: () => onNavigation('inventario')
        },
        {
          id: 'empleados',
          title: 'Empleados',
          description: 'Gestión de personal',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M16 4C18.2 4 20 5.8 20 8S18.2 12 16 12C13.8 12 12 10.2 12 8S13.8 4 16 4ZM16 6C14.9 6 14 6.9 14 8S14.9 10 16 10C17.1 10 18 9.1 18 8S17.1 6 16 6ZM20 18V20H12V18C12 15.8 13.8 14 16 14S20 15.8 20 18ZM8 12C10.2 12 12 10.2 12 8S10.2 4 8 4C5.8 4 4 5.8 4 8S5.8 12 8 12ZM8 6C9.1 6 10 6.9 10 8S9.1 10 8 10C6.9 10 6 9.1 6 8S6.9 6 8 6ZM12 18V20H4V18C4 15.8 5.8 14 8 14S12 15.8 12 18Z"/>
            </svg>
          ),
          variant: 'employees',
          action: () => onNavigation('empleados')
        }
      ];
    } else if (isEmployee()) {
      // Empleados solo ven el Punto de Venta
      return [
        {
          id: 'pdv',
          title: 'Punto de Venta',
          description: 'Gestión de ventas y cobros',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z"/>
              <path d="M9 8V17H11V8H9ZM13 8V17H15V8H13Z"/>
            </svg>
          ),
          variant: 'pos',
          action: () => onNavigation('pdv')
        }
      ];
    }

    // Sin rol definido - no mostrar botones
    return [];
  };

  const availableButtons = getAvailableButtons();
  const userName = getUserName();
  const userRole = getUserRole();

  return (
    <div className="role-based-navigation">
      {/* Header con información del usuario */}
      <div className="role-nav__welcome">
        <h2 className="md-headline-medium">
          ¡Bienvenido, {userName}!
        </h2>
        <p className="role-nav__welcome-subtitle md-body-large">
          Selecciona el módulo al que deseas acceder
        </p>
        <div className="role-nav__user-badge">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V9M21 11V9L15 8.5V11M21 12.5V11L15 10.5V12.5C15 13.3 14.3 14 13.5 14S12 13.3 12 12.5V3C12 2.4 11.6 2 11 2S10 2.4 10 3V12.5C10 13.3 9.3 14 8.5 14S7 13.3 7 12.5V10.5L1 11V12.5L7 13V12.5C7 14.4 8.6 16 10.5 16S14 14.4 14 12.5V13L21 12.5Z"/>
          </svg>
          {userRole}
        </div>
      </div>

      {/* Botones de navegación basados en rol */}
      {availableButtons.length > 0 ? (
        <div className="role-nav__grid">
          {availableButtons.map((button) => (
            <button
              key={button.id}
              onClick={button.action}
              className={`role-nav__card role-nav__card--${button.variant}`}
            >
              <div className="role-nav__card-icon">
                {button.icon}
              </div>
              
              <div className="role-nav__card-content">
                <h3 className="md-title-large">{button.title}</h3>
                <p className="md-body-medium">{button.description}</p>
              </div>
              
              <div className="role-nav__card-arrow">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8.59 16.59L13.17 12L8.59 7.41L10 6L16 12L10 18L8.59 16.59Z"/>
                </svg>
              </div>
            </button>
          ))}
        </div>
      ) : (
        // Mensaje cuando no hay permisos
        <div className="role-nav__no-access">
          <svg className="role-nav__no-access-icon" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM12 20C7.59 20 4 16.41 4 12S7.59 4 12 4 20 7.59 20 12 16.41 20 12 20ZM12.5 7H11V13H12.5V7ZM12.5 15H11V16.5H12.5V15Z"/>
          </svg>
          <h3 className="md-title-large">
            Sin Permisos de Acceso
          </h3>
          <p className="md-body-medium">
            Tu rol "{userRole}" no tiene permisos para acceder a ningún módulo.
            <br />
            Contacta al administrador del sistema.
          </p>
        </div>
      )}

      {/* Información de acceso para empleados */}
      {isEmployee() && (
        <div className="role-nav__info role-nav__info--employee">
          <div className="role-nav__info-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12S6.48 22 12 22 22 17.52 22 12 17.52 2 12 2ZM13 17H11V11H13V17ZM13 9H11V7H13V9Z"/>
            </svg>
          </div>
          <div className="role-nav__info-content">
            <h4 className="md-body-large">Acceso de Empleado</h4>
            <p className="md-body-medium">
              Como empleado, tienes acceso únicamente al módulo de Punto de Venta.
              Si necesitas acceso a otras funcionalidades, contacta al administrador.
            </p>
          </div>
        </div>
      )}

      {/* Información completa para administradores */}
      {isAdmin() && (
        <div className="role-nav__info role-nav__info--admin">
          <div className="role-nav__info-icon">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1ZM12,7C13.4,7 14.8,8.6 14.8,10V11.5C15.4,11.5 16,12.1 16,12.7V16.2C16,16.8 15.4,17.3 14.8,17.3H9.2C8.6,17.3 8,16.8 8,16.2V12.8C8,12.2 8.6,11.7 9.2,11.7V10.2C9.2,8.6 10.6,7 12,7ZM12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11.5H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z"/>
            </svg>
          </div>
          <div className="role-nav__info-content">
            <h4 className="md-body-large">Acceso Completo de Administrador</h4>
            <p className="md-body-medium">
              Tienes acceso a todas las funcionalidades del sistema: ventas, inventario y gestión de empleados.
            </p>
          </div>
        </div>
      )}
    </div>
  );
};

export default RoleBasedNavigation;

```

`proyecto-pos-finanzas/frontend/src/components/SeleccionProveedores.css`:

```css
/* ===== SELECCIÓN DE PROVEEDORES - ESTILOS MATERIAL DESIGN ===== */

/* Contenedor principal con padding adecuado */
.proveedores-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-xxl) var(--md-spacing-lg);
}

/* Grid responsivo para botones de proveedores */
.proveedores-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--md-spacing-lg);
  padding: var(--md-spacing-lg) 0;
}

/* Botones de proveedor con Material Design */
.proveedor-card {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-md);
  text-align: left;
  min-height: 180px;
  width: 100%;
  text-decoration: none;
  color: inherit;
}

.proveedor-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.proveedor-card:hover {
  box-shadow: var(--md-elevation-3);
  transform: translateY(-2px);
}

.proveedor-card:hover::before {
  opacity: 0.04;
}

.proveedor-card:active {
  transform: translateY(0);
  box-shadow: var(--md-elevation-2);
}

.proveedor-card:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

/* Estado de deuda - Amarillo Material Design */
.proveedor-card.status-debt {
  background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);
  border-left: 4px solid #FF8F00;
}

.proveedor-card.status-debt:hover {
  background: linear-gradient(135deg, #FFF3C4 0%, #FFE082 100%);
  box-shadow: var(--md-elevation-3), 0 0 0 1px rgba(255, 143, 0, 0.2);
}

/* Estado sin deuda - Verde Material Design */
.proveedor-card.status-available {
  background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%);
  border-left: 4px solid #4CAF50;
}

.proveedor-card.status-available:hover {
  background: linear-gradient(135deg, #E1F4E1 0%, #A5D6A7 100%);
  box-shadow: var(--md-elevation-3), 0 0 0 1px rgba(76, 175, 80, 0.2);
}

/* Icono del proveedor con Material Design */
.proveedor-icon {
  width: 56px;
  height: 56px;
  background-color: var(--md-primary-container);
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  color: var(--md-primary);
  flex-shrink: 0;
  margin-bottom: var(--md-spacing-sm);
}

/* Información del proveedor */
.proveedor-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-sm);
}

.proveedor-name {
  margin: 0;
  font-size: var(--md-title-medium);
  font-weight: 500;
  color: var(--md-on-surface);
  line-height: 1.4;
}

/* Detalles adicionales del proveedor */
.proveedor-details {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.proveedor-detail-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: var(--md-body-small);
}

.proveedor-detail-label {
  color: var(--md-on-surface-variant);
  font-weight: 400;
}

.proveedor-detail-value {
  color: var(--md-on-surface);
  font-weight: 500;
}

/* Información de deuda con Material Design */
.proveedor-debt-info {
  padding: var(--md-spacing-sm) var(--md-spacing-md);
  background: rgba(255, 143, 0, 0.12);
  border-radius: var(--md-border-radius-md);
  margin-top: var(--md-spacing-sm);
}

.proveedor-debt-amount {
  color: #E65100;
  font-weight: 600;
  font-size: var(--md-body-medium);
}

/* Estado del proveedor */
.proveedor-status {
  align-self: flex-start;
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-lg);
  font-size: var(--md-label-small);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.proveedor-status.status-debt {
  background-color: #FF8F00;
  color: white;
}

.proveedor-status.status-available {
  background-color: #4CAF50;
  color: white;
}

/* Botón de regresar con Material Design */
.back-button {
  display: inline-flex;
  align-items: center;
  gap: var(--md-spacing-sm);
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  background-color: var(--md-surface-container);
  color: var(--md-on-surface);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-lg);
  font-size: var(--md-label-large);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  text-decoration: none;
  min-height: 48px;
  box-shadow: var(--md-elevation-1);
}

.back-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
  border-radius: inherit;
}

.back-button:hover {
  box-shadow: var(--md-elevation-2);
  background-color: var(--md-surface-container-high);
}

.back-button:hover::before {
  opacity: 0.08;
}

.back-button:active {
  box-shadow: var(--md-elevation-1);
}

.back-button:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

.back-button-icon {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

/* Header de la pantalla */
.proveedores-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--md-spacing-xl);
  gap: var(--md-spacing-lg);
}

.proveedores-title-section h2 {
  margin: 0 0 var(--md-spacing-xs) 0;
  font-size: var(--md-headline-medium);
  font-weight: 400;
  color: var(--md-on-surface);
}

.proveedores-subtitle {
  margin: 0;
  font-size: var(--md-body-large);
  color: var(--md-on-surface-variant);
}

/* Estados de carga y error */
.proveedores-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  gap: var(--md-spacing-lg);
  color: var(--md-on-surface-variant);
}

.proveedores-error {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
  padding: var(--md-spacing-lg);
  background-color: var(--md-error-container);
  color: var(--md-error);
  border-radius: var(--md-border-radius-md);
  border: 1px solid rgba(186, 26, 26, 0.2);
  margin-bottom: var(--md-spacing-xl);
}

.proveedores-error-icon {
  font-size: 24px;
  flex-shrink: 0;
}

/* Estado vacío */
.proveedores-empty {
  text-align: center;
  padding: var(--md-spacing-xxl);
  color: var(--md-on-surface-variant);
}

.proveedores-empty-icon {
  font-size: 80px;
  margin-bottom: var(--md-spacing-lg);
  color: var(--md-outline);
}

.proveedores-empty h3 {
  margin: 0 0 var(--md-spacing-md) 0;
  font-size: var(--md-headline-small);
  color: var(--md-on-surface);
}

.proveedores-empty p {
  margin: 0;
  font-size: var(--md-body-large);
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

/* Responsive Design para tablets */
@media (max-width: 1024px) {
  .proveedores-grid {
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--md-spacing-md);
  }
  
  .proveedor-card {
    min-height: 160px;
    padding: var(--md-spacing-lg);
  }
}

/* Responsive Design para móviles */
@media (max-width: 768px) {
  .proveedores-container {
    padding: var(--md-spacing-lg) var(--md-spacing-md);
  }
  
  .proveedores-header {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-md);
  }
  
  .back-button {
    align-self: flex-start;
  }
  
  .proveedores-grid {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-md);
  }
  
  .proveedor-card {
    min-height: 140px;
    padding: var(--md-spacing-md);
  }
  
  .proveedor-icon {
    width: 48px;
    height: 48px;
    font-size: 20px;
  }
  
  .proveedor-name {
    font-size: var(--md-title-small);
  }
  
  .proveedor-detail-item {
    font-size: var(--md-body-small);
  }
}

/* Responsive Design para pantallas muy pequeñas */
@media (max-width: 480px) {
  .proveedores-container {
    padding: var(--md-spacing-md) var(--md-spacing-sm);
  }
  
  .proveedor-card {
    padding: var(--md-spacing-sm);
    min-height: 120px;
  }
  
  .proveedor-icon {
    width: 40px;
    height: 40px;
    font-size: 18px;
  }
  
  .back-button {
    padding: var(--md-spacing-sm) var(--md-spacing-md);
  }
}

/* Mejoras de accesibilidad y táctiles */
@media (max-width: 768px) {
  .proveedor-card,
  .back-button {
    min-height: 48px;
    touch-action: manipulation;
  }
}

/* Soporte para modo de alto contraste */
@media (prefers-contrast: high) {
  .proveedor-card {
    border: 2px solid var(--md-outline);
  }
  
  .proveedor-card:focus {
    outline-width: 3px;
  }
  
  .back-button {
    border-width: 2px;
  }
}

/* Soporte para movimiento reducido */
@media (prefers-reduced-motion: reduce) {
  .proveedor-card,
  .back-button {
    transition: none;
  }
  
  .proveedor-card:hover {
    transform: none;
  }
}
```

`proyecto-pos-finanzas/frontend/src/components/SeleccionProveedores.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { comprasService } from '../services/comprasService';
import { deudasProveedoresService } from '../services/deudasService';
import { useToast } from '../hooks/useToast';
import type { Proveedor, DeudaProveedor } from '../types';
import './SeleccionProveedores.css'; // Estilos específicos Material Design

interface SeleccionProveedoresProps {
  onProveedorSelect: (proveedor: Proveedor) => void;
  onBackToInventario?: () => void;
}

const SeleccionProveedores: React.FC<SeleccionProveedoresProps> = ({ 
  onProveedorSelect, 
  onBackToInventario 
}) => {
  const toast = useToast();
  const [proveedores, setProveedores] = useState<Proveedor[]>([]);
  const [deudasMap, setDeudasMap] = useState<Map<string, DeudaProveedor>>(new Map());
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  const loadProveedores = async () => {
    try {
      setIsLoading(true);
      console.log('🔄 Cargando proveedores...');
      console.log('🔗 Backend URL configurada:', import.meta.env.VITE_API_URL || 'http://localhost:8080');
      
      // Verificar si hay token de autenticación
      const authData = localStorage.getItem('pos_auth_data');
      console.log('🔑 Auth data presente:', !!authData);
      
      // Cargar proveedores y deudas en paralelo
      const [proveedoresData, deudasData] = await Promise.all([
        comprasService.obtenerProveedores(),
        deudasProveedoresService.obtenerDeudasProveedores().catch(err => {
          console.warn('⚠️ No se pudieron cargar deudas:', err);
          return [];
        })
      ]);
      
      console.log('✅ Proveedores cargados:', proveedoresData);
      console.log('✅ Deudas cargadas:', deudasData);
      console.log('📊 Cantidad de proveedores:', proveedoresData.length);
      console.log('📊 Cantidad de deudas:', deudasData.length);
      
      // Crear mapa de deudas por proveedor ID  
      const deudasMap = new Map<string, DeudaProveedor>();
      deudasData.forEach(deuda => {
        deudasMap.set(deuda.proveedorId, deuda);
        console.log(`💰 Deuda encontrada: ${deuda.proveedorNombre} -> $${deuda.deudaPendiente}`);
      });
      
      setDeudasMap(deudasMap);
      
      if (proveedoresData.length === 0) {
        setError('No se encontraron proveedores activos en el sistema');
        toast.showError('No hay proveedores disponibles');
      } else {
        setProveedores(proveedoresData);
        setError(null);
      }
    } catch (error: any) {
      console.error('❌ Error loading proveedores:', error);
      console.error('❌ Error details:', {
        message: error.message,
        status: error.response?.status,
        statusText: error.response?.statusText,
        data: error.response?.data,
        url: error.config?.url
      });
      
      let errorMessage = 'Error al cargar los proveedores';
      if (error.response?.status === 401) {
        errorMessage = 'Error de autenticación. Por favor, inicia sesión nuevamente.';
      } else if (error.response?.status === 403) {
        errorMessage = 'No tienes permisos para acceder a esta información.';
      } else if (error.response?.status === 404) {
        errorMessage = 'Endpoint de proveedores no encontrado.';
      } else if (error.message?.includes('Network Error')) {
        errorMessage = 'Error de conexión. Verifica que el backend esté funcionando.';
      }
      
      setError(errorMessage);
      toast.showError(errorMessage);
    } finally {
      setIsLoading(false);
    }
  };

  useEffect(() => {
    loadProveedores();
  }, []);

  const handleProveedorClick = (proveedor: Proveedor) => {
    onProveedorSelect(proveedor);
  };

  const getStatusInfo = (proveedor: Proveedor) => {
    // Buscar deuda en el mapa de deudas
    const deudaInfo = deudasMap.get(proveedor.id);
    const deudaTotal = deudaInfo?.deudaPendiente || 0;
    
    console.log(`🔍 Verificando deuda para ${proveedor.nombreCompleto}:`, {
      proveedorId: proveedor.id,
      deudaEncontrada: !!deudaInfo,
      deudaPendiente: deudaTotal,
      estadoDeuda: deudaInfo?.estadoDeuda
    });
    
    if (deudaTotal > 0) {
      return {
        className: 'status-debt',
        text: 'Con deuda',
        deudaTotal
      };
    } else {
      return {
        className: 'status-available',
        text: 'Sin deuda',
        deudaTotal: 0
      };
    }
  };

  const formatCurrency = (amount: number) => {
    return new Intl.NumberFormat('es-MX', {
      style: 'currency',
      currency: 'MXN'
    }).format(amount);
  };

  const getNombreCompleto = (proveedor: Proveedor) => {
    return proveedor.nombreCompleto; // El backend ya nos da el nombre completo
  };

  if (isLoading) {
    return (
      <div className="proveedores-container">
        <div className="proveedores-loading">
          <div style={{ fontSize: '48px', color: 'var(--md-primary)' }}>🔄</div>
          <h3>Cargando proveedores...</h3>
          <p>Por favor espera mientras obtenemos la información</p>
        </div>
      </div>
    );
  }

  return (
    <div className="proveedores-container">
      <div className="proveedores-header">
        <div className="proveedores-title-section">
          <h2>Seleccionar Proveedor</h2>
          <p className="proveedores-subtitle">Elige un proveedor para realizar compras</p>
        </div>
        
        {onBackToInventario && (
          <button 
            className="back-button md-button"
            onClick={onBackToInventario}
          >
            <span className="back-button-icon">←</span>
            Volver al Inventario
          </button>
        )}
      </div>

      {error && (
        <div className="proveedores-error">
          <span className="proveedores-error-icon">⚠️</span>
          <span>{error}</span>
        </div>
      )}

      <div className="proveedores-grid">
        {proveedores.map((proveedor) => {
          const statusInfo = getStatusInfo(proveedor);
          const deudaInfo = deudasMap.get(proveedor.id);
          
          console.log(`🎨 Renderizando ${proveedor.nombreCompleto}:`, {
            statusInfo,
            deudaInfo: deudaInfo ? {
              deudaPendiente: deudaInfo.deudaPendiente,
              estadoDeuda: deudaInfo.estadoDeuda
            } : 'No encontrada'
          });
          
          return (
            <button
              key={proveedor.id}
              className={`proveedor-card ${statusInfo.className}`}
              onClick={() => handleProveedorClick(proveedor)}
            >
              <div className="proveedor-icon">
                🏪
              </div>
              
              <div className="proveedor-info">
                <h3 className="proveedor-name">
                  {getNombreCompleto(proveedor)}
                </h3>
                
                <div className="proveedor-details">
                  {proveedor.telefono && (
                    <div className="proveedor-detail-item">
                      <span className="proveedor-detail-label">Teléfono:</span>
                      <span className="proveedor-detail-value">{proveedor.telefono}</span>
                    </div>
                  )}
                  
                  {proveedor.email && (
                    <div className="proveedor-detail-item">
                      <span className="proveedor-detail-label">Email:</span>
                      <span className="proveedor-detail-value">{proveedor.email}</span>
                    </div>
                  )}
                  
                  {statusInfo.deudaTotal > 0 && (
                    <div className="proveedor-debt-info">
                      <div className="proveedor-detail-item">
                        <span className="proveedor-detail-label">Deuda pendiente:</span>
                        <span className="proveedor-debt-amount">
                          {formatCurrency(statusInfo.deudaTotal)}
                        </span>
                      </div>
                    </div>
                  )}
                </div>
              </div>
              
              <div className={`proveedor-status ${statusInfo.className}`}>
                {statusInfo.text}
              </div>
            </button>
          );
        })}
      </div>

      {proveedores.length === 0 && !isLoading && (
        <div className="proveedores-empty">
          <div className="proveedores-empty-icon">🏪</div>
          <h3>No hay proveedores disponibles</h3>
          <p>No se encontraron proveedores activos en el sistema.</p>
        </div>
      )}
    </div>
  );
};

export default SeleccionProveedores;
```

`proyecto-pos-finanzas/frontend/src/components/TestInventario.tsx`:

```tsx
import React from 'react';
import Inventario from './Inventario';
import './InventarioModerno.css';

const TestInventario: React.FC = () => {
  const handleNavigateToCompras = () => {
    console.log('🚀 Navegando a compras!');
    alert('Botón de compras funcionando correctamente!');
  };

  return (
    <div style={{ padding: '20px', backgroundColor: '#f5f5f5', minHeight: '100vh' }}>
      <h1>Test del Componente Inventario</h1>
      <p>Si puedes ver el botón "🛒 COMPRAR PRODUCTO" verde, entonces está funcionando.</p>
      <div style={{ marginTop: '20px', backgroundColor: 'white', padding: '20px', borderRadius: '8px' }}>
        <Inventario onNavigateToCompras={handleNavigateToCompras} />
      </div>
    </div>
  );
};

export default TestInventario;
```

`proyecto-pos-finanzas/frontend/src/components/TicketVenta.css`:

```css
/* Overlay del modal */
.ticket-venta-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

/* Modal principal */
.ticket-venta-modal {
  background-color: white;
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  max-width: 600px;
  width: 90%;
  max-height: 80vh;
  overflow-y: auto;
  animation: modalSlideIn 0.3s ease-out;
}

@keyframes modalSlideIn {
  from {
    opacity: 0;
    transform: translateY(-50px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Header del ticket */
.ticket-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 2px solid #f0f0f0;
  background-color: #f8f9fa;
  border-radius: 12px 12px 0 0;
}

.ticket-header h2 {
  margin: 0;
  color: #2c3e50;
  font-size: 1.5rem;
}

.btn-cerrar {
  background: none;
  border: none;
  font-size: 1.5rem;
  color: #6c757d;
  cursor: pointer;
  padding: 5px 10px;
  border-radius: 50%;
  transition: all 0.2s ease;
}

.btn-cerrar:hover {
  background-color: #e9ecef;
  color: #495057;
}

/* Contenido del ticket */
.ticket-content {
  padding: 20px;
}

/* Información del workspace */
.workspace-info {
  text-align: center;
  margin-bottom: 20px;
  padding: 15px;
  background-color: #f8f9fa;
  border-radius: 8px;
}

.workspace-info h3 {
  margin: 0 0 5px 0;
  color: #2c3e50;
  font-size: 1.3rem;
}

.workspace-info p {
  margin: 0;
  color: #6c757d;
  font-size: 0.9rem;
}

/* Lista de productos */
.productos-lista {
  margin-bottom: 20px;
}

.productos-header {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: 10px;
  padding: 10px;
  background-color: #e9ecef;
  border-radius: 8px;
  font-weight: bold;
  color: #495057;
  font-size: 0.9rem;
}

.producto-item {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: 10px;
  padding: 12px 10px;
  border-bottom: 1px solid #f0f0f0;
  align-items: center;
}

.producto-item:last-child {
  border-bottom: none;
}

.producto-nombre {
  font-weight: 500;
  color: #2c3e50;
}

.producto-cantidad {
  text-align: center;
  color: #6c757d;
}

.producto-precio {
  text-align: right;
  color: #28a745;
  font-weight: 500;
}

.producto-total {
  text-align: right;
  color: #2c3e50;
  font-weight: bold;
}

/* Resumen del ticket */
.ticket-resumen {
  border-top: 2px solid #e9ecef;
  padding-top: 15px;
  margin-bottom: 20px;
}

.resumen-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  color: #495057;
}

.resumen-item.total {
  border-top: 1px solid #dee2e6;
  margin-top: 10px;
  padding-top: 15px;
  font-size: 1.2rem;
  font-weight: bold;
  color: #2c3e50;
}

/* Acciones del ticket */
.ticket-acciones {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

.btn {
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: all 0.2s ease;
  font-size: 0.95rem;
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.btn-primary {
  background-color: #007bff;
  color: white;
}

.btn-primary:hover:not(:disabled) {
  background-color: #0056b3;
}

.btn-secondary {
  background-color: #6c757d;
  color: white;
}

.btn-secondary:hover:not(:disabled) {
  background-color: #5a6268;
}

.btn-success {
  background-color: #28a745;
  color: white;
}

.btn-success:hover:not(:disabled) {
  background-color: #1e7e34;
}

/* Modal de pago */
.modal-pago {
  background-color: #f8f9fa;
  padding: 20px;
  border-radius: 8px;
  margin-top: 15px;
}

.modal-pago h4 {
  margin: 0 0 15px 0;
  color: #2c3e50;
}

.modal-pago select {
  width: 100%;
  padding: 12px;
  border: 1px solid #ced4da;
  border-radius: 6px;
  font-size: 1rem;
  margin-bottom: 15px;
  background-color: white;
}

.modal-pago select:focus {
  outline: none;
  border-color: #007bff;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.modal-pago-acciones {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

/* Responsive */
@media (max-width: 768px) {
  .ticket-venta-modal {
    width: 95%;
    max-height: 90vh;
  }
  
  .ticket-header {
    padding: 15px;
  }
  
  .ticket-content {
    padding: 15px;
  }
  
  .productos-header,
  .producto-item {
    grid-template-columns: 1.5fr 1fr 1fr 1fr;
    gap: 5px;
    font-size: 0.85rem;
  }
  
  .ticket-acciones {
    flex-direction: column;
  }
  
  .modal-pago-acciones {
    flex-direction: column;
  }
  
  .btn {
    padding: 10px 20px;
  }
}

/* ===== NUEVOS ESTILOS PARA DISEÑO TIPO CARRITO ===== */

/* Productos con diseño de carrito */
.ticket-productos h4 {
  margin: 0 0 15px 0;
  color: #1a1a1a;
  font-size: 1.1rem;
  font-weight: 600;
}

.productos-carrito {
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  background-color: #fff;
  margin-bottom: 20px;
}

.carrito-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  border-bottom: 1px solid #f0f0f0;
}

.carrito-item:last-child {
  border-bottom: none;
}

.item-info {
  flex: 1;
}

.item-info h4 {
  margin: 0 0 5px 0;
  font-size: 1rem;
  font-weight: 600;
  color: #1a1a1a;
}

.item-details {
  display: flex;
  gap: 15px;
  font-size: 0.875rem;
  color: #666;
}

.cantidad {
  font-weight: 500;
}

.precio-unitario {
  color: #2196F3;
}

.item-total {
  font-size: 1.1rem;
  font-weight: bold;
  color: #1a1a1a;
  text-align: right;
  min-width: 80px;
}

/* Total destacado */
.ticket-total {
  border-top: 2px solid #e0e0e0;
  padding-top: 15px;
}

.total-line {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  background-color: #f8f9fa;
  border-radius: 8px;
  border: 2px solid #2196F3;
}

.total-label {
  font-size: 1.2rem;
  font-weight: 600;
  color: #1a1a1a;
}

.total-amount {
  font-size: 1.4rem;
  font-weight: bold;
  color: #2196F3;
}

/* Responsividad para el nuevo diseño */
@media (max-width: 480px) {
  .carrito-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .item-total {
    align-self: flex-end;
    font-size: 1.2rem;
  }
  
  .item-details {
    flex-direction: column;
    gap: 5px;
  }
  
  .total-line {
    padding: 12px;
  }
  
  .total-label {
    font-size: 1.1rem;
  }
  
  .total-amount {
    font-size: 1.3rem;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/TicketVenta.tsx`:

```tsx
import React, { useState } from 'react';
import { workspaceService, metodoPagoService } from '../services/apiService';
import { inventarioService } from '../services/inventarioService';
import { useToast } from '../hooks/useToast';
import type { TicketVenta as TicketVentaData, MetodoPago, FinalizarVentaRequest, VentaFinalizada } from '../types';
import './TicketVenta.css';

interface TicketVentaProps {
  ticket: TicketVentaData;
  onVentaFinalizada: (venta: VentaFinalizada) => void;
  onCerrar: () => void;
}

const TicketVenta: React.FC<TicketVentaProps> = ({ ticket, onVentaFinalizada, onCerrar }) => {
  const toast = useToast();
  const [metodosPago, setMetodosPago] = useState<MetodoPago[]>([]);
  const [metodoPagoSeleccionado, setMetodoPagoSeleccionado] = useState<string>('');
  const [isLoading, setIsLoading] = useState(false);
  const [mostrarModalPago, setMostrarModalPago] = useState(false);

  // Cargar métodos de pago al mostrar el modal
  React.useEffect(() => {
    const cargarMetodosPago = async () => {
      try {
        const metodos = await metodoPagoService.getAll();
        setMetodosPago(metodos);
        if (metodos.length > 0) {
          setMetodoPagoSeleccionado(metodos[0].id);
        }
      } catch (error) {
        console.error('Error al cargar métodos de pago:', error);
      }
    };

    cargarMetodosPago();
  }, []);

  const confirmarPago = async () => {
    if (!metodoPagoSeleccionado) {
      toast.showWarning(`⚠️ MÉTODO DE PAGO REQUERIDO

Por favor seleccione un método de pago antes de continuar.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      return;
    }

    try {
      setIsLoading(true);

      // Obtener dinámicamente el primer usuario disponible
      const usuarioId = await inventarioService.getFirstAvailableUser();

      const request: FinalizarVentaRequest = {
        metodoPagoId: metodoPagoSeleccionado,
        usuarioId: usuarioId,
        clienteId: undefined // Por ahora sin cliente específico
      };

      const ventaFinalizada = await workspaceService.finalizarVenta(ticket.workspaceId, request);
      onVentaFinalizada(ventaFinalizada);

    } catch (error) {
      console.error('Error al finalizar venta:', error);
      toast.showError(`❌ ERROR AL PROCESAR PAGO

No se pudo completar la transacción. Intente nuevamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="ticket-venta-overlay">
      <div className="ticket-venta-modal">
        <div className="ticket-header">
          <h2>🧾 Ticket de Venta</h2>
          <button className="btn-cerrar" onClick={onCerrar} disabled={isLoading}>
            ✕
          </button>
        </div>

        <div className="ticket-content">
          <div className="workspace-info">
            <h3>{ticket.workspaceNombre}</h3>
          </div>

          <div className="ticket-productos">
            <h4>Productos en la orden:</h4>
            <div className="productos-carrito">
              {ticket.productos.map((producto, index) => (
                <div key={index} className="carrito-item">
                  <div className="item-info">
                    <h4>{producto.productoNombre}</h4>
                    <div className="item-details">
                      <span className="cantidad">
                        {producto.cantidadPz > 0 && `${producto.cantidadPz} piezas`}
                        {producto.cantidadKg > 0 && `${producto.cantidadKg} kg`}
                      </span>
                      <span className="precio-unitario">
                        ${producto.precioUnitario.toFixed(2)} c/u
                      </span>
                    </div>
                  </div>
                  <div className="item-total">
                    ${producto.totalPorProducto.toFixed(2)}
                  </div>
                </div>
              ))}
            </div>
            
            <div className="ticket-total">
              <div className="total-line">
                <span className="total-label">Total a pagar:</span>
                <span className="total-amount">${ticket.totalGeneral.toFixed(2)}</span>
              </div>
            </div>
          </div>

          <div className="ticket-acciones">
            {!mostrarModalPago ? (
              <>
                <button 
                  className="btn btn-secondary" 
                  onClick={onCerrar}
                  disabled={isLoading}
                >
                  Cancelar
                </button>
                <button 
                  className="btn btn-primary" 
                  onClick={() => setMostrarModalPago(true)}
                  disabled={isLoading}
                >
                  Procesar Pago
                </button>
              </>
            ) : (
              <div className="modal-pago">
                <h4>Seleccionar Método de Pago</h4>
                <select 
                  value={metodoPagoSeleccionado} 
                  onChange={(e) => setMetodoPagoSeleccionado(e.target.value)}
                  disabled={isLoading}
                >
                  {metodosPago.map(metodo => (
                    <option key={metodo.id} value={metodo.id}>
                      {metodo.metodoPago}
                    </option>
                  ))}
                </select>
                
                <div className="modal-pago-acciones">
                  <button 
                    className="btn btn-secondary" 
                    onClick={() => setMostrarModalPago(false)}
                    disabled={isLoading}
                  >
                    Volver
                  </button>
                  <button 
                    className="btn btn-success" 
                    onClick={confirmarPago}
                    disabled={isLoading || !metodoPagoSeleccionado}
                  >
                    {isLoading ? 'Procesando...' : 'Confirmar Pago'}
                  </button>
                </div>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
};

export default TicketVenta;

```

`proyecto-pos-finanzas/frontend/src/components/WorkspaceScreen.css`:

```css
/* Workspace Screen Container */
.workspace-screen {
  min-height: 100vh;
  background-color: var(--md-surface);
  display: flex;
  flex-direction: column;
}

/* Loading State */
.workspace-screen--loading {
  justify-content: center;
  align-items: center;
}

.workspace-screen__loading {
  text-align: center;
  color: var(--md-on-surface-variant);
}

.workspace-screen__loading-spinner {
  display: flex;
  justify-content: center;
  margin-bottom: var(--md-spacing-lg);
}

.workspace-screen__loading-icon {
  width: 48px;
  height: 48px;
  color: var(--md-primary);
  animation: spin 1s linear infinite;
}

/* Header */
.workspace-screen__header {
  background-color: var(--md-surface-container);
  border-bottom: 1px solid var(--md-outline-variant);
  box-shadow: var(--md-elevation-1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.workspace-screen__header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-lg);
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
}

.workspace-screen__nav {
  display: flex;
  align-items: flex-start;
  gap: var(--md-spacing-lg);
  flex: 1;
}

.workspace-screen__back-btn {
  gap: var(--md-spacing-sm);
  flex-shrink: 0;
}

.workspace-screen__back-icon {
  width: 18px;
  height: 18px;
}

.workspace-screen__title-section h1 {
  margin: 0 0 var(--md-spacing-xs) 0;
  color: var(--md-on-surface);
}

.workspace-screen__title-section p {
  margin: 0;
  color: var(--md-on-surface-variant);
}

.workspace-screen__actions {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
  flex-shrink: 0;
}

.workspace-screen__create-btn {
  gap: var(--md-spacing-sm);
}

.workspace-screen__create-icon {
  width: 18px;
  height: 18px;
}

.workspace-screen__logout-btn {
  gap: var(--md-spacing-sm);
  color: var(--md-error);
}

.workspace-screen__logout-icon {
  width: 18px;
  height: 18px;
}

.workspace-screen__logout-text {
  display: none;
}

.workspace-screen__clear-btn {
  gap: var(--md-spacing-sm);
  color: var(--md-error);
  transition: all 0.3s ease;
}

.workspace-screen__clear-btn:hover {
  background-color: rgba(244, 67, 54, 0.08);
  color: var(--md-error);
}

.workspace-screen__clear-icon {
  width: 18px;
  height: 18px;
}

.workspace-screen__clear-text {
  display: none;
}

/* Desktop: Show button text */
@media (min-width: 769px) {
  .workspace-screen__clear-text {
    display: inline;
  }
  
  .workspace-screen__logout-text {
    display: inline;
  }
}

/* Main Content */
.workspace-screen__content {
  flex: 1;
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--md-spacing-xxl) var(--md-spacing-lg);
  width: 100%;
}

/* Error Message */
.workspace-screen__error {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-md);
  padding: var(--md-spacing-lg);
  background-color: var(--md-error-container);
  color: var(--md-error);
  border-radius: var(--md-border-radius-md);
  border: 1px solid rgba(186, 26, 26, 0.2);
  margin-bottom: var(--md-spacing-xl);
}

.workspace-screen__error-icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.workspace-screen__retry-btn {
  margin-left: auto;
  color: var(--md-error);
}

/* Empty State */
.workspace-screen__empty {
  text-align: center;
  padding: var(--md-spacing-xxl);
  color: var(--md-on-surface-variant);
}

.workspace-screen__empty-icon {
  width: 80px;
  height: 80px;
  margin: 0 auto var(--md-spacing-lg);
  color: var(--md-outline);
}

.workspace-screen__empty h2 {
  margin: 0 0 var(--md-spacing-md) 0;
  color: var(--md-on-surface);
}

.workspace-screen__empty p {
  margin: 0 0 var(--md-spacing-xl) 0;
  max-width: 400px;
  margin-left: auto;
  margin-right: auto;
}

/* Workspaces Grid */
.workspace-screen__grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: var(--md-spacing-lg);
}

/* Workspace Cards */
.workspace-screen__card {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-xl);
  padding: var(--md-spacing-xl);
  box-shadow: var(--md-elevation-1);
  border: none;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
  position: relative;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-lg);
  text-align: left;
  min-height: 160px;
  width: 100%;
}

.workspace-screen__card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.workspace-screen__card:hover:not(.workspace-screen__card--disabled) {
  box-shadow: var(--md-elevation-3);
  transform: translateY(-2px);
}

.workspace-screen__card:hover:not(.workspace-screen__card--disabled)::before {
  opacity: 0.04;
}

.workspace-screen__card:active:not(.workspace-screen__card--disabled) {
  transform: translateY(0);
  box-shadow: var(--md-elevation-2);
}

.workspace-screen__card:focus {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

.workspace-screen__card--disabled {
  /* NOTA: Esta clase ya no se usa - Los usuarios pueden acceder a todos los workspaces */
  /* Mantenida para compatibilidad pero no se aplica en el componente */
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: var(--md-elevation-1) !important;
}

/* Card Header */
.workspace-screen__card-header {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-bottom: var(--md-spacing-md);
}

/* Card Icon - Removed for simpler design */
/*
.workspace-screen__card-icon {
  width: 48px;
  height: 48px;
  background-color: var(--md-primary-container);
  border-radius: var(--md-border-radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  color: var(--md-primary);
}

.workspace-screen__card-icon svg {
  width: 24px;
  height: 24px;
}
*/

/* Status Indicators */
.workspace-screen__card-status {
  display: flex;
  align-items: center;
  gap: var(--md-spacing-xs);
  padding: var(--md-spacing-xs) var(--md-spacing-sm);
  border-radius: var(--md-border-radius-lg);
  flex-shrink: 0;
}

.workspace-screen__card-status svg {
  width: 16px;
  height: 16px;
}

.workspace-screen__card-status--success {
  background-color: #E8F5E8;
  color: #2E7D2E;
}

.workspace-screen__card-status--error {
  background-color: #FFEBEE;
  color: #C62828;
}

.workspace-screen__card-status--warning {
  background-color: #E3F2FD;
  color: #1565C0;
}

/* Card color variations based on status */
.workspace-screen__card--success {
  border-left: 4px solid #4CAF50;
  background-color: rgba(76, 175, 80, 0.08);
}

.workspace-screen__card--success:hover:not(:disabled) {
  background-color: rgba(76, 175, 80, 0.12);
  border-color: #4CAF50;
  box-shadow: 0 4px 8px rgba(76, 175, 80, 0.2);
}

.workspace-screen__card--error {
  border-left: 4px solid #F44336;
  background-color: rgba(244, 67, 54, 0.08);
}

.workspace-screen__card--error:hover:not(:disabled) {
  background-color: rgba(244, 67, 54, 0.12);
}

.workspace-screen__card--warning {
  border-left: 4px solid #2196F3;
  background-color: rgba(33, 150, 243, 0.08);
}

.workspace-screen__card--warning:hover:not(:disabled) {
  background-color: rgba(33, 150, 243, 0.12);
}

/* Card Content */
.workspace-screen__card-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-sm);
  text-align: center;
}

.workspace-screen__card-title {
  margin: 0;
  color: var(--md-on-surface);
  word-break: break-word;
}

.workspace-screen__card-meta {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.workspace-screen__card-meta span {
  color: var(--md-on-surface-variant);
}

/* Card Arrow */
.workspace-screen__card-arrow {
  align-self: flex-end;
  color: var(--md-on-surface-variant);
  transition: all 0.3s cubic-bezier(0.2, 0, 0, 1);
}

.workspace-screen__card-arrow svg {
  width: 24px;
  height: 24px;
}

.workspace-screen__card:hover:not(.workspace-screen__card--disabled) .workspace-screen__card-arrow {
  color: var(--md-on-surface);
  transform: translateX(4px);
}

/* Modal */
.workspace-screen__modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: var(--md-spacing-lg);
}

.workspace-screen__modal {
  background-color: var(--md-surface);
  border-radius: var(--md-border-radius-xl);
  box-shadow: var(--md-elevation-5);
  width: 100%;
  max-width: 480px;
  max-height: 90vh;
  overflow-y: auto;
}

.workspace-screen__modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--md-spacing-xl) var(--md-spacing-xl) var(--md-spacing-lg);
  border-bottom: 1px solid var(--md-outline-variant);
}

.workspace-screen__modal-header h2 {
  margin: 0;
  color: var(--md-on-surface);
}

.workspace-screen__modal-close {
  background: none;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: var(--md-border-radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: var(--md-on-surface-variant);
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.workspace-screen__modal-close:hover {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface);
}

.workspace-screen__modal-close svg {
  width: 20px;
  height: 20px;
}

/* Modal Form */
.workspace-screen__modal-form {
  padding: var(--md-spacing-xl);
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-lg);
}

.workspace-screen__modal-field {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-sm);
}

.workspace-screen__modal-field label {
  color: var(--md-on-surface);
  font-weight: 500;
}

.workspace-screen__modal-input {
  width: 100%;
  height: 56px;
  padding: var(--md-spacing-md);
  border: 1px solid var(--md-outline);
  border-radius: var(--md-border-radius-sm);
  background-color: var(--md-surface);
  color: var(--md-on-surface);
  font-family: inherit;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  outline: none;
  box-sizing: border-box;
}

.workspace-screen__modal-input:focus {
  border-color: var(--md-primary);
  box-shadow: 0 0 0 2px rgba(103, 80, 164, 0.12);
}

.workspace-screen__modal-input:disabled {
  background-color: var(--md-surface-variant);
  color: var(--md-on-surface-variant);
  border-color: var(--md-outline-variant);
  cursor: not-allowed;
}

.workspace-screen__modal-input::placeholder {
  color: var(--md-on-surface-variant);
  opacity: 0.7;
}

/* Checkbox */
.workspace-screen__modal-checkbox {
  margin: var(--md-spacing-sm) 0;
}

.workspace-screen__checkbox-label {
  display: flex;
  align-items: flex-start;
  gap: var(--md-spacing-md);
  cursor: pointer;
}

.workspace-screen__checkbox {
  position: absolute;
  opacity: 0;
  pointer-events: none;
}

.workspace-screen__checkbox-indicator {
  width: 20px;
  height: 20px;
  border: 2px solid var(--md-outline);
  border-radius: var(--md-border-radius-xs);
  background-color: var(--md-surface);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  flex-shrink: 0;
  margin-top: 2px;
}

.workspace-screen__checkbox:checked + .workspace-screen__checkbox-indicator {
  background-color: var(--md-primary);
  border-color: var(--md-primary);
}

.workspace-screen__checkbox:checked + .workspace-screen__checkbox-indicator::after {
  content: '';
  width: 10px;
  height: 6px;
  border: 2px solid white;
  border-top: none;
  border-right: none;
  transform: rotate(-45deg);
  margin-top: -2px;
}

.workspace-screen__checkbox:disabled + .workspace-screen__checkbox-indicator {
  background-color: var(--md-surface-variant);
  border-color: var(--md-outline-variant);
  cursor: not-allowed;
}

.workspace-screen__checkbox-text {
  display: flex;
  flex-direction: column;
  gap: var(--md-spacing-xs);
}

.workspace-screen__checkbox-text span:first-child {
  color: var(--md-on-surface);
  font-weight: 500;
}

.workspace-screen__checkbox-text span:last-child {
  color: var(--md-on-surface-variant);
}

/* Modal Actions */
.workspace-screen__modal-actions {
  display: flex;
  justify-content: flex-end;
  gap: var(--md-spacing-md);
  margin-top: var(--md-spacing-lg);
  padding-top: var(--md-spacing-lg);
  border-top: 1px solid var(--md-outline-variant);
}

/* Responsive Design */
@media (max-width: 768px) {
  .workspace-screen__header-content {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-md);
  }

  .workspace-screen__nav {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-md);
  }

  .workspace-screen__back-btn {
    align-self: flex-start;
  }

  .workspace-screen__actions {
    flex-direction: column;
    align-items: stretch;
    gap: var(--md-spacing-sm);
  }

  .workspace-screen__logout-text {
    display: inline;
  }

  .workspace-screen__clear-text {
    display: inline;
  }

  .workspace-screen__content {
    padding: var(--md-spacing-xl) var(--md-spacing-md);
  }

  .workspace-screen__grid {
    grid-template-columns: 1fr;
    gap: var(--md-spacing-md);
  }

  .workspace-screen__card {
    min-height: 140px;
  }

  .workspace-screen__card-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--md-spacing-sm);
  }

  .workspace-screen__card-arrow {
    display: none;
  }

  .workspace-screen__modal-overlay {
    padding: var(--md-spacing-md);
  }

  .workspace-screen__modal-form {
    padding: var(--md-spacing-lg);
  }

  .workspace-screen__modal-actions {
    flex-direction: column;
    align-items: stretch;
  }
}

@media (max-width: 480px) {
  .workspace-screen__header-content {
    padding: var(--md-spacing-md);
  }

  .workspace-screen__content {
    padding: var(--md-spacing-lg) var(--md-spacing-sm);
  }

  .workspace-screen__card {
    padding: var(--md-spacing-lg);
    min-height: 120px;
  }

  .workspace-screen__modal-header,
  .workspace-screen__modal-form {
    padding: var(--md-spacing-md);
  }
}

/* Animations */
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .workspace-screen__card {
    border: 2px solid var(--md-outline);
  }

  .workspace-screen__card:focus {
    outline-width: 3px;
  }

  .workspace-screen__modal-input {
    border-width: 2px;
  }

  .workspace-screen__modal-input:focus {
    border-width: 3px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .workspace-screen__card,
  .workspace-screen__card-arrow,
  .workspace-screen__modal-close,
  .workspace-screen__checkbox-indicator {
    transition: none;
  }

  .workspace-screen__card:hover {
    transform: none;
  }

  .workspace-screen__loading-icon {
    animation: none;
  }
}

/* Touch enhancements */
@media (max-width: 768px) {
  .workspace-screen__card,
  .workspace-screen__back-btn,
  .workspace-screen__create-btn,
  .workspace-screen__logout-btn {
    min-height: 48px;
    touch-action: manipulation;
  }

  .workspace-screen__modal-close {
    min-width: 48px;
    min-height: 48px;
  }
}

/* ===== ESTILOS PARA WORKSPACE CON ESTADO "CUENTA" ===== */

/* Tarjeta especial para workspaces que solicitan cuenta */
.workspace-screen__card--cuenta {
  cursor: default;
  border: 2px solid var(--md-warning);
  background: linear-gradient(135deg, 
    var(--md-warning-container) 0%, 
    var(--md-warning-container-light, #fff8e1) 100%);
}

.workspace-screen__card--cuenta:hover {
  transform: none;
  box-shadow: var(--md-elevation-2);
}

/* ✅ CORRECCIÓN: Texto negro para workspaces con cuenta solicitada */
.workspace-screen__card--cuenta .workspace-screen__card-title,
.workspace-screen__card--cuenta .workspace-screen__card-meta,
.workspace-screen__card--cuenta .workspace-screen__card-meta span {
  color: #000000 !important; /* Negro para contraste con fondo amarillo */
}

/* Acciones especiales para workspace de cuenta */
.workspace-screen__card-actions {
  padding: var(--md-spacing-md);
  border-top: 1px solid var(--md-outline-variant);
  background-color: rgba(255, 255, 255, 0.5);
}

.workspace-screen__ticket-btn {
  width: 100%;
  padding: var(--md-spacing-md) var(--md-spacing-lg);
  background-color: var(--md-warning);
  color: var(--md-on-warning);
  border: none;
  border-radius: var(--md-border-radius-md);
  font-weight: 500;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--md-spacing-sm);
}

.workspace-screen__ticket-btn:hover {
  background-color: var(--md-warning-dark, #f57c00);
  transform: translateY(-1px);
  box-shadow: var(--md-elevation-2);
}

.workspace-screen__ticket-btn:active {
  transform: translateY(0);
  box-shadow: var(--md-elevation-1);
}

/* Animación de pulso para workspaces que solicitan cuenta */
.workspace-screen__card--cuenta .workspace-screen__card-status--warning {
  animation: pulseWarning 2s ease-in-out infinite;
}

@keyframes pulseWarning {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.7;
  }
}

/* Responsive para tarjetas de cuenta */
@media (max-width: 768px) {
  .workspace-screen__card--cuenta {
    border-width: 1px;
  }
  
  .workspace-screen__ticket-btn {
    padding: var(--md-spacing-sm) var(--md-spacing-md);
    font-size: 0.85rem;
  }
}

```

`proyecto-pos-finanzas/frontend/src/components/WorkspaceScreen.tsx`:

```tsx
import React, { useState, useEffect } from 'react';
import { workspaceService } from '../services/apiService';
import TicketVenta from './TicketVenta';
import { useToast } from '../hooks/useToast';
import type { WorkspaceStatus, TicketVenta as TicketVentaData, VentaFinalizada } from '../types';
import './WorkspaceScreen.css';

interface WorkspaceScreenProps {
  onWorkspaceSelect: (workspaceId: string) => void;
  onBackToMainMenu?: () => void;
}

const WorkspaceScreen: React.FC<WorkspaceScreenProps> = ({ 
  onWorkspaceSelect, 
  onBackToMainMenu 
}) => {
  const toast = useToast();
  const [workspaces, setWorkspaces] = useState<WorkspaceStatus[]>([]);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [showCreateModal, setShowCreateModal] = useState(false);
  const [newWorkspaceName, setNewWorkspaceName] = useState('');
  const [isPermanent, setIsPermanent] = useState(false);
  const [isCreating, setIsCreating] = useState(false);
  
  // Estados para el flujo de ticket de venta
  const [ticketActual, setTicketActual] = useState<TicketVentaData | null>(null);
  const [showTicketModal, setShowTicketModal] = useState(false);

  const loadWorkspaces = async () => {
    try {
      setIsLoading(true);
      const data = await workspaceService.getAllWithStatus();
      setWorkspaces(data);
      setError(null);
    } catch (error) {
      setError('Error al cargar los workspaces');
      console.error('Error loading workspaces:', error);
    } finally {
      setIsLoading(false);
    }
  };

  useEffect(() => {
    loadWorkspaces();
  }, []);

  const handleCreateWorkspace = async (e: React.FormEvent) => {
    e.preventDefault();
    
    if (!newWorkspaceName.trim()) {
      return;
    }

    setIsCreating(true);
    
    try {
      await workspaceService.create({
        nombre: newWorkspaceName.trim(),
        permanente: isPermanent
      });
      
      // Recargar la lista de workspaces
      await loadWorkspaces();
      
      // Resetear el modal
      setShowCreateModal(false);
      setNewWorkspaceName('');
      setIsPermanent(false);
    } catch (error) {
      setError('Error al crear el workspace');
      console.error('Error creating workspace:', error);
    } finally {
      setIsCreating(false);
    }
  };

  const getStatusInfo = (estado: string) => {
    switch (estado) {
      case 'disponible':
        return {
          color: 'success',
          text: 'Disponible',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
          )
        };
      case 'ocupado':
        return {
          color: 'error',
          text: 'Ocupada',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
          )
        };
      case 'cuenta':
        return {
          color: 'warning',
          text: 'Cuenta',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z"/>
            </svg>
          )
        };
      default:
        return {
          color: 'success',
          text: 'Disponible',
          icon: (
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
          )
        };
    }
  };

  const handleBackToMainMenu = () => {
    if (onBackToMainMenu) {
      onBackToMainMenu();
    } else {
      window.history.back();
    }
  };

    const handleClearAccounts = async () => {
    toast.showConfirm(
      '¿Estás seguro de que deseas eliminar todos los workspaces temporales? Esta acción no se puede deshacer.',
      async () => {
        try {
          // Filtrar workspaces temporales (no permanentes)
          const temporaryWorkspaces = workspaces.filter(ws => !ws.permanente);
          
          // Eliminar cada workspace temporal
          for (const workspace of temporaryWorkspaces) {
            await workspaceService.delete(workspace.id);
          }
          
          // Recargar la lista
          toast.showSuccess(`Se eliminaron ${temporaryWorkspaces.length} workspaces temporales

👆 HAZ CLIC AQUÍ PARA CERRAR`);
          
          // ✅ ESPERAR 3 segundos antes de recargar para que el toast sea visible
          setTimeout(async () => {
            await loadWorkspaces();
          }, 3000);
        } catch (error) {
          console.error('Error al eliminar workspaces temporales:', error);
          toast.showError(`Error al eliminar los workspaces temporales

👆 HAZ CLIC AQUÍ PARA CERRAR`);
        }
      }
    );
  };

  // Función para generar ticket de venta
  const handleGenerarTicket = async (workspaceId: string) => {
    try {
      const ticket = await workspaceService.generarTicket(workspaceId);
      setTicketActual(ticket);
      setShowTicketModal(true);
    } catch (error) {
      toast.showError(`Error al generar el ticket. Por favor, intente nuevamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
      console.error('Error generating ticket:', error);
    }
  };

  // Función para manejar venta finalizada
  const handleVentaFinalizada = (venta: VentaFinalizada) => {
    setShowTicketModal(false);
    setTicketActual(null);
    
    toast.showSuccess(`🎉 VENTA PROCESADA EXITOSAMENTE

💳 ID: ${venta.ventaId}
💰 Total: $${venta.totalVenta.toFixed(2)}
🔄 Método: ${venta.metodoPagoNombre}

La transacción se ha completado correctamente.

👆 HAZ CLIC AQUÍ PARA CERRAR`);
    
    // ✅ ESPERAR 4 segundos antes de recargar para que el toast sea visible
    setTimeout(() => {
      loadWorkspaces();
    }, 4000);
  };

  // Función para cerrar modal de ticket
  const handleCerrarTicket = () => {
    setShowTicketModal(false);
    setTicketActual(null);
  };

  if (isLoading) {
    return (
      <div className="workspace-screen workspace-screen--loading">
        <div className="workspace-screen__loading">
          <div className="workspace-screen__loading-spinner">
            <svg className="workspace-screen__loading-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"/>
            </svg>
          </div>
          <h2 className="md-title-large">Cargando workspaces...</h2>
        </div>
      </div>
    );
  }

  return (
    <div className="workspace-screen">
      {/* Header */}
      <header className="workspace-screen__header">
        <div className="workspace-screen__header-content">
          <div className="workspace-screen__nav">
            <button
              onClick={handleBackToMainMenu}
              className="md-button md-button--outlined workspace-screen__back-btn"
              aria-label="Volver al menú principal"
            >
              <svg className="workspace-screen__back-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
              </svg>
              <span>Volver</span>
            </button>
            <div className="workspace-screen__title-section">
              <h1 className="md-headline-medium">Seleccionar Workspace</h1>
              <p className="md-body-medium">Elige un workspace para comenzar a trabajar</p>
            </div>
          </div>
          
          <div className="workspace-screen__actions">
            <button
              onClick={() => setShowCreateModal(true)}
              className="md-button md-button--filled workspace-screen__create-btn"
            >
              <svg className="workspace-screen__create-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
              </svg>
              <span>Nuevo Workspace</span>
            </button>
            <button
              onClick={handleClearAccounts}
              className="md-button md-button--text workspace-screen__clear-btn"
              aria-label="Limpiar cuentas temporales"
            >
              <svg className="workspace-screen__clear-icon" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
              </svg>
              <span className="workspace-screen__clear-text">Limpiar Cuentas</span>
            </button>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="workspace-screen__content">
        {error && (
          <div className="workspace-screen__error" role="alert">
            <svg className="workspace-screen__error-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"/>
            </svg>
            <span className="md-body-medium">{error}</span>
            <button
              onClick={loadWorkspaces}
              className="md-button md-button--text workspace-screen__retry-btn"
            >
              Reintentar
            </button>
          </div>
        )}

        {workspaces.length === 0 && !error && (
          <div className="workspace-screen__empty">
            <div className="workspace-screen__empty-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
              </svg>
            </div>
            <h2 className="md-headline-small">No hay workspaces disponibles</h2>
            <p className="md-body-large">Crea tu primer workspace para comenzar</p>
            <button
              onClick={() => setShowCreateModal(true)}
              className="md-button md-button--filled"
            >
              Crear Workspace
            </button>
          </div>
        )}

        {workspaces.length > 0 && (
          <div className="workspace-screen__grid">
            {workspaces.map((workspace) => {
              const statusInfo = getStatusInfo(workspace.estado);
              const esCuenta = workspace.estado === 'cuenta';
              
              if (esCuenta) {
                // Para workspaces con estado "cuenta", mostrar botón para generar ticket
                return (
                  <div
                    key={workspace.id}
                    className={`workspace-screen__card workspace-screen__card--${statusInfo.color} workspace-screen__card--cuenta`}
                  >
                    <div className="workspace-screen__card-header">
                      <div className={`workspace-screen__card-status workspace-screen__card-status--${statusInfo.color}`}>
                        {statusInfo.icon}
                        <span className="md-label-medium">{statusInfo.text}</span>
                      </div>
                    </div>
                    
                    <div className="workspace-screen__card-content">
                      <h3 className="md-title-large workspace-screen__card-title">
                        {workspace.nombre}
                      </h3>
                      <div className="workspace-screen__card-meta">
                        <span className="md-body-small">
                          {workspace.permanente ? 'Permanente' : 'Temporal'}
                        </span>
                        <span className="md-body-small">
                          {workspace.cantidadOrdenes} productos en cuenta
                        </span>
                      </div>
                    </div>
                    
                    <div className="workspace-screen__card-actions">
                      <button
                        onClick={() => handleGenerarTicket(workspace.id)}
                        className="md-button md-button--filled workspace-screen__ticket-btn"
                      >
                        📋 Generar Ticket
                      </button>
                    </div>
                  </div>
                );
              }
              
              // Para workspaces normales, comportamiento original
              return (
                <button
                  key={workspace.id}
                  onClick={() => onWorkspaceSelect(workspace.id)}
                  className={`workspace-screen__card workspace-screen__card--${statusInfo.color}`}
                  aria-label={`Workspace ${workspace.nombre} - ${statusInfo.text}`}
                >
                  <div className="workspace-screen__card-header">
                    <div className={`workspace-screen__card-status workspace-screen__card-status--${statusInfo.color}`}>
                      {statusInfo.icon}
                      <span className="md-label-medium">{statusInfo.text}</span>
                    </div>
                  </div>
                  
                  <div className="workspace-screen__card-content">
                    <h3 className="md-title-large workspace-screen__card-title">
                      {workspace.nombre}
                    </h3>
                    <div className="workspace-screen__card-meta">
                      <span className="md-body-small">
                        {workspace.permanente ? 'Permanente' : 'Temporal'}
                      </span>
                      {workspace.ultimaActividad && (
                        <span className="md-body-small">
                          Última actividad: {new Date(workspace.ultimaActividad).toLocaleDateString()}
                        </span>
                      )}
                    </div>
                  </div>
                  
                  {/* Flecha siempre visible - los usuarios pueden acceder a cualquier workspace */}
                  <div className="workspace-screen__card-arrow">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                      <path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"/>
                    </svg>
                  </div>
                </button>
              );
            })}
          </div>
        )}
      </main>

      {/* Create Modal */}
      {showCreateModal && (
        <div className="workspace-screen__modal-overlay" onClick={() => setShowCreateModal(false)}>
          <div className="workspace-screen__modal" onClick={(e) => e.stopPropagation()}>
            <div className="workspace-screen__modal-header">
              <h2 className="md-title-large">Crear Nuevo Workspace</h2>
              <button
                onClick={() => setShowCreateModal(false)}
                className="workspace-screen__modal-close"
                aria-label="Cerrar modal"
              >
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                </svg>
              </button>
            </div>
            
            <form onSubmit={handleCreateWorkspace} className="workspace-screen__modal-form">
              <div className="workspace-screen__modal-field">
                <label htmlFor="workspaceName" className="md-body-medium">
                  Nombre del Workspace *
                </label>
                <input
                  type="text"
                  id="workspaceName"
                  value={newWorkspaceName}
                  onChange={(e) => setNewWorkspaceName(e.target.value)}
                  className="workspace-screen__modal-input md-body-large"
                  placeholder="Ej: Mesa 1, Punto de Venta Principal"
                  required
                  disabled={isCreating}
                />
              </div>
              
              <div className="workspace-screen__modal-checkbox">
                <label className="workspace-screen__checkbox-label">
                  <input
                    type="checkbox"
                    checked={isPermanent}
                    onChange={(e) => setIsPermanent(e.target.checked)}
                    className="workspace-screen__checkbox"
                    disabled={isCreating}
                  />
                  <span className="workspace-screen__checkbox-indicator"></span>
                  <div className="workspace-screen__checkbox-text">
                    <span className="md-body-medium">Workspace Permanente</span>
                    <span className="md-body-small">Este workspace no se eliminará automáticamente</span>
                  </div>
                </label>
              </div>
              
              <div className="workspace-screen__modal-actions">
                <button
                  type="button"
                  onClick={() => setShowCreateModal(false)}
                  className="md-button md-button--outlined"
                  disabled={isCreating}
                >
                  Cancelar
                </button>
                <button
                  type="submit"
                  className="md-button md-button--filled"
                  disabled={isCreating || !newWorkspaceName.trim()}
                >
                  {isCreating && (
                    <svg className="workspace-screen__loading-icon" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"/>
                    </svg>
                  )}
                  <span>{isCreating ? 'Creando...' : 'Crear Workspace'}</span>
                </button>
              </div>
            </form>
          </div>
        </div>
      )}

      {/* Modal de Ticket de Venta */}
      {showTicketModal && ticketActual && (
        <TicketVenta
          ticket={ticketActual}
          onVentaFinalizada={handleVentaFinalizada}
          onCerrar={handleCerrarTicket}
        />
      )}
    </div>
  );
};

export default WorkspaceScreen;

```

`proyecto-pos-finanzas/frontend/src/contexts/AuthContext.tsx`:

```tsx
import React, { createContext, useContext, useState, useEffect } from 'react';
import type { ReactNode } from 'react';

// Interfaces para el contexto de autenticación
interface UsuarioAutenticado {
  usuario: string;
  rolNombre: string;
  rolId: string;
  token: string;
  expiresIn: number;
}

interface LoginResponse {
  token: string;
  usuario: string;
  rolNombre: string;
  rolId: string;
  expiresIn: number;
}

interface AuthContextType {
  // Estado del usuario
  isAuthenticated: boolean;
  usuario: UsuarioAutenticado | null;
  
  // Funciones de autenticación
  login: (loginData: LoginResponse) => void;
  logout: () => void;
  
  // Utilidades
  isAdmin: () => boolean;
  isEmployee: () => boolean;
  getUserRole: () => string | null;
  getUserName: () => string | null;
}

// Crear el contexto
const AuthContext = createContext<AuthContextType | undefined>(undefined);

// Proveedor del contexto
interface AuthProviderProps {
  children: ReactNode;
}

export const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {
  const [usuario, setUsuario] = useState<UsuarioAutenticado | null>(null);
  const [isAuthenticated, setIsAuthenticated] = useState<boolean>(false);

  // Clave para localStorage
  const AUTH_STORAGE_KEY = 'pos_auth_data';

  /**
   * 🔑 Función para realizar login
   */
  const login = (loginData: LoginResponse) => {
    const userData: UsuarioAutenticado = {
      usuario: loginData.usuario,
      rolNombre: loginData.rolNombre,
      rolId: loginData.rolId,
      token: loginData.token,
      expiresIn: loginData.expiresIn
    };

    // Guardar en estado local
    setUsuario(userData);
    setIsAuthenticated(true);

    // Persistir en localStorage
    localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(userData));
    
    console.log('✅ Usuario autenticado:', userData.usuario, 'Rol:', userData.rolNombre);
  };

  /**
   * 🚪 Función para realizar logout
   */
  const logout = () => {
    setUsuario(null);
    setIsAuthenticated(false);
    
    // Limpiar localStorage
    localStorage.removeItem(AUTH_STORAGE_KEY);
    localStorage.removeItem('authToken'); // Limpiar token legacy si existe
    
    console.log('🚪 Usuario desconectado');
  };

  /**
   * 👑 Verificar si el usuario es administrador
   */
  const isAdmin = (): boolean => {
    return usuario?.rolNombre === 'Administrador';
  };

  /**
   * 👤 Verificar si el usuario es empleado
   */
  const isEmployee = (): boolean => {
    return usuario?.rolNombre === 'Empleado';
  };

  /**
   * 🏷️ Obtener rol del usuario
   */
  const getUserRole = (): string | null => {
    return usuario?.rolNombre || null;
  };

  /**
   * 📛 Obtener nombre del usuario
   */
  const getUserName = (): string | null => {
    return usuario?.usuario || null;
  };

  /**
   * 🔄 Verificar sesión persistente al iniciar la aplicación
   */
  useEffect(() => {
    const checkPersistedAuth = () => {
      try {
        const storedAuth = localStorage.getItem(AUTH_STORAGE_KEY);
        
        if (storedAuth) {
          const userData: UsuarioAutenticado = JSON.parse(storedAuth);
          
          // Verificar si el token no ha expirado (básico)
          // En producción, sería mejor verificar la expiración real del JWT
          if (userData.token && userData.usuario) {
            setUsuario(userData);
            setIsAuthenticated(true);
            console.log('🔄 Sesión restaurada para:', userData.usuario, 'Rol:', userData.rolNombre);
          } else {
            // Token inválido, limpiar
            localStorage.removeItem(AUTH_STORAGE_KEY);
          }
        }
      } catch (error) {
        console.error('❌ Error al restaurar sesión:', error);
        localStorage.removeItem(AUTH_STORAGE_KEY);
      }
    };

    checkPersistedAuth();
  }, []);

  // Valor del contexto
  const contextValue: AuthContextType = {
    isAuthenticated,
    usuario,
    login,
    logout,
    isAdmin,
    isEmployee,
    getUserRole,
    getUserName
  };

  return (
    <AuthContext.Provider value={contextValue}>
      {children}
    </AuthContext.Provider>
  );
};

// Hook personalizado para usar el contexto de autenticación
export const useAuth = (): AuthContextType => {
  const context = useContext(AuthContext);
  
  if (context === undefined) {
    throw new Error('useAuth debe ser usado dentro de un AuthProvider');
  }
  
  return context;
};

// Exportar tipos para uso en otros componentes
export type { UsuarioAutenticado, LoginResponse };

```

`proyecto-pos-finanzas/frontend/src/hooks/useAuth.ts`:

```ts
import { useAuth as useAuthContext } from '../contexts/AuthContext';

/**
 * Hook personalizado para acceder fácilmente al contexto de autenticación
 * 
 * @returns Objeto con estado de autenticación y funciones relacionadas
 * 
 * @example
 * ```tsx
 * const { isAuthenticated, login, logout, isAdmin, getUserName } = useAuth();
 * 
 * if (isAdmin()) {
 *   // Mostrar opciones de administrador
 * }
 * ```
 */
export const useAuth = () => {
  const auth = useAuthContext();
  
  return {
    // Estado
    isAuthenticated: auth.isAuthenticated,
    usuario: auth.usuario,
    
    // Funciones de autenticación
    login: auth.login,
    logout: auth.logout,
    
    // Utilidades de rol
    isAdmin: auth.isAdmin,
    isEmployee: auth.isEmployee,
    getUserRole: auth.getUserRole,
    getUserName: auth.getUserName,
    
    // Funciones de conveniencia adicionales
    hasRole: (role: string) => auth.getUserRole() === role,
    canAccess: (requiredRole: 'Administrador' | 'Empleado') => {
      const userRole = auth.getUserRole();
      if (requiredRole === 'Empleado') {
        return userRole === 'Empleado' || userRole === 'Administrador';
      }
      return userRole === requiredRole;
    }
  };
};

```

`proyecto-pos-finanzas/frontend/src/hooks/useToast.ts`:

```ts
import { toast } from 'react-toastify';
import type { ToastOptions } from 'react-toastify';

const defaultOptions: ToastOptions = {
  position: "top-center", // ✅ Cambiar a centro superior para máxima visibilidad
  autoClose: false, // ✅ NO cierre automático - requiere clic manual
  hideProgressBar: true, // Ocultar barra de progreso ya que no hay autoclose
  closeOnClick: true, // ✅ Cerrar al hacer clic
  pauseOnHover: false, // No necesario sin autoclose
  draggable: true,
  progress: undefined,
  style: {
    fontSize: '18px', // ✅ Tamaño más grande para mayor visibilidad
    fontWeight: '700',
    padding: '24px', // ✅ Más padding
    borderRadius: '16px', // ✅ Bordes más redondeados
    boxShadow: '0 12px 48px rgba(0, 0, 0, 0.5)', // ✅ Sombra más prominente
    zIndex: 99999, // ✅ z-index extremadamente alto
    cursor: 'pointer', // Indicar que es clickeable
    userSelect: 'none', // Evitar selección de texto
    minWidth: '400px', // ✅ Ancho mínimo para mejor lectura
    textAlign: 'center', // ✅ Centrar texto
  },
};

export const useToast = () => {
  const showSuccess = (message: string, options?: ToastOptions) => {
    toast.success(message, { 
      ...defaultOptions, 
      style: {
        ...defaultOptions.style,
        backgroundColor: '#4caf50',
        color: 'white',
        fontSize: '17px',
        fontWeight: '700',
        border: '3px solid #2e7d32',
      },
      ...options 
    });
  };

  const showError = (message: string, options?: ToastOptions) => {
    toast.error(message, { 
      ...defaultOptions, 
      style: {
        ...defaultOptions.style,
        backgroundColor: '#f44336',
        color: 'white',
        fontSize: '17px',
        fontWeight: '700',
        border: '3px solid #c62828',
      },
      ...options 
    });
  };

  const showInfo = (message: string, options?: ToastOptions) => {
    toast.info(message, { 
      ...defaultOptions, 
      style: {
        ...defaultOptions.style,
        backgroundColor: '#2196f3',
        color: 'white',
        fontSize: '17px',
        fontWeight: '700',
        border: '3px solid #1565c0',
      },
      ...options 
    });
  };

  const showWarning = (message: string, options?: ToastOptions) => {
    toast.warning(message, { 
      ...defaultOptions, 
      style: {
        ...defaultOptions.style,
        backgroundColor: '#ff9800',
        color: 'white',
        fontSize: '17px',
        fontWeight: '700',
        border: '3px solid #e65100',
      },
      ...options 
    });
  };

  const showConfirm = (message: string, onConfirm: () => void, onCancel?: () => void) => {
    // Usando window.confirm como fallback ya que custom toast confirm es complejo
    const result = window.confirm(message);
    if (result) {
      onConfirm();
    } else if (onCancel) {
      onCancel();
    }
    return result;
  };

  return {
    showSuccess,
    showError,
    showInfo,
    showWarning,
    showConfirm
  };
};

```

`proyecto-pos-finanzas/frontend/src/index.css`:

```css
:root {
  /* Material Design 3 Colors */
  --md-primary: #6750A4;
  --md-primary-container: #EADDFF;
  --md-secondary: #625B71;
  --md-secondary-container: #E8DEF8;
  --md-tertiary: #7D5260;
  --md-tertiary-container: #FFD8E4;
  --md-surface: #FFFBFE;
  --md-surface-variant: #F7F2FA;
  --md-surface-container: #F3EDF7;
  --md-surface-container-low: #F7F2FA;
  --md-surface-container-high: #ECE6F0;
  --md-surface-container-highest: #E6E0E9;
  --md-on-surface: #1C1B1F;
  --md-on-surface-variant: #49454F;
  --md-outline: #79747E;
  --md-outline-variant: #CAC4D0;
  --md-error: #BA1A1A;
  --md-error-container: #FFDAD6;
  --md-success: #146C2E;
  --md-success-container: #A6F2BB;
  
  /* Typography scale */
  --md-display-large: 3.5rem;
  --md-display-medium: 2.8rem;
  --md-display-small: 2.25rem;
  --md-headline-large: 2rem;
  --md-headline-medium: 1.75rem;
  --md-headline-small: 1.5rem;
  --md-title-large: 1.375rem;
  --md-title-medium: 1rem;
  --md-title-small: 0.875rem;
  --md-body-large: 1rem;
  --md-body-medium: 0.875rem;
  --md-body-small: 0.75rem;
  --md-label-large: 0.875rem;
  --md-label-medium: 0.75rem;
  --md-label-small: 0.6875rem;

  /* Spacing */
  --md-spacing-xs: 0.25rem;
  --md-spacing-sm: 0.5rem;
  --md-spacing-md: 1rem;
  --md-spacing-lg: 1.5rem;
  --md-spacing-xl: 2rem;
  --md-spacing-xxl: 3rem;

  /* Elevation */
  --md-elevation-1: 0px 1px 3px 1px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);
  --md-elevation-2: 0px 2px 6px 2px rgba(0, 0, 0, 0.15), 0px 1px 2px 0px rgba(0, 0, 0, 0.30);
  --md-elevation-3: 0px 4px 8px 3px rgba(0, 0, 0, 0.15), 0px 1px 3px 0px rgba(0, 0, 0, 0.30);
  --md-elevation-4: 0px 6px 10px 4px rgba(0, 0, 0, 0.15), 0px 2px 3px 0px rgba(0, 0, 0, 0.30);
  --md-elevation-5: 0px 8px 12px 6px rgba(0, 0, 0, 0.15), 0px 4px 4px 0px rgba(0, 0, 0, 0.30);

  /* Border radius */
  --md-border-radius-xs: 0.25rem;
  --md-border-radius-sm: 0.5rem;
  --md-border-radius-md: 0.75rem;
  --md-border-radius-lg: 1rem;
  --md-border-radius-xl: 1.5rem;
  --md-border-radius-full: 50%;

  font-family: 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.5;
  font-weight: 400;
  color: var(--md-on-surface);
  background-color: var(--md-surface);

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  min-width: 320px;
  min-height: 100vh;
  font-family: 'Roboto', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background-color: var(--md-surface);
  color: var(--md-on-surface);
}

#root {
  min-height: 100vh;
  width: 100%;
}

/* Material Design Button Base */
.md-button {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 64px;
  min-height: 40px;
  padding: var(--md-spacing-sm) var(--md-spacing-lg);
  border: none;
  border-radius: var(--md-border-radius-lg);
  font-family: inherit;
  font-size: var(--md-label-large);
  font-weight: 500;
  line-height: 1.25;
  text-transform: none;
  letter-spacing: 0.1px;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);
  overflow: hidden;
  text-decoration: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.md-button:disabled {
  pointer-events: none;
  opacity: 0.38;
}

/* Material Design Ripple Effect */
.md-button::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: currentColor;
  opacity: 0;
  transition: opacity 0.2s cubic-bezier(0.2, 0, 0, 1);
  border-radius: inherit;
}

.md-button:hover::before {
  opacity: 0.08;
}

.md-button:focus::before {
  opacity: 0.12;
}

.md-button:active::before {
  opacity: 0.16;
}

/* Button Variants */
.md-button--filled {
  background-color: var(--md-primary);
  color: white;
  box-shadow: var(--md-elevation-1);
}

.md-button--filled:hover {
  box-shadow: var(--md-elevation-2);
}

.md-button--outlined {
  background-color: transparent;
  color: var(--md-primary);
  border: 1px solid var(--md-outline);
}

.md-button--text {
  background-color: transparent;
  color: var(--md-primary);
  padding: var(--md-spacing-sm) var(--md-spacing-md);
}

.md-button--tonal {
  background-color: var(--md-secondary-container);
  color: var(--md-on-surface);
}

/* Card Component */
.md-card {
  background-color: var(--md-surface-container);
  border-radius: var(--md-border-radius-md);
  box-shadow: var(--md-elevation-1);
  overflow: hidden;
  transition: box-shadow 0.2s cubic-bezier(0.2, 0, 0, 1);
}

.md-card:hover {
  box-shadow: var(--md-elevation-2);
}

.md-card--clickable {
  cursor: pointer;
}

.md-card--clickable:hover {
  box-shadow: var(--md-elevation-3);
}

/* Typography */
.md-display-large { font-size: var(--md-display-large); font-weight: 400; line-height: 1.12; }
.md-display-medium { font-size: var(--md-display-medium); font-weight: 400; line-height: 1.16; }
.md-display-small { font-size: var(--md-display-small); font-weight: 400; line-height: 1.22; }
.md-headline-large { font-size: var(--md-headline-large); font-weight: 400; line-height: 1.25; }
.md-headline-medium { font-size: var(--md-headline-medium); font-weight: 400; line-height: 1.29; }
.md-headline-small { font-size: var(--md-headline-small); font-weight: 400; line-height: 1.33; }
.md-title-large { font-size: var(--md-title-large); font-weight: 500; line-height: 1.27; }
.md-title-medium { font-size: var(--md-title-medium); font-weight: 500; line-height: 1.5; }
.md-title-small { font-size: var(--md-title-small); font-weight: 500; line-height: 1.43; }
.md-body-large { font-size: var(--md-body-large); font-weight: 400; line-height: 1.5; }
.md-body-medium { font-size: var(--md-body-medium); font-weight: 400; line-height: 1.43; }
.md-body-small { font-size: var(--md-body-small); font-weight: 400; line-height: 1.33; }
.md-label-large { font-size: var(--md-label-large); font-weight: 500; line-height: 1.43; }
.md-label-medium { font-size: var(--md-label-medium); font-weight: 500; line-height: 1.33; }
.md-label-small { font-size: var(--md-label-small); font-weight: 500; line-height: 1.45; }

/* Responsive Touch Targets */
@media (max-width: 768px) {
  .md-button {
    min-height: 48px;
    padding: var(--md-spacing-md) var(--md-spacing-xl);
  }
  
  .touch-target {
    min-height: 48px;
    min-width: 48px;
  }
}

/* Focus styles */
.md-focus-ring {
  outline: 2px solid var(--md-primary);
  outline-offset: 2px;
}

/* Utility classes */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Mejoras adicionales para dispositivos táctiles */
@media (max-width: 768px) {
  /* Asegurar que todos los elementos interactivos tengan un tamaño mínimo táctil */
  button, 
  input[type="submit"], 
  input[type="button"], 
  input[type="reset"],
  a,
  [role="button"],
  .clickable {
    min-height: 48px;
    min-width: 48px;
    position: relative;
  }
  
  /* Mejorar el padding de elementos pequeños para facilitar el toque */
  button:not(.md-button) {
    padding: var(--md-spacing-md) var(--md-spacing-lg);
  }
  
  /* Espaciado adicional entre elementos interactivos */
  .action-buttons {
    gap: var(--md-spacing-md) !important;
  }
  
  /* Hacer que los select y input sean más fáciles de usar en móviles */
  select, input[type="text"], input[type="number"], input[type="email"], input[type="password"] {
    min-height: 56px;
    font-size: 16px; /* Previene zoom en iOS */
    padding: var(--md-spacing-md);
  }
  
  /* Mejorar el tamaño de fuente base en móviles */
  body {
    font-size: 16px;
    line-height: 1.6;
  }
  
  /* Mejorar spacing entre elementos en móviles */
  .inventory-container,
  .main-menu__content,
  .workspace-screen__content {
    padding: var(--md-spacing-lg) var(--md-spacing-md) !important;
  }
}

/* Mejoras para tablets */
@media (min-width: 768px) and (max-width: 1024px) {
  .main-menu__grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--md-spacing-lg);
  }
  
  .main-menu__card {
    min-height: 140px;
  }
  
  /* Hacer que las tablas sean más cómodas en tablets */
  .inventory-table th,
  .inventory-table td {
    padding: var(--md-spacing-lg);
    font-size: var(--md-body-large);
  }
}

/* Mejoras para pantallas muy pequeñas */
@media (max-width: 380px) {
  .main-menu__card {
    min-height: 120px;
    padding: var(--md-spacing-md);
  }
  
  .main-menu__card-icon {
    width: 48px;
    height: 48px;
  }
  
  .main-menu__card-icon svg {
    width: 24px;
    height: 24px;
  }
  
  .inventory-container {
    margin: var(--md-spacing-xs) !important;
    padding: var(--md-spacing-md) !important;
  }
}

/* Mejoras para interacciones táctiles avanzadas */
@media (hover: none) and (pointer: coarse) {
  /* Solo aplicar en dispositivos táctiles sin hover */
  .main-menu__card:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
  }
  
  .md-button:active {
    transform: scale(0.96);
    transition: transform 0.1s ease;
  }
  
  .action-btn:active {
    transform: scale(0.94);
    transition: transform 0.1s ease;
  }
}

/* Soporte para orientación landscape en móviles */
@media (max-width: 768px) and (orientation: landscape) {
  .main-menu__content {
    padding: var(--md-spacing-md) var(--md-spacing-lg);
  }
  
  .main-menu__grid {
    grid-template-columns: repeat(2, 1fr);
    gap: var(--md-spacing-md);
  }
  
  .main-menu__card {
    min-height: 100px;
    flex-direction: row;
    text-align: left;
  }
  
  .main-menu__card-arrow {
    display: flex;
  }
}

/* Mejoras de accesibilidad */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Modo de alto contraste mejorado */
@media (prefers-contrast: high) {
  .main-menu__card,
  .md-button,
  .inventory-table {
    border: 2px solid currentColor;
  }
  
  .main-menu__card:focus,
  .md-button:focus,
  button:focus,
  input:focus,
  select:focus {
    outline: 3px solid var(--md-primary);
    outline-offset: 2px;
  }
}

```

`proyecto-pos-finanzas/frontend/src/main.tsx`:

```tsx
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import './index.css'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)

```

`proyecto-pos-finanzas/frontend/src/services/apiService.ts`:

```ts
import axios from 'axios';
import type { 
  LoginCredentials, 
  LoginResponse, 
  WorkspaceStatus, 
  Workspace, 
  CreateWorkspaceRequest,
  TicketVenta,
  FinalizarVentaRequest,
  VentaFinalizada,
  MetodoPago
} from '../types/index';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

// Configuración base de axios
const api = axios.create({
  baseURL: `${backendUrl}/api`,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Interceptor para añadir el token JWT a todas las peticiones
api.interceptors.request.use(config => {
  // Buscar token en el nuevo sistema de autenticación primero
  const authData = localStorage.getItem('pos_auth_data');
  if (authData) {
    try {
      const userData = JSON.parse(authData);
      if (userData.token) {
        config.headers.Authorization = `Bearer ${userData.token}`;
        return config;
      }
    } catch (error) {
      console.warn('Error parsing auth data:', error);
    }
  }
  
  // Fallback al sistema legacy
  const legacyToken = localStorage.getItem('authToken');
  if (legacyToken) {
    config.headers.Authorization = `Bearer ${legacyToken}`;
  }
  
  return config;
}, error => {
  return Promise.reject(error);
});

// Interceptor para manejar respuestas de error (token expirado, etc.)
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Token expirado o inválido - limpiar todos los datos de autenticación
      localStorage.removeItem('authToken'); // Legacy
      localStorage.removeItem('pos_auth_data'); // Nuevo sistema
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// Servicios de autenticación
export const authService = {
  async login(credentials: LoginCredentials): Promise<LoginResponse> {
    const response = await api.post('/auth/login', credentials);
    
    // La respuesta ahora incluye: token, usuario, rolNombre, rolId, expiresIn
    const loginData: LoginResponse = response.data;
    
    // Guardar el token en localStorage (compatibilidad legacy)
    if (loginData.token) {
      localStorage.setItem('authToken', loginData.token);
    }
    
    // Los datos del usuario se manejarán en el AuthContext
    return loginData;
  },
};

// Servicios de workspaces
export const workspaceService = {
  async getAllWithStatus(): Promise<WorkspaceStatus[]> {
    const response = await api.get('/workspaces/status');
    return response.data;
  },

  async getAll(): Promise<Workspace[]> {
    const response = await api.get('/workspaces');
    return response.data;
  },

  async create(workspace: CreateWorkspaceRequest): Promise<Workspace> {
    const response = await api.post('/workspaces', {
      nombre: workspace.nombre,
      permanente: workspace.permanente || false
    });
    return response.data;
  },

  async delete(id: string): Promise<void> {
    await api.delete(`/workspaces/${id}`);
  },

  async update(id: string, workspace: Partial<Workspace>): Promise<Workspace> {
    const response = await api.put(`/workspaces/${id}`, workspace);
    return response.data;
  },

  async getById(id: string): Promise<Workspace> {
    const response = await api.get(`/workspaces/${id}`);
    return response.data;
  },

  // ===== SERVICIOS PARA FLUJO DE CUENTA =====
  
  async cambiarSolicitudCuenta(id: string, solicitudCuenta: boolean): Promise<WorkspaceStatus> {
    const response = await api.patch(`/workspaces/${id}/solicitar-cuenta`, {
      solicitudCuenta: solicitudCuenta
    });
    return response.data;
  },

  async generarTicket(id: string): Promise<TicketVenta> {
    const response = await api.get(`/workspaces/${id}/ticket`);
    return response.data;
  },

  async finalizarVenta(id: string, request: FinalizarVentaRequest): Promise<VentaFinalizada> {
    const response = await api.post(`/workspaces/${id}/finalizar-venta`, request);
    return response.data;
  },
};

// Servicios para métodos de pago
export const metodoPagoService = {
  async getAll(): Promise<MetodoPago[]> {
    const response = await api.get('/metodos_pago');
    return response.data;
  },
};

```

`proyecto-pos-finanzas/frontend/src/services/comprasService.ts`:

```ts
import axios from 'axios';
import type { 
  Proveedor, 
  CompraRequest, 
  PagoRequest, 
  DeudaProveedor,
  ProductoCompra,
  OrdenCompra
} from '../types/index';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

// Configuración base de axios
const api = axios.create({
  baseURL: `${backendUrl}/api`,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Interceptor para añadir el token JWT a todas las peticiones
api.interceptors.request.use(config => {
  // Buscar token en el nuevo sistema de autenticación primero
  const authData = localStorage.getItem('pos_auth_data');
  if (authData) {
    try {
      const userData = JSON.parse(authData);
      if (userData.token) {
        config.headers.Authorization = `Bearer ${userData.token}`;
        return config;
      }
    } catch (error) {
      console.warn('Error parsing auth data:', error);
    }
  }
  
  // Fallback al sistema legacy
  const legacyToken = localStorage.getItem('authToken');
  if (legacyToken) {
    config.headers.Authorization = `Bearer ${legacyToken}`;
  }
  
  return config;
}, error => {
  return Promise.reject(error);
});

// Interceptor para manejar respuestas de error (token expirado, etc.)
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Token expirado o inválido - limpiar todos los datos de autenticación
      localStorage.removeItem('authToken'); // Legacy
      localStorage.removeItem('pos_auth_data'); // Nuevo sistema
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// Servicios para compras y proveedores
export const comprasService = {
  // ========== GESTIÓN DE PROVEEDORES ==========
  
  async obtenerProveedores(): Promise<Proveedor[]> {
    try {
      const response = await api.get('/proveedores');
      console.log('✅ Respuesta del backend:', response.data);
      return response.data;
    } catch (error) {
      console.error('❌ Error obtenerProveedores:', error);
      if (axios.isAxiosError(error)) {
        console.error('Status:', error.response?.status);
        console.error('Data:', error.response?.data);
        console.error('URL:', error.config?.url);
      }
      throw error;
    }
  },

  async obtenerProveedorPorId(id: string): Promise<Proveedor> {
    const response = await api.get(`/proveedores/${id}`);
    return response.data;
  },

  async obtenerDeudasProveedores(): Promise<DeudaProveedor[]> {
    try {
      // Usar el endpoint específico de deudas-proveedores
      const response = await api.get('/deudas-proveedores');
      return response.data;
    } catch (error) {
      console.error('❌ Error obtenerDeudasProveedores:', error);
      // Fallback: usar obtenerProveedores y mapear al formato de DeudaProveedor
      const proveedores = await this.obtenerProveedores();
      return proveedores.map(p => ({
        proveedorId: p.id,
        proveedorNombre: p.nombre,
        telefonoProveedor: p.telefono,
        emailProveedor: p.email,
        totalCompras: p.deudaTotal || 0,
        totalPagos: 0,
        deudaPendiente: p.deudaTotal || 0,
        estadoDeuda: (p.deudaTotal || 0) > 1000 ? 'amarillo' : 'verde' as 'verde' | 'amarillo',
        fechaOrdenMasAntigua: new Date().toISOString(),
        cantidadOrdenesPendientes: 0
      }));
    }
  },

  async obtenerDeudaProveedor(proveedorId: string): Promise<DeudaProveedor> {
    const response = await api.get(`/proveedores/${proveedorId}/deuda`);
    return response.data;
  },

  // ========== GESTIÓN DE COMPRAS ==========

  async crearCompra(compraRequest: CompraRequest): Promise<OrdenCompra> {
    const response = await api.post('/ordenes-compras', compraRequest);
    return response.data;
  },

  async obtenerComprasPorProveedor(proveedorId: string): Promise<OrdenCompra[]> {
    // Endpoint no implementado en el backend, retornar array vacío por ahora
    console.log(`Obteniendo compras para proveedor: ${proveedorId}`);
    return [];
  },

  async obtenerTodasLasCompras(): Promise<OrdenCompra[]> {
    // Endpoint no implementado en el backend, retornar array vacío por ahora
    return [];
  },

  // ========== GESTIÓN DE PAGOS ==========

  async registrarPago(pagoRequest: PagoRequest): Promise<{ mensaje: string; nuevaDeuda: number }> {
    const response = await api.post(`/proveedores/${pagoRequest.proveedorId}/pago`, pagoRequest);
    return {
      mensaje: 'Pago registrado exitosamente',
      nuevaDeuda: response.data.montoPendiente || 0
    };
  },

  // ========== UTILIDADES ==========

  async obtenerUltimoPrecioCompra(productoId: string): Promise<{ costo: number } | null> {
    try {
      const response = await api.get(`/historial-costos/producto/${productoId}/ultimo-costo`);
      return {
        costo: parseFloat(response.data.costo) || 0
      };
    } catch (error) {
      console.log(`No se encontró historial de costos para producto ${productoId}`);
      return null;
    }
  },

  async obtenerProductosParaCompra(): Promise<ProductoCompra[]> {
    const response = await api.get('/productos');
    return response.data;
  },

  async obtenerProductosPorProveedor(proveedorId: string): Promise<ProductoCompra[]> {
    const response = await api.get(`/productos/proveedor/${proveedorId}`);
    return response.data;
  },

  // Función helper para calcular el total de una compra
  calcularTotalCompra(productos: { cantidadKg: number; cantidadPz: number; costoUnitarioKg: number; costoUnitarioPz: number }[]): number {
    return productos.reduce((total, producto) => {
      const subtotalKg = producto.cantidadKg * producto.costoUnitarioKg;
      const subtotalPz = producto.cantidadPz * producto.costoUnitarioPz;
      return total + subtotalKg + subtotalPz;
    }, 0);
  },

  // Función helper para validar datos de compra
  validarCompra(compra: CompraRequest): { valida: boolean; errores: string[] } {
    const errores: string[] = [];

    if (!compra.proveedorId) {
      errores.push('Debe seleccionar un proveedor');
    }

    if (!compra.productos || compra.productos.length === 0) {
      errores.push('Debe agregar al menos un producto al carrito');
    }

    // Validar cada producto en la lista
    compra.productos?.forEach((producto, index) => {
      if (!producto.productoId) {
        errores.push(`Producto ${index + 1}: ID de producto requerido`);
      }

      if (producto.cantidadKg < 0 || producto.cantidadPz < 0) {
        errores.push(`Producto ${index + 1}: Las cantidades no pueden ser negativas`);
      }

      if (producto.cantidadKg === 0 && producto.cantidadPz === 0) {
        errores.push(`Producto ${index + 1}: Debe especificar al menos una cantidad (Kg o Pz)`);
      }
    });

    return {
      valida: errores.length === 0,
      errores
    };
  },

  // Función helper para validar datos de pago
  validarPago(pago: PagoRequest): { valida: boolean; errores: string[] } {
    const errores: string[] = [];

    if (!pago.proveedorId) {
      errores.push('Debe seleccionar un proveedor');
    }

    if (!pago.ordenCompraId) {
      errores.push('ID de orden de compra requerido');
    }

    if (!pago.metodoPagoId) {
      errores.push('Debe seleccionar un método de pago');
    }

    if (pago.montoPagado <= 0) {
      errores.push('El monto del pago debe ser mayor a cero');
    }

    return {
      valida: errores.length === 0,
      errores
    };
  }
};

export default comprasService;
```

`proyecto-pos-finanzas/frontend/src/services/deudasService.ts`:

```ts
import axios from 'axios';
import type { DeudaProveedor, EstadisticasDeudas } from '../types/index';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

// Configuración base de axios para deudas de proveedores
const deudasApi = axios.create({
  baseURL: `${backendUrl}/api/deudas-proveedores`,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Interceptor para añadir el token JWT a todas las peticiones
deudasApi.interceptors.request.use(config => {
  // Buscar token en el nuevo sistema de autenticación primero
  const authData = localStorage.getItem('pos_auth_data');
  if (authData) {
    try {
      const userData = JSON.parse(authData);
      if (userData.token) {
        config.headers.Authorization = `Bearer ${userData.token}`;
        return config;
      }
    } catch (error) {
      console.warn('Error parsing auth data:', error);
    }
  }
  
  // Fallback al sistema legacy
  const legacyToken = localStorage.getItem('authToken');
  if (legacyToken) {
    config.headers.Authorization = `Bearer ${legacyToken}`;
  }
  
  return config;
}, error => {
  return Promise.reject(error);
});

// Interceptor para manejar respuestas de error
deudasApi.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Token expirado o inválido - limpiar todos los datos de autenticación
      localStorage.removeItem('authToken');
      localStorage.removeItem('pos_auth_data');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

/**
 * Servicio para gestionar las deudas de proveedores
 * Proporciona métodos para obtener información de deudas, estadísticas y reportes
 */
export const deudasProveedoresService = {
  /**
   * Obtiene la lista completa de proveedores con deudas pendientes
   * @returns Promise con array de DeudaProveedor
   */
  async obtenerDeudasProveedores(): Promise<DeudaProveedor[]> {
    try {
      const response = await deudasApi.get('');
      return response.data;
    } catch (error) {
      console.error('Error al obtener deudas de proveedores:', error);
      throw new Error('No se pudieron cargar las deudas de proveedores');
    }
  },

  /**
   * Obtiene la deuda específica de un proveedor
   * @param proveedorId ID del proveedor
   * @returns Promise con DeudaProveedor o null si no tiene deudas
   */
  async obtenerDeudaProveedor(proveedorId: string): Promise<DeudaProveedor | null> {
    try {
      const response = await deudasApi.get(`/${proveedorId}`);
      return response.data;
    } catch (error) {
      if (axios.isAxiosError(error) && error.response?.status === 204) {
        // Sin contenido significa que no hay deudas para este proveedor
        return null;
      }
      console.error('Error al obtener deuda del proveedor:', error);
      throw new Error('No se pudo cargar la información de deuda del proveedor');
    }
  },

  /**
   * Obtiene estadísticas generales de las deudas a proveedores
   * @returns Promise con EstadisticasDeudas
   */
  async obtenerEstadisticasDeudas(): Promise<EstadisticasDeudas> {
    try {
      const response = await deudasApi.get('/estadisticas');
      return {
        totalProveedoresConDeuda: Number(response.data.totalProveedoresConDeuda),
        totalDeudasPendientes: Number(response.data.totalDeudasPendientes),
        deudaPromedio: Number(response.data.deudaPromedio)
      };
    } catch (error) {
      console.error('Error al obtener estadísticas de deudas:', error);
      throw new Error('No se pudieron cargar las estadísticas de deudas');
    }
  },

  /**
   * Obtiene el total de todas las deudas pendientes
   * @returns Promise con el total de deudas pendientes
   */
  async obtenerTotalDeudasPendientes(): Promise<number> {
    try {
      const response = await deudasApi.get('/total');
      return Number(response.data.totalDeudasPendientes);
    } catch (error) {
      console.error('Error al obtener total de deudas pendientes:', error);
      throw new Error('No se pudo cargar el total de deudas pendientes');
    }
  },

  /**
   * Filtra las deudas por estado
   * @param deudas Array de deudas
   * @param estado Estado a filtrar ('verde' o 'amarillo')
   * @returns Array filtrado de deudas
   */
  filtrarPorEstado(deudas: DeudaProveedor[], estado: 'verde' | 'amarillo'): DeudaProveedor[] {
    return deudas.filter(deuda => deuda.estadoDeuda === estado);
  },

  /**
   * Ordena las deudas por cantidad adeudada (descendente)
   * @param deudas Array de deudas
   * @returns Array ordenado de deudas
   */
  ordenarPorDeuda(deudas: DeudaProveedor[]): DeudaProveedor[] {
    return [...deudas].sort((a, b) => b.deudaPendiente - a.deudaPendiente);
  },

  /**
   * Ordena las deudas por fecha de orden más antigua
   * @param deudas Array de deudas
   * @returns Array ordenado de deudas
   */
  ordenarPorFecha(deudas: DeudaProveedor[]): DeudaProveedor[] {
    return [...deudas].sort((a, b) => {
      if (!a.fechaOrdenMasAntigua) return 1;
      if (!b.fechaOrdenMasAntigua) return -1;
      return new Date(a.fechaOrdenMasAntigua).getTime() - new Date(b.fechaOrdenMasAntigua).getTime();
    });
  },

  /**
   * Busca deudas por nombre de proveedor
   * @param deudas Array de deudas
   * @param termino Término de búsqueda
   * @returns Array filtrado de deudas
   */
  buscarPorNombre(deudas: DeudaProveedor[], termino: string): DeudaProveedor[] {
    if (!termino.trim()) return deudas;
    const terminoLower = termino.toLowerCase();
    return deudas.filter(deuda => 
      deuda.proveedorNombre.toLowerCase().includes(terminoLower)
    );
  }
};
```

`proyecto-pos-finanzas/frontend/src/services/empleadoService.ts`:

```ts
import axios from 'axios';
import type { 
  Empleado, 
  EmpleadoCreate, 
  EmpleadoEstadoRequest 
} from '../types/index';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

const axiosInstance = axios.create({
  baseURL: backendUrl,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

export const empleadoService = {
  /**
   * 🔍 Obtener lista de todos los empleados
   * Endpoint: GET /api/empleados
   * Returns: Lista de empleados con información completa (nombre, teléfono, rol, estado)
   */
  async obtenerEmpleados(): Promise<Empleado[]> {
    try {
      const response = await axiosInstance.get('/api/empleados');
      return response.data;
    } catch (error) {
      console.error('Error al obtener empleados:', error);
      throw new Error('No se pudieron cargar los empleados');
    }
  },

  /**
   * ➕ Crear nuevo empleado
   * Endpoint: POST /api/empleados
   * Body: EmpleadoCreate (nombre, contrasena, telefono, rolId)
   * Returns: Empleado creado con información completa
   */
  async crearEmpleado(empleadoData: EmpleadoCreate): Promise<Empleado> {
    try {
      const response = await axiosInstance.post('/api/empleados', empleadoData);
      return response.data;
    } catch (error: any) {
      console.error('Error al crear empleado:', error);
      
      // Manejar errores específicos del servidor
      if (error.response?.status === 400) {
        const errorMessage = error.response.data || 'Datos inválidos para crear el empleado';
        throw new Error(errorMessage);
      }
      
      throw new Error('No se pudo crear el empleado');
    }
  },

  /**
   * 🔄 Cambiar estado de empleado (Activo/Inactivo)
   * Endpoint: PUT /api/empleados/{id}/estado
   * Body: EmpleadoEstadoRequest (estado)
   * Returns: Empleado actualizado
   */
  async cambiarEstadoEmpleado(empleadoId: string, nuevoEstado: string): Promise<Empleado> {
    try {
      const estadoRequest: EmpleadoEstadoRequest = { estado: nuevoEstado };
      const response = await axiosInstance.put(`/api/empleados/${empleadoId}/estado`, estadoRequest);
      return response.data;
    } catch (error: any) {
      console.error('Error al cambiar estado del empleado:', error);
      
      // Manejar errores específicos del servidor
      if (error.response?.status === 400) {
        const errorMessage = error.response.data || 'No se pudo cambiar el estado del empleado';
        throw new Error(errorMessage);
      }
      
      if (error.response?.status === 404) {
        throw new Error('Empleado no encontrado');
      }
      
      throw new Error('No se pudo cambiar el estado del empleado');
    }
  },

  /**
   * 🔍 Obtener empleado por ID
   * Endpoint: GET /api/empleados/{id}
   * Returns: Empleado específico con información completa
   */
  async obtenerEmpleadoPorId(empleadoId: number): Promise<Empleado> {
    try {
      const response = await axiosInstance.get(`/api/empleados/${empleadoId}`);
      return response.data;
    } catch (error: any) {
      console.error('Error al obtener empleado por ID:', error);
      
      if (error.response?.status === 404) {
        throw new Error('Empleado no encontrado');
      }
      
      throw new Error('No se pudo obtener la información del empleado');
    }
  }
};

export default empleadoService;

```

`proyecto-pos-finanzas/frontend/src/services/inventarioService.ts`:

```ts
import axios from 'axios';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

// Configuración base de axios
const api = axios.create({
  baseURL: `${backendUrl}/api`,
  headers: {
    'Content-Type': 'application/json',
  },
});

// Interceptor para añadir el token JWT a todas las peticiones
api.interceptors.request.use(config => {
  const token = localStorage.getItem('authToken');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
}, error => {
  return Promise.reject(error);
});

// Interceptor para manejar respuestas de error (token expirado, etc.)
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Token expirado o inválido
      localStorage.removeItem('authToken');
      window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);

// Interfaces TypeScript basadas en el DTO del backend
export interface InventarioDTO {
  id: string;
  cantidadPz?: number;
  cantidadKg?: number;
  cantidadMinima: number;
  cantidadMaxima: number;
  productoId: string;
  productoNombre: string;
  ubicacionId: string;
  ubicacionNombre: string;
}

// Interface para crear/actualizar inventario (formato que espera el backend)
export interface CreateInventarioRequest {
  cantidadPz?: number;
  cantidadKg?: number;
  cantidadMinima: number;
  cantidadMaxima: number;
  producto: {
    id: string;
  };
  ubicacion: {
    id: string;
  };
}

// Interfaces para los datos de los dropdowns
export interface ProductoDTO {
  id: string;
  nombre: string;
  categoriasProductosId?: string;
  categoriasProductosCategoria?: string;
  proveedorId?: string;
  proveedorNombre?: string;
  proveedorApellidoPaterno?: string;
  proveedorApellidoMaterno?: string;
  estadosId?: string;
  estadosEstado?: string;
  precioVentaActual?: number;
  precioCompraActual?: number;
  cantidadInventario?: number;
}

export interface UbicacionDTO {
  id: string;
  nombre: string;
  ubicacion: string;
  descripcion?: string;
}

export interface CategoriaDTO {
  id: string;
  categoria: string;
}

export interface ProveedorDTO {
  id: string;
  nombre: string;
  apellidoPaterno?: string;
  apellidoMaterno?: string;
}

export interface UsuarioDTO {
  id: string;
  nombreUsuario: string;
  nombre?: string;
  apellidoPaterno?: string;
  apellidoMaterno?: string;
}

// Interface para crear un producto completo
export interface ProductoCreacionRequest {
  nombre: string;
  categoriasProductosId: string;
  proveedorId: string;
  precioVenta: number;
  precioCompra: number;
  unidadMedida: string; // "piezas" o "kilogramos"
  stockInicial: number;
  ubicacionId: string;
  stockMinimo: number;
  stockMaximo: number;
  usuarioId: string;
}

// ==================== INTERFACES PARA ÓRDENES WORKSPACE ====================

export interface OrdenesWorkspaceDTO {
  id: string;
  workspaceId: string;
  workspaceNombre: string;
  productoId: string;
  productoNombre: string;
  historialPrecioId: string;
  precio: number;
  cantidadPz: number;
  cantidadKg: number;
}

export interface AgregarProductoOrdenRequest {
  workspaceId: string;
  productoId: string;
  cantidadPz: number;
  cantidadKg: number;
}

// ==================== INTERFACES PARA ÓRDENES DE VENTAS ====================

export interface OrdenesDeVentasDTO {
  id: string;
  personaId?: string;
  personaNombre?: string;
  usuarioId: string;
  usuarioNombre: string;
  fecha: string;
  metodoPagoId: string;
  metodoPagoNombre: string;
  total: number;
  detalles: DetallesOrdenesDeVentasDTO[];
}

export interface DetallesOrdenesDeVentasDTO {
  id: string;
  ordenVentaId: string;
  productoId: string;
  productoNombre: string;
  historialPrecioId: string;
  precio: number;
  cantidadKg: number;
  cantidadPz: number;
  subtotal: number;
}

// ==================== INTERFACES PARA MÉTODOS DE PAGO Y PERSONAS ====================

export interface MetodoPagoDTO {
  id: string;
  metodoPago: string;
  descripcion?: string;
}

export interface PersonaDTO {
  id: string;
  nombre: string;
  apellidoPaterno?: string;
  apellidoMaterno?: string;
  telefono?: string;
  email?: string;
}

// Servicios para inventarios
export const inventarioService = {
  // Obtener todos los inventarios
  getAllInventarios: async (): Promise<InventarioDTO[]> => {
    const response = await api.get<InventarioDTO[]>('/inventarios');
    return response.data;
  },

  // Obtener inventario por ID
  getInventarioById: async (id: string): Promise<InventarioDTO> => {
    const response = await api.get<InventarioDTO>(`/inventarios/${id}`);
    return response.data;
  },

  // Crear nuevo inventario
  createInventario: async (inventario: CreateInventarioRequest): Promise<InventarioDTO> => {
    const response = await api.post<InventarioDTO>('/inventarios', inventario);
    return response.data;
  },

  // Actualizar inventario
  updateInventario: async (id: string, inventario: CreateInventarioRequest): Promise<InventarioDTO> => {
    const response = await api.put<InventarioDTO>(`/inventarios/${id}`, inventario);
    return response.data;
  },

  // Eliminar inventario
  deleteInventario: async (id: string): Promise<void> => {
    await api.delete(`/inventarios/${id}`);
  },

  // Obtener productos para dropdown
  getAllProductos: async (): Promise<ProductoDTO[]> => {
    const response = await api.get<ProductoDTO[]>('/productos');
    return response.data;
  },

  // Obtener ubicaciones para dropdown
  getAllUbicaciones: async (): Promise<UbicacionDTO[]> => {
    const response = await api.get<UbicacionDTO[]>('/ubicaciones');
    return response.data;
  },

  // Obtener categorías para dropdown
  getAllCategorias: async (): Promise<CategoriaDTO[]> => {
    const response = await api.get<CategoriaDTO[]>('/categorias-productos');
    return response.data;
  },

  // Obtener proveedores para dropdown (personas que son proveedores)
  getAllProveedores: async (): Promise<ProveedorDTO[]> => {
    const response = await api.get<ProveedorDTO[]>('/personas');
    return response.data;
  },

  // Obtener usuarios para dropdown
  getAllUsuarios: async (): Promise<UsuarioDTO[]> => {
    const response = await api.get<UsuarioDTO[]>('/usuarios');
    return response.data;
  },

  // Obtener el primer usuario disponible (solución temporal)
  getFirstAvailableUser: async (): Promise<string> => {
    const usuarios = await inventarioService.getAllUsuarios();
    if (usuarios.length === 0) {
      throw new Error('No hay usuarios disponibles en el sistema');
    }
    return usuarios[0].id;
  },

  // Crear producto completo con inventario inicial
  createProductoCompleto: async (producto: ProductoCreacionRequest): Promise<ProductoDTO> => {
    const response = await api.post<ProductoDTO>('/productos/completo', producto);
    return response.data;
  },

  // Desactivar producto
  desactivarProducto: async (id: string): Promise<ProductoDTO> => {
    console.log('🌐 API Call: PATCH /productos/' + id + '/desactivar');
    console.log('🌐 Backend URL:', `${backendUrl}/api`);
    try {
      const response = await api.patch<ProductoDTO>(`/productos/${id}/desactivar`);
      console.log('✅ API Response:', response.data);
      return response.data;
    } catch (error) {
      console.error('❌ API Error:', error);
      throw error;
    }
  },

  // Actualizar producto
  updateProducto: async (id: string, producto: Partial<ProductoDTO>): Promise<ProductoDTO> => {
    const response = await api.put<ProductoDTO>(`/productos/${id}`, producto);
    return response.data;
  },

  // ==================== SERVICIOS PARA ÓRDENES WORKSPACE ====================
  
  // Obtener órdenes actuales de un workspace
  getOrdenesWorkspace: async (workspaceId: string): Promise<OrdenesWorkspaceDTO[]> => {
    const response = await api.get<OrdenesWorkspaceDTO[]>(`/workspaces/${workspaceId}/ordenes`);
    return response.data;
  },

  // Agregar o actualizar producto en órdenes workspace
  agregarProductoOrden: async (workspaceId: string, productoId: string, cantidadPz: number, cantidadKg: number = 0): Promise<OrdenesWorkspaceDTO> => {
    const response = await api.post<OrdenesWorkspaceDTO>('/ordenes-workspace/agregar-producto', {
      workspaceId,
      productoId,
      cantidadPz,
      cantidadKg
    });
    return response.data;
  },

  // Eliminar producto específico de órdenes workspace
  eliminarProductoOrden: async (ordenId: string): Promise<void> => {
    await api.delete(`/ordenes-workspace/${ordenId}`);
  },

  // Limpiar todas las órdenes de un workspace
  limpiarOrdenesWorkspace: async (workspaceId: string): Promise<void> => {
    await api.delete(`/workspaces/${workspaceId}/ordenes`);
  },

  // ==================== SERVICIOS PARA PRODUCTOS CON STOCK ====================
  
  // Obtener solo productos activos con stock > 0
  getProductosConStock: async (): Promise<ProductoDTO[]> => {
    const productos = await inventarioService.getAllProductos();
    return productos.filter(
      producto => producto.estadosEstado?.toLowerCase() === 'activo' &&
                 producto.cantidadInventario && 
                 producto.cantidadInventario > 0
    );
  },

  // Verificar disponibilidad de stock antes de agregar
  verificarStock: async (productoId: string, cantidadRequerida: number): Promise<boolean> => {
    const producto = await api.get<ProductoDTO>(`/productos/${productoId}`);
    const stockDisponible = producto.data.cantidadInventario || 0;
    return stockDisponible >= cantidadRequerida;
  },

  // ==================== SERVICIOS PARA FINALIZACIÓN DE VENTA ====================
  
  // Procesar venta completa desde workspace
  procesarVentaDesdeWorkspace: async (workspaceId: string, metodoPagoId: string, personaId?: string): Promise<OrdenesDeVentasDTO> => {
    const response = await api.post<OrdenesDeVentasDTO>(`/workspaces/${workspaceId}/finalizar-venta`, {
      metodoPagoId,
      personaId
    });
    return response.data;
  },

  // Obtener métodos de pago disponibles
  getMetodosPago: async (): Promise<MetodoPagoDTO[]> => {
    const response = await api.get<MetodoPagoDTO[]>('/metodos_pago');
    return response.data;
  },

  // Obtener personas (clientes) para ventas
  getPersonas: async (): Promise<PersonaDTO[]> => {
    const response = await api.get<PersonaDTO[]>('/personas');
    return response.data;
  },
};

```

`proyecto-pos-finanzas/frontend/src/services/rolService.ts`:

```ts
import axios from 'axios';
import type { Rol } from '../types/index';

// Obtener la URL del backend dinámicamente en el cliente
const getBackendUrl = () => {
  // En desarrollo con Docker, usar variable de entorno o localhost
  if (import.meta.env.VITE_API_URL) {
    return import.meta.env.VITE_API_URL;
  }
  
  // En producción real
  if (import.meta.env.PROD && !import.meta.env.VITE_API_URL) {
    return 'https://pos-finanzas-q2ddz.ondigitalocean.app';
  }
  
  // Fallback para desarrollo local
  return 'http://localhost:8080';
};

const backendUrl = getBackendUrl();

const axiosInstance = axios.create({
  baseURL: backendUrl,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json',
  },
});

export const rolService = {
  /**
   * 🔍 Obtener lista de todos los roles para popular dropdown
   * Endpoint: GET /api/roles
   * Returns: Lista de roles con id y nombre
   */
  async obtenerRoles(): Promise<Rol[]> {
    try {
      const response = await axiosInstance.get('/api/roles');
      return response.data;
    } catch (error) {
      console.error('Error al obtener roles:', error);
      throw new Error('No se pudieron cargar los roles');
    }
  },

  /**
   * 🔍 Obtener rol por ID
   * Endpoint: GET /api/roles/{id}
   * Returns: Rol específico con información completa
   */
  async obtenerRolPorId(rolId: number): Promise<Rol> {
    try {
      const response = await axiosInstance.get(`/api/roles/${rolId}`);
      return response.data;
    } catch (error: any) {
      console.error('Error al obtener rol por ID:', error);
      
      if (error.response?.status === 404) {
        throw new Error('Rol no encontrado');
      }
      
      throw new Error('No se pudo obtener la información del rol');
    }
  }
};

export default rolService;

```

`proyecto-pos-finanzas/frontend/src/types/index.ts`:

```ts
// Tipos para la autenticación
export interface LoginCredentials {
  nombre: string;
  contrasena: string;
}

export interface UsuarioDTO {
  id: string;
  nombre: string;
  telefono: string;
  rolesId?: string;
  rolesRoles?: string;
  estadosId?: string;
  estadosEstado?: string;
}

// NUEVO: Respuesta de login con información de rol
export interface LoginResponse {
  token: string;
  usuario: string;
  rolNombre: string;
  rolId: string;
  expiresIn: number;
}

// NUEVO: Usuario autenticado para el contexto
export interface UsuarioAutenticado {
  usuario: string;
  rolNombre: string;
  rolId: string;
  token: string;
  expiresIn: number;
}

// NUEVO: Tipos de roles del sistema
export type RolUsuario = 'Administrador' | 'Empleado';

// LEGACY: Mantener compatibilidad con respuesta anterior (deprecado)
export interface LoginResponseLegacy {
  usuario: UsuarioDTO;
  token: string;
}

// Tipos para workspaces
export interface Workspace {
  id: string;
  nombre: string;
  permanente?: boolean;
}

export interface WorkspaceStatus {
  id: string;
  nombre: string;
  estado: 'disponible' | 'ocupado' | 'cuenta';
  cantidadOrdenes: number;
  permanente?: boolean;
  ultimaActividad?: string;
}

export interface CreateWorkspaceRequest {
  nombre: string;
  permanente?: boolean;
}

// ==================== TIPOS PARA PUNTO DE VENTA ====================

// Interface para items en el carrito temporal (solo frontend)
export interface ItemCarrito {
  productoId: string;
  productoNombre: string;
  precio: number;
  cantidadPz: number;
  cantidadKg: number;
  stockDisponiblePz: number;
  stockDisponibleKg: number;
}

// Interface para órdenes workspace (backend)
export interface OrdenesWorkspace {
  id: string;
  workspaceId: string;
  workspaceNombre: string;
  productoId: string;
  productoNombre: string;
  historialPrecioId: string;
  precio: number;
  cantidadPz: number;
  cantidadKg: number;
}

// Interface para órdenes de ventas (backend)
export interface OrdenesDeVentas {
  id: string;
  personaId?: string;
  personaNombre?: string;
  usuarioId: string;
  usuarioNombre: string;
  fecha: string;
  metodoPagoId: string;
  metodoPagoNombre: string;
  total: number;
  detalles: DetallesOrdenesDeVentas[];
}

// Interface para detalles de órdenes de ventas (backend)
export interface DetallesOrdenesDeVentas {
  id: string;
  ordenVentaId: string;
  productoId: string;
  productoNombre: string;
  historialPrecioId: string;
  precio: number;
  cantidadKg: number;
  cantidadPz: number;
  subtotal: number;
}

// Interface para métodos de pago
export interface MetodoPago {
  id: string;
  metodoPago: string;
  descripcion?: string;
}

// Interface para personas/clientes
export interface Persona {
  id: string;
  nombre: string;
  apellidoPaterno?: string;
  apellidoMaterno?: string;
  telefono?: string;
  email?: string;
}

// ==================== TIPOS PARA FLUJO DE CUENTA FINAL ====================

// Interface para productos en el ticket de venta
export interface ProductoTicket {
  productoId: string;
  productoNombre: string;
  cantidadPz: number;
  cantidadKg: number;
  precioUnitario: number;
  totalPorProducto: number;
}

// Interface para ticket de venta
export interface TicketVenta {
  workspaceId: string;
  workspaceNombre: string;
  productos: ProductoTicket[];
  totalGeneral: number;
  cantidadProductos: number;
}

// Interface para solicitud de finalizar venta
export interface FinalizarVentaRequest {
  metodoPagoId: string;
  clienteId?: string; // Opcional
  usuarioId: string;
}

// Interface para respuesta de venta finalizada
export interface VentaFinalizada {
  ventaId: string;
  workspaceNombre: string;
  totalVenta: number;
  fechaVenta: string;
  metodoPagoNombre: string;
  usuarioNombre: string;
  clienteNombre?: string;
  cantidadProductos: number;
  mensaje: string;
}

// Interface para cambiar estado de workspace
export interface CambiarEstadoWorkspaceRequest {
  solicitudCuenta: boolean;
}

// ==================== TIPOS PARA GESTIÓN DE EMPLEADOS ====================

// Interface para mostrar empleados en la tabla (corresponde a EmpleadoResponseDTO del backend)
export interface Empleado {
  id: string;
  nombre: string;
  telefono: string;
  rolId: string;
  rolNombre: string;
  estadoId: string;
  estadoNombre: string;
}

// Interface para crear nuevos empleados (corresponde a EmpleadoCreateRequestDTO del backend)
export interface EmpleadoCreate {
  nombre: string;
  contrasena: string;
  telefono: string;
  rolId: string;
}

// Interface para cambiar estado de empleado (corresponde a EmpleadoEstadoRequestDTO del backend)
export interface EmpleadoEstadoRequest {
  estado: string; // "Activo" o "Inactivo"
}

// Interface para roles en dropdown (corresponde a RolResponseDTO del backend)
export interface Rol {
  id: string;
  nombre: string;
}

// Interface para el estado de un empleado (para indicadores visuales)
export interface EstadoEmpleado {
  activo: boolean;
  texto: 'Activo' | 'Inactivo';
  color: 'success' | 'error';
}

// Interface para formulario de creación de empleado (estado local del formulario)
export interface FormularioEmpleado {
  nombre: string;
  contrasena: string;
  telefono: string;
  rolId: string;
  errores: {
    nombre?: string;
    contrasena?: string;
    telefono?: string;
    rolId?: string;
  };
}

// Interface para estado de carga de empleados (loading states)
export interface EstadoCargaEmpleados {
  cargando: boolean;
  error: string | null;
  creando: boolean;
  cambiandoEstado: boolean;
}

// ==================== TIPOS PARA SISTEMA DE COMPRAS ====================

// Interface para proveedor (corresponde a ProveedorDTO del backend)
export interface Proveedor {
  id: string;
  nombre: string;
  apellidoPaterno?: string;
  apellidoMaterno?: string;
  telefono?: string;
  email?: string;
  nombreCompleto: string;
  deudaTotal: number;
}

// Interface para productos en orden de compra (corresponde a ProductoCompraDTO del backend)
export interface ProductoCompraDTO {
  productoId: string;
  cantidadKg: number;
  cantidadPz: number;
}

// Interface para request de compra (corresponde a CompraRequestDTO del backend)
export interface CompraRequest {
  proveedorId: string;
  metodoPagoId?: string;
  productos: ProductoCompraDTO[];
}

// Interface para request de pago (corresponde a PagoRequestDTO del backend)
export interface PagoRequest {
  proveedorId: string;
  ordenCompraId: string;
  montoPagado: number;
  metodoPagoId: string;
  pagarTodoElTotal: boolean;
}

// Interface para deuda de proveedor mejorada (corresponde a DeudaProveedorDTO del backend)
export interface DeudaProveedor {
  proveedorId: string;
  proveedorNombre: string;
  telefonoProveedor?: string;
  emailProveedor?: string;
  totalCompras: number;
  totalPagos: number;
  deudaPendiente: number;
  estadoDeuda: 'verde' | 'amarillo';
  fechaOrdenMasAntigua?: string;
  cantidadOrdenesPendientes: number;
}

// Interface para estadísticas de deudas
export interface EstadisticasDeudas {
  totalProveedoresConDeuda: number;
  totalDeudasPendientes: number;
  deudaPromedio: number;
}

// Interface para producto en compras
export interface ProductoCompra {
  id: string;
  nombre: string;
  stockActualKg: number;
  stockActualPz: number;
  categoria: string;
  costoPromedioKg: number;
  costoPromedioPz: number;
}

// Interface para orden de compra
export interface OrdenCompra {
  id: string;
  proveedorId: string;
  proveedorNombre: string;
  fecha: string;
  total: number;
  usuarioId: string;
  usuarioNombre: string;
  detalles: DetalleOrdenCompra[];
}

// Interface para detalle de orden de compra
export interface DetalleOrdenCompra {
  id: string;
  ordenCompraId: string;
  productoId: string;
  productoNombre: string;
  cantidadKg: number;
  cantidadPz: number;
  costoUnitarioKg: number;
  costoUnitarioPz: number;
  subtotal: number;
}

// Interface para item en carrito de compras (solo frontend)
export interface ItemCarritoCompra {
  productoId: string;
  productoNombre: string;
  cantidadKg: number;
  cantidadPz: number;
  costoUnitarioKg: number;
  costoUnitarioPz: number;
  subtotal: number;
}

// Interface para formulario de compra
export interface FormularioCompra {
  proveedorId: string;
  productos: ItemCarritoCompra[];
  total: number;
  metodoPagoId?: string;
  pagoInmediato: boolean;
  montoPago?: number;
}

```

`proyecto-pos-finanzas/frontend/src/vite-env.d.ts`:

```ts
/// <reference types="vite/client" />

interface ImportMetaEnv {
  readonly VITE_API_URL: string
}

interface ImportMeta {
  readonly env: ImportMetaEnv
}

```

`proyecto-pos-finanzas/frontend/staticwebapp.config.json`:

```json
{
  "mimeTypes": {
    ".js": "text/javascript",
    ".css": "text/css"
  }
}
```

`proyecto-pos-finanzas/frontend/tsconfig.app.json`:

```json
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,
    "jsx": "react-jsx",

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["src"]
}

```

`proyecto-pos-finanzas/frontend/tsconfig.json`:

```json
{
  "files": [],
  "references": [
    { "path": "./tsconfig.app.json" },
    { "path": "./tsconfig.node.json" }
  ]
}

```

`proyecto-pos-finanzas/frontend/tsconfig.node.json`:

```json
{
  "compilerOptions": {
    "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.node.tsbuildinfo",
    "target": "ES2022",
    "lib": ["ES2023"],
    "module": "ESNext",
    "skipLibCheck": true,

    /* Bundler mode */
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "verbatimModuleSyntax": true,
    "moduleDetection": "force",
    "noEmit": true,

    /* Linting */
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "erasableSyntaxOnly": true,
    "noFallthroughCasesInSwitch": true,
    "noUncheckedSideEffectImports": true
  },
  "include": ["vite.config.ts"]
}

```

`proyecto-pos-finanzas/frontend/vite.config.ts`:

```ts
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

// https://vite.dev/config/
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true,
        secure: false
      }
    }
  }
})

```

`proyecto-pos-finanzas/tasks-archive.md`:

```md
# Historial de Tareas Completadas - POS Finanzas

## 🚨 ERRORES RECIENTES Y CORRECCIONES - RESUELTOS

### Error 400 "Bad Request" al Guardar Órdenes - RESUELTO ✅

**Fecha**: 2 de agosto de 2025  
**Problema**: Al presionar "Guardar Orden" en el POS, se obtenía error 400 con mensaje "Producto no encontrado"

#### Causa Raíz Identificada:

1. **Workspace ID inválido**: El frontend intentaba usar un workspace ID que no existía en la base de datos
2. **Productos sin inventario**: Los productos no tenían registros de inventario o tenían stock 0

#### Proceso de Debugging:

1. Verificado que el backend funciona correctamente (HTTP 200)
2. Identificado que el error real era "Workspace no encontrado" no "Producto no encontrado"
3. Confirmado que workspaces válidos: `b63c0e93-62a7-483b-82dc-4e2e9430e7af` (Mesa 1), `e472e076-4c11-4a19-8645-c0323037ab6f` (Mesa 2)
4. Descubierto que productos existían pero sin inventario disponible

#### Soluciones Implementadas:

1. **✅ Corregido Workspace ID**:
   - Modificado `PuntoDeVenta.tsx` para usar workspace válido por defecto
   - Implementado `workspaceIdFinal` que apunta a Mesa 1 como fallback
2. **✅ Creado Inventario con Stock**:

   - **Pollo**: 30 unidades disponibles (ID: `98391e5f-abd1-4f87-893f-34447c3bf605`)
   - **Bistec**: 25 unidades disponibles (ID: `b00caec9-91b3-4b80-827c-735f070170a4`)
   - **Coca-Cola**: 50 unidades disponibles (ID: `021bb59f-fe89-4580-879a-60779c7e7d6a`)

3. **✅ Verificado Backend**:
   - Endpoint POST `/api/ordenes-workspace/agregar-producto` funciona correctamente
   - Respuesta exitosa con código 200 y datos JSON completos

#### Archivos Modificados:

- `frontend/src/components/PuntoDeVenta.tsx` - Implementado workspace ID por defecto
- Base de datos - Creados registros de inventario para productos principales

#### Estado: **RESUELTO** ✅ - El botón "Guardar Orden" funciona correctamente

---

### Error de Workspaces "Ocupados" - RESUELTO ✅

**Fecha**: 2 de agosto de 2025  
**Problema**: Después de guardar una orden, los workspaces aparecen como "ocupados" y no permiten selección, impidiendo tomar órdenes adicionales

#### Comportamiento Anterior (Incorrecto):

- Al guardar una orden, el workspace cambia a estado "ocupado"
- Los usuarios no podían seleccionar workspaces "ocupados"
- Esto impedía tomar múltiples órdenes o cambiar entre mesas

#### Comportamiento Corregido:

- Los usuarios pueden entrar y salir de workspaces libremente
- El estado "ocupado" es informativo, no restrictivo
- Los meseros pueden acceder a cualquier workspace (disponible u ocupado)
- Permite tomar órdenes adicionales en el mismo workspace
- Permite cambiar entre diferentes workspaces sin restricciones

#### Soluciones Implementadas:

1. **✅ Eliminada restricción de acceso**:
   - Modificado `WorkspaceScreen.tsx` para permitir selección de todos los workspaces
   - Removido `disabled={!isAvailable}` del botón
   - Removido condición `isAvailable &&` del onClick
2. **✅ Mejorada UX**:
   - La flecha de navegación ahora se muestra siempre
   - Los workspaces mantienen sus colores de estado (verde/rojo/amarillo) pero son clicables
   - Agregados comentarios explicativos en el código

#### Archivos Modificados:

- `frontend/src/components/WorkspaceScreen.tsx` - Lógica de selección de workspaces
- `frontend/src/components/WorkspaceScreen.css` - Documentación de estilos no utilizados

#### Estado: **RESUELTO** ✅ - Los usuarios pueden acceder a cualquier workspace sin restricciones

---

## ✅ TAREAS COMPLETADAS

### Tarea: Mejorar Interfaz y Funcionalidades de Inventario - COMPLETADA

#### Interfaz - Mejoras de UI/UX

- [x] Arreglar el botón "Volver al menú" - hacer más grande como el de Workspaces (Ya está implementado en App.tsx)
- [x] Eliminar el header duplicado del componente Inventario (ya que App.tsx maneja el header)
- [x] Corregir el cálculo de "Productos activos" en las estadísticas (mejorado para ser más flexible)
- [x] Cambiar el diseño del formulario de crear producto de expansión a modal con Material Design
- [x] Cambiar el diseño del formulario de editar producto de expansión a modal con Material Design

#### Funcionalidades - Backend

- [x] Verificar que el endpoint de movimientos de inventario esté completo en `MovimientosInventariosController.java`
- [x] Asegurar que el DTO `MovimientosInventariosDTO.java` tenga todos los campos necesarios
- [x] Revisar que el servicio `ProductoService.java` esté funcionando correctamente para crear productos completos

#### Funcionalidades - Frontend

- [x] Implementar modal de "Crear Nuevo Producto" con campos:
  - Nombre del producto (input text)
  - Categoría (selector/combobox)
  - Proveedor (selector/combobox)
  - Precio de Compra (input number)
  - Precio de Venta (input number)
  - Ubicaciones (selector/combobox)
  - Unidad de medida (switch: piezas/kilogramos)
  - Stock Máximo (input number)
  - Stock Mínimo (input number)
- [x] Implementar modal de "Editar Producto" con campos:
  - Nombre (prellenado, editable)
  - Categoría (selector, prellenado)
  - Proveedor (selector, prellenado)
  - Precio de compra (prellenado, editable)
  - Precio de venta (prellenado, editable)
- [x] Actualizar `Inventario.tsx` para usar los nuevos modales
- [x] Revisar y actualizar `ModalCrearProducto.tsx` para que use Material Design
- [x] Revisar y actualizar `ModalEditarProducto.tsx` para que use Material Design
- [x] Actualizar los estilos CSS para Material Design
- [x] Arreglar el cálculo de productos activos en el frontend

### Tarea: Corregir Modales de Creación y Edición de Productos - COMPLETADA

- [x] Instalar Material-UI (`@mui/material`, `@emotion/react`, `@emotion/styled`) como dependencia en el frontend.
- [x] Refactorizar `frontend/src/components/ModalCrearProducto.tsx` para usar el componente `Dialog` de Material-UI.
- [x] Refactorizar `frontend/src/components/ModalEditarProducto.tsx` para usar el componente `Dialog` de Material-UI.
- [x] Verificar la correcta integración de los nuevos modales en `frontend/src/components/Inventario.tsx`.
- [x] Actualizar `tasks.md` para marcar las tareas como completadas.

### Tarea: Corregir Errores en Creación y Edición de Productos - COMPLETADA

#### Problemas Identificados:

- [x] Error "Error al actualizar el producto. Por favor, intente nuevamente" al presionar "Actualizar Producto"
- [x] Error "Error al crear el producto. Por favor, intente nuevamente" al intentar crear un nuevo producto

#### Soluciones Implementadas:

- [x] **Corregido Backend**: Agregado script SQL automático `db-migration.sql` para corregir valores NULL en `clave_movimiento`
- [x] **Corregido Frontend**: Reemplazado `usuarioId: 'current-user-id'` hardcodeado por obtención dinámica del primer usuario disponible
- [x] **Verificado Funcionamiento**: Se puede crear productos, aunque con algunos valores que aparecen como N/A

### Tarea: Corregir Actualización de Stock en Tiempo Real - COMPLETADA

#### Problema:

- [x] Stock no se decrementaba automáticamente al guardar órdenes
- [x] Interfaz no se actualizaba con stock correcto hasta recargar página

#### Soluciones Implementadas:

- [x] **Modificado Backend**: `OrdenesWorkspaceService.java` ahora decrementa/restaura inventario automáticamente
- [x] **Modificado Frontend**: `PuntoDeVenta.tsx` recarga datos después de guardar orden
- [x] **Verificado**: Stock se actualiza en tiempo real y previene sobreventa

**Estado General**: ✅ **TODAS LAS TAREAS ANTERIORES COMPLETADAS** - Sistema funciona correctamente para tomar órdenes y manejar inventario.

```

`proyecto-pos-finanzas/utilidades/bd-schema.md`:

```md
| table_schema | table_name                   | column_name             | data_type                | is_nullable | column_default |
| ------------ | ---------------------------- | ----------------------- | ------------------------ | ----------- | -------------- |
| public       | categoria_personas           | id                      | character varying        | NO          |                |
| public       | categoria_personas           | categoria               | character varying        | NO          |                |
| public       | categorias_productos         | id                      | character varying        | NO          |                |
| public       | categorias_productos         | categoria               | character varying        | NO          |                |
| public       | detalles_ordenes_de_compras  | id                      | character varying        | NO          |                |
| public       | detalles_ordenes_de_compras  | ordenes_de_compras_id   | character varying        | NO          |                |
| public       | detalles_ordenes_de_compras  | producto_id             | character varying        | NO          |                |
| public       | detalles_ordenes_de_compras  | historial_costos_id     | character varying        | NO          |                |
| public       | detalles_ordenes_de_compras  | cantidad_kg             | numeric                  | NO          |                |
| public       | detalles_ordenes_de_compras  | cantidad_pz             | numeric                  | NO          |                |
| public       | detalles_ordenes_de_ventas   | id                      | character varying        | NO          |                |
| public       | detalles_ordenes_de_ventas   | ordenes_de_ventas_id    | character varying        | NO          |                |
| public       | detalles_ordenes_de_ventas   | productos_id            | character varying        | NO          |                |
| public       | detalles_ordenes_de_ventas   | historial_precios_id    | character varying        | NO          |                |
| public       | detalles_ordenes_de_ventas   | cantidad_kg             | numeric                  | NO          |                |
| public       | detalles_ordenes_de_ventas   | cantidad_pz             | numeric                  | NO          |                |
| public       | estados                      | id                      | character varying        | NO          |                |
| public       | estados                      | estado                  | character varying        | NO          |                |
| public       | historial_cargos_proveedores | id                      | character varying        | NO          |                |
| public       | historial_cargos_proveedores | personas_id             | character varying        | NO          |                |
| public       | historial_cargos_proveedores | monto_pagado            | numeric                  | NO          |                |
| public       | historial_cargos_proveedores | fecha                   | timestamp with time zone | NO          |                |
| public       | historial_cargos_proveedores | metodos_pago_id         | character varying        | NO          |                |
| public       | historial_cargos_proveedores | ordenes_de_compras_id   | character varying        | NO          |                |
| public       | historial_costos             | id                      | character varying        | NO          |                |
| public       | historial_costos             | productos_id            | character varying        | NO          |                |
| public       | historial_costos             | costo                   | numeric                  | NO          |                |
| public       | historial_costos             | fecha_de_registro       | timestamp with time zone | NO          |                |
| public       | historial_pagos_clientes     | id                      | character varying        | NO          |                |
| public       | historial_pagos_clientes     | personas_id             | character varying        | NO          |                |
| public       | historial_pagos_clientes     | monto_pagado            | numeric                  | NO          |                |
| public       | historial_pagos_clientes     | fecha                   | timestamp with time zone | NO          |                |
| public       | historial_pagos_clientes     | metodos_pago_id         | character varying        | NO          |                |
| public       | historial_pagos_clientes     | orden_de_venta_id       | character varying        | YES         |                |
| public       | historial_precios            | id                      | character varying        | NO          |                |
| public       | historial_precios            | productos_id            | character varying        | NO          |                |
| public       | historial_precios            | precio                  | numeric                  | NO          |                |
| public       | historial_precios            | fecha_de_registro       | timestamp with time zone | NO          |                |
| public       | inventarios                  | id                      | character varying        | NO          |                |
| public       | inventarios                  | productos_id            | character varying        | NO          |                |
| public       | inventarios                  | ubicaciones_id          | character varying        | NO          |                |
| public       | inventarios                  | cantidad_minima         | integer                  | NO          |                |
| public       | inventarios                  | cantidad_maxima         | integer                  | NO          |                |
| public       | inventarios                  | cantidad_kg             | integer                  | YES         |                |
| public       | inventarios                  | cantidad_pz             | integer                  | YES         |                |
| public       | metodos_pago                 | id                      | character varying        | NO          |                |
| public       | metodos_pago                 | metodo_pago             | character varying        | NO          |                |
| public       | movimientos_inventarios      | id                      | character varying        | NO          |                |
| public       | movimientos_inventarios      | productos_id            | character varying        | NO          |                |
| public       | movimientos_inventarios      | ubicaciones_id          | character varying        | NO          |                |
| public       | movimientos_inventarios      | tipo_movimientos_id     | character varying        | NO          |                |
| public       | movimientos_inventarios      | cantidad                | numeric                  | NO          |                |
| public       | movimientos_inventarios      | fecha_movimiento        | timestamp with time zone | NO          |                |
| public       | movimientos_inventarios      | usuarios_id             | character varying        | NO          |                |
| public       | movimientos_inventarios      | clave_movimiento        | character varying        | YES         |                |
| public       | ordenes_de_compras           | id                      | character varying        | NO          |                |
| public       | ordenes_de_compras           | persona_id              | character varying        | NO          |                |
| public       | ordenes_de_compras           | fecha_orden             | timestamp with time zone | NO          |                |
| public       | ordenes_de_compras           | estados_id              | character varying        | NO          |                |
| public       | ordenes_de_compras           | total_compra            | numeric                  | NO          |                |
| public       | ordenes_de_compras           | metodos_pago_id         | character varying        | YES         |                |
| public       | ordenes_de_ventas            | id                      | character varying        | NO          |                |
| public       | ordenes_de_ventas            | personas_id             | character varying        | NO          |                |
| public       | ordenes_de_ventas            | fecha_orden             | timestamp with time zone | NO          |                |
| public       | ordenes_de_ventas            | usuarios_id             | character varying        | NO          |                |
| public       | ordenes_de_ventas            | total_venta             | numeric                  | NO          |                |
| public       | ordenes_de_ventas            | metodos_pago_id         | character varying        | NO          |                |
| public       | ordenes_workspace            | id                      | character varying        | NO          |                |
| public       | ordenes_workspace            | workspace_id            | character varying        | NO          |                |
| public       | ordenes_workspace            | productos_id            | character varying        | NO          |                |
| public       | ordenes_workspace            | cantidad_pz             | numeric                  | NO          |                |
| public       | ordenes_workspace            | cantidad_kg             | numeric                  | NO          |                |
| public       | ordenes_workspace            | historial_precios_id    | character varying        | NO          |                |
| public       | personas                     | id                      | character varying        | NO          |                |
| public       | personas                     | nombre                  | character varying        | NO          |                |
| public       | personas                     | apellido_paterno        | character varying        | YES         |                |
| public       | personas                     | apellido_materno        | character varying        | YES         |                |
| public       | personas                     | rfc                     | character varying        | YES         |                |
| public       | personas                     | telefono                | character varying        | NO          |                |
| public       | personas                     | email                   | character varying        | YES         |                |
| public       | personas                     | estados_id              | character varying        | NO          |                |
| public       | personas                     | categoria_personas_id   | character varying        | NO          |                |
| public       | productos                    | id                      | character varying        | NO          |                |
| public       | productos                    | nombre                  | character varying        | NO          |                |
| public       | productos                    | categorias_productos_id | character varying        | NO          |                |
| public       | productos                    | proveedor_id            | character varying        | NO          |                |
| public       | productos                    | estados_id              | character varying        | NO          |                |
| public       | roles                        | id                      | character varying        | NO          |                |
| public       | roles                        | roles                   | character varying        | NO          |                |
| public       | tipo_movimientos             | id                      | character varying        | NO          |                |
| public       | tipo_movimientos             | movimiento              | character varying        | NO          |                |
| public       | ubicaciones                  | id                      | character varying        | NO          |                |
| public       | ubicaciones                  | nombre                  | character varying        | NO          |                |
| public       | ubicaciones                  | ubicacion               | character varying        | NO          |                |
| public       | usuarios                     | id                      | character varying        | NO          |                |
| public       | usuarios                     | nombre                  | character varying        | NO          |                |
| public       | usuarios                     | contrasena              | character varying        | NO          |                |
| public       | usuarios                     | telefono                | character varying        | NO          |                |
| public       | usuarios                     | roles_id                | character varying        | NO          |                |
| public       | usuarios                     | estados_id              | character varying        | NO          |                |
| public       | workspaces                   | id                      | character varying        | NO          |                |
| public       | workspaces                   | nombre                  | character varying        | NO          |                |
| public       | workspaces                   | permanente              | boolean                  | NO          |                |

```